{
    "ClientConfiguration": {
        "ConfigurationName": "Simple Учет",
        "ConfigurationDescription": "Простое решение для работы с адресным хранением. Поставляется в комплекте с расширением для 1С. Подробнее про расширение Вы можете узнать по ссылке: https://www.simple-kit.ru/products/simple-uchet/ ",
        "ConfigurationVersion": "0.1.0.12.3",
        "Processes": [
            {
                "type": "Process",
                "ProcessName": "Адресное хранение",
                "PlanFactHeader": "",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "type": "SpinnerLayout",
                                                "Value": "@doc_adr_type_select",
                                                "Variable": "doc_adr_type_click",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "left",
                                                "gravity_vertical": "center",
                                                "weight": "0"
                                            },
                                            {
                                                "type": "SpinnerLayout",
                                                "Value": "@doc_status_select",
                                                "Variable": "doc_status_click",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "right",
                                                "weight": "0"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CardsLayout",
                                        "Value": "@docAdrCards",
                                        "Variable": "doc_adr_cards"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "adr_docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документ товары",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "Текущая ячейка: ",
                                                "Variable": ""
                                            },
                                            {
                                                "TextSize": "20",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@current_cell",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "...",
                                                "Variable": "btn_select_cell"
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "x",
                                                "Variable": "btn_clear_cell"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "18",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "type": "TextView",
                                                "Value": "@doc_type",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "Табл.",
                                                "Variable": ""
                                            },
                                            {
                                                "type": "SpinnerLayout",
                                                "Value": "@tables_type",
                                                "Variable": "table_type",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "right",
                                                "weight": "1"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "TextBold": true,
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@doc_n",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "0",
                                                "width": "0",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@doc_date",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "0",
                                                "width": "0",
                                                "gravity_horizontal": "right",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "|| ||| ||",
                                                "Variable": "btn_barcodes"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@warehouse",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TableLayout",
                                        "Value": "@doc_goods_table",
                                        "Variable": "doc_goods_table"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "Button",
                                        "Value": "Отметить к отправке",
                                        "Variable": "btn_doc_mark_verified"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Все строки",
                                "Variable": "btn_rows_filter_off"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Необработанные строки",
                                "Variable": "btn_rows_filter_on"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Ввести штрихкод",
                                "Variable": "btn_barcodes"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Отметить к отправке",
                                "Variable": "btn_doc_mark_verified"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_details_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_details_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@Doc_data",
                                        "Variable": ""
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "20",
                                                "TextColor": "#7A005C",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@current_cell_name",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "30",
                                                "width": "30",
                                                "gravity_horizontal": "right",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "...",
                                                "Variable": "btn_select_cell"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "TextBold": true,
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "left",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "TextView",
                                                "Value": "@Good",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "30",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "...",
                                                "Variable": "btn_good_select"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "16",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "TextView",
                                                "Value": "@properties",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "30",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "...",
                                                "Variable": "btn_properties"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "План",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "TextSize": "24",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "@qtty_plan",
                                                        "Variable": ""
                                                    }
                                                ]
                                            },
                                            {
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "Факт",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "TextSize": "24",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "EditTextNumeric",
                                                        "Value": "@qtty",
                                                        "Variable": "qtty"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "Button",
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok"
                                            }
                                        ]
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CardsLayout",
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards"
                                    }
                                ]
                            },
                            {
                                "type": "HorizontalGallery",
                                "Value": "@photoGallery",
                                "Variable": "photoGallery"
                            },
                            {
                                "type": "photo",
                                "Value": "",
                                "Variable": "photo"
                            },
                            {
                                "type": "photoGallery",
                                "Value": "",
                                "Variable": "photo"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар выбор",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@Doc_data",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "24",
                                        "TextColor": "#7A005C",
                                        "TextBold": true,
                                        "BackgroundColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@Good",
                                        "Variable": ""
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "План",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "TextSize": "24",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "@qtty_plan",
                                                        "Variable": ""
                                                    }
                                                ]
                                            },
                                            {
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "Факт",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "TextSize": "24",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "EditTextNumeric",
                                                        "Value": "@qtty",
                                                        "Variable": "qtty"
                                                    }
                                                ]
                                            },
                                            {
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_note",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "TextSize": "",
                                                        "TextColor": "",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "",
                                                        "orientation": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "",
                                                        "height_value": "",
                                                        "width_value": "",
                                                        "type": "TextView",
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "style_name": "",
                                                        "drawable": "forward"
                                                    },
                                                    {
                                                        "TextSize": "24",
                                                        "TextColor": "",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "",
                                                        "orientation": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "",
                                                        "height_value": "",
                                                        "width_value": "",
                                                        "type": "TextView",
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "style_name": "",
                                                        "drawable": "forward"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "1",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "Цена",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "EditTextNumeric",
                                                "Value": "@price",
                                                "Variable": "price"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "1",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "Button",
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_viev_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_viev_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибка сканера",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@scanned_barcode",
                                        "Variable": "scanned_barcode"
                                    },
                                    {
                                        "TextSize": "24",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "ОШИБКА",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Товар не найден по штрихкоду!",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Сканер отключен",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "Button",
                                        "Value": "Продолжить сканирование",
                                        "Variable": "btn_continue_scan"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_error_screen_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ВвестиШтрихкод",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": false,
                        "hideToolBarScreen": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Введите значение штрихкода",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "EditTextText",
                                        "Value": "@fld_barcode",
                                        "Variable": "fld_barcode"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Новый документ",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "type": "SpinnerLayout",
                                        "Value": "@doc_adr_type_select",
                                        "Variable": "doc_type_click",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "50",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "EditTextText",
                                        "Value": "@fld_number",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "DateField",
                                        "Value": "@doc_date",
                                        "Variable": "fld_data"
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "18",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "TextView",
                                                "Value": "@warehouse",
                                                "Variable": "warehouse"
                                            },
                                            {
                                                "TextSize": "18",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "...",
                                                "Variable": "btn_select_warehouse"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok"
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "Button",
                                                "Value": "Отменить",
                                                "Variable": "btn_cancel"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "new_adr_doc_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "new_adr_doc_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Универсальный справочник",
                "hidden": true,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Справочник",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CardsLayout",
                                        "Value": "@cards",
                                        "Variable": "current_card"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "universal_cards_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "universal_cards_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Товары",
                "DefineOnBackPressed": true,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Товары список",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextItalic": false,
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "2",
                                                "type": "TextView",
                                                "Value": "Категория:",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "object",
                                                "Value": "@select_goods_type",
                                                "Variable": "select_goods_type"
                                            }
                                        ]
                                    },
                                    {
                                        "TextColor": "#ff0000",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@error_txt",
                                        "Variable": "error_txt"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CardsLayout",
                                        "Value": "@goods_cards",
                                        "Variable": "goods_cards"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Карточка товара",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "buttons",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "ProgressButton",
                                                "Value": "Цены",
                                                "Variable": "to_prices"
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "2",
                                                "type": "TextView",
                                                "Value": "",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "ProgressButton",
                                                "Value": "Остатки",
                                                "Variable": "to_remains"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "name",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextSize": "22",
                                                "TextColor": "#7A005C",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "1",
                                                "type": "TextView",
                                                "Value": "@good_name",
                                                "Variable": ""
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@item_key",
                                                "Variable": "item_key"
                                            }
                                        ]
                                    },
                                    {
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "good_info",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "TextBold": true,
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "TextView",
                                                "Value": "@good_type",
                                                "Variable": "good_type"
                                            },
                                            {
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "LinearLayout",
                                                "Variable": "art",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "TextBold": true,
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "Артикул:",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "TextBold": false,
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "@good_art",
                                                        "Variable": "good_art"
                                                    }
                                                ]
                                            },
                                            {
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "LinearLayout",
                                                "Variable": "code",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "TextBold": true,
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "Код:",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "@good_code",
                                                        "Variable": "good_code"
                                                    }
                                                ]
                                            },
                                            {
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "LinearLayout",
                                                "Variable": "descr",
                                                "Value": "",
                                                "Elements": [
                                                    {
                                                        "TextBold": true,
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "Описание:",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "gravity_horizontal": "center",
                                                        "gravity_vertical": "center",
                                                        "weight": "0",
                                                        "type": "TextView",
                                                        "Value": "@good_descr",
                                                        "Variable": "good_descr"
                                                    }
                                                ]
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "CardsLayout",
                                                "Value": "@barcode_cards",
                                                "Variable": "barcode_cards"
                                            }
                                        ]
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@load_info",
                                        "Variable": "load_info"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_on_input",
                                "postExecute": ""
                            },
                            {
                                "event": "onPostStart",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_post_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор категории товаров",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": false,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "",
                                "height_value": "",
                                "width_value": "",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "",
                                        "height_value": "",
                                        "width_value": "",
                                        "type": "CardsLayout",
                                        "Value": "@goods_types_cards",
                                        "Variable": "goods_types_cards",
                                        "style_name": ""
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "select_type_goods_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "select_type_goods_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Параметры",
                "DefineOnBackPressed": true,
                "hidden": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Настройки и обмен",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "TextSize": "25",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@ip_adr",
                                        "Variable": "text_ip"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Настройки маркировки",
                                        "Variable": "",
                                        "drawable": "plus"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CheckBox",
                                        "Value": "ИспользоватьМаркировку",
                                        "Variable": "use_mark"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CheckBox",
                                        "Value": "Разрешить ввод факт товара",
                                        "Variable": "allow_fact_input"
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "EditTextText",
                                        "Value": "@path",
                                        "Variable": "path",
                                        "style_name": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Настройки HTTP подключения",
                                        "Variable": "btn_http_settings"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Настройки шрифтов",
                                        "Variable": "btn_size"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Настройки звука",
                                        "Variable": "btn_sound_settings"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Тест сканера",
                                        "Variable": "btn_test_barcode"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Лог ошибок",
                                        "Variable": "btn_err_log"
                                    },
                                    {
                                        "height": "0",
                                        "width": "0",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Очистить базу",
                                        "Variable": "bnt_clear_tables"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Выгрузить данные на  HTTP сервер",
                                        "Variable": "btn_upload_docs"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Обмен с HTTP 1c сервером",
                                        "Variable": "btn_timer"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "СписокФайлов",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "MultilineText",
                                        "Value": "@files_list",
                                        "Variable": "files_list"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "file_list_on_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройки Шрифтов",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Размеры",
                                        "Variable": ""
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@TitleTextSize",
                                        "Variable": "TitleTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@CardTitleTextSize",
                                        "Variable": "CardTitleTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@CardDateTextSize",
                                        "Variable": "CardDateTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@CardTextSize",
                                        "Variable": "CardTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@GoodsCardTitleTextSize",
                                        "Variable": "GoodsCardTitleTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@goodsTextSize",
                                        "Variable": "goodsTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@SeriesPropertiesTextSize",
                                        "Variable": "SeriesPropertiesTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@DocTypeCardTextSize",
                                        "Variable": "DocTypeCardTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@titleDocTypeCardTextSize",
                                        "Variable": "titleDocTypeCardTextSize"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Сохранить",
                                        "Variable": "btn_on_save"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "font_sizes_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "font_size_settings_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Тест сканера",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "TextSize": "20",
                                        "TextBold": true,
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Отсканируйте штрихкод",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_1",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_2",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_3",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_4",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_5",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_6",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@fld_7",
                                        "Variable": ""
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "test_barcode_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибки",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "height_value": "",
                                "width_value": "",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "ProgressButton",
                                                "Value": "Очистить",
                                                "Variable": "btn_clear_err"
                                            },
                                            {
                                                "type": "SpinnerLayout",
                                                "Value": "@date_sort_select",
                                                "Variable": "date_sort_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1"
                                            }
                                        ]
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "",
                                        "height_value": "",
                                        "width_value": "",
                                        "type": "TableLayout",
                                        "Value": "@error_log_table",
                                        "Variable": "error_log_table",
                                        "style_name": ""
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "settings_errors_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "settings_errors_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройки http соединения",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@url",
                                        "Variable": "url"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@user",
                                        "Variable": "user"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@pass",
                                        "Variable": "pass"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@user_name",
                                        "Variable": "user_name"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "@btn_test_connection",
                                        "Variable": "btn_test_connection"
                                    },
                                    {
                                        "TextSize": "20",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "@ANDROID_ID",
                                        "Variable": ""
                                    },
                                    {
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "Value": "",
                                        "Elements": [
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "ProgressButton",
                                                "Value": "Отменить",
                                                "Variable": "btn_cancel"
                                            },
                                            {
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "gravity_horizontal": "center",
                                                "gravity_vertical": "center",
                                                "weight": "0",
                                                "type": "ProgressButton",
                                                "Value": "Сохранить",
                                                "Variable": "btn_save"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera2"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "http_settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "http_settings_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройка звука",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": false,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Номер мелодии",
                                        "Variable": ""
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@signal_num_card",
                                        "Variable": "signal_num_value",
                                        "style_name": ""
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@beep_duration_card",
                                        "Variable": "beep_duration_value",
                                        "style_name": ""
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Тест звука",
                                        "Variable": "btn_test_sound",
                                        "style_name": ""
                                    },
                                    {
                                        "TextSize": "",
                                        "TextColor": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": "",
                                        "orientation": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Сохранить и закрыть",
                                        "Variable": "btn_on_save",
                                        "style_name": ""
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "sound_settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "sound_settings_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Отладка",
                "hidden": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Отладочный экран",
                        "Timer": false,
                        "noScroll": false,
                        "hideBottomBarScreen": true,
                        "hideToolBarScreen": true,
                        "noConfirmation": true,
                        "handleKeyUp": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "type": "LinearLayout",
                                "Variable": "",
                                "Value": "",
                                "Elements": [
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "TextView",
                                        "Value": "Настройки маркировки",
                                        "Variable": "",
                                        "drawable": "plus"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CheckBox",
                                        "Value": "ИспользоватьМаркировку",
                                        "Variable": "use_mark"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ModernEditText",
                                        "Value": "@ip_host",
                                        "Variable": "ip_host"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Скопировать базу на компьютер",
                                        "Variable": "btn_copy_base"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Выгрузить лог",
                                        "Variable": "btn_unload_log"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "left",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "EditTextText",
                                        "Value": "@path",
                                        "Variable": "path"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "CheckBox",
                                        "Value": "Удалять файлы после загрузки",
                                        "Variable": "delete_files"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Загрузить локальные csv файлы",
                                        "Variable": "btn_local_files"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Выгрузить изменения в csv ",
                                        "Variable": "btn_export"
                                    },
                                    {
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Создать таблицы БД",
                                        "Variable": "btn_init"
                                    },
                                    {
                                        "height": "0",
                                        "width": "0",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Список локальных файлов",
                                        "Variable": "btn_files_list"
                                    },
                                    {
                                        "height": "0",
                                        "width": "0",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Версия конфигурации",
                                        "Variable": "btn_conf_version"
                                    },
                                    {
                                        "height": "0",
                                        "width": "0",
                                        "gravity_horizontal": "center",
                                        "gravity_vertical": "center",
                                        "weight": "0",
                                        "type": "ProgressButton",
                                        "Value": "Очистить базу",
                                        "Variable": "bnt_clear_tables"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "debug_listener",
                                "postExecute": ""
                            },
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "debug_on_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            }
        ],
        "ConfigurationSettings": {
            "uid": "a6ce59bc3f714a5284213f6e293e3e91",
            "vendor": "Simple",
            "vendor_url": "",
            "vendor_auth": "",
            "handler_split_mode": false,
            "handler_code": "",
            "handler_url": "",
            "handler_auth": "",
            "dictionaries": ""
        },
        "ConfigurationTags": "Py,off-line",
        "FaceRecognitionURL": "",
        "ForegroundService": false,
        "StopForegroundServiceOnExit": false,
        "RunPython": true,
        "LaunchProcess": "",
        "MainMenu": [
            {
                "MenuId": "01",
                "MenuItem": "faq",
                "MenuTitle": "FAQ",
                "MenuTop": false
            },
            {
                "MenuId": "02",
                "MenuItem": "update_conf",
                "MenuTitle": "Обновить конфигурацию",
                "MenuTop": false
            }
        ],
        "Mediafile": [],
        "PyHandlers": "aW1wb3J0IGpzb24KaW1wb3J0IHNvY2tldAppbXBvcnQgcmVxdWVzdHMKZnJvbSByZXF1ZXN0cy5hdXRoIGltcG9ydCBIVFRQQmFzaWNBdXRoCmltcG9ydCBvcwpmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKCmltcG9ydCB1aV9iYXJjb2RlcwppbXBvcnQgdWlfY3N2CmltcG9ydCB1aV9nbG9iYWwKaW1wb3J0IHVpX2Zvcm1fZGF0YQppbXBvcnQgaHR0cF9leGNoYW5nZQpmcm9tIG5ld19oYW5kbGVycyBpbXBvcnQgKgoKCgojICoqKioqKioqKioqKioqKioqKioqKiDQodGC0LDRgNC+0LUg0LDQtNGA0LXRgdC90L7QtSDRhdGA0LDQvdC10L3QuNC1CiMgVG9kbyDQn9C10YDQtdC/0LjRgdCw0YLRjCDRjdGC0L4g0L/QviDQvdC+0LLQvtC5INC60LvQsNGB0YHQvtCy0L7QuSDRgdGF0LXQvNC1INC4INGD0LTQsNC70LjRgtGMINC40Lcg0LrQvtC00LAKCmRlZiBhZHJfZWxlbV9vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBoYXNoTWFwLnB1dCgnbW1fbG9jYWwnLCAnJykKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGFkcl9lbGVtX29uX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKCgogICAgaWYgbGlzdGVuZXIgPT0gImJ0bl9vayI6CiAgICAgICAgIyAjINC/0L7Qu9GD0YfQuNC8INGC0LXQutGD0YnRg9GOINGB0YLRgNC+0LrRgyDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICAjIGN1cnJlbnRfc3RyID0gaGFzaE1hcC5nZXQoInNlbGVjdGVkX2NhcmRfcG9zaXRpb24iKQogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19hZHJfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgICMgaWYgbm90IGN1cnJlbnRfc3RyID09ICcwJzoKICAgICAgICAjICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kcyIpKQogICAgICAgICMgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgICMgICAgIGtleSA9IGludChjdXJyZW50X2VsZW1bJ2tleSddKQogICAgICAgICMgICAgIGRvYy5pZF9zdHIgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIC4uLiDQuCDQt9Cw0L/QuNGI0LXQvCDQtdC1INCyINCx0LDQt9GDCiAgICAgICAgcXR0eSA9IGhhc2hNYXAuZ2V0KCdxdHR5JykKICAgICAgICBkb2MucXR0eSA9IGZsb2F0KHF0dHkpIGlmIHF0dHkgZWxzZSAwCiAgICAgICAgZWxlbV9mb3JfYWRkID17J2lkX2dvb2QnOmhhc2hNYXAuZ2V0KCdHb29kX2lkJyksICdpZF9wcm9wZXJ0eSc6aGFzaE1hcC5nZXQoJ3Byb3BlcnRpZXNfaWQnKSwgJ2lkX3Nlcmllcyc6aGFzaE1hcC5nZXQoJ3Nlcmllc19pZCcpLCAnaWRfdW5pdCc6IGhhc2hNYXAuZ2V0KCd1bml0X2lkJyl9CgogICAgICAgIGRvYy51cGRhdGVfZG9jX3RhYmxlX2RhdGEoZG9jLCBlbGVtX2Zvcl9hZGQsIHF0dHksIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2NlbGxfbmFtZScpLGhhc2hNYXAuZ2V0KCd0YWJsZV90eXBlX2ZpbHRlcicpKSAjKGRvYywgKQoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2NhbmNlbCI6CgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICIiOgogICAgICAgIGhhc2hNYXAucHV0KCJxdHR5Iiwgc3RyKGZsb2F0KGhhc2hNYXAuZ2V0KCdxdHR5JykpKSkKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9nb29kX3NlbGVjdCI6CiAgICAgICAgaGFzaE1hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfZ29vZHMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X2dvb2RzX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2FydCcpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICMtLQogICAgZWxpZiBsaXN0ZW5lciA9PSAic2VsZWN0X2dvb2RzX3ZhbHVlIjoKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZF9pZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2lkJykpCiAgICAgICAgIyDQn9GA0Lgg0LLRi9Cx0L7RgNC1INGC0L7QstCw0YDQsCDQt9Cw0L/QvtC70L3QuNC8INC10LTQuNC90LjRhtGDINC40LfQvNC10YDQtdC90LjRjyDQv9C+INGD0LzQvtC70YfQsNC90LjRjgogICAgICAgIHF0ZXh0ID0gJycnU2VsZWN0IFJTX2dvb2RzLnVuaXQgYXMgdW5pdF9pZCwgCiAgICAgICAgICAgICAgICAgICAgUlNfdW5pdHMubmFtZSAKICAgICAgICAgICAgICAgICAgICBGcm9tIFJTX2dvb2RzCiAgICAgICAgICAgICAgICAgICAgICBMZWZ0IEpvaW4gUlNfdW5pdHMgb24gUlNfdW5pdHMuaWRfb3duZXIgPSBSU19nb29kcy5pZCBhbmQgUlNfdW5pdHMuaWQgPSBSU19nb29kcy51bml0IAogICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX2dvb2RzLmlkID0gPycnJwogICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSwpKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3VuaXRfaWQnLCByZXNbMF1bMF0pCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1bml0JywgcmVzWzBdWzFdKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9wcm9wZXJ0aWVzIjoKICAgICAgICBoYXNoTWFwLnB1dCgnU2VhcmNoU3RyaW5nJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19wcm9wZXJ0aWVzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9wcm9wZXJ0aWVzX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2lkX293bmVyJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgIyAtLQogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X3Byb3BlcnRpZXNfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCdwcm9wZXJ0aWVzJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCdwcm9wZXJ0aWVzX2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fc2VyaWVzIjoKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19zZXJpZXMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X3Nlcmllc192YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTsgaWRfb3duZXInKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCiAgICAgICAgI19fCiAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3Rfc2VyaWVzX3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgnc2VyaWVzJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCdzZXJpZXNfaWQnLCBoYXNoTWFwLmdldCgnY3VycmVudF9pZCcpKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl91bml0IjoKICAgICAgICBoYXNoTWFwLnB1dCgnU2VhcmNoU3RyaW5nJywgaGFzaE1hcC5nZXQoJ0dvb2RfaWQnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU191bml0cycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgIGhhc2hNYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfdW5pdF92YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTtpZF9vd25lcicpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICAgICAjX18KICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF91bml0X3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgndW5pdCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndW5pdF9pZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2lkJykpCiAgICAjYnRuX3NlbGVjdF9jZWxsCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fc2VsZWN0X2NlbGwiOgogICAgICAgIGhhc2hNYXAucHV0KCdTZWFyY2hTdHJpbmcnLCAnJykKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19jZWxscycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgIGhhc2hNYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfY2VsbF92YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTtiYXJjb2RlJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgICAgICNfXwogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X2NlbGxfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCdjdXJyZW50X2NlbGxfbmFtZScsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgnY3VycmVudF9jZWxsX2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJwaG90byI6CgogICAgICAgICMg0JzQvtC20L3QviDQstC+0L7QsdGJ0LUg0Y3RgtC+0LPQviDQvdC1INC00LXQu9Cw0YLRjC3QvtGB0YLQsNCy0LvRj9GC0Ywg0LrQsNC6INC10YHRgtGMLiDQrdGC0L4g0LTQu9GPINC/0YDQuNC80LXRgNCwLgogICAgICAgIGltYWdlX2ZpbGUgPSBzdHIoCiAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCJwaG90b19wYXRoIikpICAjICLQv9C10YDQtdC80LXQvdC90LDRjyIrIl9wYXRoIiAtINGB0Y7QtNCwINC/0L7QvNC10YnQsNC10YLRgdGPINC/0YPRgtGMINC6INC/0L7Qu9GD0YfQtdC90L3QvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC4CgogICAgICAgIGltYWdlID0gSW1hZ2Uub3BlbihpbWFnZV9maWxlKQoKICAgICAgICAjINGB0YDQsNC30YMg0YHQtNC10LvQsNC10Lwg0YTQvtGC0LrRgyAtINC60LLQsNC00YDQsNGC0L3QvtC5IC0g0Y3RgtC+INC/0YDQvtGB0YLQvtC5INCy0LDRgNC40LDQvdGCLiDQnNC+0LbQvdC+INGB0LTQtdC70LDRgtGMINC90LDQv9GA0LjQvNC10YAg0L7RgtC00LXQu9GM0L4g0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRgdC/0LjRgdC60LAsINGN0YLQviDQvdC10LzQvdC+0LPQviDRgdC70L7QttC90LXQtQogICAgICAgIGltID0gaW1hZ2UucmVzaXplKCg1MDAsIDUwMCkpCiAgICAgICAgaW0uc2F2ZShpbWFnZV9maWxlKQoKICAgICAgICBqcGhvdG9hcnIgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJwaG90b0dhbGxlcnkiKSkKICAgICAgICBoYXNoTWFwLnB1dCgicGhvdG9HYWxsZXJ5IiwganNvbi5kdW1wcyhqcGhvdG9hcnIpKQogICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0Iixqc29uLmR1bXBzKGpwaG90b2FycikpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiZ2FsbGVyeV9jaGFuZ2UiOiAgIyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LzQvtC20LXRgiDRg9C00LDQu9C40YLRjCDRhNC+0YLQviDQuNC3INCz0LDQu9C10YDQtdC4LiDQndC+0LLRi9C5INC80LDRgdGB0LjQsiDQvdCw0LTQviDQv9C+0LzQtdGB0YLQuNGC0Ywg0Log0LTQvtC60YPQvNC10L3RgtGDCgogICAgICAgIGlmIGhhc2hNYXAuY29udGFpbnNLZXkoInBob3RvR2FsbGVyeSIpOiAgIyDRjdGC0LggMiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwIC0g0LDQvdCw0LvQvtCz0LjRh9C90YvQtSwg0L/RgNC+0YHRgtC+INC00LvRjyDRgNCw0LfQvdGL0YUg0YHQvtCx0YvRgtC40LkKICAgICAgICAgICAganBob3RvYXJyID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgicGhvdG9HYWxsZXJ5IikpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCJwaG90b0dhbGxlcnkiLCBqc29uLmR1bXBzKGpwaG90b2FycikpCiAgICAgICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0IiwiIzIiK2pzb24uZHVtcHMoanBob3RvYXJyKSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBuZXdfYWRyX2RvY19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnZG9jX2Fkcl90eXBlX3NlbGVjdCcpID09IE5vbmU6CiAgICAgICAgIyDQl9Cw0L/QvtC70L3QuNC8INC/0L7Qu9C1INGE0LjQu9GM0YLRgNCwINC/0L4g0LLQuNC00YMg0LTQvtC60YPQvNC10L3RgtC+0LIKICAgICAgICBkb2NfdHlwZV9saXN0ID0gWyfQntGC0LHQvtGAJywgJ9Cg0LDQt9C80LXRidC10L3QuNC1JywgJ9Cf0LXRgNC10LzQtdGJ0LXQvdC40LUnXQogICAgICAgIGhhc2hNYXAucHV0KCdkb2NfYWRyX3R5cGVfc2VsZWN0JywgJzsnLmpvaW4oZG9jX3R5cGVfbGlzdCkpCgoKICAgIGlmIGhhc2hNYXAuZ2V0KCd3YXJlaG91c2UnKSA9PSBOb25lOgogICAgICAgICNmbGRfY291bnRyYWdlbnQgPSB1aV9nbG9iYWwuZ2V0X25hbWVfbGlzdCgnUlNfd2FyZWhvdXNlcycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3dhcmVob3VzZScsICfQodC60LvQsNC0JykgI2RvY193YXJlaG91c2UKCiAgICBpZiBub3QgaGFzaE1hcC5jb250YWluc0tleSgnZG9jX2RhdGUnKToKICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX2RhdGUnLCAnMDEuMDEuMjAyMicpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgbmV3X2Fkcl9kb2Nfb25fc2VsZWN0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKICAgIHR5cGUgPSBoYXNoTWFwLmdldCgnZG9jX3R5cGVfY2xpY2snKQogICAgaWYgbm90IHR5cGUgb3IgdHlwZT09J9CS0YHQtSc6CiAgICAgICAgdHlwZSA9ICfQntGC0LHQvtGAJwogICAgZmxkX251bWJlciA9IGhhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKCiAgICBpZiBsaXN0ZW5lciA9PSAiYnRuX29rIjoKICAgICAgICBpZiBub3QgZmxkX251bWJlcjoKCiAgICAgICAgICAgIGlkID0gdWlfZ2xvYmFsLlJzX2Fkcl9kb2MuZ2V0X25ld19pZCgxKQogICAgICAgICAgICAjIGlkID0gKGYne2lkOjA0fScpCiAgICAgICAgICAgICMgaWQgPSAiezA6MD40fSIuZm9ybWF0KGlkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlkID0gZmxkX251bWJlcgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVpX2dsb2JhbC5Sc19hZHJfZG9jLmFkZCgnMDEnLCAoaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsICAjIGhhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCdmbGRfZGF0YScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9ieV9uYW1lKGhhc2hNYXAuZ2V0KCdkb2Nfd2FyZWhvdXNlJyksICdSU193YXJlaG91c2VzJykpKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQlNC+0LrRg9C80LXQvdGC0YsnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Cd0L7QvNC10YAg0LTQvtC60YPQvNC10L3RgtCwINC90LXRg9C90LjQutCw0LvQtdC9IScpCgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9jYW5jZWwnOgogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9CU0L7QutGD0LzQtdC90YLRiycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdmbGRfZGF0YSc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ2RvY19kYXRlJywgaGFzaE1hcC5nZXQoJ2ZsZF9kYXRhJykpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09J2J0bl9zZWxlY3Rfd2FyZWhvdXNlJzoKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU193YXJlaG91c2VzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9jZWxsX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X2NlbGxfdmFsdWUnOgogICAgICAgIGlmIGhhc2hNYXAuZ2V0KCd0YWJsZV9mb3Jfc2VsZWN0JykgPT0gJ1JTX3dhcmVob3VzZXMnOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgnd2FyZWhvdXNlJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKSAgIyBmbGRfY291bnRyYWdlbnQKCiAgICByZXR1cm4gaGFzaE1hcAoKCkBIYXNoTWFwKCkKZGVmIGRvY19kZXRhaWxzX2JlZm9yZV9wcm9jZXNzX2JhcmNvZGUoaGFzaF9tYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRgdC40L3RhdGA0L7QvdC90L7Qs9C+INC30LDQv9GA0L7RgdCwINC4INC+0LHQvdC+0LLQu9C10L3QuNGPINC00LDQvdC90YvRhSDQv9C+0YHQu9C1INGB0LrQsNC90LjRgNC+0LLQsNC90LjRjyDQuCDQv9C10YDQtdC0INC+0LHRgNCw0LHQvtGC0LrQvtC5INCo0JoiIiIKCiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR3JvdXBTY2FuRG9jRGV0YWlsc1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4uYmVmb3JlX3Byb2Nlc3NfYmFyY29kZSgpCgpASGFzaE1hcCgpCmRlZiBkb2NfZGV0YWlsc19iYXJjb2RlX3NjYW5uZWQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQsNGB0LjQvdGF0YDQvtC90L3QvtC5INC+0YLQv9GA0LDQstC60Lgg0Lgg0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQv9C+0YHQu9C1INGB0LrQsNC90LjRgNC+0LLQsNC90LjRjyDQqNCaIiIiCgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdyb3VwU2NhbkRvY0RldGFpbHNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLnBvc3RfYmFyY29kZV9zY2FubmVkKGdldF9odHRwX3NldHRpbmdzKGhhc2hfbWFwKSkKCgpASGFzaE1hcCgpCmRlZiBoaWdobGlnaHRfc2Nhbm5lZF9pdGVtKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiIiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0L7RgtC80LXQvdGLINGA0LDRgdC60YDQsNGB0LrQuCDQvtGC0YHQutCw0L3QuNGA0L7QstCw0L3QvdC+0LPQviDRgtC+0LLQsNGA0LAgIiIiCgogICAgIyB0aW1lLnNsZWVwKDIpCiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuRG9jRGV0YWlsc1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4uZGlzYWJsZV9oaWdobGlnaHQoKQoKCkBIYXNoTWFwKCkKZGVmIGVsZW1fb25fc3RhcnQoaGFzaF9tYXApOgogICAgIyDQoNC10LbQuNC8INGA0LDQsdC+0YLRiyDRgSDQvNGD0LvRjNGC0LjQvNC10LTQuNCwINC4INGE0LDQudC70LDQvNC4INC/0L4g0YHRgdGL0LvQutCw0LwgKNGE0LvQsNCzIG1tX2xvY2FsKQogICAgaGFzaF9tYXBbJ21tX2xvY2FsJ10gPSAnJwoKCmRlZiBlbGVtX29uX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKCiAgICBpZiBsaXN0ZW5lciA9PSAiYnRuX29rIjoKICAgICAgICAjINC/0L7Qu9GD0YfQuNC8INGC0LXQutGD0YnRg9GOINGB0YLRgNC+0LrRgyDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICAj0JXRgdC70Lgg0YHRgtGA0L7QutCwINC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIsINGB0L7Qt9C00LDQtNC40Lwg0LXQtQogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19kb2MKICAgICAgICBkb2MuaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgIyBpZiBjdXJyZW50X3N0ciA9PScwJzoKICAgICAgICAjICAgICBwYXNzCiAgICAgICAgIyAgICAgI2psaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXQogICAgICAgICMgZWxzZToKICAgICAgICAjICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kcyIpKQogICAgICAgICMgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgICMgICAgIGtleSA9IGludChjdXJyZW50X2VsZW1bJ2tleSddKQogICAgICAgICMgICAgIGRvYy5pZF9zdHIgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIC4uLiDQuCDQt9Cw0L/QuNGI0LXQvCDQtdC1INCyINCx0LDQt9GDCgogICAgICAgIHF0dHkgPSBoYXNoTWFwLmdldCgncXR0eScpCiAgICAgICAgZG9jLnF0dHkgPSBmbG9hdChxdHR5KSBpZiBxdHR5IGVsc2UgMAogICAgICAgIGVsZW1fZm9yX2FkZCA9IHsnaWRfZ29vZCc6IGhhc2hNYXAuZ2V0KCdHb29kX2lkJyksICdpZF9wcm9wZXJ0eSc6IGhhc2hNYXAuZ2V0KCdwcm9wZXJ0aWVzX2lkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICdpZF9zZXJpZXMnOiBoYXNoTWFwLmdldCgnc2VyaWVzX2lkJyksJ2lkX3VuaXQnOiBoYXNoTWFwLmdldCgndW5pdF9pZCcpfQogICAgICAgIGRvYy51cGRhdGVfZG9jX3RhYmxlX2RhdGEoZG9jLCBlbGVtX2Zvcl9hZGQsIHF0dHkpICAjIChkb2MsICkKCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9jYW5jZWwiOgoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICJCQUNLX0JVVFRPTiI6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgZWxpZiBsaXN0ZW5lciA9PSAiIjoKICAgICAgICBoYXNoTWFwLnB1dCgicXR0eSIsIHN0cihmbG9hdChoYXNoTWFwLmdldCgncXR0eScpKSkpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fZ29vZF9zZWxlY3QiOgogICAgICAgIGhhc2hNYXAucmVtb3ZlKCdTZWFyY2hTdHJpbmcnKQogICAgICAgIGhhc2hNYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX2dvb2RzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9nb29kc192YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICMtLQogICAgZWxpZiBsaXN0ZW5lciA9PSAic2VsZWN0X2dvb2RzX3ZhbHVlIjoKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZF9pZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2lkJykpCiAgICAgICAgI9Cf0YDQuCDQstGL0LHQvtGA0LUg0YLQvtCy0LDRgNCwINC30LDQv9C+0LvQvdC40Lwg0LXQtNC40L3QuNGG0YMg0LjQt9C80LXRgNC10L3QuNGPINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOCiAgICAgICAgcXRleHQgPSAnJydTZWxlY3QgUlNfZ29vZHMudW5pdCBhcyB1bml0X2lkLCAKICAgICAgICAgICAgICAgICAgICBSU191bml0cy5uYW1lIAogICAgICAgICAgICAgICAgICAgIEZyb20gUlNfZ29vZHMKICAgICAgICAgICAgICAgICAgICAgIExlZnQgSm9pbiBSU191bml0cyBvbiBSU191bml0cy5pZF9vd25lciA9IFJTX2dvb2RzLmlkIGFuZCBSU191bml0cy5pZCA9IFJTX2dvb2RzLnVuaXQgCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgUlNfZ29vZHMuaWQgPSA/JycnCiAgICAgICAgcmVzID0gIHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSwpKQogICAgICAgIGlmIHJlczoKCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1bml0X2lkJywgcmVzWzBdWzBdKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgndW5pdCcsIHJlc1swXVsxXSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fcHJvcGVydGllcyI6CgogICAgICAgIGhhc2hNYXAucHV0KCdTZWFyY2hTdHJpbmcnLCBoYXNoTWFwLmdldCgnR29vZF9pZCcpKQogICAgICAgIGhhc2hNYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX3Byb3BlcnRpZXMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X3Byb3BlcnRpZXNfdmFsdWUnKQogICAgICAgIGhhc2hNYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWU7aWRfb3duZXInKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCiAgICAjIC0tCiAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3RfcHJvcGVydGllc192YWx1ZSc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ3Byb3BlcnRpZXMnLCBoYXNoTWFwLmdldCgnY3VycmVudF9uYW1lJykpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX3NlcmllcyI6CiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfc2VyaWVzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9zZXJpZXNfdmFsdWUnKQogICAgICAgIGhhc2hNYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWUnKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCiAgICAgICAgI19fCiAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3Rfc2VyaWVzX3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgnc2VyaWVzJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX3VuaXQiOgogICAgICAgIGhhc2hNYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX3VuaXRzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF91bml0X3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2lkX293bmVyJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgICAgICNfXwogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X3VuaXRfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCd1bml0JywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCd1bml0X2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJwaG90byI6CgogICAgICAgICMg0JzQvtC20L3QviDQstC+0L7QsdGJ0LUg0Y3RgtC+0LPQviDQvdC1INC00LXQu9Cw0YLRjC3QvtGB0YLQsNCy0LvRj9GC0Ywg0LrQsNC6INC10YHRgtGMLiDQrdGC0L4g0LTQu9GPINC/0YDQuNC80LXRgNCwLgogICAgICAgIGltYWdlX2ZpbGUgPSBzdHIoCiAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCJwaG90b19wYXRoIikpICAjICLQv9C10YDQtdC80LXQvdC90LDRjyIrIl9wYXRoIiAtINGB0Y7QtNCwINC/0L7QvNC10YnQsNC10YLRgdGPINC/0YPRgtGMINC6INC/0L7Qu9GD0YfQtdC90L3QvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC4CgogICAgICAgIGltYWdlID0gSW1hZ2Uub3BlbihpbWFnZV9maWxlKQoKICAgICAgICAjINGB0YDQsNC30YMg0YHQtNC10LvQsNC10Lwg0YTQvtGC0LrRgyAtINC60LLQsNC00YDQsNGC0L3QvtC5IC0g0Y3RgtC+INC/0YDQvtGB0YLQvtC5INCy0LDRgNC40LDQvdGCLiDQnNC+0LbQvdC+INGB0LTQtdC70LDRgtGMINC90LDQv9GA0LjQvNC10YAg0L7RgtC00LXQu9GM0L4g0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRgdC/0LjRgdC60LAsINGN0YLQviDQvdC10LzQvdC+0LPQviDRgdC70L7QttC90LXQtQogICAgICAgIGltID0gaW1hZ2UucmVzaXplKCg1MDAsIDUwMCkpCiAgICAgICAgaW0uc2F2ZShpbWFnZV9maWxlKQoKICAgICAgICBqcGhvdG9hcnIgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJwaG90b0dhbGxlcnkiKSkKICAgICAgICBoYXNoTWFwLnB1dCgicGhvdG9HYWxsZXJ5IiwganNvbi5kdW1wcyhqcGhvdG9hcnIpKQogICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0Iixqc29uLmR1bXBzKGpwaG90b2FycikpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiZ2FsbGVyeV9jaGFuZ2UiOiAgIyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LzQvtC20LXRgiDRg9C00LDQu9C40YLRjCDRhNC+0YLQviDQuNC3INCz0LDQu9C10YDQtdC4LiDQndC+0LLRi9C5INC80LDRgdGB0LjQsiDQvdCw0LTQviDQv9C+0LzQtdGB0YLQuNGC0Ywg0Log0LTQvtC60YPQvNC10L3RgtGDCgogICAgICAgIGlmIGhhc2hNYXAuY29udGFpbnNLZXkoInBob3RvR2FsbGVyeSIpOiAgIyDRjdGC0LggMiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwIC0g0LDQvdCw0LvQvtCz0LjRh9C90YvQtSwg0L/RgNC+0YHRgtC+INC00LvRjyDRgNCw0LfQvdGL0YUg0YHQvtCx0YvRgtC40LkKICAgICAgICAgICAganBob3RvYXJyID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgicGhvdG9HYWxsZXJ5IikpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCJwaG90b0dhbGxlcnkiLCBqc29uLmR1bXBzKGpwaG90b2FycikpCiAgICAgICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0IiwiIzIiK2pzb24uZHVtcHMoanBob3RvYXJyKSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiByZW1vdmVfYWRkZWRfZ29vZF9oaWdobGlnaHQoaGFzaE1hcCwgZ29vZF9pZD1Ob25lLCBwcm9wZXJ0eV9pZD1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCJhZGRlZF9nb29kcyIpOgogICAgICAgIGlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgIGFkZGVkX2dvb2RzX2RpY3QgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJhZGRlZF9nb29kcyIpKQogICAgICAgIGlmIGlkX2RvYyBpbiBhZGRlZF9nb29kc19kaWN0LmtleXMoKToKICAgICAgICAgICAgaWYgZ29vZF9pZCBpbiBhZGRlZF9nb29kc19kaWN0W2lkX2RvY11bMF06CiAgICAgICAgICAgICAgICBhZGRlZF9nb29kc19kaWN0W2lkX2RvY11bMF0ucmVtb3ZlKGdvb2RfaWQpCiAgICAgICAgICAgICIiImlmIHByb3BlcnR5X2lkIGluIGFkZGVkX2dvb2RzX2RpY3RbZ29vZF9pZF1bMV06CiAgICAgICAgICAgICAgICBhZGRlZF9nb29kc19kaWN0W2dvb2RfaWRdWzFdLnJlbW92ZShwcm9wZXJ0eV9pZCkiIiIKICAgICAgICAgICAgaGFzaE1hcC5wdXQoImFkZGVkX2dvb2RzIiwgc3RyKGFkZGVkX2dvb2RzX2RpY3QpLnJlcGxhY2UoIiciLCAnIicpKQogICAgICAgICAgICBpZiBsZW4oYWRkZWRfZ29vZHNfZGljdFtpZF9kb2NdWzBdKSA9PSAwOgogICAgICAgICAgICAgICAgZGVsIGFkZGVkX2dvb2RzX2RpY3RbaWRfZG9jXQogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZ2V0X2N1cnJlbnRfZWxlbV9kb2NfZ29vZHMoaGFzaE1hcCwgY3VycmVudF9zdHIpOgoKICAgIGlmIGhhc2hNYXAuZ2V0KCd2aWV3JykgPT0gImNhcmRzIjoKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kc19jYXJkcyIpKQogICAgICAgIGNhcmRzX2RhdGEgPSBqbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10KICAgIGVsc2U6CiAgICAgICAgamxpc3QgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJkb2NfZ29vZHNfdGFibGUiKSkKICAgICAgICBjYXJkc19kYXRhID0gamxpc3RbJ2N1c3RvbXRhYmxlJ11bJ3RhYmxlZGF0YSddCiAgICBmb3IgZWxlbWVudCBpbiBjYXJkc19kYXRhOgogICAgICAgIGlmICJrZXkiIGluIGVsZW1lbnQ6CiAgICAgICAgICAgIGlmIGVsZW1lbnRbImtleSJdID09IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpOgogICAgICAgICAgICAgICAgY3VycmVudF9lbGVtID0gZWxlbWVudAogICAgcmV0dXJuIGN1cnJlbnRfZWxlbQoKCmRlZiBkb2NfYmFyY29kZXNfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgZG9jX2RldGFpbF9saXN0ID0gdWlfZm9ybV9kYXRhLmdldF9iYXJjb2RlX2NhcmQocnNfc2V0dGluZ3MpCiAgICBxdWVyeV90ZXh0ID0gdWlfZm9ybV9kYXRhLmdldF9iYXJjb2RlX3F1ZXJ5KCkKICAgIGlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgcmVzdWx0cyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIChpZF9kb2MsKSkKCiAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgcHJvZHVjdF9yb3cgPSB7CiAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWzBdKSwKICAgICAgICAgICAgJ2JhcmNvZGVfdmFsdWUnOiBzdHIocmVjb3JkWzNdKSwKICAgICAgICAgICAgJ2FwcHJvdmVkJzogc3RyKHJlY29yZFs0XSkKCiAgICAgICAgfQoKICAgICAgICBkb2NfZGV0YWlsX2xpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChwcm9kdWN0X3JvdykKCiAgICBoYXNoTWFwLnB1dCgiYmFyY19jYXJkcyIsIGpzb24uZHVtcHMoZG9jX2RldGFpbF9saXN0KSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBkb2NfYmFyY29kZXNfbGlzdGVuZXIoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaWYgaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZGVsZXRlX2JhcmNvZGVfc2NyZWVuX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgICMg0J3QsNGF0L7QtNC40LwgSUQg0LTQvtC60YPQvNC10L3RgtCwCiAgICBiYXJjb2RlX2RhdGEgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCdiYXJjb2RlJykpWydiYXJjb2RlJ10KICAgICMg0J3QsNC50LTQtdC8INC90YPQttC90YvQtSDQv9C+0LvRjyDQt9Cw0L/RgNC+0YHQvtC8INC6INCx0LDQt9C1CiAgICBxdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfbWFya2NvZGVfcXVlcnkoKQogICAgYXJncyA9IHsnaWRfZG9jJzogaGFzaE1hcC5nZXQoJ2lkX2RvYycpLAogICAgICAgICAgICAnR1RJTic6IGJhcmNvZGVfZGF0YVsnR1RJTiddLCAnU2VyaWVzJzogYmFyY29kZV9kYXRhWydTRVJJQUwnXX0KCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgYXJncywgVHJ1ZSkKCiAgICBoYXNoTWFwLnB1dCgnY3VycmVudFN0cicsIGpzb24uZHVtcHMocmVzWzBdKSkKICAgIGhhc2hNYXAucHV0KCJDdXJTdHIiLCBzdHIocmVzWzBdWydDdXJTdHInXSkpCiAgICBoYXNoTWFwLnB1dCgiZ29vZCIsIHJlc1swXVsnZ29vZF9uYW1lJ10pCiAgICBoYXNoTWFwLnB1dCgiJ2NvZGVfYXJ0JyIsIHJlc1swXVsnZ29vZF9jb2RlJ10pCiAgICBoYXNoTWFwLnB1dCgidW5pdF9uYW1lIiwgc3RyKHJlc1swXVsndW5pdCddKSkKICAgIGhhc2hNYXAucHV0KCdiYXJjb2RlX3ZhbHVlJywgJzAxJyArIGJhcmNvZGVfZGF0YVsnR1RJTiddICsgJzIxJyArIGJhcmNvZGVfZGF0YVsnU0VSSUFMJ10pCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZGVsZXRlX2JhcmNvZGVfc2NyZWVuX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKICAgIGlmIGxpc3RlbmVyID09ICJidG5fYmFyY29kZV9jYW5jZWwiOgoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2JhcmNvZGVfZGVsZXRlIjoKICAgICAgICBkb2MgPSB1aV9nbG9iYWwuUnNfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgIGN1cnJlbnRfYmFyY29kZV9zdHIgPSBpbnQoaGFzaE1hcC5nZXQoIkN1clN0ciIpKQogICAgICAgIGVsID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgnY3VycmVudFN0cicpKQoKICAgICAgICAjIGRvYy5pZF9zdHIgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIGRvYy5xdHR5ID0gZmxvYXQoaGFzaE1hcC5nZXQoJ3F0dHknKSkKICAgICAgICAjIGRvYy51cGRhdGVfZG9jX3N0cihkb2MsIGhhc2hNYXAuZ2V0KCdwcmljZScpKQogICAgICAgIHF1ZXJ5X3RleHQgPSAnVXBkYXRlICBSU19kb2NzX2JhcmNvZGVzIFNFVCBhcHByb3ZlZD0/IFdoZXJlIGlkPT8nCiAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKCcwJywgY3VycmVudF9iYXJjb2RlX3N0cikpCiAgICAgICAgZG9jLnVwZGF0ZV9kb2NfdGFibGVfZGF0YShkb2MsIGVsLCAtMSkKCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBiYXJjb2RlX2Vycm9yX3NjcmVlbl9saXN0ZW5lcihoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAjIHN1Q2xhc3MudXJvdm9fc2V0X2xvY2tfdHJpZ2dlcihGYWxzZSkKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdidG5fY29udGludWVfc2Nhbic6CiAgICAgICAgIyBzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoRmFsc2UpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgcmV0dXJuIGhhc2hNYXAKCmRlZiBwbGFuX2V4Y2Vzc19lcnJvcl9zY3JlZW5fbGlzdGVuZXIoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaWYgaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgIyBzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoRmFsc2UpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgZWxpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnYnRuX2NvbnRpbnVlX3NjYW4nOgogICAgICAgICMgc3VDbGFzcy51cm92b19zZXRfbG9ja190cmlnZ2VyKEZhbHNlKQogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIHJldHVybiBoYXNoTWFwCmRlZiBiYXJjb2RlX2Zsb3dfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICBmYWxzZVZhbHVlTGlzdCA9ICgwLCAnMCcsICdmYWxzZScsICdGYWxzZScsIE5vbmUpCiAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgtCw0LHQu9C40YbRgyDQutCw0YDRgtC+0YfQtdC6INC4INC30LDQv9GA0L7RgSDQuiDQsdCw0LfQtQoKICAgIGRvY19kZXRhaWxfbGlzdCA9IHVpX2Zvcm1fZGF0YS5kb2NfYmFyY19mbG93X2NhcmQocnNfc2V0dGluZ3MpCiAgICBkb2NfZGV0YWlsX2xpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddID0gW10KCgogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfZG9jX2JhcmNfZmxvd19xdWVyeSgpCgogICAgcmVzdWx0cyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIChpZF9kb2MsKSwgVHJ1ZSkKCiAgICBpZiByZXN1bHRzOgogICAgICAgICMgaGFzaE1hcC5wdXQoJ2lkX2RvYycsIHN0cihyZXN1bHRzWzBdWydpZF9kb2MnXSkpCiAgICAgICAgZm9yIHJlY29yZCBpbiByZXN1bHRzOgogICAgICAgICAgICBwaWMgPSAnI2YwMGMnCgogICAgICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydiYXJjb2RlJ10pLAogICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBzdHIocmVjb3JkWydiYXJjb2RlJ10pLAoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jX2RldGFpbF9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgICMg0J/RgNC40LfQvdCw0LosIGhhdmVfcXR0eV9wbGFuINCV0YHRgtGM0J/Qu9Cw0L3Qn9Ce0JrQntC70LjRh9C10YHRgtCy0YMgIC0gINCY0YHRgtC40L3QsCDQutC+0LPQtNCwINGB0YPQvNC80LAg0LrQvtC70L7QvdC60LggUXR0eV9wbGFuID4gMAogICAgICAgICMg0J/RgNC40LfQvdCw0LogIGhhdmVfbWFya19wbGFuICLQldGB0YLRjNCf0LvQsNC90JrQntC00L7QstCc0LDRgNC60LjRgNC+0LLQutC4IOKAkyDQmNGB0YLQuNC90LAsINC60L7Qs9C00LAg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHRgtGA0L7QuiDRgtCw0LHQuy4gUlNfZG9jc19iYXJjb2RlcyDRgSDQt9Cw0LTQsNC90L3Ri9C8IGlkX2RvYyDQuCBpc19wbGFuICDQsdC+0LvRjNGI0LUg0L3Rg9C70Y8uCiAgICAgICAgIyDQn9GA0LjQt9C90LDQuiBoYXZlX3plcm9fcGxhbiAi0JXRgdGC0Ywg0YHRgtGA0L7QutC4INGC0L7QstCw0YDQsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUiINCY0YHRgtC40L3QsCwg0LrQvtCz0LTQsCDQtdGB0YLRjCDQt9Cw0L/QvtC70L3QtdC90L3Ri9C1INGB0YLRgNC+0LrQuCDRgtC+0LLQsNGA0L7QsiDQsiDQtNC+0LrRg9C80LXQvdGC0LUKICAgICAgICAjINCf0YDQuNC30L3QsNC6ICLQmtC+0L3RgtGA0L7Qu9C40YDQvtCy0LDRgtGMIiAgLSDQv9GA0LjQt9C90LDQuiDQtNC70Y8g0LTQvtC60YPQvNC10L3RgtCwLCDQvdCw0LTQviDQu9C4INC60L7QvdGC0YDQvtC70LjRgNC+0LLQsNGC0YwKCiAgICAgICAgcXRleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X3F0dHlfc3RyaW5nX2NvdW50X3F1ZXJ5KCkKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgeydpZF9kb2MnOiBpZF9kb2N9KQogICAgICAgIGlmIG5vdCByZXM6CiAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UKICAgICAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBGYWxzZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGhhdmVfemVyb19wbGFuID0gcmVzWzBdWzBdID4gMCAgIyDQkiDQtNC+0LrRg9C80LXQvdGC0LUg0LXRgdGC0Ywg0YHRgtGA0L7QutC4CiAgICAgICAgICAgIGlmIGhhdmVfemVyb19wbGFuOgogICAgICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSByZXNbMF1bMV0gPiAwICAjINCSINC00L7QutGD0LzQtdC90YLQtSDQtdGB0YLRjCDQutC+0LvQstC+INC/0LvQsNC9CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgIyDQldGB0YLRjCDQu9C4INCyINC00L7QutGD0LzQtdC90YLQtSDQv9C70LDQvSDQv9C+INC60L7QtNCw0Lwg0LzQsNGA0LrQuNGA0L7QstC60LgKICAgICAgICBxdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfaGF2ZV9tYXJrX2NvZGVzX3F1ZXJ5KCkKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgeydpZF9kb2MnOiBpZF9kb2MsICdpc19wbGFuJzogJzEnfSkKICAgICAgICBpZiBub3QgcmVzOgogICAgICAgICAgICBoYXZlX21hcmtfcGxhbiA9IEZhbHNlCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGhhdmVfbWFya19wbGFuID0gcmVzWzBdWzBdID4gMAogICAgZWxzZToKICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBGYWxzZQogICAgICAgIGhhdmVfbWFya19wbGFuID0gRmFsc2UKCiAgICBoYXNoTWFwLnB1dCgnaGF2ZV9xdHR5X3BsYW4nLCBzdHIoaGF2ZV9xdHR5X3BsYW4pKQogICAgaGFzaE1hcC5wdXQoJ2hhdmVfemVyb19wbGFuJywgc3RyKGhhdmVfemVyb19wbGFuKSkKICAgIGhhc2hNYXAucHV0KCdoYXZlX21hcmtfcGxhbicsIHN0cihoYXZlX21hcmtfcGxhbikpCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnU0VMRUNUIGNvbnRyb2wgZnJvbSBSU19kb2NzICBXSEVSRSBpZF9kb2MgPSA/JywgKGlkX2RvYywpKQogICAgIyDQldGB0YLRjCDQu9C4INC60L7QvdGC0YDQvtC70Ywg0L/Qu9Cw0L3QsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUKICAgIGlmIHJlczoKICAgICAgICBpZiByZXNbMF1bMF06CiAgICAgICAgICAgIGlmIHJlc1swXVswXSBpbiBmYWxzZVZhbHVlTGlzdDoKICAgICAgICAgICAgICAgIGNvbnRyb2wgPSAnRmFsc2UnCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb250cm9sID0gJ1RydWUnCgogICAgICAgICAgICAjIGNvbnRyb2wgPSByZXNbMF1bMF0gIydUcnVlJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRyb2wgPSAnRmFsc2UnCiAgICBlbHNlOgogICAgICAgIGNvbnRyb2wgPSAnRmFsc2UnCgogICAgaGFzaE1hcC5wdXQoJ2NvbnRyb2wnLCBjb250cm9sKQogICAgaGFzaE1hcC5wdXQoImRvY19iYXJjX2Zsb3ciLCBqc29uLmR1bXBzKGRvY19kZXRhaWxfbGlzdCkpCgogICAgaWYgVHJ1ZSBpbiAoaGF2ZV9xdHR5X3BsYW4sIGhhdmVfemVyb19wbGFuLCBoYXZlX21hcmtfcGxhbiwgY29udHJvbCk6CiAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9CU0LDQvdC90YvQuSDQtNC+0LrRg9C80LXQvdGCINGB0L7QtNC10YDQttC40YIg0L/Qu9Cw0L3QvtCy0YvQtSDRgdGC0YDQvtC60LguINCh0L/QuNGB0L7QuiDRiNGC0YDQuNGF0LrQvtC00L7QsiDQsiDQvdC10LPQviDQv9C+0LzQtdGB0YLQuNGC0Ywg0L3QtdC70YzQt9GPJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsJ9CU0L7QutGD0LzQtdC90YLRiycpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgYmFyY29kZV9mbG93X2xpc3RlbmVyKGhhc2hNYXAsICBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBsaXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpCiAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CgogICAgICAgIHBhc3MKCiAgICBlbGlmIGxpc3RlbmVyID09ICJCQUNLX0JVVFRPTiI6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgtGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9iYXJjb2RlcyI6CiAgICAgICAgcGFzcwogICAgICAgICNoYXNoTWFwLnB1dCgiU2hvd0RpYWxvZyIsICLQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0IikKCiAgICAjIGVsaWYgaGFzaE1hcC5nZXQoImV2ZW50IikgPT0gIm9uUmVzdWx0UG9zaXRpdmUiOgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2JhcmNvZGUnIG9yIGhhc2hNYXAuZ2V0KCJldmVudCIpID09ICJvblJlc3VsdFBvc2l0aXZlIjoKICAgICAgICBkb2MgPSB1aV9nbG9iYWwuUnNfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgIGlmIGhhc2hNYXAuZ2V0KCJldmVudCIpID09ICJvblJlc3VsdFBvc2l0aXZlIjoKICAgICAgICAgICAgYmFyY29kZSA9IGhhc2hNYXAuZ2V0KCdmbGRfYmFyY29kZScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYmFyY29kZSA9IGhhc2hNYXAuZ2V0KCdiYXJjb2RlX2NhbWVyYScpCgogICAgICAgIGhhdmVfcXR0eV9wbGFuID0gaGFzaE1hcC5nZXQoJ2hhdmVfcXR0eV9wbGFuJykKICAgICAgICBoYXZlX3plcm9fcGxhbiA9IGhhc2hNYXAuZ2V0KCdoYXZlX3plcm9fcGxhbicpCiAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBoYXNoTWFwLmdldCgnaGF2ZV9tYXJrX3BsYW4nKQogICAgICAgIGNvbnRyb2wgPSBoYXNoTWFwLmdldCgnY29udHJvbCcpCgogICAgICAgIGlmIGJhcmNvZGU6CiAgICAgICAgICAgIHF0ZXh0ID0gJycnCiAgICAgICAgICAgIElOU0VSVCBJTlRPIFJTX2JhcmNfZmxvdyAoaWRfZG9jLCBiYXJjb2RlKSBWQUxVRVMgKD8sPykKICAgICAgICAgICAgJycnCiAgICAgICAgICAgIHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LChkb2MuaWRfZG9jLCBiYXJjb2RlKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fZG9jX21hcmtfdmVyaWZpZWQnOgogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19kb2MKICAgICAgICBkb2MuaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgZG9jLm1hcmtfdmVyaWZpZWQoZG9jLCAxKQogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgIHJldHVybiBoYXNoTWFwCgoKCiMgPT09PT09PT09PT09PT09IFVuaXZlcnNhbCBjYXJkcyA9PT09PT09PT09PT09PT09PQoKCmRlZiB1bml2ZXJzYWxfY2FyZHNfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgZmlsdGVyX3ZhbHVlID1oYXNoTWFwLmdldCgnU2VhcmNoU3RyaW5nJykKICAgIGlmIGZpbHRlcl92YWx1ZToKICAgICAgIGZpbHRlcl9maWVsZHMgPSBoYXNoTWFwLmdldCgnZmlsdGVyX2ZpZWxkcycpLnNwbGl0KCc7JykKICAgIGVsc2U6CiAgICAgICAgZmlsdGVyX2ZpZWxkcyA9IGxpc3QoKQogICAgaGFzaE1hcC5wdXQoJ2NhcmRzJywgZ2V0X3RhYmxlX2NhcmRzKGhhc2hNYXAuZ2V0KCd0YWJsZV9mb3Jfc2VsZWN0JyksZmlsdGVyX2ZpZWxkcyxmaWx0ZXJfdmFsdWUpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIHVuaXZlcnNhbF9jYXJkc19saXN0ZW5lcihoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQoKICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImNhcmRzIikpCiAgICAgICAgY3VycmVudF9lbGVtID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCiAgICAgICAgaGFzaE1hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2N1cnJlbnRfaWQnLGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgaGFzaE1hcC5wdXQoJ2N1cnJlbnRfbmFtZScsIGN1cnJlbnRfZWxlbVsnbmFtZSddKQogICAgICAgIGhhc2hNYXAucHV0KCdGaW5pc2hQcm9jZXNzUmVzdWx0JywgJycpCgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgbGF5b3V0X2xpc3RlbmVyID0gaGFzaE1hcC5nZXQoJ2xheW91dF9saXN0ZW5lcicpCiAgICAgICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X2NhcmQgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJjdXJyZW50X2NhcmQiKSkKCgogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnJlbW92ZSgnU2VhcmNoU3RyaW5nJykKICAgICAgICBoYXNoTWFwLnB1dCgnY3VycmVudF9pZCcsICcnKQogICAgICAgIGhhc2hNYXAucHV0KCdGaW5pc2hQcm9jZXNzUmVzdWx0JywgJycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdTZWFyY2gnOgogICAgICAgIGZpbHRlcl92YWx1ZSA9IGhhc2hNYXAuZ2V0KCdTZWFyY2hTdHJpbmcnKQogICAgICAgIGlmIGxlbihmaWx0ZXJfdmFsdWUpID4gMjoKICAgICAgICAgICAgZmlsdGVyX2ZpZWxkcyA9IGhhc2hNYXAuZ2V0KCdmaWx0ZXJfZmllbGRzJykuc3BsaXQoJzsnKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgnY2FyZHMnLCBnZXRfdGFibGVfY2FyZHMoaGFzaE1hcC5nZXQoJ3RhYmxlX2Zvcl9zZWxlY3QnKSwgZmlsdGVyX2ZpZWxkcywgZmlsdGVyX3ZhbHVlKSkKCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCdSZWZyZXNoU2NyZWVuJywnJykKICAgICAgICAjdW5pdmVyc2FsX2NhcmRzX29uX3N0YXJ0KGhhc2hNYXApCgogICAgcmV0dXJuIGhhc2hNYXAKCgpjbGFzcyBVbml2ZXJzYWxDYXJkOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRhYmxlX25hbWU6IHN0ciwgZmlsdGVyX2ZpZWxkcz1saXN0KCksIGZpbHRlcl92YWx1ZT0nJywgZXhjbHVkZV9saXN0PWxpc3QoKSxub19sYWJlbD1GYWxzZSwgc3RydWN0X3ZpZXc6bGlzdCA9IGxpc3QoKSk6CiAgICAgICAgc2VsZi50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIHNlbGYuZmlsdGVyX2ZpZWxkcyA9IGZpbHRlcl9maWVsZHMKICAgICAgICBzZWxmLmZpbHRlcl92YWx1ZSA9IGZpbHRlcl92YWx1ZQogICAgICAgIHNlbGYuZXhjbHVkZV9saXN0ID0gZXhjbHVkZV9saXN0CiAgICAgICAgc2VsZi5ub19sYWJlbCA9IG5vX2xhYmVsCiAgICAgICAgc2VsZi5zdHJ1Y3RfdmlldyA9IHN0cnVjdF92aWV3CgogICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KGYiUFJBR01BIHRhYmxlX2luZm8oe3RhYmxlX25hbWV9KSIpCiAgICAgICAgc2VsZi5maWVsZHMgPSBbZlsxXSBmb3IgZiBpbiByZXNdCiAgICAgICAgIyDQodC70L7QstCw0YDRjCDRgNGD0YHRgdC60LjRhSDQuNC80LXQvSDQv9C+0LvQtdC5CiAgICAgICAgc2VsZi5hbGlhc2VzID0gdWlfZm9ybV9kYXRhLmZpZWxkc19hbGlhc19kaWN0KCkKICAgICAgICAjINCh0LvQvtCy0LDRgNGMINC/0L7Qu9C10Lkt0YHRgdGL0LvQvtC6INC90LAg0YLQsNCx0LvQuNGG0YsKICAgICAgICBzZWxmLnRhYmxlc19kaWN0ID0gdWlfZm9ybV9kYXRhLnRhYmxlX25hbWVzX2RpY3QoKQogICAgICAgIHNlbGYuY2FyZF9lbGVtID0gdWlfZm9ybV9kYXRhLmdldF9lbGVtX2RpY3QoMjQpCiAgICAgICAgc2VsZi5jYXJkcyA9IHVpX2Zvcm1fZGF0YS5nZXRfdW5pdmVyc2FsX2NhcmQoKQogICAgICAgIHNlbGYuZ29yaXpvbnRhbF9sYXlvdXQgPSB7ImxheW91dCI6IHsKICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImdvcml6b250YWwiLAogICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2VpZ2h0IjogIjAiLAoKICAgICAgICAgICAgIkVsZW1lbnRzIjogW119fQoKICAgIGRlZiBnZXRfcXVlcnlfYnlfdGFibGVfbmFtZShzZWxmKToKICAgICAgICBxZmllbGRfdGV4dCA9IFtdCiAgICAgICAgbGVmdF9qb2luc19saXN0ID0gW10KICAgICAgICBmb3IgZWwgaW4gc2VsZi5maWVsZHM6CiAgICAgICAgICAgIGxpbmtfdGFibGVfbmFtZSA9IHNlbGYudGFibGVzX2RpY3QuZ2V0KGVsKQogICAgICAgICAgICBxZmllbGRfdGV4dC5hcHBlbmQoc2VsZi50YWJsZV9uYW1lICsgJy4nICsgZWwpCiAgICAgICAgICAgICNxdGV4dCA9ICdTZWxlY3QgJyArICcsJy5qb2luKHFmaWVsZF90ZXh0KSArIGYnIEZST00ge3NlbGYudGFibGVfbmFtZX0gJyArICcgJy5qb2luKGxlZnRfam9pbnNfbGlzdCkKICAgICAgICAgICAgIyDQldGB0LvQuCDQtdGB0YLRjCDRhNC40LvRjNGC0YDRiy/QvtGC0LHQvtGA0YsgLSDQtNC+0LHQsNCy0LjQvCDQuNGFINCyINC30LDQv9GA0L7RgQogICAgICAgICAgICBpZiBsaW5rX3RhYmxlX25hbWU6CiAgICAgICAgICAgICAgICAjINCt0YLQviDRgdGB0YvQu9C60LAg0L3QsCDRgtCw0LHQu9C40YbRgwogICAgICAgICAgICAgICAgcWZpZWxkX3RleHQuYXBwZW5kKGxpbmtfdGFibGVfbmFtZSArIGYnLm5hbWUgYXMge2xpbmtfdGFibGVfbmFtZX1fbmFtZScpCiAgICAgICAgICAgICAgICBsZWZ0X2pvaW5zX2xpc3QuYXBwZW5kKGYnJycKICAgICAgICAgICAgICAgICAgICBMRUZUIEpPSU4ge2xpbmtfdGFibGVfbmFtZX0KICAgICAgICAgICAgICAgICAgICBPTiB7bGlua190YWJsZV9uYW1lfS5pZCA9IHtzZWxmLnRhYmxlX25hbWV9LntlbH0KICAgICAgICAgICAgICAgICAgICAnJycpCiAgICAgICAgcXRleHQgPSAnU2VsZWN0ICcgKyAnLCcuam9pbihxZmllbGRfdGV4dCkgKyBmJyBGUk9NIHtzZWxmLnRhYmxlX25hbWV9ICcgKyAnICcuam9pbihsZWZ0X2pvaW5zX2xpc3QpCiAgICAgICAgIyDQldGB0LvQuCDQtdGB0YLRjCDRhNC40LvRjNGC0YDRiy/QvtGC0LHQvtGA0YsgLSDQtNC+0LHQsNCy0LjQvCDQuNGFINCyINC30LDQv9GA0L7RgQogICAgICAgIGlmIHNlbGYuZmlsdGVyX3ZhbHVlOgogICAgICAgICAgICAjIGNvbmRpdGlvbnMgPSBbZiJ7ZmllbGR9IExJS0UgJyV7ZmlsdGVyX3ZhbHVlfSUnIiBmb3IgZmllbGQgaW4gZmlsdGVyX2ZpZWxkc10KICAgICAgICAgICAgY29uZGl0aW9ucyA9IFtmIntzZWxmLnRhYmxlX25hbWV9LntmaWVsZH0gTElLRSAnJXtzZWxmLmZpbHRlcl92YWx1ZX0lJyIgZm9yIGZpZWxkIGluIHNlbGYuZmlsdGVyX2ZpZWxkc10KICAgICAgICAgICAgcXRleHQgPSBxdGV4dCArIGYiIFdIRVJFIHsnIE9SICcuam9pbihjb25kaXRpb25zKX0iCiAgICAgICAgcmV0dXJuIHF0ZXh0CgogICAgZGVmIGZvcm1fY2FyZF9zdHJ1Y3Qoc2VsZik6CiAgICAgICAgI3FmaWVsZF90ZXh0ID0gW10KICAgICAgICBjYXJkX2VsZW0gPSBzZWxmLmNhcmRfZWxlbQogICAgICAgIGNhcmRzID0gc2VsZi5jYXJkcwogICAgICAgIGZvciBlbCBpbiBzZWxmLmZpZWxkczoKICAgICAgICAgICAgaWYgZWwgbm90IGluIHNlbGYuZXhjbHVkZV9saXN0OgogICAgICAgICAgICAgICAgbGlua190YWJsZV9uYW1lID0gc2VsZi50YWJsZXNfZGljdC5nZXQoZWwpCiAgICAgICAgICAgICAgICAjcWZpZWxkX3RleHQuYXBwZW5kKHNlbGYudGFibGVfbmFtZSArICcuJyArIGVsKQoKICAgICAgICAgICAgICAgICMg0JTQvtC/0L7Qu9C90LjQvCDQstGL0YXQvtC00L3Rg9GOINGB0YLRgNGD0LrRgtGD0YDRgyDQv9C+0LvRj9C80Lgg0YLQsNCx0LvQuNGG0Ys6CiAgICAgICAgICAgICAgICBhbGlhc2VzX2VsZW0gPSBzZWxmLmFsaWFzZXMuZ2V0KGVsKQogICAgICAgICAgICAgICAgaWYgYWxpYXNlc19lbGVtOiAgIyDQlNC70Y8g0Y3RgtC+0LPQviDQv9C+0LvRjyDQv9GA0LXQtNGD0YHQvNC+0YLRgNC10L3QsCDQvdCw0YHRgtGA0L7QudC60LAKICAgICAgICAgICAgICAgICAgICBpZiBub3QgYWxpYXNlc19lbGVtWyduYW1lJ10gPT0gJ2tleSc6ICAjINCU0LvRjyDQutC70Y7Rh9CwINC90LDRgdGC0YDQvtC50LrQuCDQvdC1INC90YPQttC90YsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYubm9fbGFiZWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjINC00L7QsdCw0LLQuNC8INC+0L/QuNGB0LDQvdC40LUg0L/QvtC70Y86Li4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSBhbGlhc2VzX2VsZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0U2l6ZSddID0gcnNfc2V0dGluZ3MuZ2V0KCdDYXJkRGF0ZVRleHRTaXplJykgICMgYWxpYXNlc19lbGVtWyd0ZXh0X3NpemUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydsYXlvdXQnXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtLmNvcHkoKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICMg0KLQtdC/0LXRgNGMINGB0LDQvNC+INC/0L7Qu9C1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSAnQCcgKyBlbAogICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1RleHRTaXplJ10gPSByc19zZXR0aW5ncy5nZXQoYWxpYXNlc19lbGVtWyd0ZXh0X3NpemUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gYWxpYXNlc19lbGVtWydUZXh0Qm9sZCddCiAgICAgICAgICAgICAgICBlbHNlOiAgIyDQmNC90LDRh9C1INC/0YDQvtGB0YLQviDQtNC+0LHQsNCy0LjQvCDQtdCz0L4g0YHQviDRgdGC0LDQvdC00LDRgNGC0L3Ri9C80Lgg0L3QsNGB0YLRgNC+0LnQutCw0LzQuAogICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVmFsdWUnXSA9ICdAJyArIGVsCiAgICAgICAgICAgICAgICAgICAgIyDQlNC+0LHQsNCy0LjQvCDQv9C+0LvQtSDQsiDQutCw0YDRgtC+0YfQutC4CiAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydsYXlvdXQnXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXS5hcHBlbmQoY2FyZF9lbGVtLmNvcHkoKSkKCiAgICBkZWYgZm9ybV9jYXJkX3N0cnVjdF9mcm9tX3JlYWR5X3NydWN0KHNlbGYpOgogICAgICAgIHRlbXBfc3RydWN0ID0gKCdjb2RlJywnbmFtZScsKCdhcnQnLCd0aW1lc3RhbXAnKSwnZnVsbF9uYW1lJykKICAgICAgICBqc29uX3N0cnVjdHVyZSA9IFtdCgogICAgICAgIGZvciBpdGVtIGluIHRlbXBfc3RydWN0OgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZW0sIGxpc3QpOgogICAgICAgICAgICAgICAgbmVzdGVkX3N0cnVjdHVyZSA9IFtdCiAgICAgICAgICAgICAgICBmb3IgbmVzdGVkX2l0ZW0gaW4gaXRlbToKICAgICAgICAgICAgICAgICAgICBuZXN0ZWRfc3RydWN0dXJlLmFwcGVuZChuZXN0ZWRfaXRlbSkKICAgICAgICAgICAgICAgIGpzb25fc3RydWN0dXJlLmFwcGVuZChuZXN0ZWRfc3RydWN0dXJlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAganNvbl9zdHJ1Y3R1cmUuYXBwZW5kKGl0ZW0pCgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKGpzb25fc3RydWN0dXJlLCBpbmRlbnQ9NCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eIFVuaXZlcnNhbCBjYXJkcyBeXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09IFNldHRpbmdzID09PT09PT09PT09PT09PT09CgpkZWYgZmlsZV9saXN0X29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIHR4ID0gJycKCiAgICAjIHRyYXZlcnNlIHJvb3QgZGlyZWN0b3J5LCBhbmQgbGlzdCBkaXJlY3RvcmllcyBhcyBkaXJzIGFuZCBmaWxlcyBhcyBmaWxlcwogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoIi4iKToKICAgICAgICBwYXRoID0gcm9vdC5zcGxpdChvcy5zZXApCiAgICAgICAgcHJpbnQoKGxlbihwYXRoKSAtIDEpICogJy0tLScsIG9zLnBhdGguYmFzZW5hbWUocm9vdCkpCiAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgIHByaW50KGxlbihwYXRoKSAqICctLS0nLCBmaWxlKQoKICAgIGhhc2hNYXAucHV0KCdmaWxlc19saXN0JywgdHgpCiAgICByZXR1cm4gaGFzaE1hcAoKCgoKCkBIYXNoTWFwKCkKZGVmIGh0dHBfc2V0dGluZ3Nfb25fY2xpY2tfKGhhc2hNYXAsICBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBsaXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpCiAgICBpZiBsaXN0ZW5lciA9PSAnYnRuX3NhdmUnOgogICAgICAgIGlmIG5vdCBhbGwoW2hhc2hNYXAuZ2V0KCd1cmwnKSwgaGFzaE1hcC5nZXQoJ3VzZXInKSwgaGFzaE1hcC5nZXQoJ3Bhc3MnKV0pOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgidG9hc3QiLCAi0J3QtSDRg9C60LDQt9Cw0L3RiyDQvdCw0YHRgtGA0L7QudC60LggSFRUUCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INGB0LXRgNCy0LXRgNGDIikKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ1VSTCcsIGhhc2hNYXAuZ2V0KCd1cmwnKSwgVHJ1ZSkKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ1VTRVInLCBoYXNoTWFwLmdldCgndXNlcicpLCBUcnVlKQogICAgICAgIHJzX3NldHRpbmdzLnB1dCgnUEFTUycsIGhhc2hNYXAuZ2V0KCdwYXNzJyksIFRydWUpCiAgICAgICAgcnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBoYXNoTWFwLmdldCgndXNlcl9uYW1lJyksIFRydWUpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX2NhbmNlbCc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQndCw0YHRgtGA0L7QudC60Lgg0Lgg0L7QsdC80LXQvScpCiAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJzoKICAgICAgICBiYXJjb2RlID0gaGFzaE1hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhMicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiYXJjX3N0cnVjdCA9IGpzb24ubG9hZHMoYmFyY29kZSkKCiAgICAgICAgICAgIHJzX3NldHRpbmdzLnB1dCgnVVJMJywgYmFyY19zdHJ1Y3QuZ2V0KCd1cmwnKSwgVHJ1ZSkKICAgICAgICAgICAgcnNfc2V0dGluZ3MucHV0KCdVU0VSJywgYmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJyksIFRydWUpCiAgICAgICAgICAgIHJzX3NldHRpbmdzLnB1dCgnUEFTUycsIGJhcmNfc3RydWN0LmdldCgncGFzcycpLCBUcnVlKQogICAgICAgICAgICByc19zZXR0aW5ncy5wdXQoJ3VzZXJfbmFtZScsIGJhcmNfc3RydWN0LmdldCgndXNlcl9uYW1lJyksIFRydWUpCgogICAgICAgICAgICBoYXNoTWFwLnB1dCgndXJsJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VybCcsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VybCcpKS50b19qc29uKCkpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1c2VyJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VzZXInLCBkZWZhdWx0X3RleHQ9YmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJykpLnRvX2pzb24oKSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3Bhc3MnLCB1aV9mb3JtX2RhdGEuTW9kZXJuRmllbGQoaGludD0ncGFzcycsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3Bhc3MnKSkudG9fanNvbigpKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgndXNlcl9uYW1lJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VzZXJfbmFtZScsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VzZXJfbmFtZScpKS50b19qc29uKCkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCAn0L3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIgUVIt0LrQvtC00LAnKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX3Rlc3RfY29ubmVjdGlvbic6CiAgICAgICAgIy9jb21tdW5pY2F0aW9uX3Rlc3QKICAgICAgICBodHRwID0gZ2V0X2h0dHBfc2V0dGluZ3MoaGFzaE1hcCkKICAgICAgICBpZiBub3QgYWxsKFtodHRwLmdldCgndXJsJyksIGh0dHAuZ2V0KCd1c2VyJyksIGh0dHAuZ2V0KCdwYXNzJyldKToKICAgICAgICAgICAgaGFzaE1hcC5wdXQoInRvYXN0IiwgItCd0LUg0YPQutCw0LfQsNC90Ysg0L3QsNGB0YLRgNC+0LnQutC4IEhUVFAg0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQuiDRgdC10YDQstC10YDRgyIpCiAgICAgICAgICAgIHJldHVybiBoYXNoTWFwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldChodHRwWyd1cmwnXSArICcvc2ltcGxlX2FjY291bnRpbmcvY29tbXVuaWNhdGlvbl90ZXN0P2FuZHJvaWRfaWQ9JyArIGh0dHBbJ2FuZHJvaWRfaWQnXSwgYXV0aD1IVFRQQmFzaWNBdXRoKGh0dHBbJ3VzZXInXSwgaHR0cFsncGFzcyddKSwKICAgICAgICAgICAgICAgICBoZWFkZXJzPXsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCd9LAogICAgICAgICAgICAgICAgIHBhcmFtcz17J3VzZXJfbmFtZSc6IGh0dHBbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHR0cFsnZGV2aWNlX21vZGVsJ119KQogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCdidG5fdGVzdF9jb25uZWN0aW9uJywgJ9Ch0L7QtdC00LjQvdC10L3QuNC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L4nKQogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Ch0L7QtdC00LjQvdC10L3QuNC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L4nKQogICAgICAgICAgICBlbGlmIHIuc3RhdHVzX2NvZGUgPT0gNDAzOgogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ2J0bl90ZXN0X2Nvbm5lY3Rpb24nLCAn0KLQtdGB0YIg0YHQvtC10LTQuNC90LXQvdC40Y8nKQogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoInRvYXN0IiwgItCX0LDQv9GA0L7RgSDQvdCwINCw0LLRgtC+0YDQuNC30LDRhtC40Y4g0L/RgNC40L3Rj9GCIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCdidG5fdGVzdF9jb25uZWN0aW9uJywgJ9Ci0LXRgdGCINGB0L7QtdC00LjQvdC10L3QuNGPJykKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsICfQndC1INGD0LTQsNC70L7RgdGMINGD0YHRgtCw0L3QvtCy0LjRgtGMINGB0L7QtdC00LjQvdC10L3QuNC1JykKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBzb3VuZF9zZXR0aW5nc19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICAjIHNzID0geydzaWduYWxfbnVtJzogItCd0L7QvNC10YAg0YHQuNCz0L3QsNC70LAiLAogICAgIyAgICAgICAnYmVlcF9kdXJhdGlvbic6J9CU0LvQuNGC0LXQu9GM0L3QvtGB0YLRjCjQvNGBKSd9ICAjICwKCiAgICBoYXNoTWFwLnB1dCgnc2lnbmFsX251bV9jYXJkJywKICAgICAgICAgICAgICAgIHVpX2Zvcm1fZGF0YS5Nb2Rlcm5GaWVsZChoaW50PSfQndC+0LzQtdGAINGB0LjQs9C90LDQu9CwJywgZGVmYXVsdF90ZXh0PXJzX3NldHRpbmdzLmdldCgnc2lnbmFsX251bScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkPUZhbHNlKS50b19qc29uKCkpICAjICkKICAgIGhhc2hNYXAucHV0KCdiZWVwX2R1cmF0aW9uX2NhcmQnLAogICAgICAgICAgICAgICAgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J9CU0LvQuNGC0LXQu9GM0L3QvtGB0YLRjCjQvNGBKScsIGRlZmF1bHRfdGV4dD1yc19zZXR0aW5ncy5nZXQoJ2JlZXBfZHVyYXRpb24nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZD1GYWxzZSkudG9fanNvbigpKSAgIyApCiAgICAjZmllbGRzX2Zyb21fc2V0dGluZ3MoaGFzaE1hcCwgc3MpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgc291bmRfc2V0dGluZ3NfbGlzdGVuZXIoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgnbGlzdGVuZXInKQogICAgaWYgbGlzdGVuZXIgPT0gJ2J0bl9vbl9zYXZlJzogICMgb3IgaGFzaE1hcC5nZXQoJ2V2ZW50JykgPT0gJ0lucHV0JwoKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ3NpZ25hbF9udW0nLCBoYXNoTWFwLmdldCgic2lnbmFsX251bV92YWx1ZSIpLCBUcnVlKQogICAgICAgIHJzX3NldHRpbmdzLnB1dCgnYmVlcF9kdXJhdGlvbicsIGhhc2hNYXAuZ2V0KCdiZWVwX2R1cmF0aW9uX3ZhbHVlJyksIFRydWUpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9vbl9jYW5jZWwnIG9yIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9Cd0LDRgdGC0YDQvtC50LrQuCDQuCDQvtCx0LzQtdC9JykKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl90ZXN0X3NvdW5kJzoKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ3NpZ25hbF9udW0nLCBoYXNoTWFwLmdldCgic2lnbmFsX251bV92YWx1ZSIpLCBUcnVlKQogICAgICAgIHJzX3NldHRpbmdzLnB1dCgnYmVlcF9kdXJhdGlvbicsIGhhc2hNYXAuZ2V0KCdiZWVwX2R1cmF0aW9uX3ZhbHVlJyksIFRydWUpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2JlZXBfZHVyYXRpb24nLCBoYXNoTWFwLmdldCgiYmVlcF9kdXJhdGlvbl92YWx1ZSIpKQogICAgICAgIGhhc2hNYXAucHV0KCdiZWVwJywgaGFzaE1hcC5nZXQoJ3NpZ25hbF9udW1fdmFsdWUnKSkKCiAgICAgICAgIyBoYXNoTWFwLnB1dCgnYmVlcF9kdXJhdGlvbicsIHN0cihyc19zZXR0aW5ncy5nZXQoJ2JlZXBfZHVyYXRpb24nKSkpCiAgICAgICAgIyBoYXNoTWFwLnB1dCgiYmVlcCIsIHN0cihyc19zZXR0aW5ncy5nZXQoJ3NpZ25hbF9udW0nKSkpCgogICAgICAgICMgaGFzaE1hcC5wdXQoJ2JlZXBfZHVyYXRpb24nLCAnODMnKQogICAgICAgICMgaGFzaE1hcC5wdXQoImJlZXAiLCAnMTAwMCcpCgogICAgcmV0dXJuIGhhc2hNYXAKCgojIF5eXl5eXl5eXl5eXl5eXl5eIFNldHRpbmdzIF5eXl5eXl5eXl5eXl5eXl5eCgoKIyA9PT09PT09PT09PT09PT0gRGVidWcgPT09PT09PT09PT09PT09PT0KCkBIYXNoTWFwKCkKZGVmIGRlYnVnX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkRlYnVnU2V0dGluZ3NTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBkZWJ1Z19saXN0ZW5lcihoYXNoX21hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRGVidWdTZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25faW5wdXQoKQoKCmRlZiB0ZXN0X3NjcmVlbl9pbnB1dChoYXNoTWFwLCAgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaWYgaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykgPT0gJ2J0bl9vaycgb3IgJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ0ZpbmlzaFByb2Nlc3MnLCcnKQogICAgcmV0dXJuIGhhc2hNYXAKIyBeXl5eXl5eXl5eXl5eXl5eXiBEZWJ1ZyBeXl5eXl5eXl5eXl5eXl5eXgoKCmRlZiBnZXRfaHR0cF9zZXR0aW5ncyhoYXNoTWFwKToKICAgIGh0dHBfc2V0dGluZ3MgPSB7CiAgICAndXJsJyA6IHJzX3NldHRpbmdzLmdldCgiVVJMIiksCiAgICAndXNlcicgOiByc19zZXR0aW5ncy5nZXQoJ1VTRVInKSwKICAgICdwYXNzJyA6IHJzX3NldHRpbmdzLmdldCgnUEFTUycpLAogICAgJ2RldmljZV9tb2RlbCcgOiBoYXNoTWFwLmdldCgnREVWSUNFX01PREVMJyksCiAgICAnYW5kcm9pZF9pZCc6aGFzaE1hcC5nZXQoJ0FORFJPSURfSUQnKSwKICAgICd1c2VyX25hbWUnOiByc19zZXR0aW5ncy5nZXQoJ3VzZXJfbmFtZScpfQogICAgcmV0dXJuIGh0dHBfc2V0dGluZ3MKCgojINCU0L7QsdCw0LLQu9C10L0g0L/QsNGA0LDQvNC10YLRgCAibm9fbGFiZWwiCmRlZiBnZXRfdGFibGVfY2FyZHModGFibGVfbmFtZTogc3RyLCBmaWx0ZXJfZmllbGRzPWxpc3QoKSwgZmlsdGVyX3ZhbHVlPScnLCBleGNsdWRlX2xpc3Q9bGlzdCgpLCBub19sYWJlbD1GYWxzZSwgc3RydWN0X3ZpZXc6bGlzdCA9IGxpc3QoKSk6CiAgICAjINCf0L7Qu9GD0YfQuNC8INGB0L/QuNGB0L7QuiDQv9C+0LvQtdC5INGC0LDQsdC70LjRhtGLCiAgICAjIHRhYmxlX25hbWUgPSAnUlNfZ29vZHMnCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChmIlBSQUdNQSB0YWJsZV9pbmZvKHt0YWJsZV9uYW1lfSkiKQogICAgZmllbGRzID0gW2ZbMV0gZm9yIGYgaW4gcmVzXQogICAgIyDQodC70L7QstCw0YDRjCDRgNGD0YHRgdC60LjRhSDQuNC80LXQvSDQv9C+0LvQtdC5CiAgICBhbGlhc2VzID0gdWlfZm9ybV9kYXRhLmZpZWxkc19hbGlhc19kaWN0KCkKICAgICMg0KHQu9C+0LLQsNGA0Ywg0L/QvtC70LXQuS3RgdGB0YvQu9C+0Log0L3QsCDRgtCw0LHQu9C40YbRiwogICAgdGFibGVzX2RpY3QgPSB1aV9mb3JtX2RhdGEudGFibGVfbmFtZXNfZGljdCgpCgogICAgIyDQodC+0LfQtNCw0LTQuNC8INC30LDQv9GA0L7RgSDQuiDRgtCw0LHQu9C40YbQtS4g0KHRgdGL0LvQvtGH0L3Ri9C1INC/0L7Qu9GPINC30LDQvNC10L3QuNC8INC90LAg0L3QsNC40LzQtdC90L7QstCw0L3QuNC1INC40Lcg0YHQstGP0LfQsNC90L3Ri9GFINGC0LDQsdC70LjRhgogICAgY2FyZF9lbGVtID0gdWlfZm9ybV9kYXRhLmdldF9lbGVtX2RpY3QoMjQpCiAgICBjYXJkcyA9IHVpX2Zvcm1fZGF0YS5nZXRfdW5pdmVyc2FsX2NhcmQoKQoKICAgIHFmaWVsZF90ZXh0ID0gW10KICAgIGxlZnRfam9pbnNfbGlzdCA9IFtdCiAgICBmb3IgZWwgaW4gZmllbGRzOgogICAgICAgIGlmIGVsIG5vdCBpbiBleGNsdWRlX2xpc3Q6CiAgICAgICAgICAgIGxpbmtfdGFibGVfbmFtZSA9IHRhYmxlc19kaWN0LmdldChlbCkKICAgICAgICAgICAgcWZpZWxkX3RleHQuYXBwZW5kKHRhYmxlX25hbWUgKyAnLicgKyBlbCkKCiAgICAgICAgICAgICMg0JTQvtC/0L7Qu9C90LjQvCDQstGL0YXQvtC00L3Rg9GOINGB0YLRgNGD0LrRgtGD0YDRgyDQv9C+0LvRj9C80Lgg0YLQsNCx0LvQuNGG0Ys6CiAgICAgICAgICAgIGFsaWFzZXNfZWxlbSA9IGFsaWFzZXMuZ2V0KGVsKQogICAgICAgICAgICBpZiBhbGlhc2VzX2VsZW06ICAjINCU0LvRjyDRjdGC0L7Qs9C+INC/0L7Qu9GPINC/0YDQtdC00YPRgdC80L7RgtGA0LXQvdCwINC90LDRgdGC0YDQvtC50LrQsAogICAgICAgICAgICAgICAgaWYgbm90IGFsaWFzZXNfZWxlbVsnbmFtZSddID09ICdrZXknOiAgIyDQlNC70Y8g0LrQu9GO0YfQsCDQvdCw0YHRgtGA0L7QudC60Lgg0L3QtSDQvdGD0LbQvdGLCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IG5vX2xhYmVsOgogICAgICAgICAgICAgICAgICAgICAgICAjINC00L7QsdCw0LLQuNC8INC+0L/QuNGB0LDQvdC40LUg0L/QvtC70Y86Li4uCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVmFsdWUnXSA9IGFsaWFzZXNfZWxlbVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVGV4dFNpemUnXSA9IHJzX3NldHRpbmdzLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpICAjIGFsaWFzZXNfZWxlbVsndGV4dF9zaXplJ10KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmFwcGVuZChjYXJkX2VsZW0uY29weSgpKQoKICAgICAgICAgICAgICAgICAgICAjINCi0LXQv9C10YDRjCDRgdCw0LzQviDQv9C+0LvQtToKICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSAnQCcgKyBlbAogICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVGV4dFNpemUnXSA9IHJzX3NldHRpbmdzLmdldChhbGlhc2VzX2VsZW1bJ3RleHRfc2l6ZSddKQogICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVGV4dEJvbGQnXSA9IGFsaWFzZXNfZWxlbVsnVGV4dEJvbGQnXQogICAgICAgICAgICBlbHNlOiAgIyDQmNC90LDRh9C1INC/0YDQvtGB0YLQviDQtNC+0LHQsNCy0LjQvCDQtdCz0L4g0YHQviDRgdGC0LDQvdC00LDRgNGC0L3Ri9C80Lgg0L3QsNGB0YLRgNC+0LnQutCw0LzQuAogICAgICAgICAgICAgICAgY2FyZF9lbGVtWydWYWx1ZSddID0gJ0AnICsgZWwKCiAgICAgICAgICAgIGlmIGxpbmtfdGFibGVfbmFtZToKICAgICAgICAgICAgICAgICMg0K3RgtC+INGB0YHRi9C70LrQsCDQvdCwINGC0LDQsdC70LjRhtGDCiAgICAgICAgICAgICAgICBxZmllbGRfdGV4dC5hcHBlbmQobGlua190YWJsZV9uYW1lICsgZicubmFtZSBhcyB7bGlua190YWJsZV9uYW1lfV9uYW1lJykKICAgICAgICAgICAgICAgIGxlZnRfam9pbnNfbGlzdC5hcHBlbmQoZicnJwogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiB7bGlua190YWJsZV9uYW1lfQogICAgICAgICAgICAgICAgICAgIE9OIHtsaW5rX3RhYmxlX25hbWV9LmlkID0ge3RhYmxlX25hbWV9LntlbH0KICAgICAgICAgICAgICAgICAgICAnJycpCiAgICAgICAgICAgICAgICBjYXJkX2VsZW1bCiAgICAgICAgICAgICAgICAgICAgJ1ZhbHVlJ10gPSBmJ0B7bGlua190YWJsZV9uYW1lfV9uYW1lJyAgIyDQotCw0Log0LrQsNC6INC/0L7Qu9C1INGB0YHRi9C70L7Rh9C90L7QtSAtINC/0LXRgNC10LjQvNC10L3Rg9C10Lwg0LXQs9C+INC60LDQuiDQsiDQt9Cw0L/RgNC+0YHQtQoKICAgICAgICAgICAgIyDQlNC+0LHQsNCy0LjQvCDQv9C+0LvQtSDQsiDQutCw0YDRgtC+0YfQutC4CiAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydsYXlvdXQnXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXS5hcHBlbmQoY2FyZF9lbGVtLmNvcHkoKSkKCiAgICBxdGV4dCA9ICdTZWxlY3QgJyArICcsJy5qb2luKHFmaWVsZF90ZXh0KSArIGYnIEZST00ge3RhYmxlX25hbWV9ICcgKyAnICcuam9pbihsZWZ0X2pvaW5zX2xpc3QpCiAgICAjINCV0YHQu9C4INC10YHRgtGMINGE0LjQu9GM0YLRgNGLL9C+0YLQsdC+0YDRiyAtINC00L7QsdCw0LLQuNC8INC40YUg0LIg0LfQsNC/0YDQvtGBCiAgICBpZiBmaWx0ZXJfdmFsdWU6CiAgICAgICAgIyBjb25kaXRpb25zID0gW2Yie2ZpZWxkfSBMSUtFICcle2ZpbHRlcl92YWx1ZX0lJyIgZm9yIGZpZWxkIGluIGZpbHRlcl9maWVsZHNdCiAgICAgICAgY29uZGl0aW9ucyA9IFtmInt0YWJsZV9uYW1lfS57ZmllbGR9IExJS0UgJyV7ZmlsdGVyX3ZhbHVlfSUnIiBmb3IgZmllbGQgaW4gZmlsdGVyX2ZpZWxkc10KICAgICAgICBxdGV4dCA9IHF0ZXh0ICsgZiIgV0hFUkUgeycgT1IgJy5qb2luKGNvbmRpdGlvbnMpfSIKICAgIHJlc19xdWVyeSA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCBOb25lLCBUcnVlKQogICAgIyBzZXR0aW5nc19nbG9iYWwuZ2V0CgogICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddID0gW10KCiAgICBmb3IgaSBpbiByZXNfcXVlcnk6CiAgICAgICAgcHJvZHVjdF9yb3cgPSB7fQogICAgICAgIGZvciB4IGluIGk6CiAgICAgICAgICAgIGlmIHggPT0gJ2lkJzoKICAgICAgICAgICAgICAgIHByb2R1Y3Rfcm93WydrZXknXSA9IHN0cihpW3hdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbeF0gPSBzdHIoaVt4XSkKCiAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChwcm9kdWN0X3JvdykKCiAgICByZXR1cm4ganNvbi5kdW1wcyhjYXJkcykKCkBIYXNoTWFwCmRlZiBkZWJ1Z19iYXJjb2RlX2Vycm9yX3NjcmVlbl9saXN0ZW5lcihoYXNoX21hcDogSGFzaE1hcCk6CiAgICBoYXNoX21hcC5zaG93X3NjcmVlbihsaXN0ZW5lcj0n0J7RiNC40LHQutCwINC/0YDQtdCy0YvRiNC10L3QuNGPINC/0LvQsNC90LAnLCB0aXRsZT0n0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LIg0LTQvtC60YPQvNC10L3RgtC1INC/0YDQtdCy0YvRiNC10L3QvicpCg==",
        "pyHandlersPath": "D:/projects/simple UI/keep/sui_keep_dev\\main.py",
        "PyTimerTask": [
            {
                "PyTimerTaskKey": "timer_update",
                "PyTimerTaskDef": "timer_update",
                "PyTimerTaskPeriod": "15000",
                "PyTimerTaskBuilIn": false
            }
        ],
        "PyFiles": [
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\database_init_queryes.py",
                "PyFileKey": "database_init_queryes",
                "PyFileData": "I2ltcG9ydCB1aV9nbG9iYWwKZGVmIGRhdGFiYXNlX3NoZW1hKCk6CiAgICBScyA9IFtdCgoKICAgICPQmtC+0L3RgdGC0LDQvdGC0Ysg0Lgg0YXRgNCw0L3QuNC80YvQtSDQvdCw0YHRgtGA0L7QudC60LggUlNfY29uc3RhbnRzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19jb25zdGFudHMgKAogICAgICAgIGlkICAgICAgICAgICAgIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgICAgICB1c2Vfc2VyaWVzICAgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICAgICAgdXNlX3Byb3BlcnRpZXMgVEVYVCAgICBERUZBVUxUIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgICAgIHVzZV9tYXJrICAgICAgIFRFWFQgICAgREVGQVVMVCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgICAgICBhZGRfaWZfbm90X2luX3BsYW4gICAgIFRFWFQgICAgREVGQVVMVCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgICAgICBwYXRoICAgICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUICIvL3N0b3JhZ2UvZW11bGF0ZWQvMC9BbmRyb2lkL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvIiwKICAgICAgICBkZWxldGVfZmlsZXMgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICAgICAgcmVzZXJ2ZWQgICAgICAgVEVYVCAgICBOT1QgTlVMTCwKICAgICAgICBtYXhfaWRfZG9jICAgICAgICAgSU5URUdFUiBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVCAoMSksCiAgICAgICAgYWxsb3dfb3ZlcnNjYW4gVEVYVCAgICBERUZBVUxUIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgICAgIHJlbGVhc2UgICAgICAgIFRFWFQKICAgICkKICAgICcnJykKCgogICAgIyDQmtC70LDRgdGB0LjRhNC40LrQsNGC0L7RgCDQtdC00LjQvdC40YYg0LjQt9C80LXRgNC10L3QuNGPIFJTX2NsYXNzaWZpZXJfdW5pdHMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NsYXNzaWZpZXJfdW5pdHMgKAogICAgICAgIGlkIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgY29kZSAgICBURVhUIE5PVCBOVUxMLAogICAgICAgIG5hbWUgICAgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKICAgICMg0JLQuNC00Ysg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3R5cGVzX2dvb2RzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU190eXBlc19nb29kcyAoCiAgICBpZCAgICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgIFBSSU1BUlkgS0VZLAogICAgbmFtZSAgICAgVEVYVCBOT1QgTlVMTCwKICAgIHVzZV9tYXJrIElOVCAgREVGQVVMVCAoMCkgCiAgICApCiAgICAnJycpCgogICAgIyDQndC+0LzQtdC90LrQu9Cw0YLRg9GA0LAgUlNfZ29vZHMKICAgIFJzLmFwcGVuZCgnJycKICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19nb29kcyAoCiAgICAgICAgICAgIGlkICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgICAgIGNvZGUgICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgICAgIG5hbWUgICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgICAgIGFydCAgICAgICAgIFRFWFQsCiAgICAgICAgICAgIHVuaXQgICAgICAgIFRFWFQgIFJFRkVSRU5DRVMgUlNfY2xhc3NpZmllcl91bml0cyAoaWQpLAogICAgICAgICAgICB0eXBlX2dvb2QgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU190eXBlc19nb29kcyAoaWQpIE9OIERFTEVURSBOTyBBQ1RJT04KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNQVRDSCBbRlVMTF0sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQKICAgICAgICApCiAgICAgICAgJycnKQoKCiAgICAjINCl0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60Lgg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3Byb3BlcnRpZXMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX3Byb3BlcnRpZXMgKAogICAgaWQgICAgICAgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSBPTiBDT05GTElDVCBSRVBMQUNFLAogICAgaWRfb3duZXIgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCkgT04gREVMRVRFIE5PIEFDVElPTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT04gVVBEQVRFIE5PIEFDVElPTiwKICAgIG5hbWUgICAgIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCgogICAgIyDQo9C/0LDQutC+0LLQutC4INCV0LTQuNC90LjRhtGLINC40LfQvNC10YDQtdC90LjRjyBSU191bml0cwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfdW5pdHMgKAogICAgICAgIGlkICAgICAgIFRFWFQgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgaWRfb3duZXIgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZ29vZHMgKGlkKSwKICAgICAgICBjb2RlICAgICAgICAgIFRFWFQgICAgTk9UIE5VTEwsCiAgICAgICAgbmFtZSAgICAgICAgICBURVhUICAgIE5PVCBOVUxMLAogICAgICAgIG5vbWluYXRvciAgICAgSU5URUdFUiBOT1QgTlVMTCwKICAgICAgICBkZW5vbWluYXRvciAgIElOVEVHRVIgTk9UIE5VTEwsCiAgICAgICAgaW50X3JlZHVjdGlvbiBURVhUICAgIE5PVCBOVUxMCiAgICApCiAgICAnJycpCgoKCiAgICAjINCh0LXRgNC40Lgg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3NlcmllcwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfc2VyaWVzICgKICAgICAgICBpZCAgICAgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBuYW1lICAgICAgICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBiZXN0X2JlZm9yZSAgICAgVEVYVCwKICAgICAgICB0eXBlX2dvb2RzICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBudW1iZXIgICAgICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBwcm9kdWN0aW9uX2RhdGUgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKCiAgICAjINCo0YLRgNC40YXQutC+0LTRiyBSU19iYXJjb2RlcwogICAgUnMuYXBwZW5kKCAnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2JhcmNvZGVzICgKICAgIGJhcmNvZGUgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICBpZF9nb29kICAgICBURVhUIE5PVCBOVUxMLAogICAgaWRfcHJvcGVydHkgVEVYVCwKICAgIGlkX3NlcmllcyAgIFRFWFQsCiAgICBpZF91bml0ICAgICBURVhUCikKCiAgICAnJycpCgogICAgI9Ca0L7QtNGLINC80LDRgNC60LjRgNC+0LLQutC4IFJTX21hcmtpbmdfY29kZXMKICAgIFJzLmFwcGVuZCggJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19tYXJraW5nX2NvZGVzICgKICAgICAgICBpZCAgICAgICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBtYXJrX2NvZGUgICBURVhUIE5PVCBOVUxMLAogICAgICAgIGlkX2dvb2QgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZ29vZHMgKGlkKSwKICAgICAgICBpZF9wcm9wZXJ0eSBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgICAgICBpZF9zZXJpZXMgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3NlcmllcyAoaWQpLAogICAgICAgIGlkX3VuaXQgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfdW5pdHMgKGlkKSAKICAgICkKICAgICcnJykKCgoKICAgICMg0JrQvtC90YLRgNCw0LPQtdC90YLRiyBSU19jb3VudHJhZ2VudHMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NvdW50cmFnZW50cyAoCiAgICAgICAgaWQgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgbmFtZSAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgaW5uICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAga3BwICAgICAgIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCiAgICAjINCh0LrQu9Cw0LTRiyBSU193YXJlaG91c2VzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU193YXJlaG91c2VzICgKICAgICAgICBpZCBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgIFBSSU1BUlkgS0VZLAogICAgICAgIG5hbWUgICAgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NlbGxzICgKICAgIGlkICAgVEVYVCBQUklNQVJZIEtFWQogICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgbmFtZSBURVhUIE5PVCBOVUxMLAogICAgYmFyY29kZSBURVhUCiAgICApJycnKQoKICAgICMg0JLQuNC00Ysg0YbQtdC9INC90L7QvNC10L3QutC70LDRgtGD0YDRiyBSU19wcmljZV90eXBlcwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfcHJpY2VfdHlwZXMgKAogICAgICAgIGlkICAgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBuYW1lIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCiAgICAjINCm0LXQvdGLINC90L7QvNC10L3QutC70LDRgtGD0YDRiyBSU19wcmljZXMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX3ByaWNlcyAoCiAgICAgICAgaWQgICAgICAgICAgICAgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgIGlkX3ByaWNlX3R5cGVzIFRFWFQgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfcHJpY2VfdHlwZXMgKGlkKSwKICAgICAgICBpZF9nb29kcyAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCksCiAgICAgICAgaWRfcHJvcGVydGllcyAgVEVYVCAgICBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19wcm9wZXJ0aWVzIChpZCksCiAgICAgICAgcHJpY2UgICAgICAgICAgUkVBTCwKICAgICAgICBpZF91bml0ICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3VuaXRzIChpZCkgCiAgICApCiAgICAnJycpCgogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfZG9jX3R5cGVzICgKICAgIGRvY190eXBlIFRFWFQgUFJJTUFSWSBLRVkgT04gQ09ORkxJQ1QgUkVQTEFDRQogICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICBpc19hZHJfc3RvcmFnZSBJTlQgIERFRkFVTFQgKDApIAogICAgKQogICAgJycnKQoKICAgICMg0JLRgdC1INC00L7QutGD0LzQtdC90YLRiyDRgdC/0LjRgdC60L7QvCBSU19kb2NzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19kb2NzICgKICAgICAgICBpZF9kb2MgICAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgZG9jX3R5cGUgICAgICAgICAgIFRFWFQgICAgIE5PVCBOVUxMLAogICAgICAgIGRvY19uICAgICAgICAgICAgICBURVhUICAgICBOT1QgTlVMTCwKICAgICAgICBkb2NfZGF0ZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICAgICAgaWRfY291bnRyYWdlbnRzICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfY291bnRyYWdlbnRzIChpZCksCiAgICAgICAgaWRfd2FyZWhvdXNlICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfd2FyZWhvdXNlcyAoaWQpLAogICAgICAgIHZlcmlmaWVkICAgICAgICAgICBJTlRFR0VSLAogICAgICAgIHNlbnQgICAgICAgICAgICAgICBJTlRFR0VSLAogICAgICAgIGFkZF9tYXJrX3NlbGVjdGlvbiBJTlRFR0VSLAogICAgICAgIGNyZWF0ZWRfYXQgICAgICAgICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgICAgIGNvbnRyb2wgICAgICAgICAgICBURVhUIERFRkFVTFQgMCwKICAgICAgICBpc19nb3J1cF9zY2FuICAgICAgVEVYVCBERUZBVUxUIDAsCiAgICAgICAgYWxsb3dfZmFjdF9pbnB1dCAgIFRFWFQgREVGQVVMVCAwCiAgICAgICAgCiAgICApCiAgICAnJycpCgoKICAgICMg0KLQsNCx0LvQuNGH0L3QsNGPINGH0LDRgdGC0Ywg0LTQvtC60YPQvNC10L3RgtC+0LIgUlNfZG9jc190YWJsZQogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfZG9jc190YWJsZSAoCiAgICAgICAgaWQgICAgICAgICAgICBJTlRFR0VSICBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgIGlkX2RvYyAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFVQREFURSBTRVQgREVGQVVMVCwKICAgICAgICBpZF9nb29kICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCksCiAgICAgICAgaWRfcHJvcGVydGllcyBURVhUICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgICAgICBpZF9zZXJpZXMgICAgIFRFWFQgICAgIFJFRkVSRU5DRVMgUlNfc2VyaWVzIChpZCksCiAgICAgICAgaWRfdW5pdCAgICAgICBURVhUICAgICBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpLAogICAgICAgIHF0dHkgICAgICAgICAgUkVBTCwKICAgICAgICBxdHR5X3BsYW4gICAgIFJFQUwsCiAgICAgICAgcHJpY2UgICAgICAgICBSRUFMLAogICAgICAgIGlkX3ByaWNlICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19wcmljZV90eXBlcyAoaWQpLAogICAgICAgIHNlbnQgICAgICAgICAgSU5URUdFUiwKICAgICAgICBsYXN0X3VwZGF0ZWQgIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsCiAgICAgICAgaXNfcGxhbiAgICAgICBURVhUIERFRkFVTFQgIlRydWUiLAogICAgICAgIGlkX2NlbGwgICAgICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19jZWxscyAoaWQpIAogICAgKQogICAgJycnKQoKCiAgICAjINCa0L7QtNGLINC80LDRgNC60LjRgNC+0LLQutC4INCyINC00L7QutGD0LzQtdC90YLQtSBSU19kb2NzX2JhcmNvZGVzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19kb2NzX2JhcmNvZGVzICgKICAgIGlkICAgICAgICAgICAgICAgICAgIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgIGlkX2RvYyAgICAgICAgICAgICAgIFRFWFQgICAgTk9UIE5VTEwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERSwKICAgIGlkX2dvb2QgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgUkVGRVJFTkNFUyBSU19nb29kcyAoaWQpLAogICAgaWRfcHJvcGVydHkgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgIGlkX3NlcmllcyAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19zZXJpZXMgKGlkKSwKICAgIGlkX3VuaXQgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpICwKICAgIC0tIyBpZF9iYXJjb2RlICAgICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAtLSMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX21hcmtpbmdfY29kZXMgKGlkKSwKICAgIGJhcmNvZGVfZnJvbV9zY2FubmVyIFRFWFQsCiAgICBpc19wbGFuICAgICAgICAgICAgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgIGFwcHJvdmVkICAgICAgICAgICAgIFRFWFQgICAgREVGQVVMVCAwLAogICAgR1RJTiAgICAgICAgICAgICAgICAgVEVYVCwKICAgIFNlcmllcyAgICAgICAgICAgICAgIFRFWFQKICAgICkKICAgICcnJykKCiAgICAj0J/QvtGC0L7QuiDQv9GA0L7QuNC30LLQvtC70YzQvdGL0YUg0YjRgtGA0LjRhdC60L7QtNC+0LIKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2JhcmNfZmxvdyAoCiAgICBpZF9kb2MgIFRFWFQgUkVGRVJFTkNFUyBSU19kb2NzIChpZF9kb2MpLAogICAgYmFyY29kZSBURVhUCiAgICApCiAgICAnJycpCgogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfYWRyX2RvY3MgKAogICAgaWRfZG9jICAgICAgICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICBkb2NfdHlwZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBkb2NfbiAgICAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBkb2NfZGF0ZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBpZF93YXJlaG91c2UgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3dhcmVob3VzZXMgKGlkKSwKICAgIHZlcmlmaWVkICAgICAgICAgICBJTlRFR0VSLAogICAgc2VudCAgICAgICAgICAgICAgIElOVEVHRVIsCiAgICBhZGRfbWFya19zZWxlY3Rpb24gSU5URUdFUiwKICAgIGNyZWF0ZWRfYXQgICAgICAgICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgY29udHJvbCAgICAgICAgICAgIFRFWFQgICAgIERFRkFVTFQgMCwKICAgIGFsbG93X2ZhY3RfaW5wdXQgICBURVhUIERFRkFVTFQgMAogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2Fkcl9kb2NzX3RhYmxlICgKICAgIGlkICAgICAgICAgICAgSU5URUdFUiAgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgIGlkX2RvYyAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19hZHJfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFVQREFURSBTRVQgREVGQVVMVCwKICAgIGlkX2dvb2QgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19nb29kcyAoaWQpLAogICAgaWRfcHJvcGVydGllcyBURVhUICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgIGlkX3NlcmllcyAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19zZXJpZXMgKGlkKSwKICAgIGlkX3VuaXQgICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpLAogICAgcXR0eSAgICAgICAgICBSRUFMLAogICAgcXR0eV9wbGFuICAgICBSRUFMLAogICAgc2VudCAgICAgICAgICBJTlRFR0VSLAogICAgbGFzdF91cGRhdGVkICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgaXNfcGxhbiAgICAgICBURVhUICAgICBERUZBVUxUIFRydWUsCiAgICBpZF9jZWxsICAgICAgIFRFWFQgICAgIFJFRkVSRU5DRVMgUlNfY2VsbHMgKGlkKSwgCiAgICB0YWJsZV90eXBlICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFQgJ291dCcKICAgICkKICAgICcnJykKCiAgICBScy5hcHBlbmQoJycnCiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgRXJyb3JfbG9nICgKICAgICAgICBsb2cgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVCAoJycpLAogICAgICAgIHRpbWVzdGFtcCBEQVRFVElNRSBERUZBVUxUIChDVVJSRU5UX1RJTUVTVEFNUCkpIAogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBJTkRFWCAgSUYgTk9UIEVYSVNUUyBjZWxsX25hbWUgT04gUlNfY2VsbHMgKAogICAgbmFtZQogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBJTkRFWCAgSUYgTk9UIEVYSVNUUyBjZWxsX25hbWUgT04gUlNfY2VsbHMgKAogICAgYmFyY29kZQogICAgKQogICAgJycnKQoKCiMgUlNfY29uc3RhbnRzICsgUlNfY2xhc3NpZmllcl91bml0cyArIFJTX3R5cGVzX2dvb2RzCiMgICAgIFJzID0gKyBSU19nb29kcyArIFJTX3Byb3BlcnRpZXNcCiMgICAgICAgICAgKyBSU19zZXJpZXMgKyBSU191bml0cyArIFJTX2JhcmNvZGVzICsgUlNfbWFya2luZ19jb2RlcyArIFJTX2RvY3MgKyBSU19kb2NzX2JhcmNvZGVzXAojICAgICAgICAgICsgUlNfZG9jc190YWJsZSArIFJTX3ByaWNlX3R5cGVzICsgUlNfcHJpY2VzICsgUlNfY291bnRyYWdlbnRzICsgUlNfd2FyZWhvdXNlcwoKICAgIHJldHVybiBScwojcHJpbnQoZGF0YWJhc2Vfc2hlbWEoKSkKICAgICMKICAgICMgUnMuYXBwZW5kKFJTX2NvbnN0YW50cykKICAgICMgUnMuYXBwZW5kKFJTX2NsYXNzaWZpZXJfdW5pdHMpCiAgICAjIFJzLmFwcGVuZChSU190eXBlc19nb29kcykKICAgICMKICAgICMgUnMuYXBwZW5kKFJTX2dvb2RzKQogICAgIyBScy5hcHBlbmQoUlNfcHJvcGVydGllcykKICAgICMgUnMuYXBwZW5kKFJTX3NlcmllcykKICAgICMgUnMuYXBwZW5kKFJTX3VuaXRzKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfYmFyY29kZXMpCiAgICAjIFJzLmFwcGVuZChSU19tYXJraW5nX2NvZGVzKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfZG9jcykKICAgICMgUnMuYXBwZW5kKFJTX2RvY3NfYmFyY29kZXMpCiAgICAjIFJzLmFwcGVuZChSU19kb2NzX3RhYmxlKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfcHJpY2VfdHlwZXMpCiAgICAjIFJzLmFwcGVuZChSU19wcmljZXMpCiAgICAjCiAgICAjIFJzLmFwcGVuZChSU19jb3VudHJhZ2VudHMpCiAgICAjIFJzLmFwcGVuZChSU193YXJlaG91c2VzKQogICAgI3VpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KFJzKQoK"
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\db_services.py",
                "PyFileKey": "db_services",
                "PyFileData": "aW1wb3J0IGpzb24KZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgU2ltcGxlU1FMUHJvdmlkZXIgYXMgc3FsQ2xhc3MKZnJvbSB1aV9nbG9iYWwgaW1wb3J0IGdldF9xdWVyeV9yZXN1bHQKCgpjbGFzcyBEb2NTZXJ2aWNlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvY19pZD0nJyk6CiAgICAgICAgc2VsZi5kb2NfaWQgPSBkb2NfaWQKICAgICAgICBzZWxmLmRvY3NfdGFibGVfbmFtZSA9ICdSU19kb2NzJwogICAgICAgIHNlbGYuZGV0YWlsc190YWJsZV9uYW1lID0gJ1JTX2RvY3NfdGFibGUnCiAgICAgICAgc2VsZi5pc0FkciA9IEZhbHNlCiAgICAgICAgc2VsZi5zcWxfdGV4dCA9ICcnCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gTm9uZQogICAgICAgIHNlbGYuZGVidWcgPSBGYWxzZQogICAgICAgIHNlbGYucHJvdmlkZXIgPSBTcWxRdWVyeVByb3ZpZGVyKHNlbGYuZG9jc190YWJsZV9uYW1lLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X2xhc3RfZWRpdGVkX2dvb2RzKHNlbGYsIHRvX2pzb249RmFsc2UpOgogICAgICAgIHF1ZXJ5X2RvY3MgPSBmJ1NFTEVDVCAqIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfSBXSEVSRSBpZF9kb2MgPSA/IGFuZCB2ZXJpZmllZCA9IDEnCgogICAgICAgIHF1ZXJ5X2dvb2RzID0gZicnJwogICAgICAgIFNFTEVDVCAqIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfV90YWJsZQogICAgICAgIFdIRVJFIGlkX2RvYyA9ID8gYW5kIHNlbnQgPSAwCiAgICAgICAgJycnCgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzX2RvY3MgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2RvY3MsIChzZWxmLmRvY19pZCwpLCBUcnVlKQogICAgICAgICAgICByZXNfZ29vZHMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2dvb2RzLCAoc2VsZi5kb2NfaWQsKSwgVHJ1ZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIGUKICAgICAgICAgICAgIyByZXR1cm4geydFcnJvcic6IGUuYXJnc1swXX0KCiAgICAgICAgaWYgbm90IHJlc19nb29kczoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgcmV0dXJuIHNlbGYuZm9ybV9kYXRhX2Zvcl9yZXF1ZXN0KHJlc19kb2NzLCByZXNfZ29vZHMsIHRvX2pzb24pCgogICAgZGVmIGZvcm1fZGF0YV9mb3JfcmVxdWVzdChzZWxmLCByZXNfZG9jcywgcmVzX2dvb2RzLCB0b19qc29uKToKICAgICAgICBmb3IgaXRlbSBpbiByZXNfZG9jczoKICAgICAgICAgICAgZmlsdGVyZWRfbGlzdCA9IFtkIGZvciBkIGluIHJlc19nb29kcyBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICAgICAgZ29vZHNfdGFibGUgPSBmJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX1fdGFibGUnCiAgICAgICAgICAgIGl0ZW1bZ29vZHNfdGFibGVdID0gZmlsdGVyZWRfbGlzdAogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc0FkcjoKICAgICAgICAgICAgICAgIGl0ZW1bJ1JTX2RvY3NfYmFyY29kZXMnXSA9IFtdCiAgICAgICAgICAgICAgICBpdGVtWydSU19iYXJjX2Zsb3cnXSA9IFtdCgogICAgICAgIGlmIHRvX2pzb246CiAgICAgICAgICAgIHJldHVybiBqc29uLmR1bXBzKHJlc19kb2NzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByZXNfZG9jcwoKICAgIGRlZiB1cGRhdGVfZGF0YV9mcm9tX2pzb24oc2VsZiwganNvbl9kYXRhKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKGpzb25fZGF0YSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGRhdGEgPSBqc29uX2RhdGEKCiAgICAgICAgaWYgZGF0YS5nZXQoc2VsZi5kb2NzX3RhYmxlX25hbWUpOgogICAgICAgICAgICBzZWxmLnVwZGF0ZV9kb2NzKGRhdGEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51cGRhdGVfbnNpKGRhdGEpCgogICAgZGVmIHVwZGF0ZV9kb2NzKHNlbGYsIGRhdGEpOgogICAgICAgIGRvY19pZHMgPSAnLCcuam9pbihbZicie2l0ZW0uZ2V0KCJpZF9kb2MiKX0iJyBmb3IgaXRlbSBpbiBkYXRhW3NlbGYuZG9jc190YWJsZV9uYW1lXV0pCgogICAgICAgIHF1ZXJ5ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgaWRfZG9jLCB2ZXJpZmllZAogICAgICAgICAgICBGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0KICAgICAgICAgICAgV0hFUkUgaWRfZG9jIElOICh7ZG9jX2lkc30pCiAgICAgICAgJycnCiAgICAgICAgZG9jcyA9IHtpdGVtWydpZF9kb2MnXTogaXRlbVsndmVyaWZpZWQnXSBvciBGYWxzZSBmb3IgaXRlbSBpbgogICAgICAgICAgICAgICAgc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0PXF1ZXJ5LCByZXR1cm5fZGljdD1UcnVlKX0KCiAgICAgICAgcXVlcmllcyA9IHNlbGYuanNvbl90b19zcWxpdGVfcXVlcnkoZGF0YSwgZG9jcykKCiAgICAgICAgZm9yIHF1ZXJ5IGluIHF1ZXJpZXM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnkpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIGUKCiAgICAgICAgcmV0dXJuIGRvY3MKCiAgICBkZWYgdXBkYXRlX25zaShzZWxmLCBkYXRhKToKICAgICAgICBxdWVyaWVzID0gc2VsZi5qc29uX3RvX3NxbGl0ZV9xdWVyeShkYXRhKQoKICAgICAgICBmb3IgcXVlcnkgaW4gcXVlcmllczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgZQoKICAgIGRlZiB1cGRhdGVfc2VudF9kYXRhKHNlbGYsIGRhdGEpOgogICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgIGZvciBkb2MgaW4gZGF0YToKICAgICAgICAgICAgICAgIGlkX2RvYyA9IGRvY1snaWRfZG9jJ10KICAgICAgICAgICAgICAgIGlkX2dvb2RzID0gJywnLmpvaW4oW2YnIntpdGVtLmdldCgiaWRfZ29vZCIpfSInIGZvciBpdGVtIGluIGRvYy5nZXQoJ1JTX2RvY3NfdGFibGUnLCBbXSldKQoKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gZicnJwogICAgICAgICAgICAgICAgICAgIFVQREFURSB7c2VsZi5kZXRhaWxzX3RhYmxlX25hbWV9CiAgICAgICAgICAgICAgICAgICAgU0VUIHNlbnQgPSAxCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gJ3tpZF9kb2N9JyBBTkQgaWRfZ29vZCBJTiAoe2lkX2dvb2RzfSkKICAgICAgICAgICAgICAgICAgICAnJycKCiAgICAgICAgICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgICAgICAgICAgcXVlcnkgPSBmJ1VQREFURSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IFNFVCBzZW50PTEgV0hFUkUgaWRfZG9jID0gIntzZWxmLmRvY19pZH0iJwogICAgICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgIGRlZiBqc29uX3RvX3NxbGl0ZV9xdWVyeShzZWxmLCBkYXRhOiBkaWN0LCBkb2NzPU5vbmUpOgogICAgICAgIGlmIGRvY3MgaXMgTm9uZToKICAgICAgICAgICAgZG9jcyA9IHt9CgogICAgICAgIHFsaXN0ID0gW10KICAgICAgICAjINCm0LjQutC7INC/0L4g0LjQvNC10L3QsNC8INGC0LDQsdC70LjRhgogICAgICAgIHRhYmxlX2xpc3QgPSAoCiAgICAgICAgICAgICdSU19kb2NfdHlwZXMnLCAnUlNfZ29vZHMnLCAnUlNfcHJvcGVydGllcycsICdSU191bml0cycsICdSU190eXBlc19nb29kcycsICdSU19zZXJpZXMnLCAnUlNfY291bnRyYWdlbnRzJywKICAgICAgICAgICAgJ1JTX3dhcmVob3VzZXMnLCAnUlNfcHJpY2VfdHlwZXMnLCAnUlNfY2VsbHMnLCAnUlNfYmFyY29kZXMnLCAnUlNfcHJpY2VzJywgJ1JTX2RvY190eXBlcycsICdSU19kb2NzJywKICAgICAgICAgICAgJ1JTX2RvY3NfdGFibGUnLCAnUlNfZG9jc19iYXJjb2RlcycsICdSU19hZHJfZG9jcycsICdSU19hZHJfZG9jc190YWJsZScpICAjICwsICdSU19iYXJjX2Zsb3cnCiAgICAgICAgdGFibGVfZm9yX2RlbGV0ZSA9ICgnUlNfZG9jc190YWJsZScsICdSU19kb2NzX2JhcmNvZGVzLCBSU19iYXJjX2Zsb3cnLCAnUlNfYWRyX2RvY3NfdGFibGUnKSAgIyAsICdSU19iYXJjX2Zsb3cnCiAgICAgICAgZG9jX2lkX2xpc3QgPSBbXQogICAgICAgIGZvciB0YWJsZV9uYW1lIGluIHRhYmxlX2xpc3Q6CiAgICAgICAgICAgIGlmIG5vdCBkYXRhLmdldCh0YWJsZV9uYW1lKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjINCU0L7QsdCw0LLQuNC8INCyINC30LDQv9GA0L7RgdGLINGD0LTQsNC70LXQvdC40LUg0LjQtyDQsdCw0LfRiyDRgdGC0YDQvtC6INGC0LXRhSDQtNC+0LrRg9C80LXQvdGC0L7Qsiwg0YfRgtC+INC80Ysg0LfQsNCz0YDRg9C20LDQtdC8CiAgICAgICAgICAgIGlmIHRhYmxlX25hbWUgaW4gdGFibGVfZm9yX2RlbGV0ZToKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gZiJERUxFVEUgRlJPTSB7dGFibGVfbmFtZX0gV0hFUkUgaWRfZG9jIGluICh7JywgJy5qb2luKGRvY19pZF9saXN0KX0pICIKICAgICAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgICAgIGNvbHVtbl9uYW1lcyA9IGRhdGFbdGFibGVfbmFtZV1bMF0ua2V5cygpCiAgICAgICAgICAgIGlmICdtYXJrX2NvZGUnIGluIGNvbHVtbl9uYW1lczoKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQogICAgICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLmFwcGVuZCgnR1RJTicpCiAgICAgICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMuYXBwZW5kKCdTZXJpZXMnKQogICAgICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLnJlbW92ZSgnbWFya19jb2RlJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQoKICAgICAgICAgICAgaWYgdGFibGVfbmFtZSBpbiAoJ1JTX2RvY3MnLCAnUlNfYWRyX2RvY3MnKTogICMKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcy5hcHBlbmQoJ3ZlcmlmaWVkJykKCiAgICAgICAgICAgIHF1ZXJ5ID0gZiJSRVBMQUNFIElOVE8ge3RhYmxlX25hbWV9ICh7JywgJy5qb2luKHF1ZXJ5X2NvbF9uYW1lcyl9KSBWQUxVRVMgIgogICAgICAgICAgICB2YWx1ZXMgPSBbXQoKICAgICAgICAgICAgZm9yIHJvdyBpbiBkYXRhW3RhYmxlX25hbWVdOgogICAgICAgICAgICAgICAgcm93X3ZhbHVlcyA9IFtdCiAgICAgICAgICAgICAgICBsaXN0X3F1b3RlZF9maWVsZHMgPSAoJ25hbWUnLCAnZnVsbF9uYW1lJywgIm1hcmtfY29kZSIpCiAgICAgICAgICAgICAgICBmb3IgY29sIGluIHF1ZXJ5X2NvbF9uYW1lczoKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgaW4gbGlzdF9xdW90ZWRfZmllbGRzIGFuZCAiXCIiIGluIHJvd1tjb2xdOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9IHJvd1tjb2xdLnJlcGxhY2UoIlwiIiwgIlwiXCIiKQoKICAgICAgICAgICAgICAgICAgICAjINCX0LTQtdGB0Ywg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YTQu9Cw0LMgdmVyaWZpZWQhISEKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgPT0gJ3ZlcmlmaWVkJyBhbmQgKHRhYmxlX25hbWUgaW4gWydSU19kb2NzJywgJ1JTX2Fkcl9kb2NzJ10pOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9IGRvY3MuZ2V0KHJvd1snaWRfZG9jJ10sIDApCgogICAgICAgICAgICAgICAgICAgIGlmIHJvdy5nZXQoY29sKSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9ICcnCgogICAgICAgICAgICAgICAgICAgIGlmIGNvbCA9PSAnbWFya19jb2RlJzogICMg0JfQsNC80LXQvdGP0LXQvCDRjdGC0L4g0L/QvtC70LUg0L3QsCDQv9C+0LvRjyBHVElOINC4IFNlcmllcwogICAgICAgICAgICAgICAgICAgICAgICBiYXJjX3N0cnVjdCA9IHNlbGYucGFyc2VfYmFyY29kZShyb3dbY29sXSkKICAgICAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ0dUSU4nXSkKICAgICAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ1NlcmllcyddKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd192YWx1ZXMuYXBwZW5kKHJvd1tjb2xdKSAgIyAoZicie3Jvd1tjb2xdfSInKQoKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgPT0gJ2lkX2RvYycgYW5kICh0YWJsZV9uYW1lIGluIFsnUlNfZG9jcycsICdSU19hZHJfZG9jcyddKToKICAgICAgICAgICAgICAgICAgICAgICAgZG9jX2lkX2xpc3QuYXBwZW5kKCciJyArIHJvd1tjb2xdICsgJyInKQoKICAgICAgICAgICAgICAgIGZvcm1hdHRlZF92YWwgPSBbZicie3h9IicgaWYgaXNpbnN0YW5jZSh4LCBzdHIpIGVsc2Ugc3RyKHgpIGZvciB4IGluIHJvd192YWx1ZXNdCiAgICAgICAgICAgICAgICB2YWx1ZXMuYXBwZW5kKGYiKHsnLCAnLmpvaW4oZm9ybWF0dGVkX3ZhbCl9KSIpCiAgICAgICAgICAgIHF1ZXJ5ICs9ICIsICIuam9pbih2YWx1ZXMpCiAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgcmV0dXJuIHFsaXN0CgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9Tm9uZSwgcmV0dXJuX2RpY3Q9RmFsc2UpOgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9YXJncywgcmV0dXJuX2RpY3Q9cmV0dXJuX2RpY3QpCgogICAgZGVmIHNldF9kb2NfdmFsdWUoc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgcXVlcnkgPSBmJycnCiAgICAgICAgICAgIFVQREFURSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9CiAgICAgICAgICAgIFNFVCB7a2V5fSA9IHt2YWx1ZX0KICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gIntzZWxmLmRvY19pZH0iCiAgICAgICAgICAgICcnJwoKICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgIGRlZiBnZXRfZG9jX3ZhbHVlKHNlbGYsIGtleSwgaWRfZG9jKToKICAgICAgICBxdWVyeSA9IGYnU0VMRUNUIHtrZXl9IGZyb20ge3NlbGYuZG9jc190YWJsZV9uYW1lfSAgV0hFUkUgaWRfZG9jID0gPycKICAgICAgICByZXMgPSBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoaWRfZG9jLCksIFRydWUpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgICByZXR1cm4gcmVzWzBdW2tleV0KCiAgICBkZWYgZ2V0X2RvY190eXBlcyhzZWxmKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5ID0gZidTRUxFQ1QgRElTVElOQ1QgZG9jX3R5cGUgZnJvbSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9JwogICAgICAgIGRvY190eXBlcyA9IFtyZWNbMF0gZm9yIHJlYyBpbiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KV0KICAgICAgICByZXR1cm4gZG9jX3R5cGVzCgogICAgZGVmIGdldF9kb2Nfdmlld19kYXRhKHNlbGYsIGRvY190eXBlPScnLCBkb2Nfc3RhdHVzPScnKSAtPiBsaXN0OgogICAgICAgIGZpZWxkcyA9IFsKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX2RvYycsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfdHlwZScsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfbicsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfZGF0ZScsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF93YXJlaG91c2UnLAogICAgICAgICAgICBmJ2lmbnVsbChSU193YXJlaG91c2VzLm5hbWUsIiIpIGFzIFJTX3dhcmVob3VzZScsCiAgICAgICAgICAgIGYnaWZudWxsKHtzZWxmLmRvY3NfdGFibGVfbmFtZX0udmVyaWZpZWQsIDApIGFzIHZlcmlmaWVkJywKICAgICAgICAgICAgZidpZm51bGwoe3NlbGYuZG9jc190YWJsZV9uYW1lfS5zZW50LCAwKSBhcyBzZW50JywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmFkZF9tYXJrX3NlbGVjdGlvbicsCiAgICAgICAgXQoKICAgICAgICBpZiBzZWxmLmRvY3NfdGFibGVfbmFtZSA9PSAnUlNfZG9jcyc6CiAgICAgICAgICAgIGZpZWxkcy5hcHBlbmQoZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX2NvdW50cmFnZW50cycpCiAgICAgICAgICAgIGZpZWxkcy5hcHBlbmQoZidpZm51bGwoUlNfY291bnRyYWdlbnRzLmZ1bGxfbmFtZSwgIiIpIGFzIFJTX2NvdW50cmFnZW50JykKCiAgICAgICAgcXVlcnlfdGV4dCA9ICdTRUxFQ1QgJyArICcsXG4nLmpvaW4oZmllbGRzKQoKICAgICAgICBqb2lucyA9IGYnJydGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0KICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3dhcmVob3VzZXMgYXMgUlNfd2FyZWhvdXNlcwogICAgICAgICAgICAgICAgT04gUlNfd2FyZWhvdXNlcy5pZCA9IHtzZWxmLmRvY3NfdGFibGVfbmFtZX0uaWRfd2FyZWhvdXNlCiAgICAgICAgJycnCgogICAgICAgIGlmIHNlbGYuZG9jc190YWJsZV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICAgICAgam9pbnMgKz0gZicnJwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfY291bnRyYWdlbnRzIGFzIFJTX2NvdW50cmFnZW50cwogICAgICAgICAgICAgICAgT04gUlNfY291bnRyYWdlbnRzLmlkID0ge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9jb3VudHJhZ2VudHMKICAgICAgICAgICAgICAgICcnJwoKICAgICAgICB3aGVyZSA9ICcnCgogICAgICAgIGlmIGRvY19zdGF0dXM6CiAgICAgICAgICAgIGlmIGRvY19zdGF0dXMgPT0gItCS0YvQs9GA0YPQttC10L0iOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgc2VudD0xIEFORCB2ZXJpZmllZD0xIgogICAgICAgICAgICBlbGlmIGRvY19zdGF0dXMgPT0gItCaINCy0YvQs9GA0YPQt9C60LUiOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgaWZudWxsKHZlcmlmaWVkLDApPTEgQU5EIGlmbnVsbChzZW50LDApPTAiCiAgICAgICAgICAgIGVsaWYgZG9jX3N0YXR1cyA9PSAi0Jog0LLRi9C/0L7Qu9C90LXQvdC40Y4iOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgaWZudWxsKHZlcmlmaWVkLDApPTAgQU5EIGlmbnVsbChzZW50LDApPTAiCgogICAgICAgIGlmIG5vdCBkb2NfdHlwZSBvciBkb2NfdHlwZSA9PSAi0JLRgdC1IjoKICAgICAgICAgICAgYXJnc190dXBsZSA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBhcmdzX3R1cGxlID0gKGRvY190eXBlLCkKICAgICAgICAgICAgaWYgbm90IGRvY19zdGF0dXMgb3IgZG9jX3N0YXR1cyA9PSAi0JLRgdC1IjoKICAgICAgICAgICAgICAgIHdoZXJlID0gJ1dIRVJFIGRvY190eXBlPT8nCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB3aGVyZSArPSAnIEFORCBkb2NfdHlwZT0/JwoKICAgICAgICBxdWVyeV90ZXh0ID0gZicnJwogICAgICAgICAgICB7cXVlcnlfdGV4dH0KICAgICAgICAgICAge2pvaW5zfQogICAgICAgICAgICB7d2hlcmV9CiAgICAgICAgICAgIE9SREVSIEJZIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0uZG9jX2RhdGUKICAgICAgICAnJycKCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCBhcmdzX3R1cGxlLCByZXR1cm5fZGljdD1UcnVlKQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmLCBpZF9kb2MpOgogICAgICAgIHF1ZXJ5X2RvYyA9IGYnREVMRVRFIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfSBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jLCAoaWRfZG9jLCkpCgogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgZ2V0X2RvY3Nfc3RhdChzZWxmKToKICAgICAgICBxdWVyeSA9IGYnJycKICAgICAgICBXSVRIIHRtcCBBUyAoCiAgICAgICAgICAgIFNFTEVDVCAKICAgICAgICAgICAgICAgIGRvY190eXBlLAogICAgICAgICAgICAgICAge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MsCiAgICAgICAgICAgICAgICAxIGFzIGRvY19Db3VudCwKICAgICAgICAgICAgICAgIElGTlVMTCh7c2VsZi5kb2NzX3RhYmxlX25hbWV9LnNlbnQsMCkgYXMgc2VudCwKICAgICAgICAgICAgICAgIElGTlVMTCh7c2VsZi5kb2NzX3RhYmxlX25hbWV9LnZlcmlmaWVkLDApIGFzIHZlcmlmaWVkLCAKICAgICAgICAgICAgICAgIENBU0UgV0hFTiBJRk5VTEwodmVyaWZpZWQsMCk9MCBUSEVOIAogICAgICAgICAgICAgICAgICAgIENPVU5UKHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0uaWQpCiAgICAgICAgICAgICAgICBFTFNFIAogICAgICAgICAgICAgICAgICAgIDAgCiAgICAgICAgICAgICAgICBFTkQgYXMgY291bnRfdmVyaWZpZWQsCiAgICAgICAgICAgICAgICBDQVNFIFdIRU4gSUZOVUxMKHZlcmlmaWVkLDApPTEgVEhFTiAKICAgICAgICAgICAgICAgICAgICBjb3VudCh7c2VsZi5kZXRhaWxzX3RhYmxlX25hbWV9LmlkKQogICAgICAgICAgICAgICAgRUxTRSAKICAgICAgICAgICAgICAgICAgICAwIAogICAgICAgICAgICAgICAgRU5EIGFzIGNvdW50X3VudmVyaWZpZWQsCiAgICAgICAgICAgICAgICBDQVNFIFdIRU4gSUZOVUxMKHZlcmlmaWVkLDApPTAgVEhFTgogICAgICAgICAgICAgICAgICAgICBTVU0oe3NlbGYuZGV0YWlsc190YWJsZV9uYW1lfS5xdHR5X3BsYW4pCiAgICAgICAgICAgICAgICBFTFNFIAogICAgICAgICAgICAgICAgICAgIDAgCiAgICAgICAgICAgICAgICBFTkQgYXMgcXR0eV9wbGFuX3ZlcmlmaWVkLAogICAgICAgICAgICAgICAgQ0FTRSBXSEVOIElGTlVMTCh2ZXJpZmllZCwwKT0xIFRIRU4gCiAgICAgICAgICAgICAgICAgICAgU1VNKHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0ucXR0eV9wbGFuKQogICAgICAgICAgICAgICAgRUxTRSAKICAgICAgICAgICAgICAgICAgICAwIAogICAgICAgICAgICAgICAgRU5EIGFzIHF0dHlfcGxhbl91bnZlcmlmaWVkCiAgICAgICAgICAgIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfQogICAgICAgICAgICBMRUZUIEpPSU4ge3NlbGYuZGV0YWlsc190YWJsZV9uYW1lfSAKICAgICAgICAgICAgICAgIE9OIHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0uaWRfZG9jID0ge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MKICAgICAgICAgICAgR1JPVVAgQlkge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MKICAgICAgICApCiAgICAgICAgU0VMRUNUIAogICAgICAgICAgICBkb2NfdHlwZSBhcyBkb2NUeXBlLCAKICAgICAgICAgICAgQ09VTlQoaWRfZG9jKSwKICAgICAgICAgICAgU1VNKGRvY19Db3VudCkgYXMgY291bnQsIAogICAgICAgICAgICBTVU0oc2VudCkgYXMgc2VudCwgCiAgICAgICAgICAgIFNVTSh2ZXJpZmllZCkgYXMgdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShjb3VudF92ZXJpZmllZCkgYXMgY291bnRfdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShjb3VudF91bnZlcmlmaWVkKSBhcyBjb3VudF91bnZlcmlmaWVkLAogICAgICAgICAgICBTVU0ocXR0eV9wbGFuX3ZlcmlmaWVkKSBhcyBxdHR5X3BsYW5fdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShxdHR5X3BsYW5fdW52ZXJpZmllZCkgYXMgcXR0eV9wbGFuX3VudmVyaWZpZWQKICAgICAgICBGUk9NIHRtcAogICAgICAgIEdST1VQIEJZIGRvY190eXBlCiAgICAgICAgJycnCgogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnksIHJldHVybl9kaWN0PVRydWUpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBnZXRfZG9jX2RldGFpbHNfZGF0YShzZWxmLCBpZF9kb2MpIC0+IGxpc3Q6CiAgICAgICAgcXVlcnkgPSBmIiIiCiAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkLAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX2RvYywKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF9nb29kLAogICAgICAgICAgICBSU19nb29kcy5uYW1lIGFzIGdvb2RfbmFtZSwKICAgICAgICAgICAgUlNfZ29vZHMuY29kZSwKICAgICAgICAgICAgUlNfZ29vZHMuYXJ0LAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXMsCiAgICAgICAgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0aWVzX25hbWUsCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfc2VyaWVzLAogICAgICAgICAgICBSU19zZXJpZXMubmFtZSBhcyBzZXJpZXNfbmFtZSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF91bml0LAogICAgICAgICAgICBSU191bml0cy5uYW1lIGFzIHVuaXRzX25hbWUsCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUucXR0eSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5X3BsYW4sCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUucHJpY2UsCiAgICAgICAgICAgIFJTX3ByaWNlX3R5cGVzLm5hbWUgYXMgcHJpY2VfbmFtZSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5X3BsYW4gLVJTX2RvY3NfdGFibGUucXR0eSBhcyBJc0RvbmUKICAgICAgICAgICAgCiAgICAgICAgICAgIEZST00gUlNfZG9jc190YWJsZSAKCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgT04gUlNfZ29vZHMuaWQ9UlNfZG9jc190YWJsZS5pZF9nb29kCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19wcm9wZXJ0aWVzCiAgICAgICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPVJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgICAgIE9OIFJTX3Nlcmllcy5pZCA9UlNfZG9jc190YWJsZS5pZF9zZXJpZXMKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkID0gUlNfZG9jc190YWJsZS5pZF91bml0CiAgICAgICAgICAgIExFRlQgSk9JTiBSU19wcmljZV90eXBlcwogICAgICAgICAgICBPTiBSU19wcmljZV90eXBlcy5pZCA9UlNfZG9jc190YWJsZS5pZF9wcmljZQoKICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gJGFyZzEKICAgICAgICAgICAgT1JERVIgQlkgUlNfZG9jc190YWJsZS5sYXN0X3VwZGF0ZWQgREVTQyAKICAgICAgICAgICAgIiIiCiAgICAgICAgcmVzID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGlkX2RvYywpLCByZXR1cm5fZGljdD1UcnVlKQogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgcGFyc2VfYmFyY29kZShzZWxmLCB2YWwpOgogICAgICAgIGlmIGxlbih2YWwpIDwgMjE6CiAgICAgICAgICAgIHJldHVybiB7J0dUSU4nOiAnJywgJ1Nlcmllcyc6ICcnfQoKICAgICAgICB2YWwucmVwbGFjZSgnKDAxKScsICcwMScpCiAgICAgICAgdmFsLnJlcGxhY2UoJygyMSknLCAnMjEnKQoKICAgICAgICBpZiB2YWxbOjJdID09ICcwMSc6CiAgICAgICAgICAgIEdUSU4gPSB2YWxbMjoxNl0KICAgICAgICAgICAgU2VyaWVzID0gdmFsWzE4Ol0KICAgICAgICBlbHNlOgogICAgICAgICAgICBHVElOID0gdmFsWzoxNF0KICAgICAgICAgICAgU2VyaWVzID0gdmFsWzE0Ol0KCiAgICAgICAgcmV0dXJuIHsnR1RJTic6IEdUSU4sICdTZXJpZXMnOiBTZXJpZXN9CgogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmLCBpZF9kb2MpOgogICAgICAgIHF1ZXJ5X3RleHQgPSAoJ1VwZGF0ZSBSU19kb2NzX2JhcmNvZGVzIFNldCBhcHByb3ZlZCA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgICAgICAgICAgICAgICAgICAgJ0RlbGV0ZSBGcm9tIFJTX2RvY3NfYmFyY29kZXMgV2hlcmUgIGlkX2RvYz06aWRfZG9jIEFuZCBpc19wbGFuID0gMCcsCiAgICAgICAgICAgICAgICAgICAgICAnVXBkYXRlIFJTX2RvY3NfdGFibGUgU2V0IHF0dHkgPSAwIFdoZXJlIGlkX2RvYz06aWRfZG9jJywKICAgICAgICAgICAgICAgICAgICAgICdEZWxldGUgRnJvbSBSU19kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz06aWRfZG9jIGFuZCBpc19wbGFuID0gIkZhbHNlIicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgZWwgaW4gcXVlcnlfdGV4dDoKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6IGlkX2RvY30pKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogRmFsc2UsICdlcnJvcic6IGUuYXJnc1swXX0KCiAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogVHJ1ZSwgJ2Vycm9yJzogJyd9CgogICAgZGVmIGdldF9kb2NfYmFyY29kZV9kYXRhKHNlbGYsIGFyZ3MpOgogICAgICAgIHF1ZXJ5ID0gJycnCiAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICAiKDAxKSIgfHwgR1RJTiB8fCAiKDIxKSIgfHwgU2VyaWVzIGFzIG1hcmtfY29kZSwKICAgICAgICAgICAgYXBwcm92ZWQKICAgICAgICAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICAgICAgICAgIFdoZXJlCiAgICAgICAgICAgIGlkX2RvYyA9IDppZF9kb2MgQU5ECiAgICAgICAgICAgIGlkX2dvb2QgPSA6aWRfZ29vZCBBTkQKICAgICAgICAgICAgaWRfcHJvcGVydHkgPSA6aWRfcHJvcGVydHkgQU5ECiAgICAgICAgICAgIGlkX3NlcmllcyA9IDppZF9zZXJpZXMgCiAgICAgICAgICAgIC0tQU5EICBpZF91bml0ID0gOmlkX3VuaXQKICAgICAgICAgJycnCgogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnksIGFyZ3MsIHJldHVybl9kaWN0PVRydWUpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBnZXRfZG9jc19jb3VudChzZWxmLCBkb2NfdHlwZT0nJyk6CiAgICAgICAgcXVlcnkgPSBmJ1NFTEVDVCBDT1VOVCgqKSBBUyBkb2NzX2NvdW50IEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfScKICAgICAgICBhcmdzID0gTm9uZQoKICAgICAgICBpZiBkb2NfdHlwZToKICAgICAgICAgICAgcXVlcnkgPSAnXG4nLmpvaW4oW3F1ZXJ5LCAnV0hFUkUgZG9jX3R5cGUgPSA/J10pCiAgICAgICAgICAgIGFyZ3MgPSAoZG9jX3R5cGUsKQoKICAgICAgICByZXMgPSBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCBhcmdzLCBUcnVlKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmV0dXJuIHJlc1swXS5nZXQoJ2RvY3NfY291bnQnLCAwKQogICAgICAgIHJldHVybiAwCgoKICAgIGRlZiBnZXRfZXhpc3RpbmdfZG9jcyhzZWxmKToKICAgICAgICBxdWVyeV90ZXh0ID0gZiJTRUxFQ1QgZG9jX24sZG9jX3R5cGUgRlJPTSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IgogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCkKICAgICAgICByZXR1cm4gcmVzCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIHdyaXRlX2Vycm9yX29uX2xvZyhFcnJfdmFsdWUpOgogICAgICAgIGlmIEVycl92YWx1ZToKICAgICAgICAgICAgcXRleHQgPSAnSW5zZXJ0IGludG8gRXJyb3JfbG9nKGxvZykgVmFsdWVzKD8pJwogICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoRXJyX3ZhbHVlLCkpCgogICAgZGVmIGdldF9kb2NzX2FuZF9nb29kc19mb3JfdXBsb2FkKHNlbGYpOgoKICAgICAgICBxdWVyeV9kb2NzID0gZicnJ1NFTEVDVCAqIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfSBXSEVSRSB2ZXJpZmllZCA9IDEgIGFuZCAoc2VudCA8PiAxIG9yIHNlbnQgaXMgbnVsbCknJycKICAgICAgICBxdWVyeV9nb29kcyA9IGYnJydTRUxFQ1QgKiBGUk9NIHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0gV0hFUkUgKHNlbnQgPSAwIE9SIHNlbnQgaXMgTnVsbCknJycKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc19kb2NzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2NzLCBOb25lLCBUcnVlKQogICAgICAgICAgICByZXNfZ29vZHMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2dvb2RzLCBOb25lLCBUcnVlKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgZQogICAgICAgIGlmIG5vdCByZXNfZ29vZHM6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHNlbGYuZm9ybV9kYXRhX2Zvcl9yZXF1ZXN0KHJlc19kb2NzLCByZXNfZ29vZHMsIEZhbHNlKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiB1cGRhdGVfdXBsb2FkZWRfZG9jc19zdGF0dXMoZG9jX2luX3N0cik6CiAgICAgICAgcXRleHQgPSBmJ1VQREFURSBSU19kb2NzIFNFVCBzZW50ID0gMSAgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2luX3N0cn0pICcKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0KQoKICAgICAgICBxdGV4dCA9IGYnVVBEQVRFIFJTX2Fkcl9kb2NzIFNFVCBzZW50ID0gMSAgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2luX3N0cn0pICcKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0KQoKICAgICAgICBxdGV4dCA9IGYnVVBEQVRFIFJTX2RvY3NfdGFibGUgU0VUIHNlbnQgPSAxICBXSEVSRSBpZF9kb2MgaW4gKHtkb2NfaW5fc3RyfSkgJwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIHVwZGF0ZV9yc19kb2NzX3RhYmxlX3NlbnRfc3RhdHVzKHRhYmxlX3N0cmluZ19pZDogc3RyKToKICAgICAgICBxdGV4dCA9IGYnVVBEQVRFIFJTX2RvY3NfdGFibGUgU0VUIHNlbnQgPSAwICBXSEVSRSBpZCBpbiAoe3RhYmxlX3N0cmluZ19pZH0pICcKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0KQoKICAgIGRlZiBzZXRfZG9jX3N0YXR1c190b191cGxvYWQoc2VsZiwgZG9jX2lkKToKICAgICAgICBxdGV4dCA9IGYiVVBEQVRFIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0gU0VUIHNlbnQgPSAwLCB2ZXJpZmllZCA9IDAgIFdIRVJFIGlkX2RvYyA9ICd7ZG9jX2lkfSciCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCkKCiAgICBkZWYgdXBkYXRlX2RvY190YWJsZV9yb3coc2VsZiwgcm93X2lkLCBkYXRhKToKICAgICAgICBzZWxmLnByb3ZpZGVyLnRhYmxlX25hbWUgPSBzZWxmLmRldGFpbHNfdGFibGVfbmFtZQogICAgICAgIHNlbGYucHJvdmlkZXIudXBkYXRlKGRhdGE9ZGF0YSwgX2ZpbHRlcj17J2lkJzogcm93X2lkfSkKCiAgICBkZWYgX3NxbF9leGVjKHNlbGYsIHEsIHBhcmFtcywgdGFibGVfbmFtZT0nJyk6CiAgICAgICAgaWYgdGFibGVfbmFtZToKICAgICAgICAgICAgc2VsZi5wcm92aWRlci50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIGlmIGlzaW5zdGFuY2UocGFyYW1zLCBzdHIpOgogICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnNxbF9leGVjKHEsIHBhcmFtcykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnNxbF9leGVjX21hbnkocSwgcGFyYW1zKQoKICAgIGRlZiBfc3FsX3F1ZXJ5KHNlbGYsIHEsIHBhcmFtcywgdGFibGVfbmFtZT0nJyk6CiAgICAgICAgaWYgdGFibGVfbmFtZToKICAgICAgICAgICAgc2VsZi5wcm92aWRlci50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIHJldHVybiBzZWxmLnByb3ZpZGVyLnNxbF9xdWVyeShxLCBwYXJhbXMpCgoKY2xhc3MgQWRyRG9jU2VydmljZShEb2NTZXJ2aWNlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkb2NfaWQ9JycsIGN1cl9jZWxsPScnLCB0YWJsZV90eXBlID0gJ2luJyk6CiAgICAgICAgc2VsZi5kb2NfaWQgPSBkb2NfaWQKICAgICAgICBzZWxmLmRvY3NfdGFibGVfbmFtZSA9ICdSU19BZHJfZG9jcycKICAgICAgICBzZWxmLmRldGFpbHNfdGFibGVfbmFtZSA9ICdSU19hZHJfZG9jc190YWJsZScKICAgICAgICBzZWxmLmlzQWRyID0gVHJ1ZQogICAgICAgIHNlbGYuY3VycmVudF9jZWxsICA9IGN1cl9jZWxsCiAgICAgICAgc2VsZi50YWJsZV90eXBlID0gdGFibGVfdHlwZQogICAgICAgIHNlbGYucHJvdmlkZXIgPSBTcWxRdWVyeVByb3ZpZGVyKHNlbGYuZG9jc190YWJsZV9uYW1lLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X2N1cnJlbnRfY2VsbChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIGdldF9kb2NfZGV0YWlsc19kYXRhKHNlbGYsIGlkX2RvYz0nJywgY3VyQ2VsbD0nJykgLT4gbGlzdDoKICAgICAgICBxdWVyeV90ZXh0ID0gJycnU0VMRUNUCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLmlkLAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5pZF9kb2MsCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLmlkX2dvb2QsCiAgICAgICAgICAgIGlmbnVsbChSU19nb29kcy5uYW1lLCA6TnVsbFZhbHVlKSBhcyBnb29kX25hbWUsCiAgICAgICAgICAgIGlmbnVsbChSU19nb29kcy5jb2RlLCA6RW1wdHlTdHJpbmcpIGFzIGNvZGUsCiAgICAgICAgICAgIGlmbnVsbChSU19nb29kcy5hcnQsIDpFbXB0eVN0cmluZykgYXMgYXJ0LAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcywgOkVtcHR5U3RyaW5nKSBhcyBpZF9wcm9wZXJ0aWVzLAogICAgICAgICAgICBpZm51bGwoUlNfcHJvcGVydGllcy5uYW1lLCA6RW1wdHlTdHJpbmcpIGFzIHByb3BlcnRpZXNfbmFtZSwKICAgICAgICAgICAgaWZudWxsKFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3NlcmllcywgOkVtcHR5U3RyaW5nKSBhcyBpZF9zZXJpZXMsCiAgICAgICAgICAgIGlmbnVsbChSU19zZXJpZXMubmFtZSwgOkVtcHR5U3RyaW5nKSBhcyBzZXJpZXNfbmFtZSwKICAgICAgICAgICAgaWZudWxsKFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3VuaXQsIDpFbXB0eVN0cmluZykgYXMgaWRfdW5pdCwKICAgICAgICAgICAgaWZudWxsKFJTX3VuaXRzLm5hbWUsIDpFbXB0eVN0cmluZykgYXMgdW5pdHNfbmFtZSwKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUucXR0eSBhcyBxdHR5LAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5xdHR5X3BsYW4gYXMgcXR0eV9wbGFuLAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5xdHR5X3BsYW4gLSBSU19hZHJfZG9jc190YWJsZS5xdHR5IGFzIElzRG9uZSwKICAgICAgICAgICAgaWZudWxsKFJTX2Fkcl9kb2NzX3RhYmxlLmlkX2NlbGwsIDpFbXB0eVN0cmluZykgYXMgaWRfY2VsbCwKICAgICAgICAgICAgaWZudWxsKFJTX2NlbGxzLm5hbWUsIDpOdWxsVmFsdWUpIGFzIGNlbGxfbmFtZQogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIEZST00gUlNfYWRyX2RvY3NfdGFibGUgCgogICAgICAgICAgICBMRUZUIEpPSU4gUlNfZ29vZHMgCiAgICAgICAgICAgIE9OIFJTX2dvb2RzLmlkPVJTX2Fkcl9kb2NzX3RhYmxlLmlkX2dvb2QKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3Byb3BlcnRpZXMKICAgICAgICAgICAgT04gUlNfcHJvcGVydGllcy5pZCA9IFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXMKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3NlcmllcwogICAgICAgICAgICBPTiBSU19zZXJpZXMuaWQgPSBSU19hZHJfZG9jc190YWJsZS5pZF9zZXJpZXMKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkPVJTX2Fkcl9kb2NzX3RhYmxlLmlkX3VuaXQKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX2NlbGxzCiAgICAgICAgICAgIE9OIFJTX2NlbGxzLmlkPVJTX2Fkcl9kb2NzX3RhYmxlLmlkX2NlbGwKCiAgICAgICAgICAgIFdIRVJFIGlkX2RvYyA9IDppZF9kb2MgYW5kIHRhYmxlX3R5cGUgPSA6dGFibGVfdHlwZQogICAgICAgICAgICAKICAgICAgICAgICAgJycnCgogICAgICAgIGlmIGN1ckNlbGw6CiAgICAgICAgICAgIHF1ZXJ5X3RleHQgPSBxdWVyeV90ZXh0ICsgJycnCiAgICAgICAgICAgICBhbmQgKGlkX2NlbGw9OmN1cnJlbnRfY2VsbCBPUiBpZF9jZWxsPSIiIE9SIGlkX2NlbGwgaXMgTnVsbCkKICAgICAgICAgICAgJycnCgogICAgICAgIHF1ZXJ5X3RleHQgPSBxdWVyeV90ZXh0ICsgJyBPUkRFUiBCWSBSU19jZWxscy5uYW1lLCBSU19hZHJfZG9jc190YWJsZS5sYXN0X3VwZGF0ZWQgREVTQycKICAgICAgICAjc2VsZi50YWJsZV90eXBlID0gJ291dCcgICMqKioqKiog0J7QotCb0JDQlNCe0KfQndCe0JUKICAgICAgICBwYXJhbXNfZGljdCA9IHsnaWRfZG9jJzppZF9kb2MsICdOdWxsVmFsdWUnOk5vbmUsICdFbXB0eVN0cmluZyc6JycsICd0YWJsZV90eXBlJzpzZWxmLnRhYmxlX3R5cGV9CiAgICAgICAgaWYgY3VyQ2VsbDoKICAgICAgICAgICAgcGFyYW1zX2RpY3RbJ2N1cnJlbnRfY2VsbCddID0gY3VyQ2VsbAogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgcGFyYW1zX2RpY3QsIHJldHVybl9kaWN0PVRydWUpCiAgICAgICAgcmV0dXJuIHJlcwogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmLCBpZF9kb2MpOgogICAgICAgIHF1ZXJ5X3RleHQgPSAoJ1VwZGF0ZSBSU19hZHJfZG9jc190YWJsZSBTZXQgcXR0eSA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgICAgICAgICAgICAgICAgICAgJ0RlbGV0ZSBGcm9tIFJTX2Fkcl9kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz06aWRfZG9jIGFuZCBpc19wbGFuID0gIkZhbHNlIicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgZWwgaW4gcXVlcnlfdGV4dDoKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6IGlkX2RvY30pKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogRmFsc2UsICdlcnJvcic6IGUuYXJnc1swXX0KCiAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogVHJ1ZSwgJ2Vycm9yJzogJyd9CgpjbGFzcyBHb29kc1NlcnZpY2U6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXRlbV9pZD0nJyk6CiAgICAgICAgc2VsZi5pdGVtX2lkID0gaXRlbV9pZAoKICAgIGRlZiBnZXRfdHlwZV9uYW1lX2J5X2lkKHNlbGYsIGlkKToKICAgICAgICBxdWVyeV90ZXh0ID0gZiJTRUxFQ1QgbmFtZSBGUk9NIFJTX3R5cGVzX2dvb2RzIFdIRVJFIGlkID0ne2lkfSciCiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgcmV0dXJuX2RpY3Q9VHJ1ZSkKCiAgICBkZWYgZ2V0X2dvb2RzX2xpc3RfZGF0YShzZWxmLCBnb29kc190eXBlPScnLCBpdGVtX2lkPScnKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5X3RleHQgPSBmIiIiCiAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICBSU19nb29kcy5pZCwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmNvZGUsICfigJQnKSBhcyBjb2RlLAogICAgICAgICAgICBSU19nb29kcy5uYW1lLAogICAgICAgICAgICBSU19nb29kcy5hcnQsCiAgICAgICAgICAgIGlmbnVsbChSU191bml0cy5uYW1lLCfigJQnKSBhcyB1bml0LAogICAgICAgICAgICBpZm51bGwoUlNfdHlwZXNfZ29vZHMubmFtZSwgJ+KAlCcpIGFzIHR5cGVfZ29vZCwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmRlc2NyaXB0aW9uLCfigJQnKSBhcyBkZXNjcmlwdGlvbgogICAgICAgICAgICAKICAgICAgICAgICAgRlJPTSBSU19nb29kcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfdHlwZXNfZ29vZHMKICAgICAgICAgICAgT04gUlNfdHlwZXNfZ29vZHMuaWQgPSBSU19nb29kcy50eXBlX2dvb2QKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkID0gUlNfZ29vZHMudW5pdAogICAgICAgICAgICAiIiIKICAgICAgICB3aGVyZSA9ICcnIGlmIG5vdCBnb29kc190eXBlIGVsc2UgJ1dIRVJFIFJTX2dvb2RzLnR5cGVfZ29vZD0/JwogICAgICAgIGlmIHdoZXJlID09ICcnIGFuZCBpdGVtX2lkOgogICAgICAgICAgICB3aGVyZSArPSAnV0hFUkUgUlNfZ29vZHMuaWQ9PycKCiAgICAgICAgcXVlcnlfdGV4dCA9IGYnJycKICAgICAgICAgICAgICAgICAgICB7cXVlcnlfdGV4dH0KICAgICAgICAgICAgICAgICAgICB7d2hlcmV9CiAgICAgICAgICAgICAgICAgICAgT1JERVIgQlkgUlNfZ29vZHMuaWQKICAgICAgICAgICAgICAgICcnJwoKICAgICAgICBpZiBnb29kc190eXBlOgogICAgICAgICAgICBhcmdzID0gKGdvb2RzX3R5cGUsKQogICAgICAgIGVsaWYgaXRlbV9pZDoKICAgICAgICAgICAgYXJncyA9IChpdGVtX2lkLCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBhcmdzID0gTm9uZQoKICAgICAgICAjIGFyZ3MgPSAoZ29vZHNfdHlwZSwpIGlmIGdvb2RzX3R5cGUgZWxzZSBOb25lCgogICAgICAgIHJlc3VsdCA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgYXJncywgcmV0dXJuX2RpY3Q9VHJ1ZSkKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIGdldF9hbGxfZ29vZHNfdHlwZXNfZGF0YShzZWxmKToKICAgICAgICBxdWVyeV90ZXh0X2FsbF90eXBlcyA9ICdTRUxFQ1QgaWQsbmFtZSBGUk9NIFJTX3R5cGVzX2dvb2RzJwogICAgICAgIHJldHVybiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHRfYWxsX3R5cGVzLCByZXR1cm5fZGljdD1UcnVlKQoKICAgIGRlZiBnZXRfdmFsdWVzX2Zyb21fYmFyY29kZShzZWxmLCBpZGVudGlmeV9maWVsZDogc3RyLCBpZGVudGlmeV92YWx1ZTogc3RyKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5X3RleHQgPSBmIiIiCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUCiAgICAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF9nb29kLAogICAgICAgICAgICAgICAgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgICAgICBpZm51bGwoUlNfc2VyaWVzLm5hbWUsICcnKSBhcyBzZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgaWZudWxsKFJTX3VuaXRzLm5hbWUsICcnKSBhcyB1bml0CiAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgIEZST00gUlNfYmFyY29kZXMKICAgICAgICAgICAgICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgICAgICAgICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPSBSU19iYXJjb2Rlcy5pZF9wcm9wZXJ0eQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU191bml0cwogICAgICAgICAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkID0gUlNfYmFyY29kZXMuaWRfdW5pdAogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19zZXJpZXMKICAgICAgICAgICAgICAgICAgICBPTiBSU19zZXJpZXMuaWQgPSBSU19iYXJjb2Rlcy5pZF9zZXJpZXMKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBXSEVSRSB7aWRlbnRpZnlfZmllbGR9ID0gJ3tpZGVudGlmeV92YWx1ZX0nCiAgICAgICAgICAgICAgICAgICAgIiIiCgogICAgICAgIHJldHVybiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIHJldHVybl9kaWN0PVRydWUpCgogICAgZGVmIGdldF9uYW1lX2J5X2ZpZWxkKHNlbGYsIHRhYmxlX25hbWUsIGZpZWxkLCBmaWVsZF92YWx1ZSk6CiAgICAgICAgcXVlcnlfdGV4dCA9IGYiU0VMRUNUIG5hbWUgRlJPTSB7dGFibGVfbmFtZX0gV0hFUkUge2ZpZWxkfSA9ICd7ZmllbGRfdmFsdWV9JyIKICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCByZXR1cm5fZGljdD1UcnVlKVswXVsnbmFtZSddCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9Tm9uZSwgcmV0dXJuX2RpY3Q9RmFsc2UpOgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9YXJncywgcmV0dXJuX2RpY3Q9cmV0dXJuX2RpY3QpCgoKY2xhc3MgRGJDcmVhdG9yOgogICAgZGVmIGNyZWF0ZV90YWJsZXMoc2VsZik6CiAgICAgICAgaW1wb3J0IGRhdGFiYXNlX2luaXRfcXVlcnllcwogICAgICAgICMg0KHQvtC30LTQsNC10Lwg0YLQsNCx0LvQuNGG0Ysg0LXRgdC70Lgg0LjRhSDQvdC10YIKICAgICAgICBzY2hlbWEgPSBkYXRhYmFzZV9pbml0X3F1ZXJ5ZXMuZGF0YWJhc2Vfc2hlbWEoKQogICAgICAgIGZvciBlbCBpbiBzY2hlbWE6CiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwpCgoKY2xhc3MgRXJyb3JTZXJ2aWNlOgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGdldF9hbGxfZXJyb3JzKGRhdGVfc29ydCk6CiAgICAgICAgc29ydCA9ICJERVNDIiBpZiBub3QgZGF0ZV9zb3J0IG9yIGRhdGVfc29ydCA9PSAi0J3QvtCy0YvQtSIgZWxzZSAiQVNDIgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KGYiU0VMRUNUICogRlJPTSBFcnJvcl9sb2cgT1JERVIgQlkgdGltZXN0YW1wIHtzb3J0fSIpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGNsZWFyKCk6CiAgICAgICAgcmV0dXJuIGdldF9xdWVyeV9yZXN1bHQoIkRFTEVURSBGUk9NIEVycm9yX2xvZyIpCgoKY2xhc3MgU3FsUXVlcnlQcm92aWRlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0YWJsZV9uYW1lLCBzcWxfY2xhc3M9Tm9uZSk6CiAgICAgICAgc2VsZi50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIHNlbGYuc3FsID0gc3FsX2NsYXNzCiAgICAgICAgc2VsZi5zcWxfdGV4dCA9ICcnCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gTm9uZQogICAgICAgIHNlbGYuZGVidWcgPSBGYWxzZQoKICAgIGRlZiBjcmVhdGUoc2VsZiwgZGF0YSk6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKGRhdGEpCgogICAgICAgIHJldHVybiBzZWxmLl9leGVjX2NyZWF0ZSgKICAgICAgICAgICAgY29sdW1ucz1xdWVyeV9kYXRhWydjb2x1bW5zJ10sCiAgICAgICAgICAgIHBhcmFtcz1xdWVyeV9kYXRhWydwYXJhbXMnXQogICAgICAgICkKCiAgICBkZWYgcmVwbGFjZShzZWxmLCBkYXRhKToKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHF1ZXJ5X2RhdGEgPSBzZWxmLl9jb252ZXJ0X3F1ZXJ5X2RhdGEoZGF0YSkKCiAgICAgICAgcmV0dXJuIHNlbGYuX2V4ZWNfcmVwbGFjZSgKICAgICAgICAgICAgY29sdW1ucz1xdWVyeV9kYXRhWydjb2x1bW5zJ10sCiAgICAgICAgICAgIHBhcmFtcz1xdWVyeV9kYXRhWydwYXJhbXMnXQogICAgICAgICkKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGEsIF9maWx0ZXI9Tm9uZSk6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB3aGVyZSA9IE5vbmUKICAgICAgICBmaWx0ZXJfZGF0YSA9IFtdCiAgICAgICAgaWYgX2ZpbHRlcjoKICAgICAgICAgICAgd2hlcmUgPSBsaXN0KF9maWx0ZXIpCiAgICAgICAgICAgIGZpbHRlcl9kYXRhID0gbGlzdChfZmlsdGVyLnZhbHVlcygpKQoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKGRhdGEsIGZpbHRlcl9kYXRhPWZpbHRlcl9kYXRhKQoKICAgICAgICByZXR1cm4gc2VsZi5fZXhlY191cGRhdGUoCiAgICAgICAgICAgIGNvbHVtbnM9cXVlcnlfZGF0YVsnY29sdW1ucyddLAogICAgICAgICAgICBwYXJhbXM9cXVlcnlfZGF0YVsncGFyYW1zJ10sCiAgICAgICAgICAgIHdoZXJlPXdoZXJlCiAgICAgICAgKQoKICAgIGRlZiBkZWxldGUoc2VsZiwgX2ZpbHRlcj1Ob25lKToKICAgICAgICB3aGVyZSA9IE5vbmUKICAgICAgICBmaWx0ZXJfZGF0YSA9IFtdCiAgICAgICAgaWYgX2ZpbHRlcjoKICAgICAgICAgICAgd2hlcmUgPSBsaXN0KF9maWx0ZXIpCiAgICAgICAgICAgIGZpbHRlcl9kYXRhID0gbGlzdChfZmlsdGVyLnZhbHVlcygpKQoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKHt9LCBmaWx0ZXJfZGF0YT1maWx0ZXJfZGF0YSkKCiAgICAgICAgcmV0dXJuIHNlbGYuX2V4ZWNfZGVsZXRlKAogICAgICAgICAgICBwYXJhbXM9cXVlcnlfZGF0YVsncGFyYW1zJ10sCiAgICAgICAgICAgIHdoZXJlPXdoZXJlCiAgICAgICAgKQoKICAgIGRlZiBzZWxlY3Qoc2VsZiwgX2ZpbHRlcj1Ob25lKToKICAgICAgICB3aGVyZSA9IE5vbmUKICAgICAgICBwYXJhbXMgPSAnJwogICAgICAgIGlmIF9maWx0ZXI6CiAgICAgICAgICAgIHdoZXJlID0gbGlzdChfZmlsdGVyKQogICAgICAgICAgICBwYXJhbXMgPSBbc3RyKHYpIGZvciB2IGluIF9maWx0ZXIudmFsdWVzKCldCgogICAgICAgIHJldHVybiBzZWxmLl9leGVjX3NlbGVjdCgKICAgICAgICAgICAgcGFyYW1zPXBhcmFtcywKICAgICAgICAgICAgd2hlcmU9d2hlcmUsCiAgICAgICAgKQoKICAgIGRlZiBfZXhlY19jcmVhdGUoc2VsZiwgY29sdW1ucywgcGFyYW1zKToKICAgICAgICBzdHJfdmFsdWVzID0gJywnLmpvaW4oJz8nICogbGVuKGNvbHVtbnMpKQoKICAgICAgICBxID0gZidJTlNFUlQgSU5UTyB7c2VsZi50YWJsZV9uYW1lfSBWQUxVRVMgKHtzdHJfdmFsdWVzfSknCgogICAgICAgIHBhcmFtcyA9IGpzb24uZHVtcHMocGFyYW1zLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICAgICAgcmV0dXJuIHNlbGYuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9leGVjX3JlcGxhY2Uoc2VsZiwgY29sdW1ucywgcGFyYW1zKToKICAgICAgICBzdHJfY29sdW1ucyA9ICcsICcuam9pbihjb2x1bW5zKQogICAgICAgIHN0cl92YWx1ZXMgPSAnLCcuam9pbignPycgKiBsZW4oY29sdW1ucykpCgogICAgICAgIHEgPSBmJ1JFUExBQ0UgSU5UTyB7c2VsZi50YWJsZV9uYW1lfSAoe3N0cl9jb2x1bW5zfSkgVkFMVUVTICh7c3RyX3ZhbHVlc30pJwoKICAgICAgICBwYXJhbXMgPSBqc29uLmR1bXBzKHBhcmFtcywgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgICAgIHJldHVybiBzZWxmLnNxbF9leGVjX21hbnkocSwgcGFyYW1zKQoKICAgIGRlZiBfZXhlY191cGRhdGUoc2VsZiwgY29sdW1ucywgcGFyYW1zLCB3aGVyZT1Ob25lKToKICAgICAgICBpZiB3aGVyZToKICAgICAgICAgICAgc3RyX3doZXJlID0gJyBhbmQgJy5qb2luKFtmJ3trZXl9PT8nIGZvciBrZXkgaW4gd2hlcmVdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0cl93aGVyZSA9ICd0cnVlJwoKICAgICAgICBzdHJfdmFsdWVzID0gJywgJy5qb2luKFtmJ3tuYW1lfT0/JyBmb3IgbmFtZSBpbiBjb2x1bW5zXSkKCiAgICAgICAgcSA9IGYnVVBEQVRFIHtzZWxmLnRhYmxlX25hbWV9IFNFVCB7c3RyX3ZhbHVlc30gV0hFUkUge3N0cl93aGVyZX0nCgogICAgICAgIHBhcmFtcyA9IGpzb24uZHVtcHMocGFyYW1zLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICAgICAgcmV0dXJuIHNlbGYuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9leGVjX2RlbGV0ZShzZWxmLCBwYXJhbXMsIHdoZXJlPU5vbmUpOgogICAgICAgIGlmIHdoZXJlOgogICAgICAgICAgICBzdHJfd2hlcmUgPSAnIGFuZCAnLmpvaW4oW2Yne2tleX09PycgZm9yIGtleSBpbiB3aGVyZV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RyX3doZXJlID0gJ3RydWUnCgogICAgICAgIHEgPSBmJ0RFTEVURSBGUk9NIHtzZWxmLnRhYmxlX25hbWV9IFdIRVJFIHtzdHJfd2hlcmV9JwoKICAgICAgICBwYXJhbXMgPSBqc29uLmR1bXBzKHBhcmFtcywgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgICAgIHJldHVybiBzZWxmLnNxbF9leGVjX21hbnkocSwgcGFyYW1zKQoKICAgIGRlZiBfZXhlY19zZWxlY3Qoc2VsZiwgcGFyYW1zLCB3aGVyZT1Ob25lKToKICAgICAgICBpZiB3aGVyZToKICAgICAgICAgICAgc3RyX3doZXJlID0gJyBhbmQgJy5qb2luKFtmJ3trZXl9PT8nIGZvciBrZXkgaW4gd2hlcmVdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0cl93aGVyZSA9ICd0cnVlJwoKICAgICAgICBxID0gZidTRUxFQ1QgKiBGUk9NIHtzZWxmLnRhYmxlX25hbWV9IFdIRVJFIHtzdHJfd2hlcmV9JwoKICAgICAgICBwYXJhbXMgPSAnLCAnLmpvaW4ocGFyYW1zKQogICAgICAgIHJldHVybiBzZWxmLnNxbF9xdWVyeShxLCBwYXJhbXMpCgogICAgZGVmIHNxbF9leGVjX21hbnkoc2VsZiwgcSwgcGFyYW1zKToKICAgICAgICBzZWxmLnNxbF90ZXh0ID0gcQogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHBhcmFtcwoKICAgICAgICBpZiBub3Qgc2VsZi5kZWJ1ZzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3FsLlNRTEV4ZWNNYW55KHEsIHBhcmFtcykKCiAgICBkZWYgc3FsX2V4ZWMoc2VsZiwgcSwgcGFyYW1zKToKICAgICAgICBzZWxmLnNxbF90ZXh0ID0gcQogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHBhcmFtcwoKICAgICAgICBpZiBub3Qgc2VsZi5kZWJ1ZzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3FsLlNRTEV4ZWMocSwgcGFyYW1zPXBhcmFtcykKCiAgICBkZWYgc3FsX3F1ZXJ5KHNlbGYsIHEsIHBhcmFtczogc3RyKToKICAgICAgICBzZWxmLnNxbF90ZXh0ID0gcQogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHBhcmFtcwoKICAgICAgICBpZiBub3Qgc2VsZi5kZWJ1ZzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3FsLlNRTFF1ZXJ5KHEsIHBhcmFtcykKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2NvbnZlcnRfcXVlcnlfZGF0YShkYXRhLCBmaWx0ZXJfZGF0YT1Ob25lKToKICAgICAgICBjb2x1bW5zID0gW10KICAgICAgICBwYXJhbXMgPSBbXQogICAgICAgIGlmIG5vdCBmaWx0ZXJfZGF0YToKICAgICAgICAgICAgZmlsdGVyX2RhdGEgPSBbXQoKICAgICAgICBpZiBpc2luc3RhbmNlKGRhdGEsIGxpc3QpOgogICAgICAgICAgICBjb2x1bW5zID0gbGlzdChkYXRhWzBdKQogICAgICAgICAgICBmb3Igcm93IGluIGRhdGE6CiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFt2IGZvciB2IGluIHJvdy52YWx1ZXMoKV0gKyBmaWx0ZXJfZGF0YSkKICAgICAgICBlbGlmIGlzaW5zdGFuY2UoZGF0YSwgZGljdCk6CiAgICAgICAgICAgIGNvbHVtbnMgPSBsaXN0KGRhdGEpCiAgICAgICAgICAgIHBhcmFtcyA9IFtbdiBmb3IgdiBpbiBkYXRhLnZhbHVlcygpXSArIGZpbHRlcl9kYXRhXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIFZhbHVlRXJyb3IoZidkYXRhIG11c3QgYmUgbGlzdCBvciBkaWN0LCBub3Qge3R5cGUoZGF0YSl9JykKCiAgICAgICAgcmV0dXJuIHsnY29sdW1ucyc6IGNvbHVtbnMsICdwYXJhbXMnOiBwYXJhbXN9Cgo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\hs_services.py",
                "PyFileKey": "hs_services",
                "PyFileData": "aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGRzCmZyb20gcmVxdWVzdHMuYXV0aCBpbXBvcnQgSFRUUEJhc2ljQXV0aApmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwKCgpjbGFzcyBIc1NlcnZpY2U6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaHR0cF9wYXJhbXMpOgogICAgICAgIHNlbGYudXJsID0gaHR0cF9wYXJhbXNbJ3VybCddCiAgICAgICAgc2VsZi51c2VybmFtZSA9IGh0dHBfcGFyYW1zWyd1c2VyJ10KICAgICAgICBzZWxmLnBhc3N3b3JkID0gaHR0cF9wYXJhbXNbJ3Bhc3MnXQogICAgICAgIHNlbGYuYW5kcm9pZF9pZCA9IGh0dHBfcGFyYW1zWydhbmRyb2lkX2lkJ10KICAgICAgICBzZWxmLmRldmljZV9tb2RlbCA9IGh0dHBfcGFyYW1zWydkZXZpY2VfbW9kZWwnXQogICAgICAgIHNlbGYudXNlcl9uYW1lID0gaHR0cF9wYXJhbXNbJ3VzZXJfbmFtZSddCiAgICAgICAgc2VsZi5wYXJhbXMgPSB7J3VzZXJfbmFtZSc6IHNlbGYudXNlcl9uYW1lLCAnZGV2aWNlX21vZGVsJzogc2VsZi5kZXZpY2VfbW9kZWx9CiAgICAgICAgc2VsZi5faHMgPSAnJwogICAgICAgIHNlbGYuX21ldGhvZCA9IHJlcXVlc3RzLmdldAogICAgICAgIHNlbGYuYXV0aCA9IEhUVFBCYXNpY0F1dGgoc2VsZi51c2VybmFtZSwgc2VsZi5wYXNzd29yZCkKICAgICAgICBzZWxmLmhlYWRlcnMgPSB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnfQogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXI6IE9wdGlvbmFsW0hzU2VydmljZS5IdHRwQW5zd2VyXSA9IE5vbmUKCiAgICBkZWYgZ2V0X2RhdGEoc2VsZiwgKiprd2FyZ3MpIC0+IGRpY3Q6CiAgICAgICAgc2VsZi5faHMgPSAnZGF0YScKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5nZXQKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQoKICAgICAgICBpZiBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgogICAgICAgICAgICBqc29uX2RhdGEgPSBqc29uLmxvYWRzKGFuc3dlclsndGV4dCddKQogICAgICAgICAgICBmb3JtYXRfZGF0YSA9IGpzb25fZGF0YS5nZXQoJ2Zvcm1hdCcpCgogICAgICAgICAgICBpZiBmb3JtYXRfZGF0YToKICAgICAgICAgICAgICAgIGFuc3dlclsnZm9ybWF0J10gPSBmb3JtYXRfZGF0YQogICAgICAgICAgICAgICAgaWYgJ2lzX29rJyA9PSBmb3JtYXRfZGF0YSBhbmQganNvbl9kYXRhLmdldCgnYmF0Y2gnKToKICAgICAgICAgICAgICAgICAgICAjINCd0LDRiCDQt9Cw0L/RgNC+0YEg0L/RgNC40L3Rj9GCLCDQvdC+INCy0LXRgNC90YPRgtGMINC/0L7QutCwINC90LXRh9C10LPQvi4g0JTQsNC90L3Ri9C1INC40LvQuCDQs9C+0YLQvtCy0Y/RgtGB0Y8g0LjQu9C4INC40YUg0L3QtdGCCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyWydiYXRjaCddID0ganNvbl9kYXRhLmdldCgnYmF0Y2gnKQoKICAgICAgICAgICAgICAgIGVsaWYgZm9ybWF0X2RhdGEgPT0gJ2lzX2RhdGEnOgogICAgICAgICAgICAgICAgICAgIGFuc3dlclsnZGF0YSddID0ganNvbl9kYXRhWydkYXRhJ10KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFuc3dlclsnZm9ybWF0J10gPSBOb25lCiAgICAgICAgZWxpZiBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPT0gNDAxOgogICAgICAgICAgICBwcmludChhbnN3ZXIpCiAgICAgICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddID0gYW5zd2VyWydyZWFzb24nXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddID0gYW5zd2VyLmdldCgndGV4dCcpCgogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQogICAgICAgIHJldHVybiBhbnN3ZXIKCiAgICBkZWYgcmVzZXRfZXhjaGFuZ2Uoc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuX2hzID0gJ3Jlc2V0X2V4Y2hhbmdlJwogICAgICAgIHNlbGYuX21ldGhvZCA9IHJlcXVlc3RzLnBvc3QKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQogICAgICAgIHJldHVybiBhbnN3ZXIKCiAgICBkZWYgY3JlYXRlX21lc3NhZ2VzKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgY29tbXVuaWNhdGlvbl90ZXN0KHNlbGYsICoqa3dhcmdzKSAtPiBkaWN0OgogICAgICAgIHNlbGYuX2hzID0gJ2NvbW11bmljYXRpb25fdGVzdCcKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5nZXQKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQogICAgICAgIHJldHVybiBhbnN3ZXIKCiAgICBkZWYgZ2V0X2JhbGFuY2VzX2dvb2RzKHNlbGYsIHdhcmVob3VzZXM9RmFsc2UsIGNlbGxzPUZhbHNlKToKICAgICAgICBwYXNzCgogICAgZGVmIGdldF9wcmljZXNfZ29vZHMoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzZW5kX2RvY3VtZW50cyhzZWxmLCBkYXRhLCAqKmt3YXJncykgLT4gZGljdDoKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuIHsnZW1wdHknOiBUcnVlfQoKICAgICAgICBrd2FyZ3NbJ2RhdGEnXSA9IGRhdGEgaWYgaXNpbnN0YW5jZShkYXRhLCBzdHIpIGVsc2UganNvbi5kdW1wcyhkYXRhKQogICAgICAgIHNlbGYuX2hzID0gJ2RvY3VtZW50cycKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5wb3N0CgogICAgICAgIGFuc3dlciA9IHNlbGYuX3NlbmRfcmVxdWVzdChrd2FyZ3MpCiAgICAgICAgc2VsZi5odHRwX2Fuc3dlciA9IHNlbGYuX2NyZWF0ZV9odHRwX2Fuc3dlcihhbnN3ZXIpCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBfc2VuZF9yZXF1ZXN0KHNlbGYsIGt3YXJncykgLT4gZGljdDoKICAgICAgICBhbnN3ZXIgPSB7J2VtcHR5JzogVHJ1ZX0KICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSBzZWxmLl9tZXRob2QoZid7c2VsZi51cmx9L3NpbXBsZV9hY2NvdW50aW5nL3tzZWxmLl9oc30/YW5kcm9pZF9pZD17c2VsZi5hbmRyb2lkX2lkfScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aD1zZWxmLmF1dGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1zZWxmLmhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zPXNlbGYucGFyYW1zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqa3dhcmdzKQoKICAgICAgICAgICAgYW5zd2VyWydzdGF0dXNfY29kZSddID0gci5zdGF0dXNfY29kZQogICAgICAgICAgICBhbnN3ZXJbJ3VybCddID0gci51cmwKICAgICAgICAgICAgYW5zd2VyWydyZWFzb24nXSA9IHIucmVhc29uCiAgICAgICAgICAgIGFuc3dlclsndGV4dCddID0gci50ZXh0LmVuY29kZSgidXRmLTgiKQoKICAgICAgICAgICAgaWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ2VtcHR5J10gPSBGYWxzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYW5zd2VyWydFcnJvciddID0gci5yZWFzb24KICAgICAgICAgICAgICAgIGFuc3dlclsncmVhc29uJ10gPSByLnJlYXNvbgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgZQogICAgICAgICAgICAjIGFuc3dlclsnRXJyb3InXSA9IGUuYXJnc1swXQoKICAgICAgICByZXR1cm4gYW5zd2VyCgogICAgZGVmIF9jcmVhdGVfaHR0cF9hbnN3ZXIoc2VsZiwgYW5zd2VyOiBkaWN0KToKICAgICAgICBhbnN3ZXJfZGF0YSA9IHsKICAgICAgICAgICAgJ3N0YXR1c19jb2RlJzogYW5zd2VyLmdldCgnc3RhdHVzX2NvZGUnKSwKICAgICAgICAgICAgJ3VybCc6IGFuc3dlci5nZXQoJ3VybCcpLAogICAgICAgIH0KCiAgICAgICAgaWYgYW5zd2VyX2RhdGFbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgogICAgICAgICAgICBhbnN3ZXJfZGF0YVsnZGF0YSddID0gYW5zd2VyLmdldCgnZGF0YScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYW5zd2VyX2RhdGFbJ2Vycm9yX3RleHQnXSA9IGFuc3dlci5nZXQoJ0Vycm9yJykgb3IgYW5zd2VyLmdldCgnZXJyb3InKQogICAgICAgICAgICBpZiBhbnN3ZXJfZGF0YVsnc3RhdHVzX2NvZGUnXSA9PSA0MDE6CiAgICAgICAgICAgICAgICBhbnN3ZXJfZGF0YVsndW5hdXRob3JpemVkJ10gPSBUcnVlCiAgICAgICAgICAgIGVsaWYgYW5zd2VyX2RhdGFbJ3N0YXR1c19jb2RlJ10gPT0gNDAzOgogICAgICAgICAgICAgICAgZXJyb3JfdGV4dCA9ICcnCiAgICAgICAgICAgICAgICBpZiBhbnN3ZXIuZ2V0KCd0ZXh0Jyk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBqc29uX3Jlc3VsdCA9IGpzb24ubG9hZHMoYW5zd2VyWyd0ZXh0J10pCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX3RleHQgPSBqc29uX3Jlc3VsdC5nZXQoJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX3RleHQgPSBhbnN3ZXJbJ3RleHQnXS5kZWNvZGUoKQoKICAgICAgICAgICAgICAgIGFuc3dlcl9kYXRhWydlcnJvcl90ZXh0J10gPSBlcnJvcl90ZXh0CiAgICAgICAgICAgICAgICBhbnN3ZXJfZGF0YVsnZm9yYmlkZGVuJ10gPSBUcnVlCgogICAgICAgIHJldHVybiBzZWxmLkh0dHBBbnN3ZXIoKiphbnN3ZXJfZGF0YSkKCiAgICBAZGF0YWNsYXNzCiAgICBjbGFzcyBIdHRwQW5zd2VyOgogICAgICAgIHVybDogc3RyCiAgICAgICAgc3RhdHVzX2NvZGU6IGludAogICAgICAgIGVycm9yX3RleHQ6IE9wdGlvbmFsW3N0cl0gPSAnJwogICAgICAgIGRhdGE6IE9wdGlvbmFsID0gTm9uZQogICAgICAgIHVuYXV0aG9yaXplZDogYm9vbCA9IEZhbHNlCiAgICAgICAgZm9yYmlkZGVuOiBib29sID0gRmFsc2UKICAgICAgICBlcnJvcjogYm9vbCA9IEZhbHNlCgoKY2xhc3MgRGVidWdTZXJ2aWNlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGlwX2hvc3QsIHBvcnQ9MjQ0NCk6CiAgICAgICAgc2VsZi5pcF9ob3N0ID0gaXBfaG9zdAogICAgICAgIHNlbGYucG9ydCA9IHBvcnQKICAgICAgICBzZWxmLnVybCA9IGYnaHR0cDovL3tzZWxmLmlwX2hvc3R9OntzZWxmLnBvcnR9JwogICAgICAgIHNlbGYuX2hzID0gJycKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5wb3N0CgogICAgZGVmIGV4cG9ydF9kYXRhYmFzZShzZWxmLCBmaWxlKToKICAgICAgICBzZWxmLl9ocyA9ICdwb3N0JwogICAgICAgIHJldHVybiBzZWxmLl9zZW5kX3JlcXVlc3QoeydmaWxlcyc6IHsnUmlnaHRzY2FuJzogZmlsZX19KQoKICAgIGRlZiBleHBvcnRfbG9nKHNlbGYsIGRhdGEpOgogICAgICAgIHNlbGYuX2hzID0gJ3VubG9hZF9sb2cnCiAgICAgICAgcmV0dXJuIHNlbGYuX3NlbmRfcmVxdWVzdCh7J2pzb24nOiBqc29uLmR1bXBzKGRhdGEpfSkKCiAgICBkZWYgX3NlbmRfcmVxdWVzdChzZWxmLCBrd2FyZ3MpIC0+IGRpY3Q6CiAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWV9CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gc2VsZi5fbWV0aG9kKGYne3NlbGYudXJsfS97c2VsZi5faHN9JywgKiprd2FyZ3MpCgogICAgICAgICAgICBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPSByLnN0YXR1c19jb2RlCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgYW5zd2VyWydlbXB0eSddID0gRmFsc2UKICAgICAgICAgICAgICAgIGFuc3dlclsndGV4dCddID0gci50ZXh0LmVuY29kZSgidXRmLTgiKQogICAgICAgICAgICAgICAgYW5zd2VyWydyZWFzb24nXSA9IHIucmVhc29uCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ0Vycm9yJ10gPSByLnRleHQKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIGUKCiAgICAgICAgcmV0dXJuIGFuc3dlcgo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\http_exchange.py",
                "PyFileKey": "http_exchange",
                "PyFileData": "aW1wb3J0IGlwYWRkcmVzcwppbXBvcnQganNvbgppbXBvcnQgcmVxdWVzdHMKZnJvbSByZXF1ZXN0cy5hdXRoIGltcG9ydCBIVFRQQmFzaWNBdXRoCiNpbXBvcnQgdGltZQppbXBvcnQgdWlfYmFyY29kZXMKCmltcG9ydCB1aV9nbG9iYWwKZnJvbSBoc19zZXJ2aWNlcyBpbXBvcnQgSHNTZXJ2aWNlCmZyb20gZGJfc2VydmljZXMgaW1wb3J0IERvY1NlcnZpY2UKZnJvbSB1aV9nbG9iYWwgaW1wb3J0IGdldF9xdWVyeV9yZXN1bHQKCmRlZiByZXBsYXNlX2dzX2luX3JlcyhzdHJ1Y3QpOgogICAgcmV0dXJuIFt7azogdi5yZXBsYWNlKGNocigyOSksICcnKS5yZXBsYWNlKGNocigyMzIpLCAnJykucmVwbGFjZShjaHIoMzIpLCcnKSBpZiBpc2luc3RhbmNlKHYsIHN0cikgZWxzZSB2IGZvciBrLCB2IGluIGQuaXRlbXMoKX0gZm9yIGQgaW4gc3RydWN0XQogICAgIyBmb3IgZWwgaW4gc3RydWN0OgogICAgIyAgICAgaWYgZWwuZ2V0KCdiYXJjb2RlX2Zyb21fc2Nhbm5lcicpOgogICAgIyAgICAgICAgIGVsWydiYXJjb2RlX2Zyb21fc2Nhbm5lciddID0gZWxbJ2JhcmNvZGVfZnJvbV9zY2FubmVyJ10ucmVwbGFjZShjaHIoMjkpLCcnKQogICAgIyAgICAgICAgIGVsWydiYXJjb2RlX2Zyb21fc2Nhbm5lciddID0gZWxbJ2JhcmNvZGVfZnJvbV9zY2FubmVyJ10ucmVwbGFjZShjaHIoMjMyKSwgJycpCgoKZGVmIHBhcnNlX2JhcmNvZGUodmFsKToKICAgIGlmIGxlbih2YWwpIDwgMjE6CiAgICAgICAgcmV0dXJuIHsnR1RJTic6ICcnLCAnU2VyaWVzJzogJyd9CgogICAgdmFsLnJlcGxhY2UoJygwMSknLCcwMScpCiAgICB2YWwucmVwbGFjZSgnKDIxKScsICcyMScpCiAgICBpZiB2YWxbOjJdPT0nMDEnOgogICAgICAgIEdUSU4gPSB2YWxbMjoxNl0KICAgICAgICBTZXJpZXMgPSB2YWxbMTg6XQoKICAgIGVsc2U6CiAgICAgICAgR1RJTiA9IHZhbFs6MTRdCiAgICAgICAgU2VyaWVzID0gdmFsWzE0Ol0KCiAgICByZXR1cm4geydHVElOJzpHVElOLCAnU2VyaWVzJzpTZXJpZXN9CgoKZGVmIHNlcnZlcl9sb2FkX2RhdGEoaHR0cCk6CiAgICB1c2VybmFtZSA9IGh0dHBbJ3VzZXInXQogICAgcGFzc3dvcmQgPWh0dHBbJ3Bhc3MnXQogICAgdXJsID0gaHR0cFsndXJsJ10KICAgIGFuZHJvaWRfaWQgPSBodHRwWydhbmRyb2lkX2lkJ10KCgogICAgI2FuZHJvaWRfaWQgPSc3YjFiYzkxMzM1OGI3MDQ5JwogICAgIyByID0gcmVxdWVzdHMuZ2V0KHVybCArICcvZ2V0X2RhdGE/YW5kcm9pZF9pZD0nICsgYW5kcm9pZF9pZCwgYXV0aD1IVFRQQmFzaWNBdXRoKHVzZXJuYW1lLCBwYXNzd29yZCwgKSwKICAgICMgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCd9LAogICAgIyAgICAgICAgICAgICAgICAgIHBhcmFtcz17J2NvZGUnOiBhbmRyb2lkX2lkLCAnZnVsbF9sb2FkJzogZnVsbF9sb2FkfSkKICAgIHIgPSByZXF1ZXN0cy5nZXQodXJsICsgJy9zaW1wbGVfYWNjb3VudGluZy9kYXRhP2FuZHJvaWRfaWQ9JyArIGFuZHJvaWRfaWQsIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9eydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PXV0Zi04J30sCiAgICAgICAgICAgICAgICAgICAgIHBhcmFtcz17J3VzZXJfbmFtZSc6IGh0dHBbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHR0cFsnZGV2aWNlX21vZGVsJ119KQogICAgIyBwcmludChyLnN0YXR1c19jb2RlKQogICAgIyBwcmludChyLnRleHQpCiAgICBhbnN3ZXIgPSB7J3N0YXR1c19jb2RlJzogci5zdGF0dXNfY29kZX0KICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgIHIuZW5jb2RpbmcgPSAndXRmLTgnCiAgICAgICAgamRhdGEgPSBqc29uLmxvYWRzKHIudGV4dC5lbmNvZGUoInV0Zi04IikpCgogICAgICAgIGlmICdmb3JtYXQnIGluIGpkYXRhLmtleXMoKToKICAgICAgICAgICAgYW5zd2VyWydmb3JtYXQnXSA9IGpkYXRhWydmb3JtYXQnXQogICAgICAgICAgICBpZiBqZGF0YVsnZm9ybWF0J10gPT0gJ2lzX2RhdGEnOgogICAgICAgICAgICAgICAgI9Cf0LDRgNGB0LjQvCwg0L/QsNGA0LDQvNC10YLRgCBkYXRhINGB0L7QtNC10YDQttC40YIg0YHQv9C40YHQvtC6INGB0LvQvtCy0LDRgNC10Lkg0YEg0LTQsNC90L3Ri9C80Lgg0LfQsNC/0YDQvtGB0LAKICAgICAgICAgICAgICAgIHJlc19mb3Jfc3FsID0ganNvbl90b19zcWxpdGVfcXVlcnkoamRhdGFbJ2RhdGEnXSkKICAgICAgICAgICAgICAgIGlmIHJlc19mb3Jfc3FsOgogICAgICAgICAgICAgICAgICAgIGFuc3dlclsncmVzX2Zvcl9zcWwnXSA9IHJlc19mb3Jfc3FsCgogICAgICAgICAgICBlbGlmIGpkYXRhWydmb3JtYXQnXSA9PSAnaXNfb2snOiAj0J3QsNGIINC30LDQv9GA0L7RgSDQv9GA0LjQvdGP0YIsINC90L4g0LLQtdGA0L3Rg9GC0Ywg0L/QvtC60LAg0L3QtdGH0LXQs9C+LiDQlNCw0L3QvdGL0LUg0LjQu9C4INCz0L7RgtC+0LLRj9GC0YHRjyDQuNC70Lgg0LjRhSDQvdC10YIKICAgICAgICAgICAgICAgIGlmIGpkYXRhLmdldCgnYmF0Y2gnKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJbJ2JhdGNoJ10gPSBqZGF0YS5nZXQoJ2JhdGNoJykKCiAgICAgICAgICAgIGVsaWYgamRhdGFbJ2Zvcm1hdCddID09ICdmaWxlX2xpc3QnOgogICAgICAgICAgICAgICAgY29sdW1uX25hbWVzID0gW10KICAgICAgICAgICAgICAgIGZvciBmaWxlcyBpbiBqZGF0YVsnZGF0YSddOgogICAgICAgICAgICAgICAgICAgIGNvbHVtbl9uYW1lcy5hcHBlbmQoZmlsZXMpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFuc3dlclsnZm9ybWF0J10gPSBOb25lCgoKICAgIGVsaWYgci5zdGF0dXNfY29kZSA9PSA0MDM6CgogICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddID1bci50ZXh0XQogICAgZWxpZiByLnN0YXR1c19jb2RlID09IDQwMToKICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXT1bci5yZWFzb25dCiAgICBlbHNlOgogICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddPVtyLnRleHRdCgogICAgcmV0dXJuIGFuc3dlcgoKCgogICAgIyDQv9C+0LTRgtCy0LXRgNC20LTQsNC10Lwg0L/RgNC40L3Rj9GC0LjQtSDQv9Cw0LrQtdGC0LAg0LTQsNC90L3Ri9GFINCyIDHQoQogICAgIyByID0gcmVxdWVzdHMuZ2V0KHVybCArICcvZ2V0X2V4Y2hhbmdlX2NvbmZpcm1hdGlvbj9hbmRyb2lkX2lkPScgKyBhbmRyb2lkX2lkLAogICAgIyAgICAgICAgICAgICAgICAgIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAjICAgICAgICAgICAgICAgICAgaGVhZGVycz17J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnfSwKICAgICMgICAgICAgICAgICAgICAgICBwYXJhbXM9eydjb2RlJzogYW5kcm9pZF9pZCwgJ05ObWVzc2FnZSc6IE5ObWVzc2FnZX0pCgoKCmRlZiBqc29uX3RvX3NxbGl0ZV9xdWVyeShkYXRhKToKCiAgICBxbGlzdCA9IFtdCiAgICAj0KbQuNC60Lsg0L/QviDQuNC80LXQvdCw0Lwg0YLQsNCx0LvQuNGGCiAgICB0YWJsZV9saXN0ID0gKAogICAgJ1JTX2RvY190eXBlcycsICdSU19nb29kcycsICdSU19wcm9wZXJ0aWVzJywgJ1JTX3VuaXRzJywgJ1JTX3R5cGVzX2dvb2RzJywgJ1JTX3NlcmllcycsICdSU19jb3VudHJhZ2VudHMnLAogICAgJ1JTX3dhcmVob3VzZXMnLCAnUlNfcHJpY2VfdHlwZXMnLCAnUlNfY2VsbHMnLCAnUlNfYmFyY29kZXMnLCAnUlNfcHJpY2VzJywgJ1JTX2RvY190eXBlcycsICdSU19kb2NzJywKICAgICdSU19kb2NzX3RhYmxlJywgJ1JTX2RvY3NfYmFyY29kZXMnLCAnUlNfYWRyX2RvY3MnLCAnUlNfYWRyX2RvY3NfdGFibGUnKSAjLCwgJ1JTX2JhcmNfZmxvdycKICAgIHRhYmxlX2Zvcl9kZWxldGUgPSAoJ1JTX2RvY3NfdGFibGUnLCAnUlNfZG9jc19iYXJjb2RlcywgUlNfYWRyX2RvY3NfdGFibGUnKSAgIywgJ1JTX2JhcmNfZmxvdycKICAgIGRvY19pZF9saXN0ID0gW10KICAgIGZvciB0YWJsZV9uYW1lIGluIHRhYmxlX2xpc3Q6CiAgICAgICAgaWYgZGF0YS5nZXQodGFibGVfbmFtZSkgaXMgTm9uZToKICAgICAgICAgICAgY29udGludWUKCiAgICAjZm9yIHRhYmxlX25hbWUgaW4gZGF0YVsnZGF0YSddOgogICAgICAgIGlmIGRhdGFbdGFibGVfbmFtZV0gPT0gW106CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgI9CU0L7QsdCw0LLQuNC8INCyINC30LDQv9GA0L7RgdGLINGD0LTQsNC70LXQvdC40LUg0LjQtyDQsdCw0LfRiyDRgdGC0YDQvtC6INGC0LXRhSDQtNC+0LrRg9C80LXQvdGC0L7Qsiwg0YfRgtC+INC80Ysg0LfQsNCz0YDRg9C20LDQtdC8CiAgICAgICAgaWYgdGFibGVfbmFtZSBpbiB0YWJsZV9mb3JfZGVsZXRlOgogICAgICAgICAgICBxdWVyeSA9IGYiREVMRVRFIEZST00ge3RhYmxlX25hbWV9IFdIRVJFIGlkX2RvYyBpbiAoeycsICcuam9pbihkb2NfaWRfbGlzdCl9KSAiCiAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgY29sdW1uX25hbWVzID0gZGF0YVt0YWJsZV9uYW1lXVswXS5rZXlzKCkKICAgICAgICBpZiAnbWFya19jb2RlJyBpbiBjb2x1bW5fbmFtZXM6CiAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQogICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMuYXBwZW5kKCdHVElOJykKICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLmFwcGVuZCgnU2VyaWVzJykKICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLnJlbW92ZSgnbWFya19jb2RlJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMgPSBjb2x1bW5fbmFtZXMKCiAgICAgICAgcXVlcnkgPSBmIlJFUExBQ0UgSU5UTyB7dGFibGVfbmFtZX0gKHsnLCAnLmpvaW4ocXVlcnlfY29sX25hbWVzKX0pIFZBTFVFUyAiCiAgICAgICAgdmFsdWVzID0gW10KCiAgICAgICAgZm9yIHJvdyBpbiBkYXRhW3RhYmxlX25hbWVdOgoKICAgICAgICAgICAgcm93X3ZhbHVlcyA9IFtdCiAgICAgICAgICAgIGxpc3RfcXVvdGVkX2ZpZWxkcyA9ICgnbmFtZScsICdmdWxsX25hbWUnLCAibWFya19jb2RlIiwgImFydCIpCiAgICAgICAgICAgIGZvciBjb2wgaW4gY29sdW1uX25hbWVzOgogICAgICAgICAgICAgICAgaWYgY29sIGluIGxpc3RfcXVvdGVkX2ZpZWxkcyBhbmQgICJcIiIgaW4gcm93W2NvbF06CiAgICAgICAgICAgICAgICAgICAgcm93W2NvbF0gPSByb3dbY29sXS5yZXBsYWNlKCJcIiIsICJcIlwiIikKICAgICAgICAgICAgICAgIGlmIHJvd1tjb2xdIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcm93W2NvbF0gPSAnJwogICAgICAgICAgICAgICAgaWYgY29sID09ICdtYXJrX2NvZGUnOiAgICPQl9Cw0LzQtdC90Y/QtdC8INGN0YLQviDQv9C+0LvQtSDQvdCwINC/0L7Qu9GPIEdUSU4g0LggU2VyaWVzCiAgICAgICAgICAgICAgICAgICAgYmFyY19zdHJ1Y3QgPSBwYXJzZV9iYXJjb2RlKHJvd1tjb2xdKQogICAgICAgICAgICAgICAgICAgIHJvd192YWx1ZXMuYXBwZW5kKGJhcmNfc3RydWN0WydHVElOJ10pCiAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ1NlcmllcyddKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByb3dfdmFsdWVzLmFwcGVuZChyb3dbY29sXSkgICMoZicie3Jvd1tjb2xdfSInKQogICAgICAgICAgICAgICAgaWYgY29sID09ICdpZF9kb2MnIGFuZCB0YWJsZV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICAgICAgICAgICAgICBkb2NfaWRfbGlzdC5hcHBlbmQoJyInK3Jvd1tjb2xdKyciJykKICAgICAgICAgICAgZm9ybWF0dGVkX3ZhbCAgPSBbZicie3h9IicgaWYgaXNpbnN0YW5jZSh4LCBzdHIpIGVsc2Ugc3RyKHgpIGZvciB4IGluIHJvd192YWx1ZXNdCiAgICAgICAgICAgIHZhbHVlcy5hcHBlbmQoZiIoeycsICcuam9pbihmb3JtYXR0ZWRfdmFsKX0pIikKICAgICAgICBxdWVyeSArPSAiLCAiLmpvaW4odmFsdWVzKQogICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCgogICAgcmV0dXJuIHFsaXN0CgoKZGVmIGdldF9hbGxfY2hhbmdlc19mcm9tX2RhdGFiYXNlKGRvY19saXN0OiBzdHIgPSAnJyk6CiAgICB0cnk6CiAgICAgICAgcXRleHQgPSBmJycnCiAgICAgICAgU0VMRUNUICogRlJPTSBSU19kb2NzIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCxOb25lLFRydWUpCiAgICAgICAgcXRleHQgPSBmJycnCiAgICAgICAgICAgIFNFTEVDVCAqIEZST00gUlNfZG9jc190YWJsZSBXSEVSRSBpZF9kb2MgaW4gKHtkb2NfbGlzdH0pJycnIyBpbiAoCiAgICAgICAgICAgICNTRUxFQ1QgaWRfZG9jIEZST00gUlNfZG9jcyBXSEVSRSB2ZXJpZmllZCBpcyBOdWxsKScnJwogICAgICAgIHJlc19kb2NzX3RhYmxlID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQogICAgICAgIHF0ZXh0ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2RvY3NfYmFyY29kZXMgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2xpc3R9KSBhbmQgYmFyY29kZV9mcm9tX3NjYW5uZXIgaXMgbm90IE51bGwnJycjIGluICgKICAgICAgICAgICAgI1NFTEVDVCBpZF9kb2MgRlJPTSBSU19kb2NzIFdIRVJFIHZlcmlmaWVkIGlzIE51bGwpJycnCiAgICAgICAgcmVzX2RvY3NfYmFyY29kZSA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LE5vbmUsVHJ1ZSkKICAgICAgICByZXNfZG9jc19iYXJjb2RlID0gcmVwbGFzZV9nc19pbl9yZXMocmVzX2RvY3NfYmFyY29kZSkKICAgICAgICBxdGV4dCA9IGYnJycKICAgICAgICAgICAgU0VMRUNUICogRlJPTSBSU19iYXJjX2Zsb3cgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2xpc3R9KScnJyMgaW4gKAogICAgICAgICAgICAjU0VMRUNUIGlkX2RvYyBGUk9NIFJTX2RvY3MgV0hFUkUgdmVyaWZpZWQgaXMgTnVsbCknJycKICAgICAgICByZXNfZmxvdyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LE5vbmUsVHJ1ZSkKICAgICAgICByZXNfZmxvdyA9IHJlcGxhc2VfZ3NfaW5fcmVzKHJlc19mbG93KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzcWxfZXJyb3IgPSBUcnVlCiAgICAgICAgICAgICNlcnJvcl9wb29sLmFwcGVuZChlLmFyZ3NbMF0pCiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzplLmFyZ3NbMF19CiAgICAjIGlmIGxlbihyZXMpID09IDA6CiAgICAjICAgICByZXR1cm4gTm9uZQoKICAgIGZvciBpdGVtIGluIHJlczoKICAgICAgICBmaWx0ZXJlZF9saXN0ID0gW2QgZm9yIGQgaW4gcmVzX2RvY3NfdGFibGUgaWYgZFsnaWRfZG9jJ10gPT0gaXRlbVsnaWRfZG9jJ11dCiAgICAgICAgaXRlbVsnUlNfZG9jc190YWJsZSddID0gZmlsdGVyZWRfbGlzdAoKICAgICAgICBmaWx0ZXJlZF9saXN0ID0gW2QgZm9yIGQgaW4gcmVzX2RvY3NfYmFyY29kZSBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICBpdGVtWydSU19kb2NzX2JhcmNvZGVzJ10gPSBmaWx0ZXJlZF9saXN0CgogICAgICAgIGZpbHRlcmVkX2xpc3QgPSBbZCBmb3IgZCBpbiByZXNfZmxvdyBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICBpdGVtWydSU19iYXJjX2Zsb3cnXSA9IGZpbHRlcmVkX2xpc3QKICAgICPQkNC00YDQtdGB0L3QvtC1INGF0YDQsNC90LXQvdC40LUKICAgIHRyeToKICAgICAgICBxdGV4dCA9IGYnJycKICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2Fkcl9kb2NzIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycKICAgICAgICByZXNfYWRyID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQogICAgICAgIHF0ZXh0ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycjIGluICgKICAgICAgICAgICAgI1NFTEVDVCBpZF9kb2MgRlJPTSBSU19kb2NzIFdIRVJFIHZlcmlmaWVkIGlzIE51bGwpJycnCiAgICAgICAgcmVzX2Fkcl9kb2NzX3RhYmxlID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc3FsX2Vycm9yID0gVHJ1ZQogICAgICAgICAgICAjZXJyb3JfcG9vbC5hcHBlbmQoZS5hcmdzWzBdKQogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ZS5hcmdzWzBdfQogICAgIyBpZiBsZW4ocmVzKSA9PSAwOgogICAgIyAgICAgcmV0dXJuIE5vbmUKCiAgICBmb3IgaXRlbSBpbiByZXNfYWRyOgogICAgICAgIGZpbHRlcmVkX2xpc3QgPSBbZCBmb3IgZCBpbiByZXNfYWRyX2RvY3NfdGFibGUgaWYgZFsnaWRfZG9jJ10gPT0gaXRlbVsnaWRfZG9jJ11dCiAgICAgICAgaXRlbVsnUlNfYWRyX2RvY3NfdGFibGUnXSA9IGZpbHRlcmVkX2xpc3QKCgoKICAgIGlmIGxlbihyZXMpICsgbGVuKHJlc19hZHIpID09IDA6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICByZXR1cm4ganNvbi5kdW1wcyhyZXMgKyByZXNfYWRyKQoKCmRlZiBwb3N0X2NoYW5nZXNfdG9fc2VydmVyKGRvY19saXN0OiBzdHIsIGh0cHBhcmFtcyk6CiAgICB1cmwgPSBodHBwYXJhbXNbJ3VybCddCiAgICB1c2VybmFtZSA9IGh0cHBhcmFtc1sndXNlciddCiAgICBwYXNzd29yZCA9IGh0cHBhcmFtc1sncGFzcyddCiAgICBhbmRyb2lkX2lkID0gaHRwcGFyYW1zWydhbmRyb2lkX2lkJ10KICAgIHJlcyA9IGdldF9hbGxfY2hhbmdlc19mcm9tX2RhdGFiYXNlKGRvY19saXN0KQogICAgaWYgdHlwZShyZXMpID09IHR5cGUoZGljdCkgYW5kIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWUsICdFcnJvcic6IHJlcy5nZXQoJ0Vycm9yJyl9CiAgICAgICAgcmV0dXJuIGFuc3dlcgogICAgYW5zd2VyID0geydlbXB0eSc6IFRydWV9CiAgICBpZiByZXMgaXMgbm90IE5vbmU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMucG9zdCh1cmwgKyAnL3NpbXBsZV9hY2NvdW50aW5nL2RvY3VtZW50cz9hbmRyb2lkX2lkPScgKyBhbmRyb2lkX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM9eyd1c2VyX25hbWUnOiBodHBwYXJhbXNbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHRwcGFyYW1zWydkZXZpY2VfbW9kZWwnXX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9cmVzKQogICAgICAgICAgICBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPSByLnN0YXR1c19jb2RlCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgYW5zd2VyWydlbXB0eSddID0gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFuc3dlclsnZW1wdHknXSA9IFRydWUKICAgICAgICAgICAgICAgIGFuc3dlclsnRXJyb3InXSA9IHIudGV4dAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgYW5zd2VyWydlbXB0eSddID0gVHJ1ZQogICAgICAgICAgICBhbnN3ZXJbIkVycm9yIl0gPSBzdHIoZSkKICAgIHJldHVybiBhbnN3ZXIKCgpkZWYgcG9zdF9nb29kc190b19zZXJ2ZXIoZG9jX2lkLCBodHRwX3BhcmFtcyk6CiAgICBoc19zZXJ2aWNlID0gSHNTZXJ2aWNlKGh0dHBfcGFyYW1zKQogICAgZG9jX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKGRvY19pZCkKCiAgICByZXMgPSBkb2Nfc2VydmljZS5nZXRfbGFzdF9lZGl0ZWRfZ29vZHModG9fanNvbj1GYWxzZSkKCiAgICBpZiBpc2luc3RhbmNlKHJlcywgZGljdCkgYW5kIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWUsICdFcnJvcic6IHJlcy5nZXQoJ0Vycm9yJyl9CiAgICAgICAgcmV0dXJuIGFuc3dlcgogICAgZWxpZiByZXM6CiAgICAgICAgaHNfc2VydmljZS5zZW5kX2RvY3VtZW50cyhyZXMpCgogICAgICAgIGlmIG5vdCByZXMgb3IgKGlzaW5zdGFuY2UocmVzLCBkaWN0KSBhbmQgcmVzLmdldCgnRXJyb3InKSk6CiAgICAgICAgICAgIGFuc3dlciA9IHsnZW1wdHknOiBUcnVlLCAnRXJyb3InOiByZXMuZ2V0KCdFcnJvcicpfQogICAgICAgICAgICByZXR1cm4gYW5zd2VyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZG9jX3NlcnZpY2UudXBkYXRlX3NlbnRfZGF0YShyZXMpCgogICAgdGltZXJfc2VydmVyX2xvYWRfZGF0YShodHRwX3BhcmFtcykKCgpkZWYgdGltZXJfc2VydmVyX2xvYWRfZGF0YShodHRwX3BhcmFtcyk6CiAgICBoc19zZXJ2aWNlID0gSHNTZXJ2aWNlKGh0dHBfcGFyYW1zKQogICAgZG9jX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKCcnKQoKICAgIGRvY3NfZGF0YSA9IGhzX3NlcnZpY2UuZ2V0X2RhdGEoKQogICAgaWYgZG9jc19kYXRhLmdldCgnZGF0YScpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZG9jX3NlcnZpY2UudXBkYXRlX2RhdGFfZnJvbV9qc29uKGRvY3NfZGF0YVsnZGF0YSddKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgZQo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\new_handlers.py",
                "PyFileKey": "new_handlers",
                "PyFileData": "ZnJvbSBqYXZhIGltcG9ydCBqY2xhc3MKZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgU2ltcGxlVXRpbGl0ZXMgYXMgc3VDbGFzcwoKZnJvbSB1aV91dGlscyBpbXBvcnQgSGFzaE1hcAppbXBvcnQgdWlfbW9kZWxzCgpub0NsYXNzID0gamNsYXNzKCJydS50cmF2ZWxmb29kLnNpbXBsZV91aS5Ob1NRTCIpCnJzX3NldHRpbmdzID0gbm9DbGFzcygicnNfc2V0dGluZ3MiKQpjdXJyZW50X3NjcmVlbiA9IE5vbmUKCgpkZWYgY3JlYXRlX3NjcmVlbihoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiIKICAgINCc0LXRgtC+0LQg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQvNC+0LTQtdC70Lgg0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQtdC5INGC0LXQutGD0YnQtdC80YMg0L/RgNC+0YbQtdGB0YHRgyDQuCDRjdC60YDQsNC90YMuCiAgICDQldGB0LvQuCDQvNC+0LTQtdC70Ywg0L3QtSDRgNC10LDQu9C40LfQvtCy0LDQvdCwINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC30LDQs9C70YPRiNC60YMKICAgINCg0LXQsNC70LjQt9C+0LLQsNC9INGB0LjQvdCz0LvRgtC+0L0g0YfQtdGA0LXQtyDQs9C70L7QsdCw0LvRjNC90YPRjiDQv9C10YDQtdC80LXQvdC90YPRjiBjdXJyZW50X3NjcmVlbiwg0LTQu9GPINGB0L7RhdGA0LXQvdC10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjRjyDRgtC10LrRg9GJ0LXQs9C+INGN0LrRgNCw0L3QsAogICAgIiIiCiAgICBnbG9iYWwgY3VycmVudF9zY3JlZW4KCiAgICBzY3JlZW5fcGFyYW1zID0gewogICAgICAgICdoYXNoX21hcCc6IGhhc2hfbWFwLAogICAgICAgICdyc19zZXR0aW5ncyc6IHJzX3NldHRpbmdzCiAgICB9CiAgICBzY3JlZW5fY2xhc3MgPSB1aV9tb2RlbHMuU2NyZWVuc0ZhY3RvcnkuZ2V0X3NjcmVlbl9jbGFzcygqKnNjcmVlbl9wYXJhbXMpCgogICAgaWYgbm90IHNjcmVlbl9jbGFzczoKICAgICAgICBjdXJyZW50X3NjcmVlbiA9IHVpX21vZGVscy5Nb2NrU2NyZWVuKCoqc2NyZWVuX3BhcmFtcykKICAgIGVsaWYgbm90IGlzaW5zdGFuY2UoY3VycmVudF9zY3JlZW4sIHNjcmVlbl9jbGFzcyk6CiAgICAgICAgY3VycmVudF9zY3JlZW4gPSBzY3JlZW5fY2xhc3MoKipzY3JlZW5fcGFyYW1zKQogICAgZWxzZToKICAgICAgICBjdXJyZW50X3NjcmVlbi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgY3VycmVudF9zY3JlZW4ubGlzdGVuZXIgPSBoYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIGN1cnJlbnRfc2NyZWVuLmV2ZW50ID0gaGFzaF9tYXBbJ2V2ZW50J10KCiAgICByZXR1cm4gY3VycmVudF9zY3JlZW4KCgojID09PT09PT09PT09PT09PSBNYWluIGV2ZW50cyA9PT09PT09PT09PT09PT09PQoKCkBIYXNoTWFwKCkKZGVmIGFwcF9vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiIg0J7QsdGA0LDQsdC+0YLRh9C40Log0L/RgNC4INGB0YLQsNGA0YLQtSDQv9GA0LjQu9C+0LbQtdC90LjRjyAiIiIKCiAgICBtb2RlbCA9IHVpX21vZGVscy5NYWluRXZlbnRzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIG1vZGVsLmFwcF9vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgdGltZXJfdXBkYXRlKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiIiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0YTQvtC90L7QstC+0LPQviDQvtCx0LzQtdC90LAgIiIiCgogICAgdGltZXIgPSB1aV9tb2RlbHMuVGltZXIoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgdGltZXIudGltZXJfb25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGV2ZW50X3NlcnZpY2UoaGFzaF9tYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRgNCw0LHQvtGC0Ysg0JzQnyDQsiDRgNC10LbQuNC80LUg0YHQtdGA0LLQtdGA0LAuINCSIHdzX2JvZHkg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0LvQtdC20LjRgiDRgtC10LrRgdGCINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCAiIiIKCiAgICBoYXNoX21hcFsnd3NfYm9keSddID0gaGFzaF9tYXBbJ0FORFJPSURfSUQnXQoKCkBIYXNoTWFwKCkKZGVmIG9uX3NxbF9lcnJvcihoYXNoX21hcCk6CiAgICBtb2RlbCA9IHVpX21vZGVscy5NYWluRXZlbnRzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIG1vZGVsLm9uX3NxbF9lcnJvcigpCgoKQEhhc2hNYXAoKQpkZWYgcHV0X25vdGlmaWNhdGlvbihoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiIg0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGA0LDQsdC+0YLRiyDQnNCfINCyINGA0LXQttC40LzQtSDRgdC10YDQstC10YDQsC4g0KPQstC10LTQvtC80LvQtdC90LjRjyDQviDQstGF0L7QtNGP0YnQuNGFINC00L7QutGD0LzQtdC90YLQsNGFICIiIgoKICAgIG1vZGVsID0gdWlfbW9kZWxzLk1haW5FdmVudHMoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgbW9kZWwucHV0X25vdGlmaWNhdGlvbigpCgoKQEhhc2hNYXAoKQpkZWYgb25fY2xvc2VfYXBwKGhhc2hfbWFwKToKICAgICMg0J/QvtC/0YvRgtC60LAg0L7Rh9C40YHRgtC60Lgg0LrRjdGI0LAg0L/RgNC4INCy0YvRhdC+0LTQtSDRgSDQv9GA0LjQu9C+0LbQtdC90LjRjwogICAgc3VDbGFzcy5kZWxldGVDYWNoZSgpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXiBNYWluIGV2ZW50cyBeXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09IERvY3VtZW50cyA9PT09PT09PT09PT09PT09PQoKQEhhc2hNYXAoKQpkZWYgZG9jc190aWxlc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiLQntGC0LTQtdC70YzQvdGL0LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQv9C70LjRgtC+0Log0LTQu9GPINC+0L/RgNC10LTQtdC70LXQvdC40Y8g0L/RgNC+0YbQtdGB0YHQsCBoYXNoX21hcCfQvtC8IiIiCiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuRG9jdW1lbnRzVGlsZXMoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBnc190aWxlc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR3JvdXBTY2FuVGlsZXMoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiB0aWxlc19vbl9pbnB1dChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBkb2NzX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkRvY3NMaXN0U2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZG9jc19vbl9zZWxlY3QoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgZG9jX2RldGFpbHNfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuR3JvdXBTY2FuRG9jRGV0YWlsc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGRvY19kZXRhaWxzX2xpc3RlbmVyKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25faW5wdXQoKQoKCgpASGFzaE1hcCgpCmRlZiBhZHJfZG9jc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5BZHJEb2NzTGlzdFNjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGFkcl9kb2Nfb25fc2VsZWN0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkFkckRvY3NMaXN0U2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgpASGFzaE1hcCgpCmRlZiBhZHJfZG9jX2RldGFpbHNfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuQWRyRG9jRGV0YWlsc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4uX29uX3N0YXJ0KCkKCkBIYXNoTWFwKCkKZGVmIGFkcl9kb2NfZGV0YWlsc19vbl9pbnB1dChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5BZHJEb2NEZXRhaWxzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKCkBIYXNoTWFwKCkKZGVmIGVsZW1fdmlldl9vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR29vZHNTZWxlY3RTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBlbGVtX3ZpZXZfb25fY2xpY2soaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdvb2RzU2VsZWN0U2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgYWRyX2VsZW1fdmlldl9vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuQWRyR29vZHNTZWxlY3RTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBhZHJfZWxlbV92aWV2X29uX2NsaWNrKGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5BZHJHb29kc1NlbGVjdFNjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25faW5wdXQoKQoKIyBeXl5eXl5eXl5eXl5eXl5eXiBEb2N1bWVudHMgXl5eXl5eXl5eXl5eXl5eXl4KCiMgPT09PT09PT09PT09PT09IEdvb2RzID09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBnb29kc19vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Hb29kc0xpc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kc19vbl9pbnB1dChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR29vZHNMaXN0U2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICMgc2NyZWVuOiB1aV9tb2RlbHMuR29vZHNMaXN0U2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCiAgICAjIGhhc2hfbWFwLnRvYXN0KGYne2hhc2hfbWFwLmdldF9jdXJyZW50X3NjcmVlbigpfSB7aGFzaF9tYXAuZ2V0X2N1cnJlbnRfcHJvY2VzcygpfScpCgoKQEhhc2hNYXAoKQpkZWYgc2VsZWN0X3R5cGVfZ29vZHNfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLlNlbGVjdEdvb2RzVHlwZShoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHNlbGVjdF90eXBlX2dvb2RzX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5TZWxlY3RHb29kc1R5cGUoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kX2NhcmRfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuSXRlbUNhcmQgPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kX2NhcmRfcG9zdF9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5JdGVtQ2FyZCA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fcG9zdF9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZ29vZF9jYXJkX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkl0ZW1DYXJkID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXiBHb29kcyBeXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09IFNldHRpbmdzID09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5TZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHNldHRpbmdzX29uX2NsaWNrKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLlNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgZm9udF9zaXplc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Gb250U2l6ZVNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZm9udF9zaXplX3NldHRpbmdzX2xpc3RlbmVyKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkZvbnRTaXplU2V0dGluZ3NTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiB0ZXN0X2JhcmNvZGVfbGlzdGVuZXIoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuQmFyY29kZVRlc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19lcnJvcnNfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRXJyb3JMb2dTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19lcnJvcnNfb25fY2xpY2soaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRXJyb3JMb2dTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBodHRwX3NldHRpbmdzX29uX3N0YXJ0KGhhc2hfbWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkh0dHBTZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGh0dHBfc2V0dGluZ3Nfb25fY2xpY2soaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuSHR0cFNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXiBTZXR0aW5ncyBeXl5eXl5eXl5eXl5eXl5eXgo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_barcodes.py",
                "PyFileKey": "ui_barcodes",
                "PyFileData": "IyDQnNC+0LTRg9C70Ywg0L/QsNGA0YHQuNGCINGI0YLRgNC40YXQutC+0LQg0LjQu9C4INC00LDRgtCw0LzQsNGC0YDQuNC60YEg0L3QsCDRgdC+0YHRgtCw0LLQu9GP0Y7RidC40LUgMTEKCmltcG9ydCByZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQoKCmRlZiBwYXJzZV9iYXJjb2RlKGJhcmNvZGUpOgogICAgI9Ce0YLQu9Cw0LTQvtGH0L3QvtC1CiAgICByZXR1cm4geydTQ0hFTUUnOiAnRUFOMTMnLCAnQkFSQ09ERSc6IGJhcmNvZGUsICdHVElOJzogYmFyY29kZSwgJ1NFUklBTCc6ICcnfQoKICAgIGlmIGJhcmNvZGU6CiAgICAgICAgIyDQn9GA0L7RgdGC0L7QuSBFQU4xMwogICAgICAgIGlmIG5vdCByZS5mdWxsbWF0Y2gocidcZHsxM30nLCBiYXJjb2RlKSBpcyBOb25lIGFuZCByZS5mdWxsbWF0Y2gocidcZHsxM30nLCBiYXJjb2RlKS5zdHJpbmcgPT0gYmFyY29kZToKCiAgICAgICAgICAgIHJlcyA9IHsnU0NIRU1FJzogJ0VBTjEzJywgJ0JBUkNPREUnOiBiYXJjb2RlLCAnR1RJTic6IGJhcmNvZGUsICdTRVJJQUwnOiAnJ30KCiAgICAgICAgZWxpZiBsZW4oYmFyY29kZSkgPT0gMjk6ICAjINCt0YLQviDQtNCw0YLQsNC80LDRgtGA0LjQutGBINCi0LDQsdCw0LosINCf0LDRh9C60LAKICAgICAgICAgICAgIyByZXMgPSBwYXJzZV90b2JhY2NvKGJhcmNvZGUpCiAgICAgICAgICAgIHJlcyA9IHsnU0NIRU1FJzogJ0dTMScsICdHVElOJzogYmFyY29kZVswOjE0XSwgJ1NFUklBTCc6IGJhcmNvZGVbMTQ6MjFdLCAnTVJDJzogYmFyY29kZVsyMToyNV0sCiAgICAgICAgICAgICAgICAgICAnQ0hFQ0snOiBiYXJjb2RlWzI1OjI5XX0KCiAgICAgICAgZWxpZiBjaHIoMjkpIGluIGJhcmNvZGU6ICAjIERhdGFtYXRyaXgKCiAgICAgICAgICAgIHJlcyA9IGRhdGFtYXRyaXgoYmFyY29kZSkKICAgICAgICAgICAgcmVzWydGdWxsQ29kZSddID0gYmFyY29kZQogICAgICAgIGVsaWYgJzxHUz4nIGluIGJhcmNvZGU6CiAgICAgICAgICAgIHJlcyA9IGRhdGFtYXRyaXgoYmFyY29kZSkKICAgICAgICAgICAgcmVzWydGdWxsQ29kZSddID0gYmFyY29kZQogICAgICAgIGVsc2U6ICAjINCd0LXQuNC30LLQtdGB0YLQvdGL0Lkg0YLQuNC/INC60L7QtNCwCiAgICAgICAgICAgIHJlcyA9IHsnU0NIRU1FJzogJ1VOS05PV04nLCAnQkFSQ09ERSc6IGJhcmNvZGUsICdHVElOJzogYmFyY29kZSwgJ1NFUklBTCc6ICcnfQoKICAgICAgICByZXR1cm4gcmVzCiAgICBlbHNlOgogICAgICAgIHJldHVybiB7J1NDSEVNRSc6ICdVTktOT1dOJywgJ0JBUkNPREUnOiBiYXJjb2RlLCAnR1RJTic6ICcnLCAnU0VSSUFMJzogJycsICdFUlJPUic6ICdFbXB0eSBiYXJjb2RlJ30KCgpkZWYgZGF0YW1hdHJpeChiYXJjb2RlOiBzdHIpIC0+IGRpY3Q6CiAgICAiIiIKICAgIFRoZSBmdW5jdGlvbiB0YWtlcyBiYXJjb2RlIHN0cmluZyBhbmQgcmV0dXJuIHBhcnNlZCBvYmplY3RzIGluIGEgYGRpY3RgLgogICAgT3B0aW9uYWxseSB1c2VyIGNhbiBwYXNzIGJvb2wgdmFsdWUgdG8gdmFsaWRhdGUgdGhlIGJhcmNvZGUKICAgIFBhcmFtZXRlcnM6CiAgICAgICAgYmFyY29kZTogc3RyaW5nIHR5cGUuIFRoaXMgaXMgdGhlIGJhcmNvZGUgc3RyaW5nIHdpdGggdGhlIDxHUz4gc2VwZXJhdG9ycy4KCiAgICBSZXR1cm5zOgogICAgICAgIGRpY3Q6IFJldHVybnMgZGljdGlvbmFyeSBvYmplY3Qgd2l0aCBTQ0hFTUUsIFBQTiwgR1RJTiwgRVhQSVJZLCBCQVRDSCwgU0VSSUFMICYgTkhSTiBhcyBrZXlzIGZvciB2YWxpZCByZXF1ZXN0cwogICAgICAgIG9yIHJlbGV2YW50IGVycm9yIHN0cmluZ3MuCiAgICAiIiIKCiAgICBpZiBiYXJjb2RlWzozXSA9PSAiXWQyIjogICMgTW9zdCBiYXJjb2RlIHNjYW5uZXJzIHByZXBlbmQgJ11kMicgaWRlbnRpZmllciBmb3IgdGhlIEdTMSBkYXRhbWF0cml4LiBUaGlzIHNlY3Rpb24gcmVtb3ZlcyB0aGUgaWRlbnRpZmllci4KICAgICAgICBiYXJjb2RlID0gYmFyY29kZVszOl0KICAgICAgICByZXN1bHQgPSBnczFfZ3RpbihiYXJjb2RlKQoKICAgIGVsaWYgYmFyY29kZVs6Ml0gaW4gWycwMScsICcyMScsICcxNycsICcxMCcsICc3MSddOgogICAgICAgIHJlc3VsdCA9IGdzMV9ndGluKGJhcmNvZGUpCgogICAgZWxpZiBiYXJjb2RlWzBdID09IGNocigyOSk6ICAjIFNob3J0IEdTMSBiYXJjb2RlCiAgICAgICAgcmVzdWx0ID0gZ3MxX2d0aW4oYmFyY29kZSkKCiAgICBlbGlmIGJhcmNvZGVbOjZdID09ICgnWyk+JyArIGNocigzMCkgKyAnMDYnKSBvciAoJ1spPicgKyBjaHIoMzApICsgJzA1Jyk6ICAjIE1BQ1JPIDA2IG9yIE1BQ1JPIDA1CiAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbNzpdICAjIFJlbW92ZXMgdGhlIGxlYWRpbmcgQVNDSUkgc2VwZXJhdG9yIGFmdGVyIHRoZSBzY2hlbWUgaWRlbnRpZmllci4KICAgICAgICByZXN1bHQgPSBpZmFfcHBuKGJhcmNvZGUpCgogICAgZWxzZToKICAgICAgICByZXN1bHQgPSB7J0VSUk9SJzogJ0lOVkFMSUQgRk9STUFUJywgJ0JBUkNPREUnOiBiYXJjb2RlfQoKICAgIHJldHVybiByZXN1bHQKCgpkZWYgZ3Rpbl9jaGVjayhndGluOiBzdHIpOgogICAgcmV2ZXJzZV9ndGluID0gZ3RpblstMjo6LTFdICAjIFJldmVyc2luZyB0aGUgc3RyaW5nIHdpdGhvdXQgdGhlIGNoZWNrLWRpZ2l0CiAgICBkaWdpdF9tdWx0aXBsZXIzID0gW10KICAgIGRpZ2l0X211bHRpcGxlcjEgPSBbXQoKICAgIGZvciBpLCBsIGluIGVudW1lcmF0ZShyZXZlcnNlX2d0aW4pOgogICAgICAgIGlmIGkgJSAyID09IDA6CiAgICAgICAgICAgIGRpZ2l0X211bHRpcGxlcjMuYXBwZW5kKGludChsKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkaWdpdF9tdWx0aXBsZXIxLmFwcGVuZChpbnQobCkpCgogICAgZGlnaXRfc3VtID0gKHN1bShkaWdpdF9tdWx0aXBsZXIzKSAqIDMpICsgc3VtKGRpZ2l0X211bHRpcGxlcjEpCiAgICBuZWFyZXN0X3RlbiA9IHJvdW5kKGRpZ2l0X3N1bSAvIDEwKSAqIDEwCiAgICBjaGVja19zdW1fZGlnaXQgPSBuZWFyZXN0X3RlbiAtIGRpZ2l0X3N1bQogICAgaWYgY2hlY2tfc3VtX2RpZ2l0IDwgMDoKICAgICAgICBjaGVja19zdW1fZGlnaXQgPSAxMCArIGNoZWNrX3N1bV9kaWdpdAogICAgcmV0dXJuIGNoZWNrX3N1bV9kaWdpdCA9PSBpbnQoZ3RpblstMV0pCgoKc3Jlc3VsdCA9IHsnU0NIRU1FJzogJ0dTMSd9CgoKZGVmIGdzMV9ndGluKGJhcmNvZGU6IHN0cikgLT4gZGljdDoKICAgIGlmIGNocigyOSkgaW4gYmFyY29kZToKCiAgICAgICAgd2hpbGUgYmFyY29kZToKICAgICAgICAgICAgaWYgYmFyY29kZVs6Ml0gPT0gJzAxJzoKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0dUSU4nXSA9IGJhcmNvZGVbMjoxNl0KICAgICAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDE2OgogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzE2Ol0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6M10gPT0gY2hyKDI5KSArICcwMSc6CiAgICAgICAgICAgICAgICBzcmVzdWx0WydHVElOJ10gPSBiYXJjb2RlWzM6MTddCiAgICAgICAgICAgICAgICBpZiBsZW4oYmFyY29kZSkgPiAxNzoKICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVsxNzpdCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzE3JzoKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0VYUElSWSddID0gYmFyY29kZVsyOjhdCiAgICAgICAgICAgICAgICBpZiBsZW4oYmFyY29kZSkgPiA4OgogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzg6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnMTAnOgogICAgICAgICAgICAgICAgaWYgY2hyKDI5KSBpbiBiYXJjb2RlOgogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQogICAgICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0JBVENIJ10gPSBiYXJjb2RlWzI6aW5kZXhdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3Jlc3VsdFsnQkFUQ0gnXSA9IGJhcmNvZGVbMjpdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzIxJzoKICAgICAgICAgICAgICAgIGlmIGNocigyOSkgaW4gYmFyY29kZToKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGJhcmNvZGUuaW5kZXgoY2hyKDI5KSkKICAgICAgICAgICAgICAgICAgICBzcmVzdWx0WydTRVJJQUwnXSA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVtpbmRleCArIDE6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzcmVzdWx0WydTRVJJQUwnXSA9IGJhcmNvZGVbMjpdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzkxJzoKICAgICAgICAgICAgICAgIGlmIGNocigyOSkgaW4gYmFyY29kZToKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGJhcmNvZGUuaW5kZXgoY2hyKDI5KSkKICAgICAgICAgICAgICAgICAgICBzcmVzdWx0WydOSFJOJ10gPSBiYXJjb2RlWzI6aW5kZXhdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3Jlc3VsdFsnTkhSTiddID0gYmFyY29kZVsyOjZdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzkzJzogICMg0JzQvtC70L7Rh9C60LAsINCy0L7QtNCwCiAgICAgICAgICAgICAgICBzcmVzdWx0WydDSEVDSyddID0gYmFyY29kZVsyOjZdCiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVs3Ol0KCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzkyJzogICMg0JTQsNC70LXQtSDRgdC70LXQtNGD0LXRgiDQutC+0LQg0L/RgNC+0LLQtdGA0LrQuCwgNDQg0YHQuNC80LLQvtC70LAKICAgICAgICAgICAgICAgICMgaWYgbGVuKGJhcmNvZGVbMjpdKT09NDQ6CiAgICAgICAgICAgICAgICBzcmVzdWx0WydDSEVDSyddID0gYmFyY29kZVsyOl0KICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6NF0gPT0gJzgwMDUnOiAgIyDQotCw0LHQsNC6LCDQkdC70L7QugogICAgICAgICAgICAgICAgc3Jlc3VsdFsnTkhSTiddID0gYmFyY29kZVs1OjExXQogICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTE6XQogICAgICAgICAgICBlbGlmIGJhcmNvZGVbOjRdID09ICczMTAzJzogICMg0JzQvtC70L7Rh9C60LAg0YEg0JLQtdGB0L7QvAoKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ1dFSUdIVCddID0gYmFyY29kZVs0Ol0KICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBCQVJDT0RFJywgJ0JBUkNPREUnOiBzcmVzdWx0fQogICAgZWxzZToKICAgICAgICBzcmVzdWx0WydFUlJPUiddID0gJ05vIEdTIFNlcGFyYXRvcicKICAgICAgICByZXR1cm4gc3Jlc3VsdAoKICAgICMgaWYgKCdHVElOJyAsICdCQVRDSCcgLCAnRVhQSVJZJyAsICdTRVJJQUwnKSBpbiByZXN1bHQua2V5cygpOgogICAgIyAgICAgaWYgZ3Rpbl9jaGVjayhyZXN1bHRbJ0dUSU4nXSkgPT0gRmFsc2UgYW5kIGV4cGlyeV9kYXRlX2NoZWNrKHJlc3VsdFsnRVhQSVJZJ10pID09IEZhbHNlOgogICAgIyAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgR1RJTiAmIEVYUElSWSBEQVRFJywgJ0JBUkNPREUnOiByZXN1bHR9CiAgICAjICAgICBlbGlmIGV4cGlyeV9kYXRlX2NoZWNrKHJlc3VsdFsnRVhQSVJZJ10pID09IEZhbHNlOgogICAgIyAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgRVhQSVJZIERBVEUnLCAnQkFSQ09ERSc6IHJlc3VsdH0KICAgICMgICAgIGVsaWYgZ3Rpbl9jaGVjayhyZXN1bHRbJ0dUSU4nXSkgPT0gRmFsc2U6CiAgICAjICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBHVElOJywgJ0JBUkNPREUnOiByZXN1bHR9CiAgICAjICAgICBlbHNlOgogICAgIyAgICAgICAgIHJldHVybiByZXN1bHQKICAgICMgZWxzZToKICAgICMgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOQ09NUExFVEUgREFUQScsICdCQVJDT0RFJzogcmVzdWx0fQogICAgcmV0dXJuIHNyZXN1bHQKCgpkZWYgZXhwaXJ5X2RhdGVfY2hlY2soZTogc3RyKToKICAgIG15X3llYXIgPSBlWzoyXQogICAgbXlfbW9udGggPSBlWzI6NF0KICAgIG15X2RhdGUgPSBlWzQ6XQoKICAgIGlmIGludChteV9tb250aCkgbm90IGluIHJhbmdlKDEsIDEzKToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGVsaWYgaW50KG15X2RhdGUpIG5vdCBpbiByYW5nZSgzMik6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgbXlfZGF0ZSA9PSAnMDAnOgogICAgICAgIGlmIG15X21vbnRoID09ICcwMicgYW5kIGludChteV95ZWFyKSAlIDQgPT0gMDoKICAgICAgICAgICAgbXlfZGF0ZSA9ICcyOScKICAgICAgICBlbGlmIG15X21vbnRoID09ICcwMicgYW5kIGludChteV95ZWFyKSAlIDQgIT0gMDoKICAgICAgICAgICAgbXlfZGF0ZSA9ICcyOCcKICAgICAgICBlbGlmIG15X21vbnRoIGluIFsnMDEnLCAnMDMnLCAnMDUnLCAnMDcnLCAnMDgnLCAnMTAnLCAnMTInXToKICAgICAgICAgICAgbXlfZGF0ZSA9ICczMScKICAgICAgICBlbHNlOgogICAgICAgICAgICBteV9kYXRlID0gJzMwJwoKICAgIGlmIG15X21vbnRoID09ICcwMicgYW5kIGludChteV95ZWFyKSAlIDQgPT0gMCBhbmQgbXlfZGF0ZSA8PSAnMjknOgogICAgICAgIHBhc3MKICAgIGVsaWYgbXlfbW9udGggPT0gJzAyJyBhbmQgaW50KG15X3llYXIpICUgNCAhPSAwIGFuZCBteV9kYXRlIDw9ICcyOCc6CiAgICAgICAgcGFzcwogICAgZWxpZiBteV9tb250aCBpbiBbJzAxJywgJzAzJywgJzA1JywgJzA3JywgJzA4JywgJzEwJywgJzEyJ10gYW5kIG15X2RhdGUgPD0gJzMxJzoKICAgICAgICBwYXNzCiAgICBlbGlmIG15X21vbnRoIGluIFsnMDQnLCAnMDYnLCAnMDknLCAnMTEnXSBhbmQgbXlfZGF0ZSA8PSAnMzAnOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgYWN0dWFsX2RhdGUgPSBteV95ZWFyICsgbXlfbW9udGggKyBteV9kYXRlCiAgICBpZiBhY3R1YWxfZGF0ZSA+IGRhdGV0aW1lLnRvZGF5KCkuc3RyZnRpbWUoJyV5JW0lZCcpOgogICAgICAgIHJldHVybiBUcnVlCiAgICBlbHNlOgogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBpZmFfcHBuKGJhcmNvZGU6IHN0cikgLT4gZGljdDoKICAgIHNyZXN1bHQgPSB7J1NDSEVNRSc6ICdJRkEnfQogICAgd2hpbGUgYmFyY29kZToKCiAgICAgICAgaWYgYmFyY29kZVs6Ml0gPT0gJzlOJzoKICAgICAgICAgICAgc3Jlc3VsdFsnUFBOJ10gPSBiYXJjb2RlWzI6MTRdCiAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDE0OgogICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTU6XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgZWxpZiBiYXJjb2RlWzoxXSA9PSAnRCc6CiAgICAgICAgICAgIHNyZXN1bHRbJ0VYUElSWSddID0gYmFyY29kZVsxOjddCiAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDc6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVs4Ol0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzFUJzoKICAgICAgICAgICAgaWYgY2hyKDI5KSBpbiBiYXJjb2RlOgogICAgICAgICAgICAgICAgaW5kZXggPSBiYXJjb2RlLmluZGV4KGNocigyOSkpCiAgICAgICAgICAgICAgICBzcmVzdWx0WydCQVRDSCddID0gYmFyY29kZVsyOmluZGV4XQogICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMzApKQogICAgICAgICAgICAgICAgc3Jlc3VsdFsnQkFUQ0gnXSA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgIGVsaWYgYmFyY29kZVs6MV0gPT0gJ1MnOgogICAgICAgICAgICBpZiBjaHIoMjkpIGluIGJhcmNvZGU6CiAgICAgICAgICAgICAgICBpbmRleCA9IGJhcmNvZGUuaW5kZXgoY2hyKDI5KSkKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ1NFUklBTCddID0gYmFyY29kZVsxOmluZGV4XQogICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMzApKQogICAgICAgICAgICAgICAgc3Jlc3VsdFsnU0VSSUFMJ10gPSBiYXJjb2RlWzE6aW5kZXhdCiAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICBlbGlmIGJhcmNvZGVbOjJdID09ICc4UCc6CiAgICAgICAgICAgIHNyZXN1bHRbJ0dUSU4nXSA9IGJhcmNvZGVbMjoxNl0KICAgICAgICAgICAgaWYgbGVuKGJhcmNvZGUpID4gMTY6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVsxNzpdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIEJBUkNPREUnLCAnQkFSQ09ERSc6IHNyZXN1bHR9CgogICAgaWYgJ1BQTicgYW5kICdCQVRDSCcgYW5kICdFWFBJUlknIGFuZCAnU0VSSUFMJyBpbiBzcmVzdWx0LmtleXMoKToKICAgICAgICBpZiBwcG5fY2hlY2soc3Jlc3VsdFsnUFBOJ10pIGlzIEZhbHNlIGFuZCBleHBpcnlfZGF0ZV9jaGVjayhzcmVzdWx0WydFWFBJUlknXSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgUFBOICYgRVhQSVJZIERBVEUnLCAnQkFSQ09ERSc6IHNyZXN1bHR9CiAgICAgICAgZWxpZiBleHBpcnlfZGF0ZV9jaGVjayhzcmVzdWx0WydFWFBJUlknXSkgaXMgRmFsc2U6CiAgICAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgRVhQSVJZIERBVEUnLCAnQkFSQ09ERSc6IHNyZXN1bHR9CiAgICAgICAgZWxpZiBub3QgcHBuX2NoZWNrKHNyZXN1bHRbJ1BQTiddKToKICAgICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBQUE4nLCAnQkFSQ09ERSc6IHNyZXN1bHR9CiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNyZXN1bHQKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5DT01QTEVURSBEQVRBJywgJ0JBUkNPREUnOiBzcmVzdWx0fQoKCmRlZiBwcG5fY2hlY2socHBuOiBzdHIpIC0+IGJvb2w6CiAgICAjIGkgPSAwCiAgICB3ZWlnaHQgPSAyCiAgICBkaWdpdF9zdW0gPSAwCiAgICBmb3IgaSBpbiByYW5nZSgxMCk6CiAgICAgICAgZGlnaXRfc3VtICs9IChvcmQocHBuW2ldKSAqIHdlaWdodCkKICAgICAgICB3ZWlnaHQgKz0gMQogICAgY2hlY2tfZGlnaXQgPSBkaWdpdF9zdW0gJSA5NwogICAgcmV0dXJuIGNoZWNrX2RpZ2l0ID09IGludChwcG5bLTI6XSkgICMgUFBOIGxhc3QgdHdvIGNoYXJzIGFyZSBjb252ZXJ0ZWQgdG8gaW50IHRvIHJlbW92ZSBhbnkgbGVhZGluZyB6ZXJvLgoKIyBwYXJzZV9iYXJjb2RlKCcwMTAzMDQxMDk0Nzg3NDQzMjE1UWJhZyE8R1M+OTNaanF3JykK"
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_csv.py",
                "PyFileKey": "ui_csv",
                "PyFileData": "aW1wb3J0IGNzdgppbXBvcnQgb3MKaW1wb3J0IHJlCgppbXBvcnQgdWlfYmFyY29kZXMKaW1wb3J0IHVpX2dsb2JhbApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQoKCmRlZiBnZXRfcXVlcnlfdGV4dChxX25hbWU9JycpIC0+IHN0cjoKICAgIGlmIHFfbmFtZSA9PSAnUlNfZ29vZHMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX2dvb2RzICggIGlkLCBjb2RlLCBhcnQsIG5hbWUsIHVuaXQsIHR5cGVfZ29vZCwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyknCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfcHJvcGVydGllcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfcHJvcGVydGllcyAoICBpZCAsIGlkX293bmVyLCBuYW1lKSBWQUxVRVMgJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX3VuaXRzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU191bml0cyAoICBpZCxpZF9vd25lciwgY29kZSwgbmFtZSwgbm9taW5hdG9yLCBkZW5vbWluYXRvciwgaW50X3JlZHVjdGlvbikgVkFMVUVTICg/LD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU190eXBlc19nb29kcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfdHlwZXNfZ29vZHMgKCAgaWQsIG5hbWUpIFZBTFVFUyAoPyw/KScgICMgKD8sPykKICAgIGVsaWYgcV9uYW1lID09ICdSU19zZXJpZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX3NlcmllcyAoICBpZCwgbmFtZSwgYmVzdF9iZWZvcmUsIHR5cGVfZ29vZHMsIG51bWJlciwgcHJvZHVjdGlvbl9kYXRlKSBWQUxVRVMnCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfY291bnRyYWdlbnRzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19jb3VudHJhZ2VudHMgKCAgaWQsIG5hbWUsIGZ1bGxfbmFtZSwgaW5uLCBrcHApIFZBTFVFUyAnCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfd2FyZWhvdXNlcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfd2FyZWhvdXNlcyAoICBpZCwgbmFtZSkgVkFMVUVTICg/LD8pJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX3ByaWNlX3R5cGVzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19wcmljZV90eXBlcyAoaWQsIG5hbWUpIFZBTFVFUyAoPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19iYXJjb2Rlcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfYmFyY29kZXMgKGlkLCBiYXJjb2RlLCBpZF9nb29kLCBpZF9wcm9wZXJ0eSwgaWRfc2VyaWVzLCBpZF91bml0KSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19tYXJraW5nX2NvZGVzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19tYXJraW5nX2NvZGVzIChpZCwgbWFya19jb2RlLCBpZF9nb29kLCBpZF9wcm9wZXJ0eSwgaWRfc2VyaWVzLCBpZF91bml0KSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19wcmljZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX3ByaWNlcyAoaWRfcHJpY2VfdHlwZXMsIGlkX2dvb2RzLCBpZF9wcm9wZXJ0aWVzLCBwcmljZSwgaWRfdW5pdCkgVkFMVUVTICcKICAgIGVsaWYgcV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19kb2NzIChpZF9kb2MsIGRvY190eXBlLCBkb2NfbiwgZG9jX2RhdGUsIGlkX2NvdW50cmFnZW50cywgaWRfd2FyZWhvdXNlKSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19kb2NzX3RhYmxlJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19kb2NzX3RhYmxlIChpZF9kb2MsIGlkX2dvb2QsIGlkX3Byb3BlcnRpZXMsIGlkX3NlcmllcywgaWRfdW5pdCwgcXR0eSwgcXR0eV9wbGFuLCBwcmljZSwgaWRfcHJpY2UpIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyw/LD8pJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX2RvY3NfYmFyY29kZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX2RvY3NfYmFyY29kZXMgKGlkX2RvYywgaWRfYmFyY29kZSwgaXNfcGxhbikgVkFMVUVTICg/LD8sPyknCgoKZGVmIGdldF9xdWVyeV90ZXh0X2V4cG9ydCgpOgogICAgcmV0dXJuICcnJwogICAgICAgICBTRUxFQ1QgCiAgICAgICAgJzAnIEFTIEdUSU4sCiAgICAgICAgUlNfbWFya2luZy5pZF9nb29kLAogICAgICAgIFJTX21hcmtpbmcubmFtZSwgCiAgICAgICAgMSBhcyBEZWNsYXJlZFF1YW50aXR5LAogICAgICAgIENBU0UgYXBwcm92ZWQKICAgICAgICAgICAgV0hFTiAnMScgVEhFTiAxCiAgICAgICAgICAgIEVMU0UgMAogICAgICAgIEVORCBBUyBDdXJyZW50UXVhbnRpdHksCiAgICAgICAgYmFyY29kZV9mcm9tX3NjYW5uZXIgYXMg0JzQsNGA0LrQsCwKICAgICAgICBSU19tYXJraW5nLm1hcmtfY29kZSBBUyDQnNCw0YDQutCw0JjQodCc0J8sCiAgICAgICAgUlNfbWFya2luZy5pZF9wcm9wZXJ0eSBhcyDQmNC90LLQvtC50YEsCiAgICAgICAgJ9Cn0YPQttC+0LknIGFzINCf0YDQuNC90LDQtNC70LXQttC90L7RgdGC0YwgCgogICAgICAgIEZST00gUlNfZG9jc19iYXJjb2RlcyAKCiAgICAgICAgTEVGVCBKT0lOIChTRUxFQ1QgCiAgICAgICAgICAgICAgICAgICAgaWQgQVMgaWRfYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICBtYXJrX2NvZGUgQVMgbWFya19jb2RlLAogICAgICAgICAgICAgICAgICAgIGlkX2dvb2QsCiAgICAgICAgICAgICAgICAgICAgaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgaWRfc2VyaWVzLAogICAgICAgICAgICAgICAgICAgIGlkX3VuaXQsCiAgICAgICAgICAgICAgICAgICAgUlNfZ29vZHMubmFtZSwKICAgICAgICAgICAgICAgICAgICBSU19nb29kcy5jb2RlCgogICAgICAgICAgICAgICAgICAgIEZST00gUlNfbWFya2luZ19jb2RlcwogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgICAgICAgICBPTiBSU19nb29kcy4gIGlkICA9IFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZAogICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX21hcmtpbmdfY29kZXMuaWQgSU4gCiAgICAgICAgICAgICAgICAgICAgICAgIChTRUxFQ1QgaWRfYmFyY29kZSBGUk9NIFJTX2RvY3NfYmFyY29kZXMgCiAgICAgICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jID0gOmlkX2RvYykpIEFTIFJTX21hcmtpbmcKICAgICAgICBPTiBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUgPSBSU19tYXJraW5nLmlkX2JhcmNvZGUgIAoKICAgICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MKJycnCgoKZGVmIG5vcm1hbGl6ZV9ndGluKGd0aW46IHN0cikgLT4gc3RyOgogICAgYSA9IGxlbihndGluKQogICAgaWYgYSA+IDE0OgogICAgICAgIHJldHVybiBndGluWzotMTRdCiAgICBlbHNlOgogICAgICAgIHJldHVybiAnMCcgKiAoMTQgLSBhKSArIGd0aW4KCgpkZWYgbG9hZF9mcm9tX2NzdihwYXRoPScnLCBmaWxlPScnKToKICAgICMgcmUuZnVsbG1hdGNoKHInXGR7MTN9JywgYmFyY29kZSkuc3RyaW5nID09IGJhcmNvZGU6CiAgICBjdXJyZW50X2RhdGUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJWQtJW0tJVkiKQogICAgIyBmaWxlID0gZmlsZSArICgiICIgKiAxNSkgI9GH0YLQvtCx0Ysg0L3QtSDQvdCw0YLRi9C60LDRgtGM0YHRjyDQvdCwIG91dCBvZiByYW5nZSDQsiDRgtC10LrRgdGC0L7QstC+0Lwg0LjQvNC10L3QuCAtINC00L7QsdCw0LLQuNC8IDE1INC/0YDQvtCx0LXQu9C+0LIKICAgIGlmIGZpbGVbOjZdID09ICdkb2NfaW4nOgogICAgICAgICMg0JfQsNCz0YDRg9C20LDQtdC8INC00L7QutGD0LzQtdC90YLRiwogICAgICAgIHdpdGggb3BlbihwYXRoLCAncicsIG5ld2xpbmU9JycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGNzdmZpbGU6CgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3YucmVhZGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKCiAgICAgICAgICAgIHJzX2RvY19kYXRhID0gW10KICAgICAgICAgICAgcnNfZG9jX3RhYmxlX2RhdGEgPSBbXQogICAgICAgICAgICByc19kb2NfYmFyY29kZSA9IFtdCiAgICAgICAgICAgIHJzX21hcmtpbmdfY29kZXMgPSBbXQogICAgICAgICAgICByc19wcm9wZXJ0aWVzID0gW10KICAgICAgICAgICAgdGVtcF9kb2NfbiA9ICcnCiAgICAgICAgICAgIHRlbXBfZ29vZCA9ICcnCiAgICAgICAgICAgIGRvY19udW0gPSB1aV9nbG9iYWwuUnNfZG9jLmdldF9uZXdfaWQoJycpCiAgICAgICAgICAgIGZvciByb3cgaW4gbXlfcmVhZGVyOgogICAgICAgICAgICAgICAgaWYgbXlfcmVhZGVyLmxpbmVfbnVtID4gNTogICMg0JfQsNCz0L7Qu9C+0LLQutC4INGC0LDQsdC70LjRhtGLCiAgICAgICAgICAgICAgICAgICAgIyBpZiB0ZW1wX2RvY19uICE9IHJvd1s4XToKICAgICAgICAgICAgICAgICAgICAjICAgICAjIFJTX2RvY3MgKGlkX2RvYywgZG9jX3R5cGUsIGRvY19uLCBkb2NfZGF0ZSwgaWRfY291bnRyYWdlbnRzLCBpZF93YXJlaG91c2UpCiAgICAgICAgICAgICAgICAgICAgIyAgICAgcnNfZG9jX2RhdGUuYXBwZW5kKChkb2NfbnVtLCAn0JjQvdCy0L7QudGBJywgZG9jX251bSwgY3VycmVudF9kYXRlLCAnMDAxJywgJzAwMScpKQogICAgICAgICAgICAgICAgICAgICMgICAgIHRlbXBfZG9jX24gPSByb3dbOF0KICAgICAgICAgICAgICAgICAgICAjIFJTX2RvY3NfdGFibGUoaWRfZG9jLCBpZF9nb29kLCBpZF9wcm9wZXJ0aWVzLCBpZF9zZXJpZXMsIGlkX3VuaXQsIHF0dHksIHF0dHlfcGxhbiwgcHJpY2UsIGlkX3ByaWNlKQogICAgICAgICAgICAgICAgICAgIGlmIHRlbXBfZ29vZCAhPSByb3dbMF06CiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY190YWJsZV9kYXRhLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NfbnVtLCByb3dbMF0sIHJvd1s4XSwgJycsIHJvd1sxXSArIHJvd1swXSwgaW50KHJvd1s3XSksIGludChyb3dbNl0pLCAnJywgJycpKQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyX2NvdW50ID0gcnNfZG9jX3RhYmxlX2RhdGEuX19sZW5fXygpIC0gMQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2dvb2QgPSByb3dbMF0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjINC00L7QsdCw0LLQuNC8INC60L7Qu9C40YfQtdGB0YLQstC+INCyINGB0YLRgNC+0LrRgywg0LTQu9GPINGN0YLQvtCz0L4g0L/RgNC10L7QsdGA0LDQt9GD0LXQvCDQtdC1INCyINCb0LjRgdGCLCDQv9C+0LzQtdC90Y/QtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INC4INC30LDRgdGD0L3QtdC8INC+0LHRgNCw0YLQvdC+INCyINC60L7RgNGC0LXQtgogICAgICAgICAgICAgICAgICAgICAgICBsc3QgPSBsaXN0KHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdKQogICAgICAgICAgICAgICAgICAgICAgICBsc3RbNl0gPSBpbnQobHN0WzZdKSArIGludChyb3dbNl0pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdID0gdHVwbGUobHN0KQogICAgICAgICAgICAgICAgICAgICAgICAjIHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdWzZdPWludChyc19kb2NfdGFibGVfZGF0YVtjdXJyX2NvdW50XVs2XSkgKyBpbnQocm93WzZdKQogICAgICAgICAgICAgICAgICAgIGlmIHJvd1s1XToKICAgICAgICAgICAgICAgICAgICAgICAgIyBSU19kb2NzX2JhcmNvZGVzIChpZF9kb2MsIGlkX2JhcmNvZGUsIGlzX3BsYW4pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY19iYXJjb2RlLmFwcGVuZCgoZG9jX251bSwgcm93WzVdLCAnMScpKQogICAgICAgICAgICAgICAgICAgICAgICAjIFJTX21hcmtpbmdfY29kZXMoaWQsIG1hcmtfY29kZSwgaWRfZ29vZCwgaWRfcHJvcGVydHksIGlkX3NlcmllcywgaWRfdW5pdCkgVkFMVUVTKD8sID8sID8sID8sID8sID8pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX21hcmtpbmdfY29kZXMuYXBwZW5kKChyb3dbNV0sIHJvd1s1XSwgcm93WzBdLCByb3dbOF0sICcnLCByb3dbMV0gKyByb3dbMF0pKQoKICAgICAgICAgICAgICAgIGVsaWYgbXlfcmVhZGVyLmxpbmVfbnVtID09IDM6CiAgICAgICAgICAgICAgICAgICAgaWYgcm93WzBdOgogICAgICAgICAgICAgICAgICAgICAgICBkb2NfbnVtID0gcm93WzBdCiAgICAgICAgICAgICAgICAgICAgcnNfZG9jX2RhdGEuYXBwZW5kKChkb2NfbnVtLCAn0JjQvdCy0L7QudGBJywgZG9jX251bSwgY3VycmVudF9kYXRlLCAnMDAxJywgJzAwMScpKQogICAgICAgICAgICAgICAgZWxpZiBteV9yZWFkZXIubGluZV9udW0gPT0gNToKICAgICAgICAgICAgICAgICAgICBsaXN0X2hlYWRlcnMgPSByb3cuY29weSgpCgogICAgICAgICMg0JfQsNC/0L7Qu9C90Y/QtdC8INGC0LDQsdC70LjRhtGLCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfZG9jcycpLCByc19kb2NfZGF0YSkKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU19kb2NzX3RhYmxlJyksIHJzX2RvY190YWJsZV9kYXRhKQogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2RvY3NfYmFyY29kZXMnKSwgcnNfZG9jX2JhcmNvZGUpCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfbWFya2luZ19jb2RlcycpLCByc19tYXJraW5nX2NvZGVzKQoKICAgICAgICAjINCf0L4g0LTQvtC60YPQvNC10L3RgtCw0LwsINCz0LTQtSDQtdGB0YLRjCDQt9Cw0L/Qu9Cw0L3QuNGA0L7QstCw0L3QvdGL0LUg0LzQsNGA0LrQuCwg0LTQvtCx0LDQstC40Lwg0L/RgNC40LfQvdCw0LoKICAgICAgICBxdGV4dCA9ICdTRUxFQ1QgaWRfZG9jLCBDT1VOVChpc19wbGFuKSBhcyBpc19wbGFuIEZST00gUlNfZG9jc19iYXJjb2RlcyBXSEVSRSBpc19wbGFuID0gIjEiICcKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgJycsIFRydWUpCiAgICAgICAgcXRleHQgPSAnVVBEQVRFIFJTX2RvY3MgU0VUIGFkZF9tYXJrX3NlbGVjdGlvbiA9ID8gV0hFUkUgaWRfZG9jID0gPycKICAgICAgICAjIC0tLQogICAgICAgIGZvciBlbCBpbiByZXM6CiAgICAgICAgICAgIGlmIGVsWydpc19wbGFuJ10gPiAwOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgxLCBlbFsnaWRfZG9jJ10pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgwLCBlbFsnaWRfZG9jJ10pKQogICAgICAgIHJldHVybiAyMDAKCgoKCiAgICBlbGlmIGZpbGVbOjE0XSA9PSAnaW5pdGlhbF9kaWN0c18nOgogICAgICAgICMg0JTQvtCx0LDQstC40Lwg0YLQuNC/INGC0L7QstCw0YDQsCDQtNC70Y8g0LLRgdC10YUg0YLQsNCx0LvQuNGGCiAgICAgICAgcXRleHQgPSAnUkVQTEFDRSBJTlRPIFJTX3R5cGVzX2dvb2RzICggIGlkLCBuYW1lKSBWQUxVRVMgKD8sPyknCiAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgn0KLQvtCy0LDRgCcsICfQotC+0LLQsNGAJykpCgogICAgICAgIHdpdGggb3BlbihwYXRoLCAncicsIG5ld2xpbmU9JycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGNzdmZpbGU6CgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3YucmVhZGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKCiAgICAgICAgICAgIHJzX2dvb2RzX2RhdGEgPSBbXQogICAgICAgICAgICByc19iYXJjb2Rlc19kYXRhID0gW10KICAgICAgICAgICAgcnNfdW5pdHNfZGF0YSA9IFtdCiAgICAgICAgICAgICMgUlNfd2FyZWhvdXNlcyggIGlkLCBuYW1lKQogICAgICAgICAgICByc193YXJlaG91c2VzID0gW1snMDAxJywgJ9Ce0YHQvdC+0LLQvdC+0LknXV0KICAgICAgICAgICAgIyBSU190eXBlc19nb29kcyAoICBpZCwgbmFtZSkKICAgICAgICAgICAgcnNfdHlwZXNfZ29vZHNfZGF0YSA9IFtbJzAwMScsICfQotC+0LLQsNGAJ11dCiAgICAgICAgICAgIHBhcnRfY291bnQgPSAxMDAwCgogICAgICAgICAgICBmb3Igcm93IGluIG15X3JlYWRlcjoKICAgICAgICAgICAgICAgIGlmIG15X3JlYWRlci5saW5lX251bSA9PSAxOiAgIyDQl9Cw0LPQvtC70L7QstC60Lgg0YLQsNCx0LvQuNGG0YsKICAgICAgICAgICAgICAgICAgICBsaXN0X2hlYWRlcnMgPSByb3cuY29weSgpCiAgICAgICAgICAgICAgICBlbHNlOiAgIyDQt9Cw0L/QvtC70L3Rj9C10Lwg0YLQsNCx0LvQuNGG0Ysg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LfQsNC/0YDQvtGB0LAg0LogU1FMCiAgICAgICAgICAgICAgICAgICAgIyAgIGlkLCBjbyBkZSwgYXJ0LCBuYW1lLCB1bml0LCB0eXBlX2dvb2QsIGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICAgICAgcnNfZ29vZHNfZGF0YS5hcHBlbmQoKHJvd1syXSwgcm93WzNdLCByb3dbNV0sIHJvd1s0XSwgcm93WzFdLCAn0KLQvtCy0LDRgCcsIHJvd1sxNV0pKQogICAgICAgICAgICAgICAgICAgICMgICBpZCwgaWRfb3duZXIsIGNvZGUsIG5hbWUsIG5vbWluYXRvciwgZGVub21pbmF0b3IsIGludF9yZWR1Y3Rpb24KICAgICAgICAgICAgICAgICAgICByc191bml0c19kYXRhLmFwcGVuZCgocm93WzFdICsgcm93WzJdLCByb3dbMl0sIHJvd1sxXSwgcm93WzFdLCAxLCAxLCByb3dbMV0pKQogICAgICAgICAgICAgICAgICAgICMgYmFyY29kZSwgaWRfZ29vZCwgaWRfcHJvcGVydHksIGlkX3NlcmllcywgaWRfdW5pdAogICAgICAgICAgICAgICAgICAgIGd0aW4gPSBub3JtYWxpemVfZ3Rpbihyb3dbMF0pCiAgICAgICAgICAgICAgICAgICAgcnNfYmFyY29kZXNfZGF0YS5hcHBlbmQoKGd0aW4sIGd0aW4sIHJvd1syXSwgJycsICcnLCByb3dbMV0gKyByb3dbMl0pKQoKICAgICAgICAgICAgICAgICMg0JrQsNC20LTRi9C1IDEwMDAg0YHRgtGA0L7QuiDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQsiDQsdCw0LfRgwogICAgICAgICAgICAgICAgaWYgbXlfcmVhZGVyLmxpbmVfbnVtID09IHBhcnRfY291bnQ6CiAgICAgICAgICAgICAgICAgICAgcGFydF9jb3VudCArPSAxMDAwCiAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfZ29vZHMnKSwgcnNfZ29vZHNfZGF0YSkKICAgICAgICAgICAgICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU191bml0cycpLCByc191bml0c19kYXRhKQogICAgICAgICAgICAgICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2JhcmNvZGVzJyksIHJzX2JhcmNvZGVzX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgcnNfZ29vZHNfZGF0YSA9IFtdCiAgICAgICAgICAgICAgICAgICAgcnNfYmFyY29kZXNfZGF0YSA9IFtdCiAgICAgICAgICAgICAgICAgICAgcnNfdW5pdHNfZGF0YSA9IFtdCgogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX3dhcmVob3VzZXMnKSwgcnNfd2FyZWhvdXNlcykKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU190eXBlc19nb29kcycpLCByc190eXBlc19nb29kc19kYXRhKQogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2dvb2RzJyksIHJzX2dvb2RzX2RhdGEpCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfdW5pdHMnKSwgcnNfdW5pdHNfZGF0YSkKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU19iYXJjb2RlcycpLCByc19iYXJjb2Rlc19kYXRhKQoKICAgICAgICByZXR1cm4gMjAwCgoKZGVmIGxpc3RfZm9sZGVyKHBhdGg6IHN0ciwgZGVsZXRlX2ZpbGVzOiBib29sKToKICAgICMgdHJ5OgogICAgYWEgPSAwCiAgICB0b3RhbCA9IDAKICAgIGZvciBmaWxlIGluIG9zLmxpc3RkaXIocGF0aCk6CiAgICAgICAgdG90YWwgKz0gMQogICAgICAgIGlmIGZpbGUuZW5kc3dpdGgoIi5jc3YiKToKICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlICsgKCIgIiAqIDE1KSAgIyDRh9GC0L7QsdGLINC90LUg0L3QsNGC0YvQutCw0YLRjNGB0Y8g0L3QsCBvdXQgb2YgcmFuZ2Ug0LIg0YLQtdC60YHRgtC+0LLQvtC8INC40LzQtdC90LggLSDQtNC+0LHQsNCy0LjQvCAxNSDQv9GA0L7QsdC10LvQvtCyCiAgICAgICAgICAgIGlmIGZpbGVuYW1lWzo2XSA9PSAnZG9jX2luJyBvciBmaWxlbmFtZVs6MTRdID09ICdpbml0aWFsX2RpY3RzXyc6CiAgICAgICAgICAgICAgICBhYSArPSAxCiAgICAgICAgICAgICAgICBhbnMgPSBsb2FkX2Zyb21fY3N2KHBhdGggKyBmaWxlLCBmaWxlKQogICAgICAgICAgICAgICAgaWYgYW5zID09IDIwMCBhbmQgZGVsZXRlX2ZpbGVzID09ICd0cnVlJzoKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUocGF0aCArIGZpbGUpCgogICAgcmV0dXJuICfQl9Cw0LPRgNGD0LfQutCwINC30LDQstC10YDRiNC10L3QsCwg0LfQsNCz0YDRg9C20LXQvdC+ICcgKyBzdHIoYWEpICsgJyDRhNCw0LnQu9C+0LIg0LjQtyAnICsgc3RyKHRvdGFsKQogICAgIyBleGNlcHQ6CiAgICAjICAgcmV0dXJuICfQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0YTQsNC50LvQsCcKCgpkZWYgZXhwb3J0X2NzdihwYXRoLCBJUCwgQW5kcm9pZElEKToKICAgIGRvY3MgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnU0VMRUNUIGlkX2RvYywgZG9jX24gZnJvbSBSU19kb2NzIFdoZXJlIHZlcmlmaWVkID0gMScpCiAgICBjb3VudCA9IDAKICAgIGZvciBkb2NfaXRlbSBpbiBkb2NzOgogICAgICAgIHF0ZXh0ID0gZ2V0X3F1ZXJ5X3RleHRfZXhwb3J0KCkKCiAgICAgICAgcmVzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsIChkb2NfaXRlbVswXSwpLCBUcnVlKQogICAgICAgIGNvdW50ICs9IDEKICAgICAgICB3aXRoIG9wZW4ocGF0aCArICdkb2Nfb3V0XycgKyBkb2NfaXRlbVsxXSArICcuY3N2JywgJ3cnLCBuZXdsaW5lPScnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBjc3ZmaWxlOgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3Yud3JpdGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKICAgICAgICAgICAgbXlfcmVhZGVyLndyaXRlcm93KCgnTmFtZScsICdVc2VyTmFtZScsICdEZXZpY2VJZCcsICdEZXZpY2VJUCcpKQogICAgICAgICAgICBteV9yZWFkZXIud3JpdGVyb3coKCfQn9GA0LjRhdC+0LQg0L3QsCDRgdC60LvQsNC0ICcgKyBkb2NfaXRlbVsxXSwgJ9Cc0L7RgdC60LLQsDEnLCBBbmRyb2lkSUQsIElQKSkKICAgICAgICAgICAgbXlfcmVhZGVyLndyaXRlcm93KCgnR1RJTicsICfQmtC+0LTQktCj0YfQtdGC0L3QvtC50KHQuNGB0YLQtdC80LUnLCAn0J3QsNC40LzQtdC90L7QstCw0L3QuNC1JywgJ0RlY2xhcmVkUXVhbnRpdHknLCAnQ3VycmVudFF1YW50aXR5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn0JrQvtGA0L7QsdC60LAnLCAn0JzQsNGA0LrQsCcsICfQnNCw0YDQutCw0JjQodCc0J8nLCAn0JjQvdCy0L7QudGBJywgJ9Cf0YDQuNC90LDQtNC70LXQttC90L7RgdGC0YwnKSkKICAgICAgICAgICAgZm9yIGVsIGluIHJlczoKICAgICAgICAgICAgICAgIGd0aW4gPSB1aV9iYXJjb2Rlcy5nZXRfZ3Rpbl9zZXJpYWxfZnJvbV9kYXRhbWF0cml4KGVsWyfQnNCw0YDQutCw0JjQodCc0J8nXSkKICAgICAgICAgICAgICAgIGVsWydHVElOJ10gPSBndGluWydHVElOJ10KICAgICAgICAgICAgICAgIG15X3JlYWRlci53cml0ZXJvdygoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxbJ0dUSU4nXSwgZWxbJ2lkX2dvb2QnXSwgZWxbJ25hbWUnXSwgZWxbJ0RlY2xhcmVkUXVhbnRpdHknXSwgZWxbJ0N1cnJlbnRRdWFudGl0eSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsWyfQnNCw0YDQutCwJ10sIGVsWyfQnNCw0YDQutCw0JjQodCc0J8nXSwgZWxbJ9CY0L3QstC+0LnRgSddLCBlbFsn0J/RgNC40L3QsNC00LvQtdC20L3QvtGB0YLRjCddKSkKCiAgICByZXR1cm4gc3RyKGNvdW50KSArICcg0LTQvtC60YPQvNC10L3RgtC+0LInCiMgZXhwb3J0X2Nzdign0J7QsdC80LXQvdCi0KHQlC/QndCQLycpICMnCgoKIyBvcGVuX2ZpbGVzX25ldCgnJywgJ0Q6L1B5dGhvblByb2plY3RzL1JpZ2h0U2Nhbi9TVUltYWluL9Ce0LHQvNC10L3QotCh0JQv0J3QkC9pbml0aWFsX2RpY3RzXzAxLmNzdicsICdpbml0aWFsX2RpY3RzXzAxLmNzdicpCiMgb3Blbl9maWxlc19uZXQoJycsICdEOi9QeXRob25Qcm9qZWN0cy9SaWdodFNjYW4vU1VJbWFpbi/QntCx0LzQtdC90KLQodCUL9Cd0JAvZG9jXzEuY3N2JywnZG9jXzEuY3N2JykK"
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_form_data.py",
                "PyFileKey": "ui_form_data",
                "PyFileData": "aW1wb3J0IGpzb24KaW1wb3J0IHdpZGdldHMKCmJhcmNvZGVfY2FyZHMgPSB7ImN1c3RvbWNhcmRzIjogewogICAgIm9wdGlvbnMiOiB7CiAgICAgICAgInNlYXJjaF9lbmFibGVkIjogVHJ1ZSwKICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgIH0sCgogICAgImxheW91dCI6IHsKICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgIlBhZGRpbmciOiAiMCIsCiAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRjBGOEZGIiwKICAgICAgICAgICAgICAgICJQYWRkaW5nIjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcHJvcGVydGllcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6ICIxNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiI0YwRjhGRiIsCiAgICAgICAgICAgICAgICAiUGFkZGluZyI6ICIwIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHVuaXQiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMTUiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0SXRhbGljIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6IDEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBiYXJjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogIjE1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRjBGOEZGIiwKICAgICAgICAgICAgICAgICJQYWRkaW5nIjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAc2VyaWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogIjE1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgXQogICAgICAgIH0KICAgIH0KfQoKZGVmIGdldF9kb2NfY2FyZChzZXR0aW5nc19nbG9iYWwsIEFkZE1lbnU9JycpOgogICAgZG9jX2xpc3QgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiQ2hlY2tCb3giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb21wbGV0ZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIkNoZWNrQm94MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMzIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCJUaXRsZVRleHRTaXplIikgIyIxOCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiUG9wdXBNZW51QnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogZiLQo9C00LDQu9C40YLRjDvQn9C+0LTRgtCy0LXRgNC00LjRgtGMO9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsHtBZGRNZW51fSIsICAjO9Ch0LrQsNC90LjRgNC+0LLQsNGC0Ywg0YjRgtGA0LjRhdC60L7QtNGLINC/0L7RgtC+0LrQvtC8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICJtZW51X2RlbGV0ZSIKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbnVtYmVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykgICMiMjAiCiAgICAgICAgICAgICAgICAgICAgICAgIH0jLAogICAgICAgICAgICAgICAgICAgICAgICAjIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICMgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiVmFsdWUiOiAiQGRhdGEiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIyAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICMgfQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb3VudHJhZ2VudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHdhcmVob3VzZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfX0KCiAgICByZXR1cm4gZG9jX2xpc3QKCgpkZWYgZ2V0X2RvY19jYXJkX25ldyhzZXR0aW5nc19nbG9iYWwsIHRhYmxlX2RhdGEpOgogICAgZG9jX2xpc3QgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTgsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0eXBlJywKICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J3JpZ2h0JywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1zZXR0aW5nc19nbG9iYWwuZ2V0KCJUaXRsZVRleHRTaXplIiksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTIsCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J9Cj0LTQsNC70LjRgtGMJywKICAgICAgICAgICAgICAgICAgICBWYXJpYWJsZT0ibWVudV9kZWxldGUiCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbnVtYmVyJywKICAgICAgICAgICAgICAgICAgICBUZXh0Qm9sZD1UcnVlLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAY291bnRyYWdlbnQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B3YXJlaG91c2UnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgICAgICksCiAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgIGNhcmRzZGF0YT10YWJsZV9kYXRhCiAgICApCgogICAgcmV0dXJuIGRvY19saXN0LnRvX2pzb24oKQoKCmRlZiBnZXRfZG9jX3F1ZXJ5KGFyZz0nJyk6CiAgICBxdWVyeV90ZXh0ID0gIiIiCiAgICBTRUxFQ1QgUlNfZG9jcy5pZF9kb2MsCiAgICBSU19kb2NzLmRvY190eXBlLAogICAgUlNfZG9jcy5kb2NfbiwKICAgIFJTX2RvY3MuZG9jX2RhdGUsCiAgICBSU19kb2NzLmlkX2NvdW50cmFnZW50cywKICAgIFJTX2RvY3MuaWRfd2FyZWhvdXNlLAogICAgaWZudWxsKFJTX2NvdW50cmFnZW50cy5mdWxsX25hbWUsJycpIGFzIFJTX2NvdW50cmFnZW50LAogICAgaWZudWxsKFJTX3dhcmVob3VzZXMubmFtZSwnJykgYXMgUlNfd2FyZWhvdXNlLAogICAgUlNfZG9jcy52ZXJpZmllZCwKICAgIFJTX2RvY3Muc2VudCwKICAgIFJTX2RvY3MuYWRkX21hcmtfc2VsZWN0aW9uCgogICAgIEZST00gUlNfZG9jcwogICAgIExFRlQgSk9JTiBSU19jb3VudHJhZ2VudHMgYXMgUlNfY291bnRyYWdlbnRzCiAgICAgT04gUlNfY291bnRyYWdlbnRzLmlkID0gUlNfZG9jcy5pZF9jb3VudHJhZ2VudHMKICAgICBMRUZUIEpPSU4gUlNfd2FyZWhvdXNlcyBhcyBSU193YXJlaG91c2VzCiAgICAgT04gUlNfd2FyZWhvdXNlcy5pZD1SU19kb2NzLmlkX3dhcmVob3VzZQogICAgICIiIgogICAgaWYgbm90IChhcmcgPT0gJycgb3IgYXJnID09ICfQktGB0LUnKToKICAgICAgICBxdWVyeV90ZXh0ID0gcXVlcnlfdGV4dCArICcnJwogICAgICAgIFdoZXJlIFJTX2RvY3MuZG9jX3R5cGU9PycnJwoKICAgIHF1ZXJ5X3RleHQgPSBxdWVyeV90ZXh0ICsgIiIiCiAgICBPUkRFUgogICAgQlkKICAgIFJTX2RvY3MuZG9jX2RhdGUiIiIKICAgIHJldHVybiBxdWVyeV90ZXh0CgpkZWYgZ2V0X2Fkcl9kb2NfcXVlcnkoYXJnPScnKToKICAgIHF1ZXJ5X3RleHQgPSAiIiIKICAgIFNFTEVDVCBSU19hZHJfZG9jcy5pZF9kb2MsCiAgICBSU19hZHJfZG9jcy5kb2NfdHlwZSwKICAgIFJTX2Fkcl9kb2NzLmRvY19uLAogICAgUlNfYWRyX2RvY3MuZG9jX2RhdGUsCiAgICBSU19hZHJfZG9jcy5pZF93YXJlaG91c2UsCiAgICBpZm51bGwoUlNfd2FyZWhvdXNlcy5uYW1lLCcnKSBhcyBSU193YXJlaG91c2UsCiAgICBSU19hZHJfZG9jcy52ZXJpZmllZCwKICAgIFJTX2Fkcl9kb2NzLnNlbnQsCiAgICBSU19hZHJfZG9jcy5hZGRfbWFya19zZWxlY3Rpb24KCiAgICAgRlJPTSBSU19hZHJfZG9jcwoKICAgICBMRUZUIEpPSU4gUlNfd2FyZWhvdXNlcyBhcyBSU193YXJlaG91c2VzCiAgICAgT04gUlNfd2FyZWhvdXNlcy5pZD1SU19hZHJfZG9jcy5pZF93YXJlaG91c2UKICAgICAiIiIKICAgIGlmIG5vdCAoYXJnID09ICcnIG9yIGFyZyA9PSAn0JLRgdC1Jyk6CiAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnJycKICAgICAgICBXaGVyZSBSU19hZHJfZG9jcy5kb2NfdHlwZT0/JycnCgogICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAiIiIKICAgIE9SREVSCiAgICBCWQogICAgUlNfYWRyX2RvY3MuZG9jX2RhdGUiIiIKICAgIHJldHVybiBxdWVyeV90ZXh0CgpkZWYgZ2V0X2RvY190eXBlX3F1ZXJ5KCk6CiAgICBscyA9ICdTRUxFQ1QgRElTVElOQ1QgZG9jX3R5cGUgZnJvbSBSU19kb2NzJwogICAgcmV0dXJuIGxzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLdCi0L7QstCw0YDRiwpkZWYgZ2V0X2dvb2RzX2NhcmQoc2V0dGluZ3NfZ2xvYmFsKToKICAgIGxpc3QgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBHVElOIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkB0eXBlX25hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdDYXJkVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHVuaXRfbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUZXh0U2l6ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQoKICAgIH0KICAgIH0KICAgIHJldHVybiBsaXN0CgpkZWYgZmllbGRzX2FsaWFzX2RpY3QoKToKICAgICMgKCJUaXRsZVRleHRTaXplIiwgIjE4IiwgVHJ1ZSkKICAgICMgKCJ0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoIkNhcmRUaXRsZVRleHRTaXplIiwgIjIwIiwgVHJ1ZSkKICAgICMgKCJDYXJkRGF0ZVRleHRTaXplIiwgIjEwIiwgVHJ1ZSkKICAgICMgKCJDYXJkVGV4dFNpemUiLCAiMTUiLCBUcnVlKQogICAgIyAoIkdvb2RzQ2FyZFRpdGxlVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoImdvb2RzVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoIlNlcmllc1Byb3BlcnRpZXNUZXh0U2l6ZSIsICIxNiIsIFRydWUpCiAgICAjICgiRG9jVHlwZUNhcmRUZXh0U2l6ZSIsICIxNSIsIFRydWUpCiAgICAKICAgIHJldHVybiB7CiAgICAgICAgJ2lkX2dvb2QnOnsnbmFtZSc6J9Cd0L7QvNC10L3QutC70LDRgtGD0YDQsCcsICd0ZXh0X3NpemUnOidUaXRsZVRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ3R5cGVfZ29vZCc6IHsnbmFtZSc6J9Ci0LjQvyDQvdC+0LzQtdC90LrQu9Cw0YLRg9GA0YsnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICd1bml0Jzp7J25hbWUnOiAn0JXQtNC40L3QuNGG0LAg0LjQt9C80LXRgNC10L3QuNGPJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWRfcHJvcGVydHknOnsnbmFtZSc6ICfQpdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutCwJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWRfc2VyaWVzJzogeyduYW1lJzon0KHQtdGA0LjRjycsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3VuaXQnOnsnbmFtZSc6ICfQldC00LjQvdC40YbQsCDQuNC30LzQtdGA0LXQvdC40Y8nLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdpZF9jb3VudHJhZ2VudHMnOnsnbmFtZSc6ICfQmtC+0L3RgtGA0LDQs9C10L3RgicsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3dhcmVob3VzZSc6eyduYW1lJzogJ9Ch0LrQu9Cw0LQnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdpZF9kb2MnOnsnbmFtZSc6ICfQndC+0LzQtdC90LrQu9Cw0YLRg9GA0LAnLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IFRydWV9LAogICAgICAgICdpZF9jZWxsJzp7J25hbWUnOiAn0K/Rh9C10LnQutCwJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWQnOnsnbmFtZSc6ICdrZXknLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICduYW1lJzp7J25hbWUnOiAn0J3QsNC40LzQtdC90L7QstCw0L3QuNC1JywgJ3RleHRfc2l6ZSc6J1RpdGxlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAnY29kZSc6eyduYW1lJzogJ9Ca0L7QtCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2FydCc6eyduYW1lJzogJ9CQ0YDRgtC40LrRg9C7JywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnZGVzY3JpcHRpb24nOnsnbmFtZSc6ICfQntC/0LjRgdCw0L3QuNC1JywgJ3RleHRfc2l6ZSc6J0NhcmREYXRlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3F0dHknOnsnbmFtZSc6ICfQmtC+0LvQuNGH0LXRgdGC0LLQvicsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAncXR0eV9wbGFuJzp7J25hbWUnOiAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0nLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ2JhcmNvZGUnOnsnbmFtZSc6ICfQqNGC0YDQuNGF0LrQvtC0JywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnZnVsbF9uYW1lJzp7J25hbWUnOiAn0J/QvtC70L3QvtC1INC90LDQuNC80LXQvdC+0LLQsNC90LjQtScsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lubic6eyduYW1lJzogJ9CY0J3QnScsICd0ZXh0X3NpemUnOidUaXRsZVRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdrcHAnOnsnbmFtZSc6ICfQmtCf0J8nLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnbWFya19jb2RlJzp7J25hbWUnOiAn0KjRgtGA0LjRhdC60L7QtCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3ByaWNlX3R5cGVzJzp7J25hbWUnOiAn0KLQuNC/INGG0LXQvdGLJywgJ3RleHRfc2l6ZSc6J1RpdGxlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3ByaWNlJzp7J25hbWUnOiAn0KbQtdC90LAnLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IFRydWV9LAogICAgICAgICdpZF9vd25lcic6eyduYW1lJzogJ9CS0LvQsNC00LXQu9C10YYnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdiZXN0X2JlZm9yZSc6eyduYW1lJzogJ9CT0L7QtNC10L0g0LTQvjonLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdudW1iZXInOnsnbmFtZSc6J9Cd0L7QvNC10YAnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdwcm9kdWN0aW9uX2RhdGUnOnsnbmFtZSc6J9CU0LDRgtCwINC/0YDQvtC40LfQstC+0LTRgdGC0LLQsCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3VzZV9tYXJrJzp7J25hbWUnOifQmNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0LzQsNGA0LrQuNGA0L7QstC60YMnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdub21pbmF0b3InOnsnbmFtZSc6J9Cd0L7QvNC40L3QsNGC0L7RgCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAnZGVub21pbmF0b3InOnsnbmFtZSc6J9CU0LXQvdC+0LzQuNC90LDRgtC+0YAnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ2xvZyc6IHsnbmFtZSc6ICfQntGI0LjQsdC60LAnLCAndGV4dF9zaXplJzogJ0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfQogICAgICAgIH0KCgpkZWYgdGFibGVfbmFtZXNfZGljdCgpOgogICAgcmV0dXJuIHsKICAgICAgICAnaWRfZ29vZCc6J1JTX2dvb2RzJywKICAgICAgICAndHlwZV9nb29kJzogJ1JTX3R5cGVzX2dvb2RzJywKICAgICAgICAndW5pdCc6ICdSU191bml0cycsCiAgICAgICAgJ2lkX3Byb3BlcnR5JzogJ1JTX3Byb3BlcnRpZXMnLAogICAgICAgICdpZF9zZXJpZXMnOiAnUlNfc2VyaWVzJywKICAgICAgICAnaWRfdW5pdCc6ICdSU191bml0cycsCiAgICAgICAgJ2lkX2NvdW50cmFnZW50cyc6ICdSU19jb3VudHJhZ2VudHMnLAogICAgICAgICdpZF93YXJlaG91c2UnOiAnUlNfd2FyZWhvdXNlcycsCiAgICAgICAgJ2lkX2RvYyc6ICdSU19kb2NzJywKICAgICAgICAnaWRfY2VsbCc6ICdSU19jZWxscycsCiAgICAgICAgJ2lkX293bmVyJzogJ1JTX2dvb2RzJywKICAgICAgICAnaWRfcHJpY2VfdHlwZXMnOiAnUlNfcHJpY2VfdHlwZXMnCiAgICAgICAgICAgIH0KZGVmIGdldF9lbGVtX2RpY3QodGV4dF9zaXplKToKICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHRleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCmRlZiBnZXRfdW5pdmVyc2FsX2NhcmQoKSAtPiBvYmplY3Q6CgogICAgbGlzdCA9IHsiY3VzdG9tY2FyZHMiOiB7CiAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICJzZWFyY2hfZW5hYmxlZCI6IFRydWUsCiAgICAgICAgICAgICdvdmVycmlkZV9zZWFyY2gnOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCgogICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQoKICAgIH0KICAgIH0KCgogICAgcmV0dXJuIGxpc3QKCgpkZWYgZ2V0X2dvb2RzX3F1ZXJ5KCk6CiAgICBxdWVyeV90ZXh0ID0gIiIiCiAgICBTRUxFQ1QgUlNfZ29vZHMuaWQsCiAgICBSU19nb29kcy5jb2RlLAogICAgUlNfZ29vZHMuYXJ0LAogICAgUlNfZ29vZHMubmFtZSwKICAgIFJTX2dvb2RzLnR5cGVfZ29vZCwKICAgIFJTX3R5cGVzX2dvb2RzLm5hbWUgQVMgdHlwZXNfZ29vZHMsCiAgICBSU19nb29kcy51bml0LAogICAgUlNfdW5pdHMubmFtZQogICAgRlJPTSBSU19nb29kcwogICAgTEVGVCBKT0lOIFJTX3R5cGVzX2dvb2RzCiAgICBPTiBSU190eXBlc19nb29kcy5pZCA9IFJTX2dvb2RzLnR5cGVfZ29vZAogICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICBPTiBSU191bml0cy5pZF9vd25lciA9IFJTX2dvb2RzLmlkIiIiCiAgICByZXR1cm4gcXVlcnlfdGV4dAoKCmRlZiBnZXRfcHJpY2VfY2FyZChzZXR0aW5nc19nbG9iYWwpOgogICAgdHh0ID0geyJjdXN0b21jYXJkcyI6IHsKICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgInNlYXJjaF9lbmFibGVkIjogRmFsc2UsCiAgICAgICAgICAgICJzYXZlX3Bvc2l0aW9uIjogVHJ1ZQogICAgICAgIH0sCiAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHByaWNlX3R5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcHJpY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICBdCiAgICB9CiAgICB9CiAgICByZXR1cm4gdHh0CgoKZGVmIGdldF9kb2NfZGV0YWlsc19xdWVyeShpc0FkciA9IEZhbHNlLCBjdXJDZWxsID0gRmFsc2UpOgogICAgaWYgaXNBZHI6CiAgICAgICAgcXVlcnlfdGV4dCA9ICcnJwogICAgICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWQsCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLmlkX2RvYywKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZCwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLm5hbWUsIDpOdWxsVmFsdWUpIGFzIGdvb2RfbmFtZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmNvZGUsIDpFbXB0eVN0cmluZykgYXMgY29kZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmFydCwgOkVtcHR5U3RyaW5nKSBhcyBhcnQsCiAgICAgICAgICAgIGlmbnVsbChSU19hZHJfZG9jc190YWJsZS5pZF9wcm9wZXJ0aWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3Byb3BlcnRpZXMsCiAgICAgICAgICAgIGlmbnVsbChSU19wcm9wZXJ0aWVzLm5hbWUsIDpFbXB0eVN0cmluZykgYXMgcHJvcGVydGllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfc2VyaWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3NlcmllcywKICAgICAgICAgICAgaWZudWxsKFJTX3Nlcmllcy5uYW1lLCA6RW1wdHlTdHJpbmcpIGFzIHNlcmllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdCwgOkVtcHR5U3RyaW5nKSBhcyBpZF91bml0LAogICAgICAgICAgICBpZm51bGwoUlNfdW5pdHMubmFtZSwgOkVtcHR5U3RyaW5nKSBhcyB1bml0c19uYW1lLAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5xdHR5IGFzIHF0dHksCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiBhcyBxdHR5X3BsYW4sCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiAtIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHkgYXMgSXNEb25lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbCwgOkVtcHR5U3RyaW5nKSBhcyBpZF9jZWxsLAogICAgICAgICAgICBpZm51bGwoUlNfY2VsbHMubmFtZSwgOk51bGxWYWx1ZSkgYXMgY2VsbF9uYW1lCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgRlJPTSBSU19hZHJfZG9jc190YWJsZSAKCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgT04gUlNfZ29vZHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgICAgICBPTiBSU19wcm9wZXJ0aWVzLmlkID0gUlNfYWRyX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgICAgIE9OIFJTX3Nlcmllcy5pZCA9IFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3NlcmllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgICAgICAgICAgT04gUlNfdW5pdHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfY2VsbHMKICAgICAgICAgICAgT04gUlNfY2VsbHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbAoKICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyBhbmQgdGFibGVfdHlwZSA9IDp0YWJsZV90eXBlCiAgICAgICAgICAgIAogICAgICAgICAgICAnJycKCiAgICAgICAgaWYgY3VyQ2VsbDoKICAgICAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnJycKICAgICAgICAgICAgIGFuZCAoaWRfY2VsbD06Y3VycmVudF9jZWxsIE9SIGlkX2NlbGw9IiIgT1IgaWRfY2VsbCBpcyBOdWxsKQogICAgICAgICAgICAnJycKCiAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnIE9SREVSIEJZIFJTX2NlbGxzLm5hbWUsIFJTX2Fkcl9kb2NzX3RhYmxlLmxhc3RfdXBkYXRlZCBERVNDJwoKICAgIGVsc2U6CiAgICAgICAgcXVlcnlfdGV4dCA9ICIiIgogICAgICAgIFNFTEVDVAogICAgICAgIFJTX2RvY3NfdGFibGUuaWQsCiAgICAgICAgUlNfZG9jc190YWJsZS5pZF9kb2MsCiAgICAgICAgUlNfZG9jc190YWJsZS5pZF9nb29kLAogICAgICAgIFJTX2dvb2RzLm5hbWUgYXMgZ29vZF9uYW1lLAogICAgICAgIFJTX2dvb2RzLmNvZGUsCiAgICAgICAgUlNfZ29vZHMuYXJ0LAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcywKICAgICAgICBSU19wcm9wZXJ0aWVzLm5hbWUgYXMgcHJvcGVydGllc19uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfc2VyaWVzLAogICAgICAgIFJTX3Nlcmllcy5uYW1lIGFzIHNlcmllc19uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfdW5pdCwKICAgICAgICBSU191bml0cy5uYW1lIGFzIHVuaXRzX25hbWUsCiAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5LAogICAgICAgIFJTX2RvY3NfdGFibGUucXR0eV9wbGFuLAogICAgICAgIFJTX2RvY3NfdGFibGUucHJpY2UsCiAgICAgICAgUlNfcHJpY2VfdHlwZXMubmFtZSBhcyBwcmljZV9uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUucXR0eV9wbGFuIC0gUlNfZG9jc190YWJsZS5xdHR5IGFzIElzRG9uZQogICAgICAgIEZST00gUlNfZG9jc190YWJsZSAKICAgIAogICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICBPTiBSU19nb29kcy5pZD1SU19kb2NzX3RhYmxlLmlkX2dvb2QKICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPSBSU19kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXMKICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgT04gUlNfc2VyaWVzLmlkID0gUlNfZG9jc190YWJsZS5pZF9zZXJpZXMKICAgICAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgICAgICBPTiBSU191bml0cy5pZD1SU19kb2NzX3RhYmxlLmlkX3VuaXQKICAgICAgICBMRUZUIEpPSU4gUlNfcHJpY2VfdHlwZXMKICAgICAgICBPTiBSU19wcmljZV90eXBlcy5pZCA9IFJTX2RvY3NfdGFibGUuaWRfcHJpY2UKICAgICAgICBXSEVSRSBpZF9kb2MgPSAkYXJnMQogICAgICAgIE9SREVSIEJZIFJTX2RvY3NfdGFibGUubGFzdF91cGRhdGVkIERFU0MgCiAgICAgICAgIiIiCgogICAgcmV0dXJuIHF1ZXJ5X3RleHQKCgoKCmRlZiBnZXRfZG9jX2RldGFpbF9jYXJkcyh1c2Vfc2VyaWVzLCB1c2VfcHJvcGVydGllcywgc2V0dGluZ3NfZ2xvYmFsLCBpc0FkciA9IEZhbHNlKToKICAgIGNlbGxNZW51Q29tbWFuZCA9ICc70JjQt9C80LXQvdC40YLRjCDRj9GH0LXQudC60YMnIGlmIGlzQWRyIGVsc2UgJycKICAgIGxpc3QgPSB7CiAgICAgICAgImN1c3RvbWNhcmRzIjogewogICAgICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgICAgICJzZWFyY2hfZW5hYmxlZCI6IFRydWUsCiAgICAgICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQGdvb2RfbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHBpY3R1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiNGRkZGRkYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIjI1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJQb3B1cE1lbnVCdXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogZiLQo9C00LDQu9C40YLRjCDRgdGC0YDQvtC60YN7Y2VsbE1lbnVDb21tYW5kfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIm1lbnVfZ29vZF9zdHJpbmciCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb2RlX2FydCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAdW5pdF9uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJnb3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogItCf0LvQsNC9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBxdHR5X3BsYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAi0KTQsNC60YIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHF0dHkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAi0KbQtdC90LAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHByaWNlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGlmIHVzZV9zZXJpZXMgPT0gJ3RydWUnIG9yIHVzZV9zZXJpZXMgPT0gJzEnOgogICAgICAgIGxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmluc2VydCgxLCB7J3R5cGUnOiAnVGV4dFZpZXcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJyksICMxNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob3dfYnlfY29uZGl0aW9uJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVmFsdWUnOiAnQHNlcmllc19uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb1JlZnJlc2gnOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudF90eXBlJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFzayc6ICcnLCAnVmFyaWFibGUnOiAnJ30pCiAgICBpZiB1c2VfcHJvcGVydGllcyA9PSAndHJ1ZScgb3IgdXNlX3Byb3BlcnRpZXMgPT0gJzEnOgogICAgICAgIGxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmluc2VydCgxLCB7J3R5cGUnOiAnVGV4dFZpZXcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJyksICMnMTYnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob3dfYnlfY29uZGl0aW9uJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVmFsdWUnOiAnQHByb3BlcnRpZXNfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm9SZWZyZXNoJzogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnRfdHlwZSc6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hc2snOiAnJywgJ1ZhcmlhYmxlJzogJyd9KQogICAgaWYgaXNBZHI6CiAgICAgICAgbGlzdFsnY3VzdG9tY2FyZHMnXVsnbGF5b3V0J11bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ10uaW5zZXJ0KDEsIHsndHlwZSc6ICdUZXh0VmlldycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgJzE2JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG93X2J5X2NvbmRpdGlvbic6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1ZhbHVlJzogJ0BjZWxsX25hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vUmVmcmVzaCc6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50X3R5cGUnOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXNrJzogJycsICdWYXJpYWJsZSc6ICcnfSkKCiAgICAgICAgcGFzcwoKICAgIHJldHVybiBsaXN0CgoKZGVmIGdldF9kb2NfZGV0YWlsX2NhcmRzX25ldyhzZXR0aW5nc19nbG9iYWwsIGNhcmRzX2RhdGE6IGxpc3QsIGFkZF9sYWJlbHM6IGxpc3QgPSBOb25lKToKICAgIGdvb2RzX3RleHRfc2l6ZSA9IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKQogICAgaGVhZGVyID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICkKCiAgICAjIHNlcmllc19uYW1lLCBwcm9wZXJ0aWVzX25hbWUsIGNlbGxfbmFtZQogICAgYWRkX2xhYmVscyA9IGFkZF9sYWJlbHMgb3IgW10KICAgIGZvciBsYWJlbCBpbiBhZGRfbGFiZWxzOgogICAgICAgIGhlYWRlci5hcHBlbmQoCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9ZidAe2xhYmVsfScsIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ1Nlcmllc1Byb3BlcnRpZXNUZXh0U2l6ZScpKSwKICAgICAgICApCgogICAgaGVhZGVyLmFwcGVuZCgKICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICBWYWx1ZT0nQGdvb2RfbmFtZScsCiAgICAgICAgICAgIFRleHRCb2xkPVRydWUsCiAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgd2VpZ2h0PScxJwogICAgICAgICksCiAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgVmFsdWU9J0BwaWN0dXJlJywKICAgICAgICAgICAgVGV4dFNpemU9JzI1JywKICAgICAgICAgICAgVGV4dENvbG9yPScjREI3MDkzJywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPSIjRkZGRkZGIiwKICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgIGhlaWdodD0yNSwKICAgICAgICApLAogICAgKQoKICAgIGNvZGVfYXJ0ID0gd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0nQGNvZGVfYXJ0JywgVGV4dFNpemU9c2V0dGluZ3NfZ2xvYmFsLmdldCgnZ29vZHNUZXh0U2l6ZScpKQogICAgdW5pdF9uYW1lID0gd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0nQHVuaXRfbmFtZScsIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSkKICAgIGZvb3RlciA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQn9C70LDQvScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5X3BsYW4nLCBUZXh0U2l6ZT1nb29kc190ZXh0X3NpemUpLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgKSwKICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0n0KTQsNC60YInLCBUZXh0U2l6ZT1nb29kc190ZXh0X3NpemUpLAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSdAcXR0eScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICApLAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQptC10L3QsCcsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BwcmljZScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICApLAogICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgd2VpZ2h0PTEsCiAgICApCgogICAgZGV0YWlsX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBoZWFkZXIsCiAgICAgICAgICAgICAgICAgICAgY29kZV9hcnQsCiAgICAgICAgICAgICAgICAgICAgdW5pdF9uYW1lLAogICAgICAgICAgICAgICAgICAgIGZvb3RlciwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9JzEnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcKICAgICAgICAgICAgKSwKICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICksCiAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgIGNhcmRzZGF0YT1jYXJkc19kYXRhCiAgICApCgogICAgcmV0dXJuIGRldGFpbF9jYXJkcy50b19qc29uKCkKCgpkZWYgZ2V0X2RvY19iYXJjX2Zsb3dfcXVlcnkoKToKICAgIHJldHVybiAnJycKICAgIFNlbGVjdCAqIGZyb20gUlNfYmFyY19mbG93IFdIZXJlIGlkX2RvYyA9PwogICAgJycnCgpkZWYgZG9jX2JhcmNfZmxvd19jYXJkKHNldHRpbmdzX2dsb2JhbCk6CiAgICBsaXN0ID0gewogICAgICAgICJjdXN0b21jYXJkcyI6IHsKICAgICAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAgICAgInNhdmVfcG9zaXRpb24iOiBUcnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAYmFyY29kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnR29vZHNDYXJkVGl0bGVUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKCiAgICByZXR1cm4gbGlzdAoKZGVmIGdldF9wcmljZV9xdWVyeSgpOgogICAgdHh0ID0gIiIiCiAgICBTRUxFQ1QgKiwKICAgIFJTX3ByaWNlX3R5cGVzLm5hbWUKICAgICBmcm9tIFJTX3ByaWNlcyAKICAgICBMRUZUIEpPSU4gUlNfcHJpY2VfdHlwZXMgT04gUlNfcHJpY2VfdHlwZXMuaWQ9UlNfcHJpY2VzLmlkX3ByaWNlX3R5cGVzCiAgICAgd2hlcmUgaWRfZ29vZHM9PyIiIgogICAgcmV0dXJuIHR4dAoKCiMg0KHQvtCy0YDQtdC80LXQvdC90L7QtSDQv9C+0LvQtSDQstCy0L7QtNCwLCDQvdC1INC40YHQv9C+0LvRjNC30YPQtdGC0YHRjwpkZWYgZ2V0X251bV9maWVsZF9kZXNjcihxdHR5KToKICAgIGpzb25fZGVzY3IgPSB7CiAgICAgICAgImhpbnQiOiAn0LrQvtC70LjRh9C10YHRgtCy0L4nLAogICAgICAgICJkZWZhdWx0X3RleHQiOiBxdHR5LAogICAgICAgICdpbnB1dFR5cGUgJzogJ1RZUEVfQ0xBU1NfTlVNQkVSJwogICAgfQogICAgcmV0dXJuIGpzb25fZGVzY3IKCgojIGRlZiBnZXRfYmFyY29kZV9xdWVyeSgpOgojICAgICBxdWVyeV90ZXh0ID0gJ1NFTEVDVCAqIEZST00gUlNfZG9jc19iYXJjb2RlcyBXaGVyZSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9ID8nCiMgICAgIHJldHVybiBxdWVyeV90ZXh0CgoKIyDQl9Cw0L/RgNC+0YEg0L3QsNGF0L7QtNC40YIg0LLRgdC1INC30LDQv9C40YHQuCDRgtCw0LHQu9C40YbRiyDQtNC+0LrRg9C80LXQvdGC0LAgUlNfZG9jc19iYXJjb2RlcyDQv9C+INC/0L7Qu9C90L7QvNGDINGB0L7QstC/0LDQtNC10L3QuNGOINGI0YLRgNC40YXQutC+0LTQsCDQuNC70Lgg0YLQvtC70YzQutC+INC/0L4gR1RJTgpkZWYgZ2V0X3F1ZXJ5X21hcmtfZmluZF9pbl9kb2MoKToKICAgIHF1ZXJ5ID0gJycnCiAgICBTRUxFQ1QgCiAgICBpZCwKICAgIGlkX2RvYywKICAgIElGTlVMTChHVElOLCAnMCcpIEFTIEdUSU4sCiAgICBJRk5VTEwoU2VyaWVzLCAnMCcpIEFTIFNlcmllcywKICAgIElGTlVMTChpZF9nb29kLCAnJykgQVMgaWRfZ29vZCwKICAgIElGTlVMTChpZF9wcm9wZXJ0eSwgJycpIEFTIGlkX3Byb3BlcnR5ICwKICAgIElGTlVMTChpZF9zZXJpZXMsICcnKSBBUyBpZF9zZXJpZXMsCiAgICBJRk5VTEwoaWRfdW5pdCwgJycpICBBUyBpZF91bml0LAogICAgaXNfcGxhbiwKICAgIGFwcHJvdmVkCgogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCgogICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIEdUSU4gPSA6R1RJTiBBbmQgU2VyaWVzID0gOlNlcmllcycnJwoKICAgICMKICAgICMKICAgICMgICAgICcnJwogICAgIyBTRUxFQ1QgKiBGUk9NICgKICAgICMKICAgICMgU0VMRUNUCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaWQsCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jLAogICAgIwogICAgIyBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUsCiAgICAjCiAgICAjIElGTlVMTChSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSwgJzAnKSBBUyBtYXJrX2NvZGUsCiAgICAjIElGTlVMTChSU19tYXJraW5nX2NvZGVzLmlkX2dvb2QsICcnKSBBUyBpZF9nb29kLAogICAgIyBJRk5VTEwoUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSwgJycpIEFTIGlkX3Byb3BlcnR5ICwKICAgICMgSUZOVUxMKFJTX21hcmtpbmdfY29kZXMuaWRfc2VyaWVzLCAnJykgQVMgaWRfc2VyaWVzLAogICAgIyBJRk5VTEwoUlNfbWFya2luZ19jb2Rlcy5pZF91bml0LCAnJykgIEFTIGlkX3VuaXQsCiAgICAjCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaXNfcGxhbiwKICAgICMgUlNfZG9jc19iYXJjb2Rlcy5hcHByb3ZlZAogICAgIwogICAgIyBGUk9NIFJTX2RvY3NfYmFyY29kZXMKICAgICMKICAgICMgICAgIExFRlQgSk9JTiBSU19tYXJraW5nX2NvZGVzIEFzIFJTX21hcmtpbmdfY29kZXMKICAgICMgICAgIE9OIFJTX21hcmtpbmdfY29kZXMuaWQgPSBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUKICAgICMKICAgICMgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIFJTX21hcmtpbmdfY29kZXMubWFya19jb2RlID0gOnNldF9iYXJjb2RlKQogICAgIyAnJycKICAgICMKICAgICMgU0VMRUNUICogRlJPTSAoCiAgICAjICAgICBTRUxFQ1QKICAgICMgICAgICdvbl9HVElOJyBhcyBUeXBlT2ZVbmlvbiwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWQsCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYywKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZSwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZSwKICAgICMgICAgIFJTX2JhcmNvZGVzLkdUSU4sCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF9nb29kLAogICAgIyAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF9zZXJpZXMsCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF91bml0LAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pc19wbGFuLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5hcHByb3ZlZAogICAgIyAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICAjICAgICAgICAgTEVGVCBKT0lOIChTZWxlY3QgUlNfYmFyY29kZXMuYmFyY29kZSBhcyBHVElOLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQgRlJPTSBSU19iYXJjb2RlcwogICAgIyAgICAgICAgIFdIRVJFIFJTX2JhcmNvZGVzLmJhcmNvZGU9Omd0aW4gTElNSVQgMSkgQVMgUlNfYmFyY29kZXMKICAgICMgICAgICAgICBPTiBUUlVFCiAgICAjICAgICAgICAgTEVGVCBKT0lOIFJTX2JhcmNvZGVzIGFzIEZ1bGxCYXJjb2RlCiAgICAjICAgICAgICAgT04gRnVsbEJhcmNvZGUuYmFyY29kZSA9IFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZQogICAgIwogICAgIyAgICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZSBMaWtlICclJys6Z3RpbiArICclJwogICAgIwogICAgIyAgICAgVU5JT04gQUxMCiAgICAjCiAgICAjICAgICBTRUxFQ1QKICAgICMgICAgICdGdWxsTWF0Y2gnLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pZCwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pZF9iYXJjb2RlLAogICAgIyAgICAgSUZOVUxMKFJTX2JhcmNvZGVzLmJhcmNvZGUsUlNfYmFyY29kZXNfaW5hY2N1cmF0ZS5HVElOKSwKICAgICMgICAgIElGTlVMTChSU19iYXJjb2Rlcy5pZF9nb29kLFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfZ29vZCksCiAgICAjICAgICBJRk5VTEwoUlNfYmFyY29kZXMuaWRfcHJvcGVydHksUlNfYmFyY29kZXNfaW5hY2N1cmF0ZS5pZF9wcm9wZXJ0eSksCiAgICAjICAgICBJRk5VTEwoUlNfYmFyY29kZXMuaWRfc2VyaWVzLFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfc2VyaWVzKSwKICAgICMgICAgIElGTlVMTChSU19iYXJjb2Rlcy5pZF91bml0LFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfdW5pdCksCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4sCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmFwcHJvdmVkCiAgICAjICAgICBGUk9NIFJTX2RvY3NfYmFyY29kZXMKICAgICMgICAgICAgICBMRUZUIEpPSU4gUlNfYmFyY29kZXMKICAgICMgICAgICAgICBPTiBSU19iYXJjb2Rlcy5iYXJjb2RlID0gUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlCiAgICAjICAgICAgICAgTEVGVCBKT0lOIChTZWxlY3QgUlNfYmFyY29kZXMuYmFyY29kZSBhcyBHVElOLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQgRlJPTSBSU19iYXJjb2RlcwogICAgIyAgICAgICAgIFdIRVJFIFJTX2JhcmNvZGVzLmJhcmNvZGUgTGlrZSAnJScrOmd0aW4gKyAnJScgTElNSVQgMSkgQVMgUlNfYmFyY29kZXNfaW5hY2N1cmF0ZQogICAgIyAgICAgICAgIE9OIFRSVUUKICAgICMgICAgICAgICBMRUZUIEpPSU4gUlNfYmFyY29kZXMgYXMgRnVsbEJhcmNvZGUKICAgICMgICAgICAgICBPTiBGdWxsQmFyY29kZS5iYXJjb2RlID0gUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlCiAgICAjCiAgICAjICAgICBXSEVSRSBpZF9kb2MgPSA6aWRfZG9jICBhbmQgUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlID0gOnNldF9iYXJjb2RlKQogICAgIwogICAgIyBPUkRFUiAgQlkgVHlwZU9mVW5pb24KICAgICMgJycnCiAgICByZXR1cm4gcXVlcnkKCgpkZWYgZ2V0X2JhcmNvZGVfY2FyZChzZXR0aW5nc19nbG9iYWwpOgogICAgbHMgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBGYWxzZSwKICAgICAgICAgICAgInNhdmVfcG9zaXRpb24iOiBUcnVlCiAgICAgICAgfSwKICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7InR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBiYXJjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcGljdHVyZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRkZGRkZGIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICJidG5fdHN0MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhcmRDb3JuZXJSYWRpdXMiOiAiMTVkcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9XX0KCiAgICAgICAgICAgIF0KICAgICAgICB9fQogICAgfQogICAgcmV0dXJuIGxzCgoKZGVmIGdldF9kb2NfYmFyY29kZV9xdWVyeSgpOgogICAgbHMgPSAnJycKICAgIFNFTEVDVAogICAgIigwMSkiIHx8IEdUSU4gfHwgIigyMSkiIHx8IFNlcmllcyBhcyBtYXJrX2NvZGUsCiAgICBhcHByb3ZlZAogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICBXaGVyZQogICAgaWRfZG9jID0gOmlkX2RvYyBBTkQKICAgIGlkX2dvb2QgPSA6aWRfZ29vZCBBTkQKICAgIGlkX3Byb3BlcnR5ID0gOmlkX3Byb3BlcnR5IEFORAogICAgaWRfc2VyaWVzID0gOmlkX3NlcmllcyAKICAgIC0tQU5EICBpZF91bml0ID0gOmlkX3VuaXQKICcnJwogICAgcmV0dXJuIGxzCgoKZGVmIGdldF9kb2NfYmFyY29kZV9xdWVyeV9ub19SU19tYXJrY29kZXMoKToKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCAKICAgIGlkX2JhcmNvZGUsCiAgICBSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSBhcyBtYXJrX2NvZGUsCiAgICBhcHByb3ZlZAogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCgogICAgSk9JTiBSU19tYXJraW5nX2NvZGVzIAogICAgT04gUlNfbWFya2luZ19jb2Rlcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZSBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZCA9IDppZF9nb29kIEFORAogICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSA9IDppZF9wcm9wZXJ0eSBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfc2VyaWVzID0gOmlkX3NlcmllcyBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfdW5pdCA9IDppZF91bml0IAoKICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgJycnCgoKZGVmIGdldF9tYXJrY29kZV9xdWVyeSgpOgogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIAogICAgUlNfZG9jc19iYXJjb2Rlcy5pZCBhcyBDdXJTdHIsCiAgICBSU19kb2NzX2JhcmNvZGVzLkdUSU4sCiAgICBSU19kb2NzX2JhcmNvZGVzLlNlcmllcywKICAgIFJTX2RvY3NfYmFyY29kZXMuYXBwcm92ZWQsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX2dvb2QsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX3Byb3BlcnR5IGFzIGlkX3Byb3BlcnR5LAogICAgUlNfZG9jc19iYXJjb2Rlcy5pZF9zZXJpZXMsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX3VuaXQsCiAgICBSU19nb29kcy5uYW1lIGFzIGdvb2RfbmFtZSwKICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0aWVzLAogICAgUlNfc2VyaWVzLm5hbWUgYXMgc2VyaWVzLAogICAgUlNfdW5pdHMubmFtZSBhcyB1bml0LAogICAgUlNfZ29vZHMuY29kZSBBUyBnb29kX2NvZGUsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4KCiBGUk9NIFJTX2RvY3NfYmFyY29kZXMgCgogTEVGVCBKT0lOIFJTX2dvb2RzIAogICAgT04gUlNfZ29vZHMuaWQ9UlNfZG9jc19iYXJjb2Rlcy5pZF9nb29kCiAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgT04gUlNfcHJvcGVydGllcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfcHJvcGVydHkKICAgIExFRlQgSk9JTiBSU19zZXJpZXMKICAgIE9OIFJTX3Nlcmllcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfc2VyaWVzCiAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgIE9OIFJTX3VuaXRzLmlkPVJTX2RvY3NfYmFyY29kZXMuaWRfdW5pdAoKICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgQU5EIEdUSU4gPSA6R1RJTiBBbmQgU2VyaWVzID0gOlNlcmllcycnJwoKCiMgICAgICcnJwojICAgICBTRUxFQ1QKIyAgICAgVGVtcF9xdWVyeS5DdXJTdHIgYXMgQ3VyU3RyLAojICAgICBUZW1wX3F1ZXJ5LmlkX2JhcmNvZGUsCiMgICAgIFRlbXBfcXVlcnkubWFya19jb2RlLAojICAgICBUZW1wX3F1ZXJ5LmFwcHJvdmVkLAojICAgICBUZW1wX3F1ZXJ5LmlkX2dvb2QsCiMgICAgIFRlbXBfcXVlcnkuaWRfcHJvcGVydGllcyBhcyBpZF9wcm9wZXJ0eSwKIyAgICAgVGVtcF9xdWVyeS5pZF9zZXJpZXMsCiMgICAgIFRlbXBfcXVlcnkuaWRfdW5pdCwKIyAgICAgUlNfZ29vZHMubmFtZSBhcyBnb29kX25hbWUsCiMgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0aWVzLAojICAgICBSU19zZXJpZXMubmFtZSBhcyBzZXJpZXMsCiMgICAgIFJTX3VuaXRzLm5hbWUgYXMgdW5pdCwKIyAgICAgUlNfZ29vZHMuY29kZSBBUyBnb29kX2NvZGUsCiMgICAgIFRlbXBfcXVlcnkuaXNfcGxhbgojCiMKIyAgRlJPTSAoCiMgU0VMRUNUCiMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWQgYXMgQ3VyU3RyLAojICAgICBpZF9iYXJjb2RlLAojICAgICBSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSwKIyAgICAgYXBwcm92ZWQsCiMgICAgIFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZCwKIyAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSBhcyBpZF9wcm9wZXJ0aWVzLAojICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3NlcmllcywKIyAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF91bml0LAojICAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4KIwojICAgICBGUk9NIFJTX2RvY3NfYmFyY29kZXMKIwojICAgICBKT0lOIFJTX21hcmtpbmdfY29kZXMKIyAgICAgT04gUlNfbWFya2luZ19jb2Rlcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZQojCiMgICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgQU5EIGlkX2JhcmNvZGUgPSA6aWRfYmFyY29kZSkgQVMgVGVtcF9xdWVyeQojCiMgIExFRlQgSk9JTiBSU19nb29kcwojICAgICBPTiBSU19nb29kcy5pZD1UZW1wX3F1ZXJ5LmlkX2dvb2QKIyAgICAgTEVGVCBKT0lOIFJTX3Byb3BlcnRpZXMKIyAgICAgT04gUlNfcHJvcGVydGllcy5pZCA9IFRlbXBfcXVlcnkuaWRfcHJvcGVydGllcwojICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiMgICAgIE9OIFJTX3Nlcmllcy5pZCA9IFRlbXBfcXVlcnkuaWRfc2VyaWVzCiMgICAgIExFRlQgSk9JTiBSU191bml0cwojICAgICBPTiBSU191bml0cy5pZD1UZW1wX3F1ZXJ5LmlkX3VuaXQKIyAgICAgJycnCgoKZGVmIGdldF9iYXJjb2RlX3F1ZXJ5KCkgLT4gc3RyOgogICAgcmV0dXJuICcnJwogICAgV2l0aCBiYXJjIGFzICgKU0VMRUNUIApiYXJjb2RlLAppZF9nb29kLApSU19nb29kcy50eXBlX2dvb2QsCmlkX3Byb3BlcnR5LAppZF9zZXJpZXMsCmlkX3VuaXQKIEZST00gUlNfYmFyY29kZXMgCiBMZWZ0IEpvaW4gUlNfZ29vZHMKIE9OIFJTX2JhcmNvZGVzLmlkX2dvb2QgPSBSU19nb29kcy5pZApXSEVSRSBiYXJjb2RlID0gPykKClNlbGVjdCAqIEZyb20gYmFyYwpMZWZ0IEpPSU4gUlNfdHlwZXNfZ29vZHMKT04gUlNfdHlwZXNfZ29vZHMuaWQgPSBiYXJjLnR5cGVfZ29vZAoKJycnCgoKZGVmIGdldF9tYXJrX3F0dHlfY29uZm9ybWl0eSgpOgogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIGlmbnVsbChkb2NfdGFibGUucXR0eV9wbGFuLDApIC0gaWZudWxsKHRtcC5xdHR5X29mX21hcmssMCkgIEZST00gCgogICAgKFNFTEVDVCBxdHR5X3BsYW4KICAgIEZST00gUlNfZG9jc190YWJsZQogICAgV0hFUkUgCiAgICBpZF9kb2MgPSA6aWREb2MgCiAgICBBTkQgaWRfZ29vZCA9IDppZF9nb29kCiAgICBBTkQgaWRfcHJvcGVydGllcyA9IDppZF9wcm9wZXJ0aWVzCiAgICBBTkQgaWRfc2VyaWVzID0gOmlkX3NlcmllcwogICAgKSBBcyBkb2NfdGFibGUgIC0tQU5EIGlkX3VuaXQgPSA6aWRfdW5pdAogICAgICAgTEVGVCBKT0lOIChTRUxFQ1QgQ291bnQoaWRfYmFyY29kZSkgQXMgcXR0eV9vZl9tYXJrCiAgICAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzIAogICAgICAgIFdIRVJFIGlkX2RvYz06aWREb2MgCiAgICAgICAgQU5EIGlkX2JhcmNvZGUgTElrZSA6YmFyY29kZSBBTkQgYXBwcm92ZWQgPSA6YXBwcm92ZWQpIEFzIHRtcAogICAgICAgIE9OIFRSVUUKICAgICcnJwoKCmRlZiBnZXRfcGxhbl9nb29kX2Zyb21fZG9jKCk6CiAgICByZXR1cm4gJycnCgogICAgU0VMRUNUIGlmbnVsbChxdHR5X3BsYW4sMCkgYXMgcXR0eV9wbGFuLAogICAgaWZudWxsKHF0dHksMCkgYXMgcXR0eSwgaWRfZ29vZAogICAgRlJPTSBSU19kb2NzX3RhYmxlCiAgICBXSEVSRSAKICAgIGlkX2RvYyA9IDppZERvYyAKICAgIEFORCBpZF9nb29kID0gOmlkX2dvb2QKICAgIEFORCBpZF9wcm9wZXJ0aWVzID0gOmlkX3Byb3BlcnRpZXMKICAgIEFORCBpZF9zZXJpZXMgPSA6aWRfc2VyaWVzCiAgICAtLUFORCBpZF91bml0ID0gOmlkX3VuaXQKICAgICcnJwoKCiMgICAgICBzID0gICAgJycnCiMgICAgd2l0aCB0bXAgYXMgKAojICAgICBTRUxFQ1QgaWZudWxsKHF0dHlfcGxhbiwwKSBhcyBxdHR5X3BsYW4sCiMgICAgIGlmbnVsbChxdHR5LDApIGFzIHF0dHksIGlkX2dvb2QKIyAgICAgRlJPTSBSU19kb2NzX3RhYmxlCiMgICAgIFdIRVJFCiMgICAgIGlkX2RvYyA9IDppZERvYwojICAgICBBTkQgaWRfZ29vZCA9IDppZF9nb29kCiMgICAgIEFORCBpZF9wcm9wZXJ0aWVzID0gOmlkX3Byb3BlcnRpZXMKIyAgLS0gICBBTkQgaWRfc2VyaWVzID0gOmlkX3NlcmllcwojICAtLSAgIEFORCBpZF91bml0ID0gOmlkX3VuaXQKIyAgICAgKQojCiMgU2VsZWN0IHN1bShxdHR5X3BsYW4tcXR0eSkgYXMgY29uZm9ybWl0eSBmcm9tIHRtcAojCiMKIyAgICAgJycnCgpkZWYgZ2V0X3F0dHlfYWRkX21hcmtfdGV4dCgpOgogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIFJTX2RvY3MuYWRkX21hcmtfc2VsZWN0aW9uIEFzIE1hcmtlZCwKICAgIFRtcC5RdHR5IAogICAgZnJvbSBSU19kb2NzIAogICAgTGVmdCBKb2luIChTZWxlY3QgU3VtKFJTX2RvY3NfdGFibGUucXR0eV9wbGFuKSBhcyBRdHR5IEZyb20gUlNfZG9jc190YWJsZSBXaGVyZSBSU19kb2NzX3RhYmxlLmlkX2RvYz0gOmlkX2RvYykgQXMgVG1wCiAgICBPTiBUcnVlCiAgICBXSEVSRSBpZF9kb2MgPSA6aWRfZG9jJycnCgoKZGVmIGdldF9xdHR5X3N0cmluZ19jb3VudF9xdWVyeSgpOgogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIGRpc3RpbmN0IGNvdW50KGlkKSBhcyBjb2xfc3RyLAogICAgc3VtKGlmbnVsbChxdHR5X3BsYW4sMCkpIGFzIHF0dHlfcGxhbgogICAgZnJvbSBSU19kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYyA9IDppZF9kb2MnJycKCgpkZWYgZ2V0X2hhdmVfbWFya19jb2Rlc19xdWVyeSgpOiAgIyDQl9Cw0L/RgNC+0YEg0LLQvtC30LLRgNCw0YnQsNC10YIg0LrQvtC70LjRh9C10YHRgtCy0L4g0LrQvtC00L7QsiDQvNCw0YDQutC40YDQvtCy0LrQuCAi0J/Qu9Cw0L0iICjRgi7QtS4g0LfQsNCz0YDRg9C20LXQvdC90YvRhSDQuNC3INGD0YfQtdGC0L3QvtC5CiAgICAjINGB0LjRgdGC0LXQvNGLKQogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIGRpc3RpbmN0IGNvdW50KGlkKSBhcyBjb2xfc3RyCiAgICBmcm9tIFJTX2RvY3NfYmFyY29kZXMgV2hlcmUgaWRfZG9jID0gOmlkX2RvYyBBTkQgaXNfcGxhbiA9IDppc19wbGFuJycnCgoKZGVmIGdldF9kb2NzX3N0YXRfcXVlcnkoKToKICAgIHJldHVybiAnJycKICAgd2l0aCB0bXAgYXMgKAogICAgU2VsZWN0IAogICAgZG9jX3R5cGUsCiAgICBSU19kb2NzLmlkX2RvYywKICAgIDEgYXMgZG9jX0NvdW50LAogICAgaWZudWxsKFJTX2RvY3Muc2VudCwwKSBhcyBzZW50LAogICAgaWZudWxsKHZlcmlmaWVkLDApIGFzIHZlcmlmaWVkLCAKICAgIENBU0UKICAgIFdIRU4gaWZudWxsKHZlcmlmaWVkLDApPTAgVEhFTiBjb3VudChSU19kb2NzX3RhYmxlLmlkKQogICAgZWxzZSAwIEVORCBhcyBjb3VudF92ZXJpZmllZCwKICAgIENBU0UKICAgIFdIRU4gaWZudWxsKHZlcmlmaWVkLDApPTEgVEhFTiBjb3VudChSU19kb2NzX3RhYmxlLmlkKQogICAgZWxzZSAwIEVORCBhcyBjb3VudF91bnZlcmlmaWVkLAogICAgQ0FTRQogICAgICAgIFdIRU4gaWZudWxsKHZlcmlmaWVkLDApPTAgVEhFTiBzdW0oUlNfZG9jc190YWJsZS5xdHR5X3BsYW4pCiAgICBlbHNlIDAgRU5EIGFzIHF0dHlfcGxhbl92ZXJpZmllZCwKICAgIENBU0UKICAgICAgICBXSEVOIGlmbnVsbCh2ZXJpZmllZCwwKT0xIFRIRU4gc3VtKFJTX2RvY3NfdGFibGUucXR0eV9wbGFuKQogICAgZWxzZSAwIEVORCBhcyBxdHR5X3BsYW5fdW52ZXJpZmllZAogICAgIGZyb20gUlNfZG9jcwogICAgTGVmdCBKb2luIFJTX2RvY3NfdGFibGUgCiAgICBPTiBSU19kb2NzX3RhYmxlLmlkX2RvYyA9IFJTX2RvY3MuaWRfZG9jCiAgICBHcm91cCBieSBSU19kb2NzLmlkX2RvYwogICAgKQogICBTZWxlY3QgZG9jX3R5cGUgYXMgZG9jVHlwZSwgCiAgIGNvdW50KGlkX2RvYyksCiAgIHN1bShkb2NfQ291bnQpIGFzIGNvdW50LCAKICAgc3VtKHNlbnQpIGFzIHNlbnQsIAogICBzdW0odmVyaWZpZWQpIGFzIHZlcmlmaWVkLAogICBzdW0oY291bnRfdmVyaWZpZWQpIGFzIGNvdW50X3ZlcmlmaWVkLAogICBzdW0oY291bnRfdW52ZXJpZmllZCkgYXMgY291bnRfdW52ZXJpZmllZCwKICAgc3VtKHF0dHlfcGxhbl92ZXJpZmllZCkgYXMgcXR0eV9wbGFuX3ZlcmlmaWVkLAogICBzdW0ocXR0eV9wbGFuX3VudmVyaWZpZWQpIGFzIHF0dHlfcGxhbl91bnZlcmlmaWVkCiAgICBmcm9tIHRtcAogICAgZ3JvdXAgYnkgZG9jX3R5cGUKICAgJycnCgoKZGVmIGdldF9kb2NfdGlsZXMoc2V0dGluZ3NfZ2xvYmFsKToKCiAgICBzbWFsbF90aWxlID0gewogICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgImF1dG9TaXplVGV4dFR5cGUiIDogInVuaWZvcm0iLAogICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAZG9jTmFtZSIsCiAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgndGl0bGVEb2NUeXBlQ2FyZFRleHRTaXplJyksICMgIjI1IiwKICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzAwMDAwMCIsCiAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICJUZXh0SXRhbGljIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwLAogICAgICAgICAgICAgICAgImdyYXZpdHlfaG9yaXpvbnRhbCI6ICJjZW50ZXIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQFF0dHlPZkRvY3MiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdEb2NUeXBlQ2FyZFRleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzMzMzMzMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIkZGQ0M5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogItCh0YLRgNC+0Lo6ICIsCiAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0RvY1R5cGVDYXJkVGV4dFNpemUnKSwgIyIxNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzMzMzMzMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIkZGQ0M5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAY291bnRfdmVyaWZpZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdEb2NUeXBlQ2FyZFRleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzMzMzMzMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIkZGQ0M5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogItCi0L7QstCw0YDQvtCyOiAiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdEb2NUeXBlQ2FyZFRleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzMzMzMzMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIkZGQ0M5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcXR0eV9wbGFuX3ZlcmlmaWVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMzMzMzMzMiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICJGRkNDOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQoKICAgICAgICBdCiAgICB9CgogICAgcmV0dXJuIHNtYWxsX3RpbGUKCmNsYXNzIE1vZGVybkZpZWxkOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhpbnQ9Tm9uZSwgZGVmYXVsdF90ZXh0PU5vbmUsIHBhc3N3b3JkPUZhbHNlKTogICMgY291bnRlcj1GYWxzZSwgY291bnRlcl9tYXg9Tm9uZSwgaW5wdXRfdHlwZT0gMSAsCiAgICAgICAgc2VsZi5oaW50ID0gaGludAogICAgICAgIHNlbGYuZGVmYXVsdF90ZXh0ID0gZGVmYXVsdF90ZXh0CiAgICAgICAgI3NlbGYuY291bnRlciA9IGNvdW50ZXIKICAgICAgICAjc2VsZi5jb3VudGVyX21heCA9IGNvdW50ZXJfbWF4CiAgICAgICAgI3NlbGYuaW5wdXRfdHlwZSA9IGlucHV0X3R5cGUKICAgICAgICBzZWxmLnBhc3N3b3JkID0gcGFzc3dvcmQKCiAgICBkZWYgdG9fanNvbihzZWxmKToKICAgICAgICByZXQgPSB7CiAgICAgICAgICAgICJoaW50Ijogc2VsZi5oaW50LAogICAgICAgICAgICAiZGVmYXVsdF90ZXh0Ijogc2VsZi5kZWZhdWx0X3RleHR9CiAgICAgICAgIyAiY291bnRlciI6IHNlbGYuY291bnRlciwKICAgICAgICAjICJjb3VudGVyX21heCI6IHNlbGYuY291bnRlcl9tYXgsCiAgICAgICAgIyAiaW5wdXRfdHlwZSI6IHNlbGYuaW5wdXRfdHlwZSwKICAgICAgICBpZiBzZWxmLnBhc3N3b3JkOgogICAgICAgICAgICByZXRbInBhc3N3b3JkIl0gPSBzZWxmLnBhc3N3b3JkCgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHJldCkKCgojIGh0dHBfc2V0dGluZ3MgPSB7J3VybCc6JzE5MicsICd1c2VyJzonQU1EJywgJ3Bhc3MnOicxMjMnfQojIHByaW50KE1vZGVybkZpZWxkKGhpbnQ9J3VybCcsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWyd1cmwnXSwgcGFzc3dvcmQ9RmFsc2UpLnRvX2pzb24oKSkKIyBwcmludChNb2Rlcm5GaWVsZChoaW50PSd1c2VyJywgZGVmYXVsdF90ZXh0PWh0dHBfc2V0dGluZ3NbJ3VzZXInXSwgcGFzc3dvcmQ9RmFsc2UpLnRvX2pzb24oKSkKIyBwcmludChNb2Rlcm5GaWVsZChoaW50PSdwYXNzJywgZGVmYXVsdF90ZXh0PWh0dHBfc2V0dGluZ3NbJ3Bhc3MnXSwgcGFzc3dvcmQ9VHJ1ZSkudG9fanNvbigpKQ=="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_global.py",
                "PyFileKey": "ui_global",
                "PyFileData": "aW1wb3J0IGNvbGxlY3Rpb25zCmltcG9ydCBzcWxpdGUzCmZyb20gc3FsaXRlMyBpbXBvcnQgRXJyb3IKaW1wb3J0IHVpX2JhcmNvZGVzCmltcG9ydCBvcwppbXBvcnQgdWlfZm9ybV9kYXRhCmltcG9ydCBxdWV1ZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCgoKcXVlcnlfbGlzdCA9IHF1ZXVlLlF1ZXVlKCkKIyDQktC+0YIg0YLQsNC60LjQvCDQvdC10LfQsNGC0LXQudC70LjQstGL0Lwg0LzQtdGC0L7QtNC+0Lwg0L7Qv9GA0LXQtNC10LvRj9C10LwsINC80Ysg0LfQsNC/0YPRgdGC0LjQu9C40YHRjCDQvdCwINC60L7QvNC/0LUg0LjQu9C4INC90LAg0KLQodCUICoqCiMg0J3RgyDQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIsINC40YHQv9C+0LvRjNC30YPQtdC8INCx0LDQt9GDICoqKioKaWYgb3MucGF0aC5leGlzdHMoJy8vZGF0YS9kYXRhL3J1LnRyYXZlbGZvb2Quc2ltcGxlX3VpL2RhdGFiYXNlcy8nKTogI9C70L7QutCw0LvRjNC90L4KICAgIGRiX3BhdGggPSAnLy9kYXRhL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvZGF0YWJhc2VzL1NpbXBsZUtlZXAnICAjIHJpZ2h0c2NhbicKZWxzZToKICAgIGRiX3BhdGggPSAnUmlnaHRzY2FuLmRiJyAgIyBEOlxQeXRob25Qcm9qZWN0c1xSaWdodFNjYW5cU1VJX25vUG9ueVwKCmNvbm4gPSBOb25lCgoKCmRlZiBmaW5kX2JhcmNvZGVfaW5fbWFya2luZ19jb2Rlc190YWJsZShzZWxmLCBzdHJ1Y3RfYmFyY29kZTogbGlzdCk6CiAgICAiIiLQpNGD0L3QutGG0LjRjyDQv9C+0LvRg9GH0LDQtdGCINGB0YLRgNC+0LrQuCDQvNCw0YDQutC40YDQvtCy0LrQuCDQtNC+0LrRg9C80LXQvdGC0LAg0L/QviDQt9C90LDRh9C10L3QuNGOINC80LDRgNC60LjRgNC+0LLQutC4IiIiCgogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfcXVlcnlfbWFya19maW5kX2luX2RvYygpCiAgICBhcmdzX2RpY3QgPSB7fQogICAgYXJnc19kaWN0WydHVElOJ10gPSBzdHJ1Y3RfYmFyY29kZVsnR1RJTiddCiAgICBhcmdzX2RpY3RbJ1NlcmllcyddID0gc3RydWN0X2JhcmNvZGVbJ1NFUklBTCddCiAgICBhcmdzX2RpY3RbJ2lkX2RvYyddID0gc2VsZi5pZF9kb2MKCiAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3NfZGljdCwgVHJ1ZSkKICAgIHJldHVybiByZXMKCgpkZWYgZmluZF9iYXJjb2RlX2luX2JhcmNvZGVfdGFibGUoYmFyY29kZTogc3RyKToKICAgIHF1ZXJ5X3RleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X2JhcmNvZGVfcXVlcnkoKQogICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCAoYmFyY29kZSwpLCBUcnVlKQogICAgcmV0dXJuIHJlcwoKCmRlZiBjaGVja19iYXJjb2RlX2NvbXBsaWFuY2UoZWxfZGljdDogZGljdCwgaWRfZG9jKToKICAgICIiIiAxINCi0LDQutC+0Lkg0YLQvtCy0LDRgCDQsiDQv9GA0LjQvdGG0LjQv9C1INC10YHRgtGMINCyINC00L7QutGD0LzQtdC90YLQtSAiIiIKCiAgICBxdWVyeV90ZXh0ID0gdWlfZm9ybV9kYXRhLmdldF9wbGFuX2dvb2RfZnJvbV9kb2MoKQogICAgYXJnc19kaWN0ID0ge30KICAgIGFyZ3NfZGljdFsnaWREb2MnXSA9IGlkX2RvYwogICAgYXJnc19kaWN0WydpZF9nb29kJ10gPSBlbF9kaWN0WydpZF9nb29kJ10KICAgIGFyZ3NfZGljdFsnaWRfcHJvcGVydGllcyddID0gZWxfZGljdFsnaWRfcHJvcGVydHknXQogICAgYXJnc19kaWN0WydpZF9zZXJpZXMnXSA9IGVsX2RpY3RbJ2lkX3NlcmllcyddCiAgICAjYXJnc19kaWN0WydpZF91bml0J10gPSBlbF9kaWN0WydpZF91bml0J10KCiAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3NfZGljdCwgVHJ1ZSkKCiAgICByZXR1cm4gcmVzCgoKZGVmIGNoZWNrX2Fkcl9iYXJjb2RlX2NvbXBsaWFuY2UoZWxfZGljdDogZGljdCwgaWRfZG9jKToKICAgICIiIiAxINCi0LDQutC+0Lkg0YLQvtCy0LDRgCDQsiDQv9GA0LjQvdGG0LjQv9C1INC10YHRgtGMINCyINC00L7QutGD0LzQtdC90YLQtSAiIiIKCiAgICBxdWVyeV90ZXh0ID0gICcnJwogICAgU0VMRUNUIGlmbnVsbChxdHR5X3BsYW4sMCkgYXMgcXR0eV9wbGFuLAogICAgaWZudWxsKHF0dHksMCkgYXMgcXR0eSwgaWRfZ29vZAogICAgRlJPTSBSU19hZHJfZG9jc190YWJsZQogICAgV0hFUkUgCiAgICBpZF9kb2MgPSA6aWREb2MgCiAgICBBTkQgaWRfZ29vZCA9IDppZF9nb29kCiAgICBBTkQgaWRfcHJvcGVydGllcyA9IDppZF9wcm9wZXJ0aWVzCiAgICBBTkQgaWRfc2VyaWVzID0gOmlkX3NlcmllcwogICAgQU5EIGlkX2NlbGwgPSA6aWRfY2VsbCBvciBpZF9jZWxsID0gIiIgT1IgaWRfY2VsbCBpcyBOdWxsCiAgICAnJycKICAgIGFyZ3NfZGljdCA9IHt9CiAgICBhcmdzX2RpY3RbJ2lkRG9jJ10gPSBpZF9kb2MKICAgIGFyZ3NfZGljdFsnaWRfZ29vZCddID0gZWxfZGljdFsnaWRfZ29vZCddCiAgICBhcmdzX2RpY3RbJ2lkX3Byb3BlcnRpZXMnXSA9IGVsX2RpY3RbJ2lkX3Byb3BlcnR5J10KICAgIGFyZ3NfZGljdFsnaWRfc2VyaWVzJ10gPSBlbF9kaWN0WydpZF9zZXJpZXMnXQogICAgYXJnc19kaWN0WydpZF9jZWxsJ10gPSBlbF9kaWN0WydpZF9jZWxsJ10KICAgICNhcmdzX2RpY3RbJ2lkX3VuaXQnXSA9IGVsX2RpY3RbJ2lkX3VuaXQnXQoKICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgYXJnc19kaWN0LCBUcnVlKQoKICAgIHJldHVybiByZXMKIwoKCmRlZiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQ6IG9iamVjdCwgYXJnczogb2JqZWN0ID0gIiIsIHJldHVybl9kaWN0PUZhbHNlKSAtPiBsaXN0OgogICAgIyAqKioqKioqKioqKioqKioqKioqKioqCgogICAgIyBnbG9iYWwgY29ubgogICAgIyBnZXRfZGF0YWJhc2VfY29ubmVjdGlvbigpCiAgICB0cnk6CiAgICAgICAgY29ubiA9IHNxbGl0ZTMuY29ubmVjdChkYl9wYXRoKQoKICAgIGV4Y2VwdCBFcnJvcjoKCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignTm8gY29ubmVjdGlvbiB3aXRoIGRhdGFiYXNlJykKCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpCiAgICB0cnk6CiAgICAgICAgaWYgYXJnczoKICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUocXVlcnlfdGV4dCwgYXJncykKICAgICAgICBlbHNlOgogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZShxdWVyeV90ZXh0KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIGUKCiAgICAjINCV0YHQu9C4INC90LDQtNC+IC0g0LLQvtC30LLRgNCw0YnQsNC10Lwg0L3QtSDRgNC10LfRg9C70YzRgtCw0YIg0LfQsNC/0YDQvtGB0LAsINCwINGB0LvQvtCy0LDRgNGMINGBINC40LzQv9C+0YDRgtC40YDQvtCy0LDQvdC90YvQvCDRgNC10LfRg9C70YzRgtCw0YLQvtC8CiAgICBpZiByZXR1cm5fZGljdDoKICAgICAgICByZXMgPSBbZGljdChsaW5lKSBmb3IgbGluZSBpbgogICAgICAgICAgICAgICBbemlwKFtjb2x1bW5bMF0gZm9yIGNvbHVtbiBpbiBjdXJzb3IuZGVzY3JpcHRpb25dLCByb3cpIGZvciByb3cgaW4gY3Vyc29yLmZldGNoYWxsKCldXQogICAgZWxzZToKICAgICAgICByZXMgPSBjdXJzb3IuZmV0Y2hhbGwoKQogICAgY29ubi5jb21taXQoKQogICAgY29ubi5jbG9zZSgpCiAgICByZXR1cm4gcmVzCgoKZGVmIGV4ZWN1dGVfc2NyaXB0KHF1ZXJ5X3RleHQpOgogICAgIyBnbG9iYWwgY29ubiAgIyA9IE5vbmUKICAgICMgZ2V0X2RhdGFiYXNlX2Nvbm5lY3Rpb24oKQogICAgdHJ5OgogICAgICAgIGNvbm4gPSBzcWxpdGUzLmNvbm5lY3QoZGJfcGF0aCkKCiAgICBleGNlcHQgRXJyb3I6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignTm8gY29ubmVjdGlvbiB3aXRoIGRhdGFiYXNlJykKCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpCiAgICB0cnk6CiAgICAgICAgY3Vyc29yLmV4ZWN1dGVzY3JpcHQocXVlcnlfdGV4dCkKICAgICAgICBjb25uLmNvbW1pdCgpCiAgICBleGNlcHQgc3FsaXRlMy5FcnJvciBhcyBlcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGVyKQogICAgY29ubi5jbG9zZSgpCgoKZGVmIGJ1bGtfcXVlcnlfcmVwbGFjZShxdWVyeV90ZXh0OiBzdHIsIGFyZ3M6IG9iamVjdCA9ICIiKSAtPiBvYmplY3Q6CiAgICAjICoqKioqKioqKioqKioqKioqKioqKioKICAgICMgZ2xvYmFsIGNvbm4KICAgICMgZ2V0X2RhdGFiYXNlX2Nvbm5lY3Rpb24oKQogICAgY29ubiA9IE5vbmUKICAgIHRyeToKICAgICAgICBjb25uID0gc3FsaXRlMy5jb25uZWN0KGRiX3BhdGgpCgogICAgZXhjZXB0IEVycm9yOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ05vIGNvbm5lY3Rpb24gd2l0aCBkYXRhYmFzZScpCgogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQogICAgdHJ5OgogICAgICAgIGlmIGFyZ3M6CiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlbWFueShxdWVyeV90ZXh0LCBhcmdzKQoKICAgICAgICBjb25uLmNvbW1pdCgpCiAgICBleGNlcHQgc3FsaXRlMy5FcnJvciBhcyBlcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGVyKQoKICAgIHJlcyA9IGN1cnNvci5mZXRjaGFsbCgpCgogICAgY29ubi5jbG9zZSgpCiAgICByZXR1cm4gcmVzCgoKZGVmIGdldF9uYW1lX2xpc3Qoc3RyX2VudHR5KToKICAgIHF1ZXJ5ID0gIlNFTEVDVCBuYW1lIEZST00gIiArIHN0cl9lbnR0eQogICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSkKICAgIGxpc3RfZWwgPSBbXQogICAgIyBsaXN0X2VsLmFwcGVuZChuYW1lIGZvciBuYW1lIGluIHJlcykKICAgIGZvciBlbCBpbiByZXM6CiAgICAgICAgbGlzdF9lbC5hcHBlbmQoZWxbMF0pCiAgICByZXR1cm4gIjsiLmpvaW4obGlzdF9lbCkKCgpkZWYgZ2V0X2J5X25hbWUoZmxkLCB0YWJsZSk6CiAgICBxdWVyeSA9ICJTRUxFQ1QgaWQgRlJPTSAiICsgdGFibGUgKyAnIFdIRVJFIG5hbWUgPSA/JwogICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGZsZCwpKQoKICAgIGlmIGxlbihyZXMpID09IDA6CiAgICAgICAgcmV0dXJuICIiCiAgICBlbHNlOgogICAgICAgIHJldHVybiByZXNbMF1bMF0KCgpkZWYgSWRfdG9fSEVYKGd1aWQpOgogICAgeDEgPSBndWlkWzE5OjIzXQogICAgeDIgPSBndWlkWzI0OiAzNl0KICAgIHgzID0gZ3VpZFsxNDogMThdCiAgICB4NCA9IGd1aWRbOToxM10KICAgIHg1ID0gZ3VpZFswOiA4XQoKICAgIHN0cl9ndWlkID0geDEgKyB4MiArIHgzICsgeDQgKyB4NQogICAgcmV0dXJuIGludChzdHJfZ3VpZCwgMTYpCgojCmNsYXNzIFJzX2RvYygpOgogICAgaWRfZG9jID0gJycgICMgc3RyKQogICAgaWRfc3RyID0gJycgICMgc3RyKQogICAgcXR0eSA9ICcnICAjIHN0cikKCiAgICBkZWYgdXBkYXRlX2RvY19zdHIoc2VsZiwgcHJpY2U9MCk6CiAgICAgICAgcXVlcnkgPSAiIiIKICAgICAgICBVUERBVEUgUlNfZG9jc190YWJsZQogICAgICAgIFNFVCBxdHR5PT8sIHByaWNlPT8KICAgICAgICBXaGVyZSBpZD0/ICIiIgogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChzZWxmLnF0dHksIHByaWNlLCBzZWxmLmlkX3N0cikpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBkZWxldGVfZG9jKHNlbGYpOgogICAgICAgIHF1ZXJ5X2RvY190YWJsZSA9ICdERUxFVEUgRlJPTSBSU19kb2NzX3RhYmxlIFdIRVJFIGlkX2RvYyA9ID8nCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2NfdGFibGUsIChzZWxmLmlkX2RvYywpKQogICAgICAgIHF1ZXJ5X2RvY190YWJsZSA9ICdERUxFVEUgRlJPTSBSU19kb2NzX2JhcmNvZGVzIFdIRVJFIGlkX2RvYyA9ID8nCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2NfdGFibGUsIChzZWxmLmlkX2RvYywpKQogICAgICAgIHF1ZXJ5X2RvYyA9ICdERUxFVEUgRlJPTSBSU19kb2NzIFdIRVJFIGlkX2RvYyA9ID8nCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2MsIChzZWxmLmlkX2RvYywpKQoKICAgICAgICByZXR1cm4gcmVzCiAgICBkZWYgY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYpOgogICAgICAgIHF1ZXJ5X3RleHQgPSAoJ1VwZGF0ZSBSU19kb2NzX2JhcmNvZGVzIFNldCBhcHByb3ZlZCA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgICAgICdEZWxldGUgRnJvbSBSU19kb2NzX2JhcmNvZGVzIFdoZXJlICBpZF9kb2M9OmlkX2RvYyBBbmQgaXNfcGxhbiA9IDAnLAogICAgICAgICdVcGRhdGUgUlNfZG9jc190YWJsZSBTZXQgcXR0eSA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgICAgICdEZWxldGUgRnJvbSBSU19kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz06aWRfZG9jIGFuZCBpc19wbGFuID0gIkZhbHNlIicpCiAgICAgICAgZm9yIGVsIGluIHF1ZXJ5X3RleHQ6CiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6c2VsZi5pZF9kb2N9KSkKCiAgICBkZWYgbWFya19mb3JfdXBsb2FkKHNlbGYpOgogICAgICAgIHF1ZXJ5ID0gIiIiCiAgICAgICAgVVBEQVRFIFJTX2RvY3NfdGFibGUKICAgICAgICBTRVQgc2VudD0xCiAgICAgICAgV2hlcmUgaWQ9PyAiIiIKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoc2VsZi5pZF9kb2MpKQoKICAgICAgICByZXR1cm4gcmVzCgogICAgZGVmIG1hcmtfdmVyaWZpZWQoc2VsZiwga2V5KToKICAgICAgICBxdWVyeSA9ICIiIgogICAgICAgICAgICAgICAgVVBEQVRFIFJTX2RvY3MKICAgICAgICAgICAgICAgIFNFVCB2ZXJpZmllZD0/CiAgICAgICAgICAgICAgICBXaGVyZSBpZF9kb2M9PyAiIiIKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoaW50KGtleSksIHNlbGYuaWRfZG9jKSkKCiAgICBkZWYgZmluZF9iYXJjb2RlX2luX3RhYmxlKHNlbGYsIHNlYXJjaF92YWx1ZTogc3RyLCBmdW5jX2NvbXBhcmVkPSc9PycpIC0+IGxpc3Q6CgogICAgICAgIHF1ZXJ5ID0gJycnCiAgICAgICAgICAgICAgICAgU0VMRUNUCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfZ29vZCwKICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF9wcm9wZXJ0eSwKICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF9zZXJpZXMsCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfdW5pdCwKICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkLAogICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUucXR0eSAgICAgICAgCiAgICAgICAgICAgICAgICAgRlJPTSBSU19iYXJjb2RlcwogICAgICAgICAgICAgICAgIExlZnQgam9pbiBSU19kb2NzX3RhYmxlIE9OCiAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF9nb29kPSBSU19iYXJjb2Rlcy5pZF9nb29kIGFuZAogICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcz0gUlNfYmFyY29kZXMuaWRfcHJvcGVydHkgYW5kCiAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF91bml0PSBSU19iYXJjb2Rlcy5pZF91bml0IEFuZAogICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZG9jPT8KICAgICAgICAgICAgICAgICB3aGVyZSBiYXJjb2RlICcnJyArIGZ1bmNfY29tcGFyZWQKICAgICAgICAjIHF1ZXJ5ID0gcXVlcnkgKyBmdW5jX2NvbXBhcmVkCgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoc2VsZi5pZF9kb2MsIHNlYXJjaF92YWx1ZSksIFRydWUpCgogICAgZGVmIGZpbmRfYmFyY29kZV9pbl9tYXJrX3RhYmxlKHNlbGYsIHNlYXJjaF92YWx1ZTogc3RyLCBmdW5jX2NvbXBhcmVkPSc9PycpIC0+IG9iamVjdDoKICAgICAgICBxdWVyeSA9ICcnJwogICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgICAgICAgICAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9nb29kLAogICAgICAgICAgICAgICAgICAgICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3Byb3BlcnR5LAogICAgICAgICAgICAgICAgICAgICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3NlcmllcywKICAgICAgICAgICAgICAgICAgICAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF91bml0LAogICAgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLnF0dHkgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBGUk9NIFJTX21hcmtpbmdfY29kZXMKICAgICAgICAgICAgICAgICAgICAgICAgTGVmdCBqb2luIFJTX2RvY3NfdGFibGUgT04KICAgICAgICAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF9nb29kPSBSU19tYXJraW5nX2NvZGVzLmlkX2dvb2QgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcz0gUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF91bml0PSBSU19tYXJraW5nX2NvZGVzLmlkX3VuaXQgQW5kCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZG9jPT8KICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmUgbWFya19jb2RlICAnJycgKyBmdW5jX2NvbXBhcmVkCiAgICAgICAgIyBxdWVyeSA9IHF1ZXJ5ICsgZnVuY19jb21wYXJlZAoKICAgICAgICByZXR1cm4gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYuaWRfZG9jLCBzZWFyY2hfdmFsdWUpLCBUcnVlKQoKICAgIGRlZiB1cGRhdGVfZG9jX3RhYmxlX2RhdGEoc2VsZiwgZWxlbV9mb3JfYWRkOiBkaWN0LCBxdHR5PTEsIHVzZXJfdG16PTApOgogICAgICAgICMg0KHQvdCw0YfQsNC70LAg0L7Qv9GA0LXQtNC10LvQuNC8LCDQtdGB0YLRjCDQu9C4INCyINGB0L/QuNGB0LrQtSDRgtC+0LLQsNGA0L7QsiDQtNC+0LrRg9C80LXQvdGC0LAg0L3QsNGIINGC0L7QstCw0YA6CiAgICAgICAgcXRleHQgPSAnU2VsZWN0ICogZnJvbSBSU19kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz0/IGFuZCBpZF9nb29kID0gPyBhbmQgaWRfcHJvcGVydGllcyA9ID8gYW5kIGlkX3NlcmllcyA9ID8gJyAjYW5kIGlkX3VuaXQgPSA/CiAgICAgICAgYXJncyA9IChzZWxmLmlkX2RvYywgZWxlbV9mb3JfYWRkWydpZF9nb29kJ10sIGVsZW1fZm9yX2FkZFsnaWRfcHJvcGVydHknXSwgZWxlbV9mb3JfYWRkWydpZF9zZXJpZXMnXSkgIyxlbGVtX2Zvcl9hZGRbJ2lkX3VuaXQnXQogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXRleHQsIGFyZ3MsIFRydWUpCiAgICAgICAgaWYgcmVzOiAgIyDQndCw0YjQu9C4INGB0YLRgNC+0LrQuCDQtNC+0LrRg9C80LXQvdGC0LAsINC00L7QsdCw0LLQu9GP0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQvgoKICAgICAgICAgICAgZWwgPSByZXNbMF0KICAgICAgICAgICAgIyBpZiBlbFsncXR0eSddK3F0dHkgPT0gMDoKICAgICAgICAgICAgIyAgICAgcXRleHQgPSAnREVMRVRFIEZST00gUlNfZG9jc190YWJsZSAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICAjICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoZWxbJ2lkJ10sKSkKICAgICAgICAgICAgIyBlbHNlOgogICAgICAgICAgICBxdGV4dCA9ICdVUERBVEUgUlNfZG9jc190YWJsZSBTRVQgcXR0eT1xdHR5Kz8sIGxhc3RfdXBkYXRlZCA9ID8sIHNlbnQgPSAwIFdIRVJFIGlkID0gPycKICAgICAgICAgICAgY3VycmVudF90aW1lX3V0Y18wID0gKGRhdGV0aW1lLm5vdygpIC0gdGltZWRlbHRhKGhvdXJzPXVzZXJfdG16KSkuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKHF0dHksIGN1cnJlbnRfdGltZV91dGNfMCwgZWxbJ2lkJ10pKQogICAgICAgIGVsc2U6ICAjINCi0LDQutC+0Lkg0YHRgtGA0L7QutC4INC90LXRgiwg0L3QsNC00L4g0LTQvtCx0LDQstC40YLRjAogICAgICAgICAgICBxdGV4dCA9ICdSRVBMQUNFIElOVE8gUlNfZG9jc190YWJsZShpZF9kb2MsIGlkX2dvb2QsIGlkX3Byb3BlcnRpZXMsaWRfc2VyaWVzLCBpZF91bml0LCBxdHR5LCBwcmljZSwgaWRfcHJpY2UsIGlzX3BsYW4sIHNlbnQpIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyw/LD8sPyknCiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsICgKICAgICAgICAgICAgICAgIHNlbGYuaWRfZG9jLCBlbGVtX2Zvcl9hZGRbJ2lkX2dvb2QnXSwgZWxlbV9mb3JfYWRkWydpZF9wcm9wZXJ0eSddLCBlbGVtX2Zvcl9hZGRbJ2lkX3NlcmllcyddLAogICAgICAgICAgICAgICAgZWxlbV9mb3JfYWRkLmdldCgnaWRfdW5pdCcpLCBxdHR5LCAwLCAnJywgJ0ZhbHNlJywgMCkpCgogICAgICAgIHJldHVybiByZXMKCiAgICAjINCk0YPQs9C60YbQuNGPINC00L7QsdCw0LLQu9GP0LXRgiDRgdGC0YDQvtC60YMg0LIg0LzQsNGA0LrQuNGA0L7QstC60YMg0LTQvtC60YPQvNC10L3RgtCwINC90LAg0L7RgdC90L7QstCw0L3QuNC4INCx0LDRgNC60L7QtNCwIChkYXRhTWF0cml4KQogICAgZGVmIGFkZF9tYXJrZWRfY29kZXNfaW5fZG9jKHNlbGYsIGJhcmNvZGVfaW5mbyk6CiAgICAgICAgcXRleHQgPSAnU0VMRUNUICogRlJPTSBSU19tYXJraW5nX2NvZGVzIFdoZXJlIG1hcmtfY29kZSA9PycKICAgICAgICBxX2RvY190ZXh0ID0gJ1JFUExBQ0UgSU5UTyBSU19kb2NzX2JhcmNvZGVzIChpZF9kb2MsIGlkX2JhcmNvZGUsIGJhcmNvZGVfZnJvbV9zY2FubmVyLCBpc19wbGFuLCBhcHByb3ZlZCkgVkFMVUVTICg/LD8sPyw/LD8pJwogICAgICAgICMg0JjRidC10Lwg0LrQvtC0INC80LDRgNC60LjRgNC+0LLQutC4INCyINGC0LDQsdC70LjRhtC1IFJTX21hcmtpbmdfY29kZXMg0L/QviBHVElOINC4IFNFUklBTAogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXRleHQsICgnMDEnICsgYmFyY29kZV9pbmZvWydHVElOJ10gKyAnMjEnICsgYmFyY29kZV9pbmZvWydTRVJJQUwnXSwpLCBUcnVlKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgIyDQndCw0YjQu9C4INGC0LDQutC+0Lkg0LHQsNGA0LrQvtC0INCyINGB0L/QuNGB0LrQtSDQvNCw0YDQutC40YDQvtCy0LrQuCwg0LfQsNC/0L7Qu9C90Y/QtdC8INGB0YLRgNC+0LrRgyDQvNCw0YDQutC40YDQvtCy0LrQuCDQtNC+0LrRg9C80LXQvdGC0LAKCiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocV9kb2NfdGV4dCwgKHNlbGYuaWRfZG9jLCByZXNbMF1bJ2lkJ10sIGJhcmNvZGVfaW5mb1snRnVsbEJhcmNvZGUnXSwgJzAnLCAnMScpLCBUcnVlKQogICAgICAgICAgICByZXR1cm4gcmVzWzBdCiAgICAgICAgZWxzZTogICMg0J3QtSDQvdCw0YjQu9C4IC0g0L/RgNC+0LHRg9C10Lwg0LjRgdC60LDRgtGMINC/0L4gR1RJTiDQsiDRgtCw0LHQu9C40YbQtSDQsdCw0YDQutC+0LTQvtCyCiAgICAgICAgICAgIHJlcyA9IHNlbGYuZmluZF9iYXJjb2RlX2luX21hcmtfdGFibGUoc2VsZiwgJzAxJyArIGJhcmNvZGVfaW5mb1snR1RJTiddICsgJyUnLCAnTGlrZSA/JykKICAgICAgICAgICAgaWYgcmVzOiAgIyDQndCw0YjQu9C4INC/0L4gR1RJTiwg0LfQsNC/0L7Qu9C90Y/QtdC8INC00L7QutGD0LzQtdC90YIKICAgICAgICAgICAgICAgIGVsID0gcmVzWzBdCiAgICAgICAgICAgICAgICAjINCh0L3QsNGH0LDQu9CwINC30LDQv9C+0LvQvdC40Lwg0YLQsNCx0LvQuNGG0YMgUlNfbWFya2luZ19jb2RlcwogICAgICAgICAgICAgICAgcXRleHQgPSAnUkVQTEFDRSBJTlRPIFJTX21hcmtpbmdfY29kZXMgKGlkLCBtYXJrX2NvZGUsIGlkX2dvb2QsIGlkX3Byb3BlcnR5LCBpZF9zZXJpZXMsIGlkX3VuaXQpIFZBTFVFUyAoPyw/LD8sPyw/LD8pJwogICAgICAgICAgICAgICAgbWFya19jb2RlID0gJzAxJyArIGJhcmNvZGVfaW5mb1snR1RJTiddICsgJzIxJyArIGJhcmNvZGVfaW5mb1snU0VSSUFMJ10KICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsICgKICAgICAgICAgICAgICAgICAgICBtYXJrX2NvZGUsIG1hcmtfY29kZSwgZWxbJ2lkX2dvb2QnXSwgZWxbJ2lkX3Byb3BlcnR5J10sIGVsWydpZF9zZXJpZXMnXSwgZWxbJ2lkX3VuaXQnXSkpCiAgICAgICAgICAgICAgICAjINCYINGC0LXQv9C10YDRjCDRgtCw0LHQu9C40YbRgyDQtNC+0LrRg9C80LXQvdGC0LAg0YHQviDRgdGB0YvQu9C60L7QuSDQvdCwIFJTX21hcmtpbmdfY29kZXMKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocV9kb2NfdGV4dCwgKHNlbGYuaWRfZG9jLCBtYXJrX2NvZGUsIGJhcmNvZGVfaW5mb1snRnVsbEJhcmNvZGUnXSwgJzAnLCAnMScpKQogICAgICAgICAgICAgICAgZWxbJ21hcmtfY29kZSddID0gbWFya19jb2RlCiAgICAgICAgICAgICAgICByZXR1cm4gZWwKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgoKICAgIGRlZiBhZGRfbmV3X2JhcmNvZGVfaW5fZG9jX2JhcmNvZGVzX3RhYmxlKHNlbGYsIGVsLCBiYXJjb2RlX2luZm8pOgogICAgICAgIHF1ZXJ5X3RleHQgPSAnJycKICAgICAgICBJbnNlcnQgSW50byBSU19kb2NzX2JhcmNvZGVzICgKICAgICAgICBpZF9kb2MsCiAgICAgICAgaWRfZ29vZCwKICAgICAgICBpZF9wcm9wZXJ0eSwKICAgICAgICBpZF9zZXJpZXMsCiAgICAgICAgaWRfdW5pdCwKICAgICAgICBiYXJjb2RlX2Zyb21fc2Nhbm5lciwKICAgICAgICBhcHByb3ZlZCAsCiAgICAgICAgR1RJTiwKICAgICAgICBTZXJpZXMpIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyw/LD8pJycnCiAgICAgICAgYXJncyA9IChzZWxmLmlkX2RvYywgZWxbJ2lkX2dvb2QnXSxlbFsnaWRfcHJvcGVydHknXSxlbFsnaWRfc2VyaWVzJ10sZWxbJ2lkX3VuaXQnXSxiYXJjb2RlX2luZm9bJ0Z1bGxDb2RlJ10sJzEnLCBiYXJjb2RlX2luZm9bJ0dUSU4nXSwgYmFyY29kZV9pbmZvWydTRVJJQUwnXSkKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3MpCgoKCiAgICAjINCV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMgIC0gaGF2ZV9xdHR5X3BsYW4KICAgICMg0JXRgdGC0Ywg0L/Qu9Cw0L0g0L/QviDRgdC/0LjRgdC60YMg0YLQvtCy0LDRgNC+0LIgaGF2ZV96ZXJvX3BsYW4KICAgICMg0JrQntC90YLRgNC+0LvRjCDQv9C70LDQvdC+0LIg0LIg0LTQvtC60YPQvNC10L3RgtC1IC0gY29udHJvbAogICAgIyDQldGB0YLRjCDQv9C70LDQvSDQv9C+INC80LDRgNC60LjRgNGD0LXQvNC+0Lkg0L/RgNC+0LTRg9C60YbQuNC4IGhhdmVfbWFya19wbGFuCiAgICBkZWYgcHJvY2Vzc190aGVfYmFyY29kZShzZWxmLCBiYXJjb2RlLCBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlLCBoYXZlX3plcm9fcGxhbiA9IEZhbHNlLCBjb250cm9sID0gRmFsc2UsIGhhdmVfbWFya19wbGFuID0gRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gTm9uZSwgdXNlX21hcmtfc2V0dGluZyA9ICdmYWxzZScsIHVzZXJfdG16PTApOiAjIGFkZF9pZl9ub3RfZm91bmQ9RmFsc2UsIGFkZF9pZl9ub3RfaW5fcGxhbj1GYWxzZSk6CiAgICAgICAgIyDQn9C+0LvRg9GH0LjQvCDRgdGC0YDRg9C60YLRg9GA0YMg0LHQsNGA0LrQvtC00LAKICAgICAgICBpZiBiYXJjb2RlWzBdID09IGNocigyOSkgYW5kIGxlbihiYXJjb2RlKSA+IDMxOiAgIyBSZW1vdmUgZmlyc3QgR1MxIGNoYXIgZnJvbSBiYXJjb2RlCiAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzE6XQogICAgICAgIGJhcmNvZGVfaW5mbyA9IHVpX2JhcmNvZGVzLnBhcnNlX2JhcmNvZGUoYmFyY29kZSkKICAgICAgICBpZiBiYXJjb2RlX2luZm8uX19jb250YWluc19fKCdFUlJPUicpOgogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdJbnZhbGlkIEJhcmNvZGUnLCAnRGVzY3InOiAn0J3QtdCy0LXRgNC90YvQuSDRiNGC0YDQuNGF0LrQvtC0JywKICAgICAgICAgICAgICAgICAgICAnQmFyY29kZSc6IGJhcmNvZGVfaW5mbywgJ2RvY19pbmZvJzogc2VsZi5pZF9kb2N9CiAgICAgICAgIyAuLi4g0Lgg0L3QsNC50LTQtdC8INC/0L4g0L3QtdC80YMg0LLRgdC1INGH0YLQviDQtdGB0YLRjCDQsiDQsdCw0LfQtQogICAgICAgIHNoZW1hID0gYmFyY29kZV9pbmZvWydTQ0hFTUUnXQogICAgICAgIGlmIHNoZW1hIGluIFsnRUFOMTMnLCAnVU5LTk9XTiddOgogICAgICAgICAgICBzZWFyY2hfdmFsdWUgPSBiYXJjb2RlX2luZm9bJ0JBUkNPREUnXQogICAgICAgIGVsaWYgc2hlbWEgPT0gJ0dTMSc6CiAgICAgICAgICAgIHNlYXJjaF92YWx1ZSA9IGJhcmNvZGVfaW5mb1snR1RJTiddCiAgICAgICAgZWxzZTogICMgKioqKioqKioqKioqKioqKioq0KHRjtC00LAg0LzQvtC20L3QviDQtNC+0LHQsNCy0LjRgtGMINC90L7QstGL0LUg0LLQuNC00Ysg0YjRgtGA0LjRhdC60L7QtNC+0LIgKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgICAgc2VhcmNoX3ZhbHVlID0gYmFyY29kZV9pbmZvWydCQVJDT0RFJ10KCiAgICAgICAgcmVzID0gZmluZF9iYXJjb2RlX2luX2JhcmNvZGVfdGFibGUoc2VhcmNoX3ZhbHVlKSAgIyDQmNGJ0LXRgiDQsdCw0YDQutC+0LQg0LjQu9C4INCT0KLQmNCY0J0g0L/QviDQvtCx0YnQtdC5INGC0LDQsdC70LjRhtC1INGI0YLRgNC40YXQutC+0LTQvtCyLiDQktC+0LfQstGA0LDRidCw0LXRgiDRgtC+0LLQsNGALCDQtdCz0L4g0LLQuNC0LCDRhdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutGDINGB0LXRgNC40Y4g0LjRgtC/LgogICAgICAgIGlmIG5vdCBsZW4ocmVzKSA9PSAwOgogICAgICAgICAgICBlbGVtID0gcmVzWzBdICPQkdC10YDQtdC8INC/0LXRgNCy0YvQuSDRgNC10LfRg9C70YzRgtCw0YIuINCSINC/0YDQsNCy0LjQu9GM0L3QvtC8INGB0L/QuNGB0LrQtSDRiNGC0YDQuNGF0LrQvtC00L7QsiDQvdC1INC80L7QttC10YIg0LHRi9GC0Ywg0L/QvtCy0YLQvtGA0LXQvdC40LkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdOb3RGb3VuZCcsICdEZXNjcic6ICfQqNGC0YDQuNGF0LrQvtC0INC90LUg0L3QsNC50LTQtdC9INCyINCx0LDQt9C1JywgJ0JhcmNvZGUnOiBiYXJjb2RlfQoKICAgICAgICB1c2VfbWFyayA9IHVzZV9tYXJrX3NldHRpbmcgID09ICd0cnVlJyBhbmQgZWxlbVsndXNlX21hcmsnXSA9PSAxICNnZXRfY29uc3RhbnRzKCd1c2VfbWFyaycpCgogICAgICAgICMg0J/RgNC+0LLQtdGA0Y/QtdC8INC80LDRgNC60LjRgNC+0LLQutGDCiAgICAgICAgaWYgdXNlX21hcms6CiAgICAgICAgICAgIGlmIHNoZW1hID09ICdHUzEnOgogICAgICAgICAgICAgICAgZWxfbWFya2VkID0gTm9uZQogICAgICAgICAgICAgICAgIyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQvNCw0YDQutC40YDQvtCy0LrRgyDQuCDRgtC+0LLQsNGAINC80LDRgNC60LjRgNGD0LXRgtGB0Y8KICAgICAgICAgICAgICAgICMg0J3QsNGI0LvQuCDQsiDQtNC+0LrRg9C80LXQvdGC0LUgR1RJTiArINGB0LXRgNC40Y8KICAgICAgICAgICAgICAgIHJlcyA9IGZpbmRfYmFyY29kZV9pbl9tYXJraW5nX2NvZGVzX3RhYmxlKHNlbGYsIGJhcmNvZGVfaW5mbykKCiAgICAgICAgICAgICAgICBpZiByZXM6CiAgICAgICAgICAgICAgICAgICAgZWxfbWFya2VkID0gcmVzWzBdICPQktGL0LHQuNGA0LDQtdC8INC/0LXRgNCy0YPRjiDRgdGC0YDQvtC60YMg0LjQtyDRgdC/0LjRgdC60LAgKNC10YHQu9C4INCyINGC0LDQsdC70LjRhtC1INGI0YLRgNC40YXQutC+0LTQvtCyINC/0L7RgNGP0LTQvtC6LCDQsiDRgNC10YEg0LLRgdC10LPQtNCwINGC0L7Qu9GM0LrQviDQvtC00L3QsCDRgdGC0YDQvtC60LApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMg0J3QtSDQvdCw0YjQu9C4LCDQv9GA0L7QstC10YDRj9C10Lwg0LXRgdGC0Ywg0LvQuCDQsiDQtNC+0LrRg9C80LXQvdGC0LUg0L/Qu9Cw0L0g0Lgg0LrQvtC90YLRgNC+0LvRjAogICAgICAgICAgICAgICAgICAgIGlmIGhhdmVfbWFya19wbGFuIGFuZCBjb250cm9sOiAj0JXRgdGC0YzQn9C70LDQvdCa0J7QtNC+0LLQnNCw0YDQutC40YDQvtCy0LrQuCDQuCDQutC+0L3RgtGA0L7Qu9GMCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ05vdEZvdW5kJywgJ0Rlc2NyJzogJ9Cc0LDRgNC60LAg0L3QtSDQvdCw0LnQtNC10L3QsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdCYXJjb2RlJzogYmFyY29kZV9pbmZvLCAnZG9jX2luZm8nOiBzZWxmLmlkX2RvY30KCiAgICAgICAgICAgICAgICAjICoqKioqKioqKioqKgoKICAgICAgICAgICAgICAgIGlmIGVsX21hcmtlZCBhbmQgZWxfbWFya2VkWydpZF9nb29kJ106ICAjINC90LDRiNC70Lgg0YHRgtGA0L7QutGDINC/0L4g0L/QvtC70L3QvtC80YMg0YHQvtCy0L/QsNC00LXQvdC40Y4gR1RJTiDQuCDRgdC10YDQuNGPLCDRgdGB0YvQu9C60LAg0L3QsCDRgtC+0LLQsNGACgogICAgICAgICAgICAgICAgICAgIGlmIGVsX21hcmtlZFsnYXBwcm92ZWQnXSA9PSAnMSc6ICAjINCi0LDQutCw0Y8g0LzQsNGA0LrQsCDRg9C20LUg0LHRi9C70LAg0L7RgtGB0LrQsNC90LjRgNC+0LLQsNC90LAKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsnRXJyb3InOiAnQWxyZWFkeVNjYW5uZWQnLCAnRGVzY3InOiAn0KLQsNC60LDRjyDQvNCw0YDQutCwINGD0LbQtSDQsdGL0LvQsCDQvtGC0YHQutCw0L3QuNGA0L7QstCw0L3QsCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0JhcmNvZGUnOiBiYXJjb2RlX2luZm8sICdkb2NfaW5mbyc6IGVsX21hcmtlZH0KCiAgICAgICAgICAgICAgICAjICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdOb3RWYWxpZEJhcmNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAnRGVzY3InOiAn0KLQvtCy0LDRgCDQv9C+0LTQu9C10LbQuNGCINC80LDRgNC60LjRgNC+0LLQutC1LCDQsCDQv9C+INC90LXQvNGDINC+0YLRgdC60LDQvdC40YDQvtCy0LDQvSDQvtCx0YvRh9C90YvQuSDRiNGC0YDQuNGF0LrQvtC0JywKICAgICAgICAgICAgICAgICAgICAgICAgJ0JhcmNvZGUnOiBiYXJjb2RlfQoKICAgICAgICAj0KLQvtCy0LDRgCDQsiDRgtCw0LHQu9C40YbQtSDQtNC+0LrRg9C80LXQvdGC0LAgKNCi0L7QstCw0YAg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtSkKICAgICAgICByZXMgPSBjaGVja19iYXJjb2RlX2NvbXBsaWFuY2UoZWxlbSwgc2VsZi5pZF9kb2MpICAj0J/QvtC70YPRh9Cw0LXQvCDRgdGC0YDQvtC60YMg0YLQsNCx0LvQuNGG0Ysg0YLQvtCy0LDRgNGLINC00L7QutGD0LzQtdC90YLQsAogICAgICAgIGlmIHJlczogI9Ci0L7QstCw0YAg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtQogICAgICAgICAgICBpZiBoYXZlX3F0dHlfcGxhbjogI9CV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMKICAgICAgICAgICAgICAgIGlmIHJlc1swXVsncXR0eV9wbGFuJ10gPD0gcmVzWzBdWydxdHR5J106ICPQmtC+0LvQuNGH0LXRgdGC0LLQviDRgtC+0LLQsNGA0LAg0LIg0LTQvtC60YPQvNC10L3RgtC1INGD0LbQtSDQvdCw0LHRgNCw0L3Qviwg0Lgg0LzRiyDQv9GA0LXQstGL0YjQsNC10Lwg0L/Qu9Cw0L0KICAgICAgICAgICAgICAgICAgICBpZiBjb250cm9sOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geydSZXN1bHQnOiAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0L/RgNC10LLRi9GI0LXQvdC+LCDQsdC+0LvRjNGI0LUg0YLQvtCy0LDRgCDQsiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQtNC+0LHQsNCy0LjRgtGMINC90LXQu9GM0LfRjycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Vycm9yJzogJ1F1YW50aXR5UGxhblJlYWNoZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogYmFyY29kZSwgJ0Rlc2NyJzogJ9Ca0L7Qu9C40YfQtdGB0YLQstC+INC/0LvQsNC9INC/0YDQtdCy0YvRiNC10L3Qviwg0LHQvtC70YzRiNC1INGC0L7QstCw0YAg0LIg0LTQsNC90L3Ri9C5INC00L7QutGD0LzQtdC90YIg0LTQvtCx0LDQstC40YLRjCDQvdC10LvRjNC30Y8nfQoKICAgICAgICBlbHNlOiAj0KLQvtCy0LDRgCDQvdC1INC90LDQudC00LXQvSDQsiDQtNC+0LrRg9C80LXQvdGC0LUKICAgICAgICAgICAgaWYgaGF2ZV96ZXJvX3BsYW4gYW5kIGNvbnRyb2w6CiAgICAgICAgICAgICAgICByZXR1cm4geydSZXN1bHQnOiAn0JIg0LTQsNC90L3Ri9C5INC00L7QutGD0LzQtdC90YIg0L3QtdC70YzQt9GPINC00L7QsdCw0LLQuNGC0Ywg0YLQvtCy0LDRgCDQvdC1INC40Lcg0YHQv9C40YHQutCwJywKICAgICAgICAgICAgICAgICAgICAgICAgJ0Vycm9yJzogJ1plcm9fcGxhbl9lcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgJ0Rlc2NyJzogJ9CSINC00LDQvdC90YvQuSDQtNC+0LrRg9C80LXQvdGCINC90LXQu9GM0LfRjyDQtNC+0LHQsNCy0LjRgtGMINGC0L7QstCw0YAg0L3QtSDQuNC3INGB0L/QuNGB0LrQsCd9CgoKICAgICAgICAjINCR0LvQvtC6INC00L7QsdCw0LLQu9C10L3QuNGPINGC0L7QstCw0YDQsCDQsiDQtNC+0LrRg9C80LXQvdGCCiAgICAgICAgaWYgdXNlX21hcms6CiAgICAgICAgICAgICMg0JTQvtCx0LDQstC70Y/QtdC8INGC0L7QstCw0YAg0LIg0YLQsNCx0LvQuNGG0YMg0LzQsNGA0LrQuNGA0L7QstC60LgKICAgICAgICAgICAgaWYgZWxfbWFya2VkIGFuZCBlbF9tYXJrZWRbJ2lkX2dvb2QnXTogI9Ci0L7QstCw0YAg0LHRi9C7INC90LDQudC00LXQvSwg0YLQvtC70YzQutC+INC+0LHQvdC+0LLQu9GP0LXQvCDRg9C20LUg0L3QsNC50LTQtdC90L3Rg9GOINGB0YLRgNC+0LrRgwogICAgICAgICAgICAgICAgcXVlcnlfdGV4dCA9ICdVcGRhdGUgIFJTX2RvY3NfYmFyY29kZXMgU0VUIGFwcHJvdmVkPT8sIGJhcmNvZGVfZnJvbV9zY2FubmVyPT8gV2hlcmUgaWQ9PycKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKCcxJywgYmFyY29kZSwgaW50KGVsX21hcmtlZFsnaWQnXSkpKQogICAgICAgICAgICBlbHNlOiAj0JTQvtCx0LDQstC70Y/QtdC8INC90L7QstGD0Y4g0YHRgtGA0L7QutGDINCyINGC0LDQsdC70LjRhtGDINCx0LDRgNC60L7QtNC+0LIg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgICAgICAgICBzZWxmLmFkZF9uZXdfYmFyY29kZV9pbl9kb2NfYmFyY29kZXNfdGFibGUoc2VsZiwgZWxlbSAsIGJhcmNvZGVfaW5mbykKCgogICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8INGC0LDQsdC70LjRhtGDINGC0L7QstCw0YDRiwogICAgICAgIHNlbGYudXBkYXRlX2RvY190YWJsZV9kYXRhKHNlbGYsIGVsZW0sIDEsIHVzZXJfdG16KQoKICAgICAgICByZXR1cm4geydSZXN1bHQnOiAn0JzQsNGA0LrQsCDQtNC+0LHQsNCy0LvQtdC90LAg0LIg0LTQvtC60YPQvNC10L3RgicsICdFcnJvcic6IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogYmFyY29kZV9pbmZvWydHVElOJ10gKyBiYXJjb2RlX2luZm9bJ1NFUklBTCddfQoKCiAgICBkZWYgYWRkKHNlbGYsIGFyZ3MpOgogICAgICAgIHF1ZXJ5ID0gJ0lOU0VSVCBJTlRPIFJTX2RvY3MoaWRfZG9jLCBkb2NfdHlwZSwgZG9jX24sIGRvY19kYXRlLCBpZF9jb3VudHJhZ2VudHMsIGlkX3dhcmVob3VzZSwgdmVyaWZpZWQsIHNlbnQpIFZBTFVFUyAoPyw/LD8sPyw/LD8sMCwwKScKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCBhcmdzKQoKICAgIGRlZiBnZXRfbmV3X2lkKHNlbGYpOgogICAgICAgIHF1ZXJ5ID0gJ3NlbGVjdCBtYXhfaWRfZG9jIGZyb20gUlNfY29uc3RhbnRzJwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnkpCiAgICAgICAgaWYgbGVuKHJlcykgPT0gMDoKICAgICAgICAgICAgcmV0dXJuICcxJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbCA9IHJlc1swXVswXQogICAgICAgICAgICBpZiB2YWwgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiAnMScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gJ1VQREFURSBSU19jb25zdGFudHMgU0VUIG1heF9pZF9kb2MgPSA/JwogICAgICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGludCh2YWwpICsgMSwpKQogICAgICAgICAgICAgICAgcmV0dXJuIHN0cihpbnQodmFsKSArIDEpCgpjbGFzcyBSc19hZHJfZG9jKCk6CiAgICBpZF9kb2MgPSAnJyAgIyBzdHIpCiAgICBpZF9zdHIgPSAnJyAgIyBzdHIpCiAgICBxdHR5ID0gJycgICMgc3RyKQoKICAgIGRlZiB1cGRhdGVfZG9jX3N0cihzZWxmKToKICAgICAgICBxdWVyeSA9ICIiIgogICAgICAgIFVQREFURSBSU19hZHJfZG9jc190YWJsZQogICAgICAgIFNFVCBxdHR5PT8KICAgICAgICBXaGVyZSBpZD0/ICIiIgogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChzZWxmLnF0dHksIHNlbGYuaWRfc3RyKSkKICAgICAgICByZXR1cm4gcmVzCgoKICAgIGRlZiBjbGVhcl9iYXJjb2RlX2RhdGEoc2VsZik6CiAgICAgICAgcXVlcnlfdGV4dCA9ICgnVXBkYXRlIFJTX2Fkcl9kb2NzX3RhYmxlIFNldCBxdHR5ID0gMCBXaGVyZSBpZF9kb2M9OmlkX2RvYycsCiAgICAgICAgJ0RlbGV0ZSBGcm9tIFJTX2Fkcl9kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz06aWRfZG9jIGFuZCBpc19wbGFuID0gIkZhbHNlIicpCiAgICAgICAgZm9yIGVsIGluIHF1ZXJ5X3RleHQ6CiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6c2VsZi5pZF9kb2N9KSkKCgogICAgZGVmIGRlbGV0ZV9kb2Moc2VsZik6CiAgICAgICAgcXVlcnlfZG9jX3RhYmxlID0gJ0RFTEVURSBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkX2RvYyA9ID8nCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2NfdGFibGUsIChzZWxmLmlkX2RvYywpKQogICAgICAgICMgcXVlcnlfZG9jX3RhYmxlID0gJ0RFTEVURSBGUk9NIFJTX2RvY3NfYmFyY29kZXMgV0hFUkUgaWRfZG9jID0gPycKICAgICAgICAjIGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jX3RhYmxlLCAoc2VsZi5pZF9kb2MsKSkKICAgICAgICBxdWVyeV9kb2MgPSAnREVMRVRFIEZST00gUlNfYWRyX2RvY3MgV0hFUkUgaWRfZG9jID0gPycKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2RvYywgKHNlbGYuaWRfZG9jLCkpCgogICAgICAgIHJldHVybiByZXMKICAgICMgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmKToKICAgICMgICAgIHF1ZXJ5X3RleHQgPSAoJ1VwZGF0ZSBSU19kb2NzX2JhcmNvZGVzIFNldCBhcHByb3ZlZCA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgIyAgICAgJ0RlbGV0ZSBGcm9tIFJTX2RvY3NfYmFyY29kZXMgV2hlcmUgIGlkX2RvYz06aWRfZG9jIEFuZCBpc19wbGFuID0gMCcsCiAgICAjICAgICAnVXBkYXRlIFJTX2RvY3NfdGFibGUgU2V0IHF0dHkgPSAwIFdoZXJlIGlkX2RvYz06aWRfZG9jJywKICAgICMgICAgICdEZWxldGUgRnJvbSBSU19kb2NzX3RhYmxlIFdoZXJlIGlkX2RvYz06aWRfZG9jIGFuZCBpc19wbGFuID0gIkZhbHNlIicpCiAgICAjICAgICBmb3IgZWwgaW4gcXVlcnlfdGV4dDoKICAgICMgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KGVsLCAoeydpZF9kb2MnOnNlbGYuaWRfZG9jfSkpCgogICAgZGVmIG1hcmtfZm9yX3VwbG9hZChzZWxmKToKICAgICAgICBxdWVyeSA9ICIiIgogICAgICAgIFVQREFURSBSU19hZHJfZG9jc190YWJsZQogICAgICAgIFNFVCBzZW50PTEKICAgICAgICBXaGVyZSBpZD0/ICIiIgogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChzZWxmLmlkX2RvYykpCgogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgbWFya192ZXJpZmllZChzZWxmLCBrZXkpOgogICAgICAgIHF1ZXJ5ID0gIiIiCiAgICAgICAgICAgICAgICBVUERBVEUgUlNfYWRyX2RvY3MKICAgICAgICAgICAgICAgIFNFVCB2ZXJpZmllZD0/CiAgICAgICAgICAgICAgICBXaGVyZSBpZF9kb2M9PyAiIiIKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoaW50KGtleSksIHNlbGYuaWRfZG9jKSkKCiAgICBkZWYgZmluZF9iYXJjb2RlX2luX3RhYmxlKHNlbGYsIHNlYXJjaF92YWx1ZTogc3RyLCBmdW5jX2NvbXBhcmVkPSc9PycpIC0+IG9iamVjdDoKCiAgICAgICAgcXVlcnkgPSAnJycKICAgICAgICAgICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF9nb29kLAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3Byb3BlcnR5LAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3NlcmllcywKICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF91bml0LAogICAgICAgICAgICAgICAgIFJTX2RvY3NfYWRyX3RhYmxlLmlkLAogICAgICAgICAgICAgICAgIFJTX2RvY3NfYWRyX3RhYmxlLnF0dHkgICAgICAgIAogICAgICAgICAgICAgICAgIEZST00gUlNfYmFyY29kZXMKICAgICAgICAgICAgICAgICBMZWZ0IGpvaW4gUlNfZG9jc19hZHJfdGFibGUgT04KICAgICAgICAgICAgICAgICBSU19kb2NzX2Fkcl90YWJsZS5pZF9nb29kPSBSU19iYXJjb2Rlcy5pZF9nb29kIGFuZAogICAgICAgICAgICAgICAgIFJTX2RvY3NfYWRyX3RhYmxlLmlkX3Byb3BlcnRpZXM9IFJTX2JhcmNvZGVzLmlkX3Byb3BlcnR5IGFuZAogICAgICAgICAgICAgICAgIFJTX2RvY3NfYWRyX3RhYmxlLmlkX3VuaXQ9IFJTX2JhcmNvZGVzLmlkX3VuaXQgQW5kCiAgICAgICAgICAgICAgICAgUlNfZG9jc19hZHJfdGFibGUuaWRfZG9jPT8KICAgICAgICAgICAgICAgICB3aGVyZSBiYXJjb2RlICcnJyArIGZ1bmNfY29tcGFyZWQKICAgICAgICAjIHF1ZXJ5ID0gcXVlcnkgKyBmdW5jX2NvbXBhcmVkCgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoc2VsZi5pZF9kb2MsIHNlYXJjaF92YWx1ZSksIFRydWUpCgogICAgIyBkZWYgZmluZF9iYXJjb2RlX2luX21hcmtfdGFibGUoc2VsZiwgc2VhcmNoX3ZhbHVlOiBzdHIsIGZ1bmNfY29tcGFyZWQ9Jz0/JykgLT4gb2JqZWN0OgogICAgIyAgICAgcXVlcnkgPSAnJycKICAgICMgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19tYXJraW5nX2NvZGVzLmlkX2dvb2QsCiAgICAjICAgICAgICAgICAgICAgICAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSwKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3NlcmllcywKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3VuaXQsCiAgICAjICAgICAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZCwKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLnF0dHkKICAgICMgICAgICAgICAgICAgICAgICAgICBGUk9NIFJTX21hcmtpbmdfY29kZXMKICAgICMgICAgICAgICAgICAgICAgICAgICBMZWZ0IGpvaW4gUlNfZG9jc190YWJsZSBPTgogICAgIyAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZ29vZD0gUlNfbWFya2luZ19jb2Rlcy5pZF9nb29kIGFuZAogICAgIyAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcz0gUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSBhbmQKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX3VuaXQ9IFJTX21hcmtpbmdfY29kZXMuaWRfdW5pdCBBbmQKICAgICMgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX2RvYz0/CiAgICAjICAgICAgICAgICAgICAgICAgICAgd2hlcmUgbWFya19jb2RlICAnJycgKyBmdW5jX2NvbXBhcmVkCiAgICAgICAgIyBxdWVyeSA9IHF1ZXJ5ICsgZnVuY19jb21wYXJlZAoKICAgICAgICByZXR1cm4gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYuaWRfZG9jLCBzZWFyY2hfdmFsdWUpLCBUcnVlKQoKICAgIGRlZiB1cGRhdGVfZG9jX3RhYmxlX2RhdGEoc2VsZiwgZWxlbV9mb3JfYWRkOiBkaWN0LCBxdHR5PTEsIGNlbGxfaWQgPSBOb25lLCB0YWJsZV90eXBlID0gJ291dCcsIHVzZXJfdG16PTApOgogICAgICAgICPQmNGJ0LXQvCDRj9GH0LXQudC60YMg0L/QviDQuNC80LXQvdC4LCDQvdCw0Lwg0L3Rg9C20LXQvSBJRAogICAgICAgICMgcmVzICA9IGdldF9xdWVyeV9yZXN1bHQoJ1NlbGVjdCBpZCBGcm9tIFJTX2NlbGxzIFdoZXJlIG5hbWUgPSA/JywoY2VsbF9uYW1lLCkpCiAgICAgICAgIwogICAgICAgICMgY2VsbF9pZCA9IHJlc1swXVswXSBpZiByZXMgZWxzZSBOb25lCgogICAgICAgICMg0KHQvdCw0YfQsNC70LAg0L7Qv9GA0LXQtNC10LvQuNC8LCDQtdGB0YLRjCDQu9C4INCyINGB0L/QuNGB0LrQtSDRgtC+0LLQsNGA0L7QsiDQtNC+0LrRg9C80LXQvdGC0LAg0L3QsNGIINGC0L7QstCw0YA6CiAgICAgICAgcXRleHQgPSAnU2VsZWN0ICogZnJvbSBSU19hZHJfZG9jc190YWJsZSBXaGVyZSBpZF9kb2M9PyBhbmQgaWRfZ29vZCA9ID8gYW5kIGlkX3Byb3BlcnRpZXMgPSA/IGFuZCBpZF9zZXJpZXMgPSA/ICBhbmQgKGlkX2NlbGw9PyAgT1IgaWRfY2VsbD0gIiIgT1IgaWRfY2VsbCBpcyBOdWxsKSBhbmQgdGFibGVfdHlwZSA9ID8nICAjYW5kIGlkX3VuaXQgPSA/CiAgICAgICAgYXJncyA9IChzZWxmLmlkX2RvYywgZWxlbV9mb3JfYWRkWydpZF9nb29kJ10sIGVsZW1fZm9yX2FkZFsnaWRfcHJvcGVydHknXSwgZWxlbV9mb3JfYWRkWydpZF9zZXJpZXMnXSwgY2VsbF9pZCwgdGFibGVfdHlwZSkgIyxlbGVtX2Zvcl9hZGRbJ2lkX3VuaXQnXQogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXRleHQsIGFyZ3MsIFRydWUpCiAgICAgICAgaWYgcmVzOiAgIyDQndCw0YjQu9C4INGB0YLRgNC+0LrQuCDQtNC+0LrRg9C80LXQvdGC0LAsINC00L7QsdCw0LLQu9GP0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQvgoKICAgICAgICAgICAgZWwgPSByZXNbMF0KICAgICAgICAgICAgIyBpZiBlbFsncXR0eSddK3F0dHkgPT0gMDoKICAgICAgICAgICAgIyAgICAgcXRleHQgPSAnREVMRVRFIEZST00gUlNfZG9jc190YWJsZSAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICAjICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoZWxbJ2lkJ10sKSkKICAgICAgICAgICAgIyBlbHNlOgogICAgICAgICAgICBxdGV4dCA9ICdVUERBVEUgUlNfYWRyX2RvY3NfdGFibGUgU0VUIHF0dHk9cXR0eSs/LCBsYXN0X3VwZGF0ZWQgPSA/LCBpZF9jZWxsID0gPyAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICBjdXJyZW50X3RpbWVfdXRjXzAgPSAoZGF0ZXRpbWUubm93KCkgLSB0aW1lZGVsdGEoaG91cnM9aW50KHVzZXJfdG16KSkpLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChxdHR5LCAgY3VycmVudF90aW1lX3V0Y18wLCBjZWxsX2lkLCBlbFsnaWQnXSkpCiAgICAgICAgZWxzZTogICMg0KLQsNC60L7QuSDRgdGC0YDQvtC60Lgg0L3QtdGCLCDQvdCw0LTQviDQtNC+0LHQsNCy0LjRgtGMCiAgICAgICAgICAgIHF0ZXh0ID0gJ1JFUExBQ0UgSU5UTyBSU19hZHJfZG9jc190YWJsZShpZF9kb2MsIGlkX2dvb2QsIGlkX3Byb3BlcnRpZXMsaWRfc2VyaWVzLCBpZF91bml0LCBxdHR5LCBpc19wbGFuLCBpZF9jZWxsLCB0YWJsZV90eXBlKSBWQUxVRVMgKD8sPyw/LD8sPyw/LD8sPyw/KScKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKAogICAgICAgICAgICAgICAgc2VsZi5pZF9kb2MsIGVsZW1fZm9yX2FkZFsnaWRfZ29vZCddLCBlbGVtX2Zvcl9hZGRbJ2lkX3Byb3BlcnR5J10sIGVsZW1fZm9yX2FkZFsnaWRfc2VyaWVzJ10sCiAgICAgICAgICAgICAgICBlbGVtX2Zvcl9hZGRbJ2lkX3VuaXQnXSwgcXR0eSwgJ0ZhbHNlJyxjZWxsX2lkLCB0YWJsZV90eXBlKSkKCiAgICAgICAgcmV0dXJuIHJlcwoKCiAgICAjINCV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMgIC0gaGF2ZV9xdHR5X3BsYW4KICAgICMg0JXRgdGC0Ywg0L/Qu9Cw0L0g0L/QviDRgdC/0LjRgdC60YMg0YLQvtCy0LDRgNC+0LIgaGF2ZV96ZXJvX3BsYW4KICAgICMg0JrQntC90YLRgNC+0LvRjCDQv9C70LDQvdC+0LIg0LIg0LTQvtC60YPQvNC10L3RgtC1IC0gY29udHJvbAogICAgIyDQldGB0YLRjCDQv9C70LDQvSDQv9C+INC80LDRgNC60LjRgNGD0LXQvNC+0Lkg0L/RgNC+0LTRg9C60YbQuNC4IGhhdmVfbWFya19wbGFuCiAgICBkZWYgcHJvY2Vzc190aGVfYmFyY29kZShzZWxmLCBiYXJjb2RlLCBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlLCBoYXZlX3plcm9fcGxhbiA9IEZhbHNlLCBjb250cm9sID0gRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsX2lkID0gTm9uZSwgdGFibGVfdHlwZSA9ICdvdXQnLCB1c2VyX3Rtej0wKTogIyBhZGRfaWZfbm90X2ZvdW5kPUZhbHNlLCBhZGRfaWZfbm90X2luX3BsYW49RmFsc2UpOgoKICAgICAgICAjINCf0L7Qu9GD0YfQuNC8INGB0YLRgNGD0LrRgtGD0YDRgyDQsdCw0YDQutC+0LTQsAogICAgICAgIGlmIGJhcmNvZGVbMF0gPT0gY2hyKDI5KSBhbmQgbGVuKGJhcmNvZGUpID4gMzE6ICAjIFJlbW92ZSBmaXJzdCBHUzEgY2hhciBmcm9tIGJhcmNvZGUKICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTpdCiAgICAgICAgYmFyY29kZV9pbmZvID0gdWlfYmFyY29kZXMucGFyc2VfYmFyY29kZShiYXJjb2RlKQogICAgICAgIGlmIGJhcmNvZGVfaW5mby5fX2NvbnRhaW5zX18oJ0VSUk9SJyk6CiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ0ludmFsaWQgQmFyY29kZScsICdEZXNjcic6ICfQndC10LLQtdGA0L3Ri9C5INGI0YLRgNC40YXQutC+0LQnLAogICAgICAgICAgICAgICAgICAgICdCYXJjb2RlJzogYmFyY29kZV9pbmZvLCAnZG9jX2luZm8nOiBzZWxmLmlkX2RvY30KICAgICAgICAjIC4uLiDQuCDQvdCw0LnQtNC10Lwg0L/QviDQvdC10LzRgyDQstGB0LUg0YfRgtC+INC10YHRgtGMINCyINCx0LDQt9C1CiAgICAgICAgc2hlbWEgPSBiYXJjb2RlX2luZm9bJ1NDSEVNRSddCiAgICAgICAgaWYgc2hlbWEgaW4gWydFQU4xMycsICdVTktOT1dOJ106CiAgICAgICAgICAgIHNlYXJjaF92YWx1ZSA9IGJhcmNvZGVfaW5mb1snQkFSQ09ERSddCiAgICAgICAgZWxpZiBzaGVtYSA9PSAnR1MxJzoKICAgICAgICAgICAgc2VhcmNoX3ZhbHVlID0gYmFyY29kZV9pbmZvWydHVElOJ10KICAgICAgICBlbHNlOiAgIyAqKioqKioqKioqKioqKioqKirQodGO0LTQsCDQvNC+0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQtSDQstC40LTRiyDRiNGC0YDQuNGF0LrQvtC00L7QsiAqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICBzZWFyY2hfdmFsdWUgPSBiYXJjb2RlX2luZm9bJ0JBUkNPREUnXQoKICAgICAgICByZXMgPSBmaW5kX2JhcmNvZGVfaW5fYmFyY29kZV90YWJsZShzZWFyY2hfdmFsdWUpICAjINCY0YnQtdGCINCx0LDRgNC60L7QtCDQuNC70Lgg0JPQotCY0JjQnSDQv9C+INC+0LHRidC10Lkg0YLQsNCx0LvQuNGG0LUg0YjRgtGA0LjRhdC60L7QtNC+0LIuINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGC0L7QstCw0YAsINC10LPQviDQstC40LQsINGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60YMg0YHQtdGA0LjRjiDQuNGC0L8uCiAgICAgICAgaWYgbm90IGxlbihyZXMpID09IDA6CiAgICAgICAgICAgIGVsZW0gPSByZXNbMF0gI9CR0LXRgNC10Lwg0L/QtdGA0LLRi9C5INGA0LXQt9GD0LvRjNGC0LDRgi4g0JIg0L/RgNCw0LLQuNC70YzQvdC+0Lwg0YHQv9C40YHQutC1INGI0YLRgNC40YXQutC+0LTQvtCyINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9C+0LLRgtC+0YDQtdC90LjQuQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ05vdEZvdW5kJywgJ0Rlc2NyJzogJ9Co0YLRgNC40YXQutC+0LQg0L3QtSDQvdCw0LnQtNC10L0g0LIg0LHQsNC30LUnLCAnQmFyY29kZSc6IGJhcmNvZGV9CgogICAgICAgIGVsZW1bJ2lkX2NlbGwnXSA9IGNlbGxfaWQKCiAgICAgICAgI9Ci0L7QstCw0YAg0LIg0YLQsNCx0LvQuNGG0LUg0LTQvtC60YPQvNC10L3RgtCwICjQotC+0LLQsNGAINC90LDQudC00LXQvSDQsiDQtNC+0LrRg9C80LXQvdGC0LUpCiAgICAgICAgcmVzID0gY2hlY2tfYWRyX2JhcmNvZGVfY29tcGxpYW5jZShlbGVtLCBzZWxmLmlkX2RvYykgICPQn9C+0LvRg9GH0LDQtdC8INGB0YLRgNC+0LrRgyDRgtCw0LHQu9C40YbRiyDRgtC+0LLQsNGA0Ysg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgaWYgcmVzOiAj0KLQvtCy0LDRgCDQvdCw0LnQtNC10L0g0LIg0LTQvtC60YPQvNC10L3RgtC1CiAgICAgICAgICAgIGlmIGhhdmVfcXR0eV9wbGFuOiAj0JXRgdGC0Ywg0L/Qu9Cw0L0g0L/QviDQutC+0LvQuNGH0LXRgdGC0LLRgwogICAgICAgICAgICAgICAgaWYgcmVzWzBdWydxdHR5X3BsYW4nXSA8PSByZXNbMF1bJ3F0dHknXTogI9Ca0L7Qu9C40YfQtdGB0YLQstC+INGC0L7QstCw0YDQsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUg0YPQttC1INC90LDQsdGA0LDQvdC+LCDQuCDQvNGLINC/0YDQtdCy0YvRiNCw0LXQvCDQv9C70LDQvQogICAgICAgICAgICAgICAgICAgIGlmIGNvbnRyb2w6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J1Jlc3VsdCc6ICfQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C70LDQvSDQv9GA0LXQstGL0YjQtdC90L4sINCx0L7Qu9GM0YjQtSDRgtC+0LLQsNGAINCyINC00LDQvdC90YvQuSDQtNC+0LrRg9C80LXQvdGCINC00L7QsdCw0LLQuNGC0Ywg0L3QtdC70YzQt9GPJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRXJyb3InOiAnUXVhbnRpdHlQbGFuUmVhY2hlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBiYXJjb2RlLCAnRGVzY3InOiAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0L/RgNC10LLRi9GI0LXQvdC+LCDQsdC+0LvRjNGI0LUg0YLQvtCy0LDRgCDQsiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQtNC+0LHQsNCy0LjRgtGMINC90LXQu9GM0LfRjyd9CgogICAgICAgIGVsc2U6ICPQotC+0LLQsNGAINC90LUg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtQogICAgICAgICAgICBpZiBoYXZlX3plcm9fcGxhbiBhbmQgY29udHJvbDoKICAgICAgICAgICAgICAgIHJldHVybiB7J1Jlc3VsdCc6ICfQkiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQvdC10LvRjNC30Y8g0LTQvtCx0LDQstC40YLRjCDRgtC+0LLQsNGAINC90LUg0LjQtyDRgdC/0LjRgdC60LAnLAogICAgICAgICAgICAgICAgICAgICAgICAnRXJyb3InOiAnWmVyb19wbGFuX2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBiYXJjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAnRGVzY3InOiAn0JIg0LTQsNC90L3Ri9C5INC00L7QutGD0LzQtdC90YIg0L3QtdC70YzQt9GPINC00L7QsdCw0LLQuNGC0Ywg0YLQvtCy0LDRgCDQvdC1INC40Lcg0YHQv9C40YHQutCwJ30KCgogICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8INGC0LDQsdC70LjRhtGDINGC0L7QstCw0YDRiwogICAgICAgIHNlbGYudXBkYXRlX2RvY190YWJsZV9kYXRhKHNlbGYsIGVsZW0sIDEsIGNlbGxfaWQsIHRhYmxlX3R5cGUsIHVzZXJfdG16KQoKICAgICAgICByZXR1cm4geydSZXN1bHQnOiAn0JzQsNGA0LrQsCDQtNC+0LHQsNCy0LvQtdC90LAg0LIg0LTQvtC60YPQvNC10L3RgicsICdFcnJvcic6IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogYmFyY29kZV9pbmZvWydHVElOJ10gKyBiYXJjb2RlX2luZm9bJ1NFUklBTCddfQoKCiAgICBkZWYgYWRkKHNlbGYsIGFyZ3MpOgogICAgICAgIHF1ZXJ5ID0gJ0lOU0VSVCBJTlRPIFJTX2Fkcl9kb2NzKGlkX2RvYywgZG9jX3R5cGUsIGRvY19uLCBkb2NfZGF0ZSwgaWRfd2FyZWhvdXNlLCB2ZXJpZmllZCwgc2VudCkgVkFMVUVTICg/LD8sPyw/LD8sMCwwKScKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCBhcmdzKQoKICAgIGRlZiBnZXRfbmV3X2lkKHNlbGYpOgogICAgICAgIHF1ZXJ5ID0gJ3NlbGVjdCBtYXhfaWRfZG9jIGZyb20gUlNfY29uc3RhbnRzJwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnkpCiAgICAgICAgaWYgbGVuKHJlcykgPT0gMDoKICAgICAgICAgICAgcmV0dXJuICcxJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbCA9IHJlc1swXVswXQogICAgICAgICAgICBpZiB2YWwgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiAnMScKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gJ1VQREFURSBSU19jb25zdGFudHMgU0VUIG1heF9pZF9kb2MgPSA/JwogICAgICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGludCh2YWwpICsgMSwpKQogICAgICAgICAgICAgICAgcmV0dXJuIHN0cihpbnQodmFsKSArIDEpCgoKICAgIGRlZiBmaW5kX2NlbGwoc2VsZiwgYmFyY29kZSk6CiAgICAgICAgcXRleHQgPSAnJydTZWxlY3QgKiBmcm9tIFJTX2NlbGxzIFdIZXJlIFJTX2NlbGxzLmJhcmNvZGUgPSA/JycnCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKGJhcmNvZGUsICksIFRydWUpCiAgICAgICAgcmVzdWx0ID0gTm9uZQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmVzdWx0ID0gcmVzWzBdCgogICAgICAgIHJldHVybiByZXN1bHQKCgpkZWYgZXhlY3V0ZV9xdWVyeShxX2luZGV4LCBxX3RleHQsIGFyZ3MsIGluX2RpY3QpOgogICAgaWYgcXVlcnlfbGlzdC5lbXB0eSgpOgogICAgICAgIHN0YXJ0X3F1ZXVlID1UcnVlCiAgICBxdWVyeV9saXN0LnB1dCh7J3FfaW5kZXgnOnFfaW5kZXgsICdxX3RleHQnOnFfdGV4dCwgJ2FyZ3MnOmFyZ3MsICdpbl9kaWN0Jzppbl9kaWN0fSkKICAgIHdoaWxlIFRydWU6CiAgICAgICAgaWYgc3RhcnRfcXVldWU6CiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoKQoKCmRlZiB3cml0ZV9lcnJvcl9vbl9sb2coRXJyX3ZhbHVlKToKICAgIGlmIEVycl92YWx1ZToKICAgICAgICBxdGV4dCA9ICdJbnNlcnQgaW50byBFcnJvcl9sb2cobG9nKSBWYWx1ZXMoPyknCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKEVycl92YWx1ZSwpKQoKCgoKCg=="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_models.py",
                "PyFileKey": "ui_models",
                "PyFileData": "ZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QKaW1wb3J0IGpzb24KZnJvbSBqc29uLmRlY29kZXIgaW1wb3J0IEpTT05EZWNvZGVFcnJvcgppbXBvcnQgb3MKCmltcG9ydCBkYl9zZXJ2aWNlcwppbXBvcnQgaHNfc2VydmljZXMKZnJvbSB1aV91dGlscyBpbXBvcnQgSGFzaE1hcCwgUnNEb2MsIEJhcmNvZGVQYXJzZXIsIGdldF9pcF9hZGRyZXNzCmZyb20gZGJfc2VydmljZXMgaW1wb3J0IERvY1NlcnZpY2UsIEVycm9yU2VydmljZSwgR29vZHNTZXJ2aWNlLCBBZHJEb2NTZXJ2aWNlCmZyb20gaHNfc2VydmljZXMgaW1wb3J0IEhzU2VydmljZQojaW1wb3J0IGh0dHBfZXhjaGFuZ2UKZnJvbSBodHRwX2V4Y2hhbmdlIGltcG9ydCBwb3N0X2NoYW5nZXNfdG9fc2VydmVyCiNmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKaW1wb3J0IHdpZGdldHMKaW1wb3J0IHVpX2dsb2JhbAoKCmNsYXNzIFNjcmVlbihBQkMpOgogICAgc2NyZWVuX25hbWU6IHN0cgogICAgcHJvY2Vzc19uYW1lOiBzdHIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzZWxmLmhhc2hfbWFwOiBIYXNoTWFwID0gaGFzaF9tYXAKICAgICAgICBzZWxmLnNjcmVlbl92YWx1ZXMgPSB7fQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MgPSByc19zZXR0aW5ncwogICAgICAgIHNlbGYubGlzdGVuZXIgPSBzZWxmLmhhc2hfbWFwWydsaXN0ZW5lciddCiAgICAgICAgc2VsZi5ldmVudDogc3RyID0gc2VsZi5oYXNoX21hcFsnZXZlbnQnXQoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBwYXNzCgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdG9hc3Qoc2VsZiwgdGV4dCk6CiAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCh0ZXh0KQoKICAgIGRlZiBfaXNfcmVzdWx0X3Bvc2l0aXZlKHNlbGYsIGxpc3RlbmVyKSAtPiBib29sOgogICAgICAgIHJldHVybiBzZWxmLmxpc3RlbmVyID09IGxpc3RlbmVyIGFuZCBzZWxmLmV2ZW50ID09ICdvblJlc3VsdFBvc2l0aXZlJwoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmJ3tzZWxmLnByb2Nlc3NfbmFtZX0gLyB7c2VsZi5zY3JlZW5fbmFtZX0nCgogICAgZGVmIF92YWxpZGF0ZV9zY3JlZW5fdmFsdWVzKHNlbGYpOgogICAgICAgIGZvciBrZXksIHZhbHVlIGluIHNlbGYuc2NyZWVuX3ZhbHVlcy5pdGVtcygpOgogICAgICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmJ1Byb2Nlc3M6IHtzZWxmLnByb2Nlc3NfbmFtZX0sIHNjcmVlbjoge3NlbGYuc2NyZWVuX25hbWV9LicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZidGb3Iga2V5IHtrZXl9IG11c3QgYmUgc2V0IHZhbHVlIG5vdCBOb25lJykKCiAgICBkZWYgZ2V0X2h0dHBfc2V0dGluZ3Moc2VsZik6CiAgICAgICAgaHR0cF9zZXR0aW5ncyA9IHsKICAgICAgICAgICAgJ3VybCc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJVUkwiKSwKICAgICAgICAgICAgJ3VzZXInOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnVVNFUicpLAogICAgICAgICAgICAncGFzcyc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdQQVNTJyksCiAgICAgICAgICAgICdkZXZpY2VfbW9kZWwnOiBzZWxmLmhhc2hfbWFwWydERVZJQ0VfTU9ERUwnXSwKICAgICAgICAgICAgJ2FuZHJvaWRfaWQnOiBzZWxmLmhhc2hfbWFwWydBTkRST0lEX0lEJ10sCiAgICAgICAgICAgICd1c2VyX25hbWUnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgndXNlcl9uYW1lJyl9CiAgICAgICAgcmV0dXJuIGh0dHBfc2V0dGluZ3MKCiAgICBkZWYgcHV0X25vdGlmaWNhdGlvbihzZWxmLCB0ZXh0LCB0aXRsZT1Ob25lKToKICAgICAgICBzZWxmLmhhc2hfbWFwLm5vdGlmaWNhdGlvbih0ZXh0LCB0aXRsZSkKCgojID09PT09PT09PT09PT09PT09PT09IFRpbGVzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpjbGFzcyBUaWxlcyhTY3JlZW4pOgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBkZWYgX2dldF90aWxlX3JvdyhzZWxmLCBsYXlvdXQsIHRpbGVfZWxlbWVudCwgc3RhcnRfc2NyZWVuPSfQlNC+0LrRg9C80LXQvdGC0YsnKToKICAgICAgICB0aWxlID0gewogICAgICAgICAgICAibGF5b3V0IjogbGF5b3V0LAogICAgICAgICAgICAiZGF0YSI6IHNlbGYuX2dldF90aWxlX2RhdGEodGlsZV9lbGVtZW50KSwKICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAiY29sb3IiOiAnI0ZGRkZGRicsCiAgICAgICAgICAgICJzdGFydF9zY3JlZW4iOiBmIntzdGFydF9zY3JlZW59IiwKICAgICAgICAgICAgInN0YXJ0X3Byb2Nlc3MiOiAiIiwKICAgICAgICAgICAgJ2tleSc6IHRpbGVfZWxlbWVudFsnZG9jVHlwZSddCiAgICAgICAgfQogICAgICAgIHJldHVybiB0aWxlCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfdGlsZV9kYXRhKHRpbGVfZWxlbWVudCk6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImRvY05hbWUiOiB0aWxlX2VsZW1lbnRbJ2RvY1R5cGUnXSwKICAgICAgICAgICAgJ1F0dHlPZkRvY3MnOiAne30ve30nLmZvcm1hdCh0aWxlX2VsZW1lbnRbJ2NvdW50J10sIHRpbGVfZWxlbWVudFsndmVyaWZpZWQnXSksCiAgICAgICAgICAgICdjb3VudF92ZXJpZmllZCc6ICd7fS97fScuZm9ybWF0KAogICAgICAgICAgICAgICAgdGlsZV9lbGVtZW50Wydjb3VudF92ZXJpZmllZCddICsgdGlsZV9lbGVtZW50Wydjb3VudF91bnZlcmlmaWVkJ10sCiAgICAgICAgICAgICAgICB0aWxlX2VsZW1lbnRbJ2NvdW50X3VudmVyaWZpZWQnXSksCiAgICAgICAgICAgICdxdHR5X3BsYW5fdmVyaWZpZWQnOiAne30ve30nLmZvcm1hdCgKICAgICAgICAgICAgICAgIHRpbGVfZWxlbWVudFsncXR0eV9wbGFuX3ZlcmlmaWVkJ10gKyB0aWxlX2VsZW1lbnRbJ3F0dHlfcGxhbl91bnZlcmlmaWVkJ10sCiAgICAgICAgICAgICAgICB0aWxlX2VsZW1lbnRbJ3F0dHlfcGxhbl91bnZlcmlmaWVkJ10pCiAgICAgICAgfQoKICAgIGRlZiBfZ2V0X3RpbGVfdmlldyhzZWxmKSAtPiB3aWRnZXRzLkxpbmVhckxheW91dDoKICAgICAgICB0aWxlc192aWV3ID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICBWYWx1ZT0nQGRvY05hbWUnLAogICAgICAgICAgICAgICAgVGV4dFNpemU9c2VsZi5yc19zZXR0aW5ncy5nZXQoJ3RpdGxlRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgVGV4dENvbG9yPScjMDAwMDAwJywKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTAKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCdAUXR0eU9mRG9jcycsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ch0YLRgNC+0Lo6ICcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQGNvdW50X3ZlcmlmaWVkJywgc2VsZi5yc19zZXR0aW5ncyksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0KLQvtCy0LDRgNC+0LI6ICcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQHF0dHlfcGxhbl92ZXJpZmllZCcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgYXV0b1NpemVUZXh0VHlwZT0ndW5pZm9ybScsCiAgICAgICAgICAgIHdlaWdodD0wCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGlsZXNfdmlldwoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSwgcnNfc2V0dGluZ3MpOgoKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCiAgICAgICAgICAgIHNlbGYuVGV4dFNpemUgPSByc19zZXR0aW5ncy5nZXQoJ0RvY1R5cGVDYXJkVGV4dFNpemUnKQogICAgICAgICAgICBzZWxmLlRleHRDb2xvciA9ICcjMzMzMzMzJwogICAgICAgICAgICBzZWxmLkJhY2tncm91bmRDb2xvciA9ICdGRkNDOTknCiAgICAgICAgICAgIHNlbGYud2VpZ2h0ID0gMAogICAgICAgICAgICBzZWxmLlZhbHVlID0gdmFsdWUKCgpjbGFzcyBHcm91cFNjYW5UaWxlcyhUaWxlcyk6CiAgICBzY3JlZW5fbmFtZSA9ICfQn9C70LjRgtC60LgnCiAgICBwcm9jZXNzX25hbWUgPSAn0JPRgNGD0L/Qv9C+0LLQsNGPINC+0LHRgNCw0LHQvtGC0LrQsCcKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLmRiX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKCkKICAgICAgICBzZWxmLnNjcmVlbl9uYW1lID0gc2VsZi5oYXNoX21hcC5nZXRfY3VycmVudF9zY3JlZW4oKQogICAgICAgIHNlbGYucHJvY2Vzc19uYW1lID0gc2VsZi5oYXNoX21hcC5nZXRfY3VycmVudF9wcm9jZXNzKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5jb250YWluc0tleSgnY2hlY2tfY29ubmVjdGlvbicpIGFuZCBub3Qgc2VsZi5fY2hlY2tfY29ubmVjdGlvbigpOgogICAgICAgICAgICB0aWxlcyA9IHNlbGYuX2dldF9tZXNzYWdlX3RpbGUoItCe0YLRgdGD0YLRgdGC0LLRg9C10YIg0YHQvtC10LTQuNC90LXQvdC40LUg0YEg0YHQtdGA0LLQtdGA0L7QvCIsIHRleHRfY29sb3I9IiNmZjAwMDAiKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndGlsZXMnLCB0aWxlcywgdG9fanNvbj1UcnVlKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnY2hlY2tfY29ubmVjdGlvbiddID0gRmFsc2UKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2NoZWNrX2Nvbm5lY3Rpb24nXSA9IFRydWUKCiAgICAgICAgZGF0YSA9IHNlbGYuZGJfc2VydmljZS5nZXRfZG9jc19zdGF0KCkKICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICBsYXlvdXQgPSBqc29uLmxvYWRzKHNlbGYuX2dldF90aWxlX3ZpZXcoKS50b19qc29uKCkpCgogICAgICAgICAgICB0aWxlc19saXN0ID0gW3NlbGYuX2dldF90aWxlX3JvdyhsYXlvdXQsIGl0ZW0pIGZvciBpdGVtIGluIGRhdGFdCgogICAgICAgICAgICAjIHNwbGl0IGxpc3QgYnkgdHdvIGVsZW1lbnQgaW4gcm93CiAgICAgICAgICAgIGNvdW50X3Jvd19lbGVtZW50cyA9IDIKICAgICAgICAgICAgdGlsZXMgPSB7CiAgICAgICAgICAgICAgICAndGlsZXMnOiBbCiAgICAgICAgICAgICAgICAgICAgdGlsZXNfbGlzdFtpOmkgKyBjb3VudF9yb3dfZWxlbWVudHNdCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHRpbGVzX2xpc3QpLCBjb3VudF9yb3dfZWxlbWVudHMpCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgJ2JhY2tncm91bmRfY29sb3InOiAnI2Y1ZjVmNScKCiAgICAgICAgICAgIH0KICAgICAgICBlbHNlOgogICAgICAgICAgICB0aWxlcyA9IHNlbGYuX2dldF9tZXNzYWdlX3RpbGUoItCd0LXRgiDQt9Cw0LPRgNGD0LbQtdC90L3Ri9GFINC00L7QutGD0LzQtdC90YLQvtCyIikKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RpbGVzJywgdGlsZXMsIHRvX2pzb249VHJ1ZSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCiAgICBkZWYgb25faW5wdXQoc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKQoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oc2VsZi5zY3JlZW5fbmFtZSwgYXJncykKCiAgICBkZWYgX2NoZWNrX2Nvbm5lY3Rpb24oc2VsZik6CiAgICAgICAgaHNfc2VydmljZSA9IGhzX3NlcnZpY2VzLkhzU2VydmljZShzZWxmLmdldF9odHRwX3NldHRpbmdzKCkpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBoc19zZXJ2aWNlLmNvbW11bmljYXRpb25fdGVzdCh0aW1lb3V0PTEpCiAgICAgICAgICAgIGFuc3dlciA9IGhzX3NlcnZpY2UuaHR0cF9hbnN3ZXIKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGFuc3dlciA9IGhzX3NlcnZpY2UuSHR0cEFuc3dlcigKICAgICAgICAgICAgICAgIGVycm9yPVRydWUsCiAgICAgICAgICAgICAgICBlcnJvcl90ZXh0PXN0cihlLmFyZ3NbMF0pLAogICAgICAgICAgICAgICAgc3RhdHVzX2NvZGU9NDA0LAogICAgICAgICAgICAgICAgdXJsPWhzX3NlcnZpY2UudXJsKQogICAgICAgIHJldHVybiBub3QgYW5zd2VyLmVycm9yCgogICAgZGVmIF9nZXRfbWVzc2FnZV90aWxlKHNlbGYsIG1lc3NhZ2UsIHRleHRfY29sb3I9JyMwMDAwMDAnKToKICAgICAgICB0aWxlX3ZpZXcgPSB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgIFZhbHVlPSdAbm9fZGF0YScsCiAgICAgICAgICAgICAgICBUZXh0U2l6ZT1zZWxmLnJzX3NldHRpbmdzLmdldCgndGl0bGVEb2NUeXBlQ2FyZFRleHRTaXplJyksCiAgICAgICAgICAgICAgICBUZXh0Q29sb3I9dGV4dF9jb2xvciwKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTAsCiAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9ImNlbnRlciIsCiAgICAgICAgICAgICAgICBncmF2aXR5X3ZlcnRpY2FsPSJjZW50ZXIiLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MCwKICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0iI2ZmZmZmZiIsCiAgICAgICAgICAgICAgICBQYWRkaW5nPTAKCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBhdXRvU2l6ZVRleHRUeXBlPSd1bmlmb3JtJywKICAgICAgICAgICAgd2VpZ2h0PTAsCiAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSJjZW50ZXIiLAogICAgICAgICAgICBncmF2aXR5X3ZlcnRpY2FsPSJjZW50ZXIiLAogICAgICAgICAgICBTdHJva2VXaWR0aD0zLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9IiNmZmZmZmYiLAogICAgICAgICAgICBQYWRkaW5nPTAKICAgICAgICApCgogICAgICAgIGxheW91dCA9IGpzb24ubG9hZHModGlsZV92aWV3LnRvX2pzb24oKSkKCiAgICAgICAgdGlsZXNfbGlzdCA9IFt7CiAgICAgICAgICAgICJsYXlvdXQiOiBsYXlvdXQsCiAgICAgICAgICAgICJkYXRhIjogeyJub19kYXRhIjogbWVzc2FnZX0sCiAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgImNvbG9yIjogJyNmZmZmZmYnLAogICAgICAgICAgICAic3RhcnRfc2NyZWVuIjogIiIsCiAgICAgICAgICAgICJzdGFydF9wcm9jZXNzIjogIiIsCiAgICAgICAgICAgICdTdHJva2VXaWR0aCc6ICcnLAogICAgICAgIH1dCgogICAgICAgIGNvdW50X3Jvd19lbGVtZW50cyA9IDEKICAgICAgICB0aWxlcyA9IHsKICAgICAgICAgICAgJ3RpbGVzJzogW3RpbGVzX2xpc3RdLAogICAgICAgICAgICAnYmFja2dyb3VuZF9jb2xvcic6ICcjZmZmZmZmJywKICAgICAgICAgICAgJ1N0cm9rZVdpZHRoJzogJycsCiAgICAgICAgICAgICdoZWlnaHQnOiAnJwoKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aWxlcwoKCmNsYXNzIERvY3VtZW50c1RpbGVzKEdyb3VwU2NhblRpbGVzKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cf0LvQuNGC0LrQuCcKICAgIHByb2Nlc3NfbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCgogICAgZGVmIF9jaGVja19jb25uZWN0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBUcnVlCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gVGlsZXMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT09PT09PSBEb2NzTGlzdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCmNsYXNzIERvY3NMaXN0U2NyZWVuKFNjcmVlbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBEb2NTZXJ2aWNlKCkKICAgICAgICBzZWxmLnNjcmVlbl92YWx1ZXMgPSB7fQoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIGRvY190eXBlcyA9IHNlbGYuc2VydmljZS5nZXRfZG9jX3R5cGVzKCkKICAgICAgICBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9zZWxlY3QnXSA9ICc7Jy5qb2luKFsn0JLRgdC1J10gKyBkb2NfdHlwZXMpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jX3N0YXR1c19zZWxlY3QnXSA9ICfQktGB0LU70Jog0LLRi9C/0L7Qu9C90LXQvdC40Y470JLRi9Cz0YDRg9C20LXQvTvQmiDQstGL0LPRgNGD0LfQutC1JwoKICAgICAgICBkb2NfdHlwZSA9IHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX3RpbGVfa2V5J10gb3Igc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXQogICAgICAgIGRvY19zdGF0dXMgPSBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9kb2Nfc3RhdHVzJ10KICAgICAgICBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9jbGljayddID0gZG9jX3R5cGUKICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF90aWxlX2tleSddID0gJycKICAgICAgICBsaXN0X2RhdGEgPSBzZWxmLl9nZXRfZG9jX2xpc3RfZGF0YShkb2NfdHlwZSwgZG9jX3N0YXR1cykKICAgICAgICBpZiBzZWxmLnByb2Nlc3NfbmFtZSA9PSAi0JPRgNGD0L/Qv9C+0LLQsNGPINC+0LHRgNCw0LHQvtGC0LrQsCI6CiAgICAgICAgICAgIGRvY19jYXJkcyA9IHNlbGYuX2dldF9kb2NfY2FyZHNfdmlldyhsaXN0X2RhdGEsICfQo9C00LDQu9C40YLRjCcpCiAgICAgICAgIyBlbGlmIHNlbGYucHJvY2Vzc19uYW1lID09ICLQlNC+0LrRg9C80LXQvdGC0YsiOiAgICAgIyoqKioqKiog0J/RgNC4INGC0LDQutC+0Lwg0LLRi9GA0LDQttC10L3QuNC4INGB0YPRidC10YHRgtCy0YPQtdGCINCy0LXRgNC+0Y/RgtC90L7RgdGC0Ywg0YfRgtC+IGRvY19jYXJkcyDQvdC40LrQvtCz0LTQu9CwINC90LUg0LfQsNC/0L7Qu9C90LjRgtGB0Y8KICAgICAgICBlbHNlOgogICAgICAgICAgICBkb2NfY2FyZHMgPSBzZWxmLl9nZXRfZG9jX2NhcmRzX3ZpZXcobGlzdF9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBfbWVudV9kYXRhPSfQo9C00LDQu9C40YLRjDvQntGH0LjRgdGC0LjRgtGMINC00LDQvdC90YvQtSDQv9C10YDQtdGB0YfQtdGC0LA70J7RgtC/0YDQsNCy0LjRgtGMINC/0L7QstGC0L7RgNC90L4nKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY0NhcmRzJ10gPSBkb2NfY2FyZHMudG9fanNvbigpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAiZG9jX3N0YXR1c19jbGljayI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2RvY19zdGF0dXMnXSA9IHNlbGYuaGFzaF9tYXBbImRvY19zdGF0dXNfY2xpY2siXQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgICAgIHNlbGYuX2xheW91dF9hY3Rpb24oKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9kZWxldGUnKToKICAgICAgICAgICAgc2VsZi5jb25maXJtX2RlbGV0ZV9kb2NfbGlzdGVuZXIoKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cf0LvQuNGC0LrQuCcpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQoKICAgIGRlZiBfbGF5b3V0X2FjdGlvbihzZWxmKSAtPiBOb25lOgogICAgICAgIGxheW91dF9saXN0ZW5lciA9IHNlbGYuaGFzaF9tYXBbJ2xheW91dF9saXN0ZW5lciddCgogICAgICAgIGlmIGxheW91dF9saXN0ZW5lciA9PSAn0KPQtNCw0LvQuNGC0YwnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKAogICAgICAgICAgICAgICAgbGlzdGVuZXI9J2NvbmZpcm1fZGVsZXRlJywKICAgICAgICAgICAgICAgIHRpdGxlPSfQo9C00LDQu9C40YLRjCDQtNC+0LrRg9C80LXQvdGCINGBINGD0YHRgtGA0L7QudGB0YLQstCwPycKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgbGF5b3V0X2xpc3RlbmVyID09ICfQntGH0LjRgdGC0LjRgtGMINC00LDQvdC90YvQtSDQv9C10YDQtdGB0YfQtdGC0LAnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKAogICAgICAgICAgICAgICAgbGlzdGVuZXI9J2NvbmZpcm1fY2xlYXJfYmFyY29kZV9kYXRhJywKICAgICAgICAgICAgICAgIHRpdGxlPSfQntGH0LjRgdGC0LjRgtGMINC00LDQvdC90YvQtSDQv9C10YDQtdGB0YfQtdGC0LA/JwogICAgICAgICAgICApCiAgICAgICAgZWxpZiBsYXlvdXRfbGlzdGVuZXIgPT0gJ9Ce0YLQv9GA0LDQstC40YLRjCDQv9C+0LLRgtC+0YDQvdC+JzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X2RpYWxvZygKICAgICAgICAgICAgICAgIGxpc3RlbmVyPSdjb25maXJtX3Jlc2VuZF9kb2MnLAogICAgICAgICAgICAgICAgdGl0bGU9J9Ce0YLQv9GA0LDQstC40YLRjCDQtNC+0LrRg9C80LXQvdGCINC/0L7QstGC0L7RgNC90L4/JwogICAgICAgICAgICApCgogICAgZGVmIF9nZXRfZG9jX2xpc3RfZGF0YShzZWxmLCBkb2NfdHlwZT0nJywgZG9jX3N0YXR1cz0nJykgLT4gbGlzdDoKICAgICAgICByZXN1bHRzID0gc2VsZi5zZXJ2aWNlLmdldF9kb2Nfdmlld19kYXRhKGRvY190eXBlLCBkb2Nfc3RhdHVzKQogICAgICAgIHRhYmxlX2RhdGEgPSBbXQoKICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgIGRvY19zdGF0dXMgPSAnJwoKICAgICAgICAgICAgaWYgcmVjb3JkWyd2ZXJpZmllZCddIGFuZCByZWNvcmRbJ3NlbnQnXToKICAgICAgICAgICAgICAgIGRvY19zdGF0dXMgPSAn0JLRi9Cz0YDRg9C20LXQvScKICAgICAgICAgICAgZWxpZiByZWNvcmRbJ3ZlcmlmaWVkJ106CiAgICAgICAgICAgICAgICBkb2Nfc3RhdHVzID0gJ9CaINCy0YvQs9GA0YPQt9C60LUnCiAgICAgICAgICAgIGVsaWYgbm90IChyZWNvcmRbJ3ZlcmlmaWVkJ10gYW5kIHJlY29yZFsnc2VudCddKToKICAgICAgICAgICAgICAgIGRvY19zdGF0dXMgPSAn0Jog0LLRi9C/0L7Qu9C90LXQvdC40Y4nCgogICAgICAgICAgICB0YWJsZV9kYXRhLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAna2V5JzogcmVjb3JkWydpZF9kb2MnXSwKICAgICAgICAgICAgICAgICd0eXBlJzogcmVjb3JkWydkb2NfdHlwZSddLAogICAgICAgICAgICAgICAgJ251bWJlcic6IHJlY29yZFsnZG9jX24nXSwKICAgICAgICAgICAgICAgICdkYXRhJzogcmVjb3JkWydkb2NfZGF0ZSddLAogICAgICAgICAgICAgICAgJ3dhcmVob3VzZSc6IHJlY29yZFsnUlNfd2FyZWhvdXNlJ10sCiAgICAgICAgICAgICAgICAnY291bnRyYWdlbnQnOiByZWNvcmRbJ1JTX2NvdW50cmFnZW50J10sCiAgICAgICAgICAgICAgICAnYWRkX21hcmtfc2VsZWN0aW9uJzogcmVjb3JkWydhZGRfbWFya19zZWxlY3Rpb24nXSwKICAgICAgICAgICAgICAgICdzdGF0dXMnOiBkb2Nfc3RhdHVzCiAgICAgICAgICAgIH0pCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgogICAgZGVmIF9nZXRfZG9jX2NhcmRzX3ZpZXcoc2VsZiwgdGFibGVfZGF0YSwgcG9wdXBfbWVudV9kYXRhKToKICAgICAgICB0aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgiVGl0bGVUZXh0U2l6ZSIpCiAgICAgICAgY2FyZF90aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgIGNhcmRfZGF0ZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpCgogICAgICAgIGRvY19jYXJkcyA9IHdpZGdldHMuQ3VzdG9tQ2FyZHMoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BzdGF0dXMnLAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdsZWZ0JywKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTIKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAdHlwZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXRpdGxlX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuUG9wdXBNZW51QnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT1wb3B1cF9tZW51X2RhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgIFZhcmlhYmxlPSJtZW51X2RlbGV0ZSIsCiAgICAgICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAoKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQG51bWJlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2xkPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAY291bnRyYWdlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX2RhdGVfdGV4dF9zaXplCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHdhcmVob3VzZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfZGF0ZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICBjYXJkc2RhdGE9dGFibGVfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIGRvY19jYXJkcwoKICAgIGRlZiBfZ2V0X3NlbGVjdGVkX2NhcmQoc2VsZik6CiAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgamxpc3QgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCJkb2NDYXJkcyIpCiAgICAgICAgc2VsZWN0ZWRfY2FyZCA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQoKICAgICAgICByZXR1cm4gc2VsZWN0ZWRfY2FyZAoKICAgIGRlZiBfZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoc2VsZiwgcHV0X2RhdGE9Tm9uZSk6CiAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmQoKQoKICAgICAgICBwdXRfZGF0YSA9IHB1dF9kYXRhIG9yIHt9CiAgICAgICAgcHV0X2RhdGFbJ2lkX2RvYyddID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgIHB1dF9kYXRhWydkb2NfdHlwZSddID0gY2FyZF9kYXRhWyd0eXBlJ10KICAgICAgICBwdXRfZGF0YVsnZG9jX24nXSA9IGNhcmRfZGF0YVsnbnVtYmVyJ10KICAgICAgICBwdXRfZGF0YVsnZG9jX2RhdGUnXSA9IGNhcmRfZGF0YVsnZGF0YSddCiAgICAgICAgcHV0X2RhdGFbJ3dhcmVob3VzZSddID0gY2FyZF9kYXRhWyd3YXJlaG91c2UnXQogICAgICAgIHB1dF9kYXRhWydjb3VudHJhZ2VudCddID0gY2FyZF9kYXRhWydjb3VudHJhZ2VudCddCgogICAgICAgIHJldHVybiBwdXRfZGF0YQoKICAgIGRlZiBfc2V0X2RvY192ZXJpZmllZChzZWxmLCBpZF9kb2MsIHZhbHVlPVRydWUpOgogICAgICAgIyBzZXJ2aWNlID0gRG9jU2VydmljZShpZF9kb2MpCiAgICAgICAgdmFsdWUgPSBzdHIoaW50KHZhbHVlKSkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY192YWx1ZSgndmVyaWZpZWQnLCB2YWx1ZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZXJyb3JfbG9nKGUuYXJnc1swXSkKCiAgICBkZWYgZG9jX2RlbGV0ZShzZWxmLCBpZF9kb2MpOgoKICAgICAgICByZXN1bHQgPSBUcnVlCgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRlbGV0ZV9kb2MoaWRfZG9jKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5lcnJvcl9sb2coZS5hcmdzWzBdKQogICAgICAgICAgICByZXN1bHQgPSBGYWxzZQoKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIGdldF9kb2NzX2NvdW50KHNlbGYsIGRvY190eXBlPScnKToKICAgICAgICBkb2NfdHlwZSA9ICcnIGlmIG5vdCBkb2NfdHlwZSBvciBkb2NfdHlwZSA9PSAn0JLRgdC1JyBlbHNlIGRvY190eXBlCiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5nZXRfZG9jc19jb3VudChkb2NfdHlwZSkKCiAgICBkZWYgX2NsZWFyX2JhcmNvZGVfZGF0YShzZWxmLCBpZF9kb2MpOgogICAgICAgIHJldHVybiBzZWxmLnNlcnZpY2UuY2xlYXJfYmFyY29kZV9kYXRhKGlkX2RvYykKCiAgICBkZWYgY29uZmlybV9kZWxldGVfZG9jX2xpc3RlbmVyKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpCiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgIGRvY190eXBlID0gc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXQoKICAgICAgICBpZiBzZWxmLmRvY19kZWxldGUoaWRfZG9jKToKICAgICAgICAgICAgZG9jc19jb3VudCA9IHNlbGYuZ2V0X2RvY3NfY291bnQoZG9jX3R5cGU9ZG9jX3R5cGUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9CU0L7QutGD0LzQtdC90YIg0YPRgdC/0LXRiNC90L4g0YPQtNCw0LvRkdC9JykKICAgICAgICAgICAgaWYgZG9jc19jb3VudDoKICAgICAgICAgICAgICAgIHNlbGYub25fc3RhcnQoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J/Qu9C40YLQutC4JykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQntGI0LjQsdC60LAg0YPQtNCw0LvQtdC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAnKQoKCmNsYXNzIEdyb3VwU2NhbkRvY3NMaXN0U2NyZWVuKERvY3NMaXN0U2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9CU0L7QutGD0LzQtdC90YLRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQk9GA0YPQv9C/0L7QstCw0Y8g0L7QsdGA0LDQsdC+0YLQutCwJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBzdXBlcigpLm9uX3N0YXJ0KCkKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coJ9Cf0L7QtNGC0LLQtdGA0LTQuNGC0LUg0LTQtdC50YHRgtCy0LjQtScpCiAgICAgICAgICAgIHNlbGVjdGVkX2NhcmRfa2V5ID0gc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydpZF9kb2MnXSA9IHNlbGVjdGVkX2NhcmRfa2V5CgogICAgICAgIGVsaWYgc2VsZi5faXNfcmVzdWx0X3Bvc2l0aXZlKCfQn9C+0LTRgtCy0LXRgNC00LjRgtC1INC00LXQudGB0YLQstC40LUnKToKICAgICAgICAgICAgaWRfZG9jID0gc2VsZi5oYXNoX21hcFsnaWRfZG9jJ10KICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRvY19pZCA9IGlkX2RvYwogICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY192YWx1ZSgndmVyaWZpZWQnLCAxKQoKICAgICAgICAgICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsnCiAgICAgICAgICAgIHNjcmVlbiA9IFNjcmVlbnNGYWN0b3J5LmNyZWF0ZV9zY3JlZW4oCiAgICAgICAgICAgICAgICBzY3JlZW5fbmFtZT1zY3JlZW5fbmFtZSwKICAgICAgICAgICAgICAgIHByb2Nlc3M9c2VsZi5wcm9jZXNzX25hbWUsCiAgICAgICAgICAgICAgICBoYXNoX21hcD1zZWxmLmhhc2hfbWFwLAogICAgICAgICAgICAgICAgcnNfc2V0dGluZ3M9c2VsZi5yc19zZXR0aW5ncykKCiAgICAgICAgICAgIHNjcmVlbi5zaG93KGFyZ3M9c2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoKSkKCgpjbGFzcyBEb2N1bWVudHNEb2NzTGlzdFNjcmVlbihEb2NzTGlzdFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCiAgICBwcm9jZXNzX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgtGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuc2VydmljZS5kb2NzX3RhYmxlX25hbWUgPSAnUlNfZG9jcycKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5vbl9zdGFydCgpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBpZF9kb2MgPSBzZWxmLmdldF9pZF9kb2MoKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydpZF9kb2MnXSA9IGlkX2RvYwogICAgICAgICAgICBzZWxmLnNlcnZpY2UuZG9jX2lkID0gaWRfZG9jCgogICAgICAgICAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiycKICAgICAgICAgICAgc2NyZWVuID0gU2NyZWVuc0ZhY3RvcnkuY3JlYXRlX3NjcmVlbigKICAgICAgICAgICAgICAgIHNjcmVlbl9uYW1lPXNjcmVlbl9uYW1lLAogICAgICAgICAgICAgICAgcHJvY2Vzcz1zZWxmLnByb2Nlc3NfbmFtZSwKICAgICAgICAgICAgICAgIGhhc2hfbWFwPXNlbGYuaGFzaF9tYXAsCiAgICAgICAgICAgICAgICByc19zZXR0aW5ncz1zZWxmLnJzX3NldHRpbmdzKQoKICAgICAgICAgICAgc2NyZWVuLnNob3coYXJncz1zZWxmLl9nZXRfc2VsZWN0ZWRfY2FyZF9wdXRfZGF0YSgpKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9jbGVhcl9iYXJjb2RlX2RhdGEnKToKICAgICAgICAgICAgaWRfZG9jID0gc2VsZi5nZXRfaWRfZG9jKCkKICAgICAgICAgICAgcmVzID0gc2VsZi5fY2xlYXJfYmFyY29kZV9kYXRhKGlkX2RvYykKICAgICAgICAgICAgaWYgcmVzLmdldCgncmVzdWx0Jyk6CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQlNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwINC4INC80LDRgNC60LjRgNC+0LLQutC4INC+0YfQuNGJ0LXQvdGLJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoJ9Cf0YDQuCDQvtGH0LjRgdGC0LrQtSDQtNCw0L3QvdGL0YUg0L/QtdGA0LXRgdGH0LXRgtCwINCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwLicpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmVycm9yX2xvZyhyZXMuZ2V0KCdlcnJvcicpKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9yZXNlbmRfZG9jJyk6CiAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuZ2V0X2lkX2RvYygpCiAgICAgICAgICAgIGh0dHBfcGFyYW1zID0gc2VsZi5nZXRfaHR0cF9zZXR0aW5ncygpCiAgICAgICAgICAgIGFuc3dlciA9IHBvc3RfY2hhbmdlc190b19zZXJ2ZXIoZiIne2lkX2RvY30nIiwgaHR0cF9wYXJhbXMpCiAgICAgICAgICAgIGlmIGFuc3dlci5nZXQoJ0Vycm9yJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICB1aV9nbG9iYWwud3JpdGVfZXJyb3Jfb25fbG9nKGYn0J7RiNC40LHQutCwINC/0L7QstGC0L7RgNC90L7QuSDQvtGC0L/RgNCw0LLQutC4INC00L7QutGD0LzQtdC90YLQsCB7c2VsZi5nZXRfZG9jX251bWJlcigpfTogJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmJ3tzdHIoYW5zd2VyLmdldCgiRXJyb3IiKSl9JykKICAgICAgICAgICAgICAgIHNlbGYucHV0X25vdGlmaWNhdGlvbih0ZXh0PWYn0J7RiNC40LHQutCwINC/0YDQuCDQvtGC0L/RgNCw0LLQutC1INC00L7QutGD0LzQtdC90YLQsCB7c2VsZi5nZXRfZG9jX251bWJlcigpfSwgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZifQv9C+0LTRgNC+0LHQvdC10LUg0LIg0LvQvtCz0LUg0L7RiNC40LHQvtC6LicpCiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQndC1INGD0LTQsNC70L7RgdGMINC+0YLQv9GA0LDQstC40YLRjCDQtNC+0LrRg9C80LXQvdGCINC/0L7QstGC0L7RgNC90L4nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRvY19pZCA9IGlkX2RvYwogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2NfdmFsdWUoJ3NlbnQnLCAxKQogICAgICAgICAgICAgICAgc2VsZi50b2FzdCgn0JTQvtC60YPQvNC10L3RgiDQvtGC0L/RgNCw0LLQu9C10L0g0L/QvtCy0YLQvtGA0L3QvicpCgogICAgZGVmIGdldF9pZF9kb2Moc2VsZik6CiAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbigiY2FyZF9kYXRhIikgb3Ige30KICAgICAgICBpZF9kb2MgPSBjYXJkX2RhdGEuZ2V0KCdrZXknKSBvciBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9jYXJkX2tleSddCiAgICAgICAgcmV0dXJuIGlkX2RvYwoKICAgIGRlZiBnZXRfZG9jX251bWJlcihzZWxmKToKICAgICAgICBjYXJkX2RhdGEgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCJjYXJkX2RhdGEiKSBvciB7fQogICAgICAgIGRvY19udW1iZXIgPSBjYXJkX2RhdGEuZ2V0KCdudW1iZXInKQogICAgICAgIHJldHVybiBkb2NfbnVtYmVyCgoKY2xhc3MgQWRyRG9jc0xpc3RTY3JlZW4oRG9jc0xpc3RTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgtGLJwogICAgcHJvY2Vzc19uYW1lID0gJ9CQ0LTRgNC10YHQvdC+0LUg0YXRgNCw0L3QtdC90LjQtScKCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gQWRyRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi5zZXJ2aWNlLmRvY3NfdGFibGVfbmFtZSA9ICdSU19hZHJfZG9jcycKICAgICAgICBzZWxmLnNlcnZpY2UuZGV0YWlsc190YWJsZV9uYW1lID0gJ1JTX2Fkcl9kb2NzX3RhYmxlJwogICAgICAgIHNlbGYuc2NyZWVuX3ZhbHVlcyA9IHt9CiAgICAgICAgc2VsZi5saXN0ZW5lciA9IHNlbGYuaGFzaF9tYXBbJ2xpc3RlbmVyJ10KICAgICAgICBzZWxmLmV2ZW50ID0gc2VsZi5oYXNoX21hcFsnZXZlbnQnXQoKCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKICAgICAgICBkb2NfdHlwZXMgPSBzZWxmLnNlcnZpY2UuZ2V0X2RvY190eXBlcygpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jX2Fkcl90eXBlX3NlbGVjdCddID0gJzsnLmpvaW4oWyfQktGB0LUnLCAn0J7RgtCx0L7RgCcsICfQoNCw0LfQvNC10YnQtdC90LjQtScsICfQn9C10YDQtdC80LXRidC10L3QuNC1J10pCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jX3N0YXR1c19zZWxlY3QnXSA9ICfQktGB0LU70Jog0LLRi9C/0L7Qu9C90LXQvdC40Y470JLRi9Cz0YDRg9C20LXQvTvQmiDQstGL0LPRgNGD0LfQutC1JwoKICAgICAgICBkb2NfdHlwZSA9IHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX2NsaWNrJ10KICAgICAgICBpZiBub3QgZG9jX3R5cGU6CiAgICAgICAgICAgIGRvY190eXBlID0gJ9CS0YHQtScKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXSA9IGRvY190eXBlCiAgICAgICAgZG9jX3N0YXR1cyA9IHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2RvY19zdGF0dXMnXQogICAgICAgIGlmIG5vdCBkb2Nfc3RhdHVzOgogICAgICAgICAgICBkb2Nfc3RhdHVzID0gJ9CS0YHQtScKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfZG9jX3N0YXR1cyddID0gZG9jX3N0YXR1cwogICAgICAgICNzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9jbGljayddID0gZG9jX3R5cGUKICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF90aWxlX2tleSddID0gJycKICAgICAgICBsaXN0X2RhdGEgPSBzZWxmLl9nZXRfZG9jX2xpc3RfZGF0YShkb2NfdHlwZSwgZG9jX3N0YXR1cykKICAgICAgICBkb2NfY2FyZHMgPSBzZWxmLl9nZXRfZG9jX2NhcmRzX3ZpZXcobGlzdF9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cF9tZW51X2RhdGE9J9Cj0LTQsNC70LjRgtGMO9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsDvQntGC0L/RgNCw0LLQuNGC0Ywg0L/QvtCy0YLQvtGA0L3QvicpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jQWRyQ2FyZHMnXSA9IGRvY19jYXJkcy50b19qc29uKCkKCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAiZG9jX3N0YXR1c19jbGljayI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2RvY19zdGF0dXMnXSA9IHNlbGYuaGFzaF9tYXBbImRvY19zdGF0dXNfY2xpY2siXQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgICAgIHNlbGYuX2xheW91dF9hY3Rpb24oKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9kZWxldGUnKToKICAgICAgICAgICAgc2VsZi5jb25maXJtX2RlbGV0ZV9kb2NfbGlzdGVuZXIoKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBhcmdzID0gc2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoKQoKICAgICAgICAgICAgc2NyZWVuID0gQWRyRG9jRGV0YWlsc1NjcmVlbihzZWxmLmhhc2hfbWFwLCBzZWxmLnJzX3NldHRpbmdzKQogICAgICAgICAgICBzY3JlZW4uc2hvdyhhcmdzID0gYXJncykKCiAgICAgICAgICAgICMgYWRyX2xpc3Rfc2NyZWVuLnNjcmVlbl92YWx1ZXMgPSBzZWxmLl9nZXRfc2VsZWN0ZWRfY2FyZF9wdXRfZGF0YShzZWxmKSAjIHsnZG9jX24nOiAnJywgJ2RvY19kYXRlJzogJycsICd3YXJlaG91c2UnOiAnJ30KICAgICAgICAgICAgIyBhZHJfbGlzdF9zY3JlZW4uc2hvdyh7J2lkX2RvYyc6IHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2NhcmRfa2V5J119KQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gImRvY19hZHJfdHlwZV9jbGljayI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX2NsaWNrJ10gPSBzZWxmLmhhc2hfbWFwWydkb2NfYWRyX3R5cGVfY2xpY2snXQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gImJ0bl9hZGRfZG9jIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J3QvtCy0YvQuSDQtNC+0LrRg9C80LXQvdGCJykKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzKCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdjb25maXJtX2NsZWFyX2JhcmNvZGVfZGF0YSc6CgogICAgICAgICAgICBzZWxmLl9jbGVhcl9iYXJjb2RlX2RhdGEoc2VsZi5nZXRfaWRfZG9jKCkpCgogICAgZGVmIF9sYXlvdXRfYWN0aW9uKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgbGF5b3V0X2xpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGF5b3V0X2xpc3RlbmVyJ10KCiAgICAgICAgaWYgbGF5b3V0X2xpc3RlbmVyID09ICfQo9C00LDQu9C40YLRjCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coCiAgICAgICAgICAgICAgICBsaXN0ZW5lcj0nY29uZmlybV9kZWxldGUnLAogICAgICAgICAgICAgICAgdGl0bGU9J9Cj0LTQsNC70LjRgtGMINC00L7QutGD0LzQtdC90YIg0YEg0YPRgdGC0YDQvtC50YHRgtCy0LA/JwogICAgICAgICAgICApCiAgICAgICAgZWxpZiBsYXlvdXRfbGlzdGVuZXIgPT0gJ9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coCiAgICAgICAgICAgICAgICBsaXN0ZW5lcj0nY29uZmlybV9jbGVhcl9iYXJjb2RlX2RhdGEnLAogICAgICAgICAgICAgICAgdGl0bGU9J9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsD8nCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0J7RgtC/0YDQsNCy0LjRgtGMINC/0L7QstGC0L7RgNC90L4nOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKAogICAgICAgICAgICAgICAgbGlzdGVuZXI9J2NvbmZpcm1fcmVzZW5kX2RvYycsCiAgICAgICAgICAgICAgICB0aXRsZT0n0J7RgtC/0YDQsNCy0LjRgtGMINC00L7QutGD0LzQtdC90YIg0L/QvtCy0YLQvtGA0L3Qvj8nCiAgICAgICAgICAgICkKCiAgICBkZWYgX2dldF9kb2NfbGlzdF9kYXRhKHNlbGYsIGRvY190eXBlPScnLCBkb2Nfc3RhdHVzPScnKSAtPiBsaXN0OgogICAgICAgIHJlc3VsdHMgPSBzZWxmLnNlcnZpY2UuZ2V0X2RvY192aWV3X2RhdGEoZG9jX3R5cGUsIGRvY19zdGF0dXMpCiAgICAgICAgdGFibGVfZGF0YSA9IFtdCgogICAgICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICcnCgogICAgICAgICAgICBpZiByZWNvcmRbJ3ZlcmlmaWVkJ10gYW5kIHJlY29yZFsnc2VudCddOgogICAgICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQktGL0LPRgNGD0LbQtdC9JwogICAgICAgICAgICBlbGlmIHJlY29yZFsndmVyaWZpZWQnXToKICAgICAgICAgICAgICAgIGRvY19zdGF0dXMgPSAn0Jog0LLRi9Cz0YDRg9C30LrQtScKICAgICAgICAgICAgZWxpZiBub3QgKHJlY29yZFsndmVyaWZpZWQnXSBhbmQgcmVjb3JkWydzZW50J10pOgogICAgICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQmiDQstGL0L/QvtC70L3QtdC90LjRjicKCiAgICAgICAgICAgIHRhYmxlX2RhdGEuYXBwZW5kKHsKICAgICAgICAgICAgICAgICdrZXknOiByZWNvcmRbJ2lkX2RvYyddLAogICAgICAgICAgICAgICAgJ3R5cGUnOiByZWNvcmRbJ2RvY190eXBlJ10sCiAgICAgICAgICAgICAgICAnbnVtYmVyJzogcmVjb3JkWydkb2NfbiddLAogICAgICAgICAgICAgICAgJ2RhdGEnOiByZWNvcmRbJ2RvY19kYXRlJ10sCiAgICAgICAgICAgICAgICAnd2FyZWhvdXNlJzogcmVjb3JkWydSU193YXJlaG91c2UnXSwKICAgICAgICAgICAgICAgICdhZGRfbWFya19zZWxlY3Rpb24nOiByZWNvcmRbJ2FkZF9tYXJrX3NlbGVjdGlvbiddLAogICAgICAgICAgICAgICAgJ3N0YXR1cyc6IGRvY19zdGF0dXMKICAgICAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIHRhYmxlX2RhdGEKCiAgICBkZWYgX2dldF9kb2NfY2FyZHNfdmlldyhzZWxmLCB0YWJsZV9kYXRhLCBwb3B1cF9tZW51X2RhdGEpOgogICAgICAgIHRpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJUaXRsZVRleHRTaXplIikKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF9kYXRlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkRGF0ZVRleHRTaXplJykKCiAgICAgICAgZG9jX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHN0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2xlZnQnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0eXBlJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9dGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPXBvcHVwX21lbnVfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGU9Im1lbnVfZGVsZXRlIiwKICAgICAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbnVtYmVyJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90aXRsZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCgogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAd2FyZWhvdXNlJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF9kYXRlX3RleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICBjYXJkc2RhdGE9dGFibGVfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIGRvY19jYXJkcwoKICAgIGRlZiBfZG9jX2RlbGV0ZShzZWxmLCBpZF9kb2MpOgogICAgICAgIHJlc3VsdCA9IFRydWUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuc2VydmljZS5kZWxldGVfZG9jKGlkX2RvYykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZXJyb3JfbG9nKGUuYXJnc1swXSkKICAgICAgICAgICAgcmVzdWx0ID0gRmFsc2UKCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBfZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoc2VsZiwgcHV0X2RhdGE9Tm9uZSk6CiAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmQoKQoKICAgICAgICBwdXRfZGF0YSA9IHB1dF9kYXRhIG9yIHt9CiAgICAgICAgcHV0X2RhdGFbJ2lkX2RvYyddID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgIHB1dF9kYXRhWydkb2NfdHlwZSddID0gY2FyZF9kYXRhWyd0eXBlJ10KICAgICAgICBwdXRfZGF0YVsnZG9jX24nXSA9IGNhcmRfZGF0YVsnbnVtYmVyJ10KICAgICAgICBwdXRfZGF0YVsnZG9jX2RhdGUnXSA9IGNhcmRfZGF0YVsnZGF0YSddCiAgICAgICAgcHV0X2RhdGFbJ3dhcmVob3VzZSddID0gY2FyZF9kYXRhWyd3YXJlaG91c2UnXQoKICAgICAgICByZXR1cm4gcHV0X2RhdGEKCiAgICBkZWYgX2dldF9kb2NzX2NvdW50KHNlbGYsIGRvY190eXBlPScnKToKICAgICAgICBkb2NfdHlwZSA9ICcnIGlmIG5vdCBkb2NfdHlwZSBvciBkb2NfdHlwZSA9PSAn0JLRgdC1JyBlbHNlIGRvY190eXBlCiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5nZXRfZG9jc19jb3VudChkb2NfdHlwZSkKCiAgICBkZWYgY29uZmlybV9kZWxldGVfZG9jX2xpc3RlbmVyKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpCiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgIGRvY190eXBlID0gc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXQoKICAgICAgICBpZiBzZWxmLmRvY19kZWxldGUoaWRfZG9jKToKICAgICAgICAgICAgZG9jc19jb3VudCA9IHNlbGYuZ2V0X2RvY3NfY291bnQoZG9jX3R5cGU9ZG9jX3R5cGUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9CU0L7QutGD0LzQtdC90YIg0YPRgdC/0LXRiNC90L4g0YPQtNCw0LvRkdC9JykKICAgICAgICAgICAgaWYgZG9jc19jb3VudDoKICAgICAgICAgICAgICAgIHNlbGYub25fc3RhcnQoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5maW5pc2hfcHJvY2VzcygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0J7RiNC40LHQutCwINGD0LTQsNC70LXQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwJykKCgogICAgZGVmIF9nZXRfc2VsZWN0ZWRfY2FyZChzZWxmKToKICAgICAgICBjdXJyZW50X3N0ciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImRvY0FkckNhcmRzIikKICAgICAgICBzZWxlY3RlZF9jYXJkID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCgogICAgICAgIHJldHVybiBzZWxlY3RlZF9jYXJkCgoKICAgIGRlZiBfY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5jbGVhcl9iYXJjb2RlX2RhdGEoaWRfZG9jKQoKICAgIGRlZiBnZXRfaWRfZG9jKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpIG9yIHt9CiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhLmdldCgna2V5Jykgb3Igc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgIHJldHVybiBpZF9kb2MKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gRG9jc0xpc3QgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT09PT09PSBEb2NEZXRhaWxzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoKY2xhc3MgRG9jRGV0YWlsc1NjcmVlbihTY3JlZW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncyA9IHJzX3NldHRpbmdzCiAgICAgICAgc2VsZi5pZF9kb2MgPSBzZWxmLmhhc2hfbWFwWydpZF9kb2MnXQogICAgICAgIHNlbGYuc2VydmljZSA9IERvY1NlcnZpY2Uoc2VsZi5pZF9kb2MpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHBhc3MKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKHNlbGYuc2NyZWVuX25hbWUsIGFyZ3MpCiAgICAgICAgc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCgogICAgZGVmIF9vbl9zdGFydChzZWxmKToKICAgICAgICBzZWxmLl9zZXRfdmlzaWJpbGl0eV9vbl9zdGFydCgpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1NldFRpdGxlJywgc2VsZi5oYXNoX21hcFsiZG9jX3R5cGUiXSkKCiAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSBGYWxzZQogICAgICAgIGhhdmVfemVyb19wbGFuID0gRmFsc2UKICAgICAgICBoYXZlX21hcmtfcGxhbiA9IEZhbHNlCgogICAgICAgIGRvY19kZXRhaWxzID0gc2VsZi5fZ2V0X2RvY19kZXRhaWxzX2RhdGEoKQogICAgICAgIHRhYmxlX2RhdGEgPSBzZWxmLl9wcmVwYXJlX3RhYmxlX2RhdGEoZG9jX2RldGFpbHMpCiAgICAgICAgdGFibGVfdmlldyA9IHNlbGYuX2dldF9kb2NfdGFibGVfdmlldyh0YWJsZV9kYXRhPXRhYmxlX2RhdGEpCgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hpZ2hsaWdodCcpOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaGlnaGxpZ2h0JywgRmFsc2UpCiAgICAgICAgICAgICMgc2VsZi5lbmFibGVfaGlnaGxpZ2h0KHRhYmxlX3ZpZXcuY3VzdG9tdGFibGUpCiAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC5ydW5fZXZlbnRfYXN5bmMoJ2hpZ2hsaWdodF9zY2FubmVkX2l0ZW0nKQoKICAgICAgICBpZiBkb2NfZGV0YWlsczoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsndGFibGVfbGluZXNfcXR0eSddID0gbGVuKGRvY19kZXRhaWxzKQogICAgICAgICAgICBoYXZlX3plcm9fcGxhbiA9IFRydWUKICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSBzdW0oW2l0ZW1bJ3F0dHlfcGxhbiddIGZvciBpdGVtIGluIGRvY19kZXRhaWxzIGlmIGl0ZW1bJ3F0dHlfcGxhbiddXSkgPiAwCgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfcXR0eV9wbGFuJ10gPSBoYXZlX3F0dHlfcGxhbgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfemVyb19wbGFuJ10gPSBoYXZlX3plcm9fcGxhbgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfbWFya19wbGFuJ10gPSBoYXZlX21hcmtfcGxhbgoKICAgICAgICBjb250cm9sID0gc2VsZi5zZXJ2aWNlLmdldF9kb2NfdmFsdWUoJ2NvbnRyb2wnLCBzZWxmLmlkX2RvYykgbm90IGluICgwLCAnMCcsICdmYWxzZScsICdGYWxzZScsIE5vbmUpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnY29udHJvbCddID0gY29udHJvbAoKICAgICAgICBzZWxmLmhhc2hfbWFwWydyZXR1cm5fc2VsZWN0ZWRfZGF0YSddID0gJycKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZG9jX2dvb2RzX3RhYmxlIiwgdGFibGVfdmlldy50b19qc29uKCkpCgogICAgZGVmIF9iYXJjb2RlX3NjYW5uZWQoc2VsZik6CiAgICAgICAgaWRfZG9jID0gc2VsZi5oYXNoX21hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgZG9jID0gUnNEb2MoaWRfZG9jKQogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCJldmVudCIpID09ICJvblJlc3VsdFBvc2l0aXZlIjoKICAgICAgICAgICAgYmFyY29kZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdmbGRfYmFyY29kZScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYmFyY29kZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdiYXJjb2RlX2NhbWVyYScpCgogICAgICAgIGlmIG5vdCBiYXJjb2RlOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoYXZlX3F0dHlfcGxhbicpCiAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoYXZlX3plcm9fcGxhbicpCiAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoYXZlX21hcmtfcGxhbicpCiAgICAgICAgY29udHJvbCA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2NvbnRyb2wnKQoKICAgICAgICByZXMgPSBkb2MucHJvY2Vzc190aGVfYmFyY29kZSgKICAgICAgICAgICAgYmFyY29kZSwKICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4sCiAgICAgICAgICAgIGhhdmVfemVyb19wbGFuLAogICAgICAgICAgICBjb250cm9sLAogICAgICAgICAgICBoYXZlX21hcmtfcGxhbiwKICAgICAgICAgICAgdXNlX21hcmtfc2V0dGluZz1zZWxmLnJzX3NldHRpbmdzLmdldCgndXNlX21hcmsnKSkKICAgICAgICBpZiByZXMgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NjYW5uZWRfYmFyY29kZScsIGJhcmNvZGUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Ce0YjQuNCx0LrQsCDRgdC60LDQvdC10YDQsCcpCiAgICAgICAgZWxpZiByZXNbJ0Vycm9yJ106CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiZWVwX2R1cmF0aW9uICcsIHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdiZWVwX2R1cmF0aW9uJykpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJiZWVwIiwgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3NpZ25hbF9udW0nKSkKICAgICAgICAgICAgaWYgcmVzWydFcnJvciddID09ICdBbHJlYWR5U2Nhbm5lZCc6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZScsIGpzb24uZHVtcHMoeydiYXJjb2RlJzogcmVzWydCYXJjb2RlJ10sICdkb2NfaW5mbyc6IHJlc1snZG9jX2luZm8nXX0pKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0KPQtNCw0LvQtdC90LjQtSDRiNGC0YDQuNGF0LrQvtC00LAnKQogICAgICAgICAgICBlbGlmIHJlc1snRXJyb3InXSA9PSAnUXVhbnRpdHlQbGFuUmVhY2hlZCc6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnRXJyb3JfZGVzY3JpcHRpb24nLCAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LIg0LTQvtC60YPQvNC10L3RgtC1INC/0YDQtdCy0YvRiNC10L3QvicpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQntGI0LjQsdC60LAg0L/RgNC10LLRi9GI0LXQvdC40Y8g0L/Qu9Cw0L3QsCcpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKGxpc3RlbmVyPSfQntGI0LjQsdC60LAg0L/RgNC10LLRi9GI0LXQvdC40Y8g0L/Qu9Cw0L3QsCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPSfQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C70LDQvSDQsiDQtNC+0LrRg9C80LXQvdGC0LUg0L/RgNC10LLRi9GI0LXQvdC+JykKICAgICAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC50b2FzdCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pCiAgICAgICAgICAgIGVsaWYgcmVzWydFcnJvciddID09ICdaZXJvX3BsYW5fZXJyb3InOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdChyZXNbJ0Rlc2NyJ10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KHJlc1snRGVzY3InXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Ci0L7QstCw0YAg0LTQvtCx0LDQstC70LXQvSDQsiDQtNC+0LrRg9C80LXQvdGCJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2hpZ2hsaWdodCcsIFRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiYXJjb2RlX3NjYW5uZWQnLCBUcnVlKQogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgX3NldF92aXNpYmlsaXR5X29uX3N0YXJ0KHNlbGYpOgogICAgICAgIF92YXJzID0gWyd3YXJlaG91c2UnLCAnY291bnRyYWdlbnQnXQoKICAgICAgICBmb3IgdiBpbiBfdmFyczoKICAgICAgICAgICAgbmFtZSA9IGYnU2hvd197dn0nCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbbmFtZV0gPSAnMScgaWYgc2VsZi5oYXNoX21hcFt2XSBlbHNlICctMScKCiAgICAgICAgYWxsb3dfZmFjdF9pbnB1dCA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdhbGxvd19mYWN0X2lucHV0Jykgb3IgRmFsc2UKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19mYWN0X3F0dHlfaW5wdXQiLCAnMScgaWYgYWxsb3dfZmFjdF9pbnB1dCBlbHNlICctMScpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfZmFjdF9xdHR5X25vdGUiLCAnLTEnIGlmIGFsbG93X2ZhY3RfaW5wdXQgZWxzZSAnMScpCgogICAgZGVmIF9nZXRfZG9jX2RldGFpbHNfZGF0YShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zZXJ2aWNlLmdldF9kb2NfZGV0YWlsc19kYXRhKHNlbGYuaWRfZG9jKQoKICAgIGRlZiBfcHJlcGFyZV90YWJsZV9kYXRhKHNlbGYsIGRvY19kZXRhaWxzKToKICAgICAgICB0YWJsZV9kYXRhID0gW3t9XQogICAgICAgIHJvd19maWx0ZXIgPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdyb3dzX2ZpbHRlcicpCgogICAgICAgIGZvciByZWNvcmQgaW4gZG9jX2RldGFpbHM6CiAgICAgICAgICAgIGlmIHJvd19maWx0ZXIgYW5kIHJlY29yZFsncXR0eSddID09IHJlY29yZFsncXR0eV9wbGFuJ106CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgcGljID0gJyNmMDJhJyBpZiByZWNvcmRbJ0lzRG9uZSddICE9IDAgZWxzZSAnI2YwMGMnCiAgICAgICAgICAgIGlmIHJlY29yZFsncXR0eSddID09IDAgYW5kIHJlY29yZFsncXR0eV9wbGFuJ10gPT0gMDoKICAgICAgICAgICAgICAgIHBpYyA9ICcnCgogICAgICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydpZCddKSwKICAgICAgICAgICAgICAgICdnb29kX25hbWUnOiBzdHIocmVjb3JkWydnb29kX25hbWUnXSksCiAgICAgICAgICAgICAgICAnaWRfZ29vZCc6IHN0cihyZWNvcmRbJ2lkX2dvb2QnXSksCiAgICAgICAgICAgICAgICAnaWRfcHJvcGVydGllcyc6IHN0cihyZWNvcmRbJ2lkX3Byb3BlcnRpZXMnXSksCiAgICAgICAgICAgICAgICAncHJvcGVydGllc19uYW1lJzogc3RyKHJlY29yZFsncHJvcGVydGllc19uYW1lJ10gb3IgJycpLAogICAgICAgICAgICAgICAgJ2lkX3Nlcmllcyc6IHN0cihyZWNvcmRbJ2lkX3NlcmllcyddKSwKICAgICAgICAgICAgICAgICdzZXJpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Nlcmllc19uYW1lJ10gb3IgJycpLAogICAgICAgICAgICAgICAgJ2lkX3VuaXQnOiBzdHIocmVjb3JkWydpZF91bml0J10pLAogICAgICAgICAgICAgICAgJ3VuaXRzX25hbWUnOiBzdHIocmVjb3JkWyd1bml0c19uYW1lJ10gb3IgJycpLAogICAgICAgICAgICAgICAgJ2NvZGVfYXJ0JzogJ9Ca0L7QtDogJyArIHN0cihyZWNvcmRbJ2NvZGUnXSksCiAgICAgICAgICAgICAgICAnYXJ0Jzogc3RyKHJlY29yZFsnYXJ0J10pLAogICAgICAgICAgICAgICAgJ3ByaWNlJzogc3RyKHJlY29yZFsncHJpY2UnXSBpZiByZWNvcmRbJ3ByaWNlJ10gaXMgbm90IE5vbmUgZWxzZSAwKSwKICAgICAgICAgICAgICAgICdwcmljZV9uYW1lJzogc3RyKHJlY29yZFsncHJpY2VfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdwaWN0dXJlJzogcGljLAogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm9wcyA9IFsKICAgICAgICAgICAgICAgICd7fSAnLmZvcm1hdChwcm9kdWN0X3Jvd1snYXJ0J10pIGlmIHByb2R1Y3Rfcm93WydhcnQnXSBlbHNlICcnLAogICAgICAgICAgICAgICAgJyh7fSkgJy5mb3JtYXQocHJvZHVjdF9yb3dbJ3Byb3BlcnRpZXNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1sncHJvcGVydGllc19uYW1lJ10gZWxzZSAnJywKICAgICAgICAgICAgICAgICd7fScuZm9ybWF0KHByb2R1Y3Rfcm93WydzZXJpZXNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1snc2VyaWVzX25hbWUnXSBlbHNlICcnLAogICAgICAgICAgICAgICAgJywge30nLmZvcm1hdChwcm9kdWN0X3Jvd1sndW5pdHNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1sndW5pdHNfbmFtZSddIGVsc2UgJycsCiAgICAgICAgICAgIF0KICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ2dvb2RfaW5mbyddID0gJycuam9pbihwcm9wcykKICAgICAgICAgICAgaWYgcmVjb3JkWydxdHR5J10gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eSddID0gc3RyKGludChyZWNvcmRbJ3F0dHknXSkgaWYgcmVjb3JkWydxdHR5J10uaXNfaW50ZWdlcigpIGVsc2UgcmVjb3JkWydxdHR5J10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eSddID0gIjAiCiAgICAgICAgICAgIGlmIHJlY29yZFsncXR0eV9wbGFuJ10gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eV9wbGFuJ10gPSBzdHIoaW50KHJlY29yZFsncXR0eV9wbGFuJ10pIGlmIHJlY29yZFsncXR0eV9wbGFuJ10uaXNfaW50ZWdlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZWNvcmRbJ3F0dHlfcGxhbiddKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ3F0dHlfcGxhbiddID0gIjAiCgogICAgICAgICAgICBwcm9kdWN0X3Jvd1snX2xheW91dCddID0gc2VsZi5fZ2V0X2RvY190YWJsZV9yb3dfdmlldygpCiAgICAgICAgICAgIHNlbGYuX3NldF9iYWNrZ3JvdW5kX3Jvd19jb2xvcihwcm9kdWN0X3JvdykKCiAgICAgICAgICAgIGlmIHNlbGYuX2FkZGVkX2dvb2RzX2hhc19rZXkocHJvZHVjdF9yb3dbJ2tleSddKToKICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEuaW5zZXJ0KDEsIHByb2R1Y3Rfcm93KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3ZpZXcoc2VsZiwgdGFibGVfZGF0YSk6CiAgICAgICAgdGFibGVfdmlldyA9IHdpZGdldHMuQ3VzdG9tVGFibGUoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J3QsNC30LLQsNC90LjQtScpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0zCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J/Qu9Cw0L0nKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ck0LDQutGCJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0ZGRkZGRicKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICB0YWJsZWRhdGE9dGFibGVfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHRhYmxlX3ZpZXcKCiAgICBkZWYgX2dldF9kb2NfdGFibGVfcm93X3ZpZXcoc2VsZik6CiAgICAgICAgcm93X3ZpZXcgPSB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQGdvb2RfbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0Bnb29kX2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MywKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcXR0eV9wbGFuJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BxdHR5JywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0ZGRkZGRicKICAgICAgICApCgogICAgICAgIHJldHVybiByb3dfdmlldwoKICAgIGRlZiBfc2V0X2JhY2tncm91bmRfcm93X2NvbG9yKHNlbGYsIHByb2R1Y3Rfcm93KToKICAgICAgICBiYWNrZ3JvdW5kX2NvbG9yID0gJyNGRkZGRkYnCiAgICAgICAgcXR0eSwgcXR0eV9wbGFuID0gZmxvYXQocHJvZHVjdF9yb3dbJ3F0dHknXSksIGZsb2F0KHByb2R1Y3Rfcm93WydxdHR5X3BsYW4nXSkKCiAgICAgICAgaWYgcXR0eV9wbGFuID4gcXR0eToKICAgICAgICAgICAgYmFja2dyb3VuZF9jb2xvciA9ICIjRkJFOUU3IgoKICAgICAgICBlbGlmIHF0dHlfcGxhbiA8IHF0dHk6CiAgICAgICAgICAgIGJhY2tncm91bmRfY29sb3IgPSAiI0ZGRjlDNCIKCiAgICAgICAgcHJvZHVjdF9yb3dbJ19sYXlvdXQnXS5CYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kX2NvbG9yCgogICAgZGVmIF9hZGRlZF9nb29kc19oYXNfa2V5KHNlbGYsIGtleSk6CiAgICAgICAgYWRkZWRfZ29vZHMgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCdhZGRlZF9nb29kcycpCiAgICAgICAgcmVzdWx0ID0gRmFsc2UKCiAgICAgICAgaWYgYWRkZWRfZ29vZHM6CiAgICAgICAgICAgIGFkZGVkX2dvb2RzX2RvYyA9IGFkZGVkX2dvb2RzLmdldChzZWxmLmlkX2RvYywgW10pCiAgICAgICAgICAgIHJlc3VsdCA9IHN0cihrZXkpIGluIFtzdHIoaXRlbSkgZm9yIGl0ZW0gaW4gYWRkZWRfZ29vZHNfZG9jXQogICAgICAgICAgICBzZWxmLnRvYXN0KHJlc3VsdCkKCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBlbmFibGVfaGlnaGxpZ2h0KGN1c3RvbXRhYmxlKToKICAgICAgICBjdXN0b210YWJsZVsndGFibGVkYXRhJ11bMV1bJ19sYXlvdXQnXS5CYWNrZ3JvdW5kQ29sb3IgPSAnI0YwRjhGRicKCiAgICBkZWYgZGlzYWJsZV9oaWdobGlnaHQoc2VsZik6CiAgICAgICAgc2VsZi5fb25fc3RhcnQoKQogICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgIGRlZiBfZmlsbF9ub25lX3ZhbHVlcyhzZWxmLCBkYXRhLCBrZXlzLCBkZWZhdWx0PScnKToKICAgICAgICBub25lX2xpc3QgPSBbTm9uZSwgJ05vbmUnXQogICAgICAgIGZvciBrZXkgaW4ga2V5czoKICAgICAgICAgICAgZGF0YVtrZXldID0gZGVmYXVsdCBpZiBkYXRhW2tleV0gaW4gbm9uZV9saXN0IGVsc2UgZGF0YVtrZXldCgogICAgY2xhc3MgVGV4dFZpZXcod2lkZ2V0cy5UZXh0Vmlldyk6CiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCiAgICAgICAgICAgIHNlbGYuVGV4dFNpemUgPSAnMTUnCiAgICAgICAgICAgIHNlbGYuVGV4dEJvbGQgPSBUcnVlCiAgICAgICAgICAgIHNlbGYud2lkdGggPSAnbWF0Y2hfcGFyZW50JwogICAgICAgICAgICBzZWxmLlZhbHVlID0gdmFsdWUKCiAgICBjbGFzcyBMaW5lYXJMYXlvdXQod2lkZ2V0cy5MaW5lYXJMYXlvdXQpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKCphcmdzLCAqKmt3YXJncykKICAgICAgICAgICAgc2VsZi5vcmllbnRhdGlvbiA9ICdob3Jpem9udGFsJwogICAgICAgICAgICBzZWxmLmhlaWdodCA9ICJtYXRjaF9wYXJlbnQiCiAgICAgICAgICAgIHNlbGYud2lkdGggPSAibWF0Y2hfcGFyZW50IgogICAgICAgICAgICBzZWxmLlN0cm9rZVdpZHRoID0gMQoKCmNsYXNzIEdyb3VwU2NhbkRvY0RldGFpbHNTY3JlZW4oRG9jRGV0YWlsc1NjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQk9GA0YPQv9C/0L7QstCw0Y8g0L7QsdGA0LDQsdC+0YLQutCwJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuaHNfc2VydmljZSA9IGhzX3NlcnZpY2VzLkhzU2VydmljZShzZWxmLmdldF9odHRwX3NldHRpbmdzKCkpCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0gewogICAgICAgICAgICAnaWRfZG9jJzogaGFzaF9tYXBbJ2lkX2RvYyddLAogICAgICAgICAgICAnZG9jX3R5cGUnOiBoYXNoX21hcFsnZG9jX3R5cGUnXSwKICAgICAgICAgICAgJ2RvY19uJzogaGFzaF9tYXBbJ2RvY19uJ10sCiAgICAgICAgICAgICdkb2NfZGF0ZSc6IGhhc2hfbWFwWydkb2NfZGF0ZSddLAogICAgICAgICAgICAnd2FyZWhvdXNlJzogaGFzaF9tYXBbJ3dhcmVob3VzZSddLAogICAgICAgICAgICAnY291bnRyYWdlbnQnOiBoYXNoX21hcFsnY291bnRyYWdlbnQnXSwKICAgICAgICB9CgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fb25fc3RhcnQoKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGxpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGlzdGVuZXInXQoKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYmFyY29kZSc6CiAgICAgICAgICAgIHNlbGYuX3J1bl9wcm9ncmVzc19iYXJjb2RlX3NjYW5uaW5nKCkKCiAgICAgICAgZWxpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ9CS0LLQtdGB0YLQuNCo0YLRgNC40YXQutC+0LQnKToKICAgICAgICAgICAgc2VsZi5fdXBkYXRlX2RvY3VtZW50X2RhdGEoKQogICAgICAgICAgICBzZWxmLl9iYXJjb2RlX3NjYW5uZWQoKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJ1bl9ldmVudF9hc3luYygnZG9jX2RldGFpbHNfYmFyY29kZV9zY2FubmVkJykKCiAgICAgICAgZWxpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ1JldHJ5Q29ubmVjdGlvbicpOgogICAgICAgICAgICBzZWxmLl9ydW5fcHJvZ3Jlc3NfYmFyY29kZV9zY2FubmluZygpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9iYXJjb2Rlcyc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coJ9CS0LLQtdGB0YLQuNCo0YLRgNC40YXQutC+0LQnKQoKICAgICAgICBlbGlmIGxpc3RlbmVyIGluIFsnT05fQkFDS19QUkVTU0VEJywgJ0JBQ0tfQlVUVE9OJ106CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9yb3dzX2ZpbHRlcl9vbic6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdyb3dzX2ZpbHRlcicsICcxJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9yb3dzX2ZpbHRlcl9vZmYnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgncm93c19maWx0ZXInKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCiAgICBkZWYgX3J1bl9wcm9ncmVzc19iYXJjb2RlX3NjYW5uaW5nKHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucnVuX2V2ZW50X3Byb2dyZXNzKCdkb2NfZGV0YWlsc19iZWZvcmVfcHJvY2Vzc19iYXJjb2RlJykKCiAgICBkZWYgYmVmb3JlX3Byb2Nlc3NfYmFyY29kZShzZWxmKToKICAgICAgICBpZiBzZWxmLl9jaGVja19jb25uZWN0aW9uKCk6CiAgICAgICAgICAgIHNlbGYuX3VwZGF0ZV9kb2N1bWVudF9kYXRhKCkKICAgICAgICAgICAgc2VsZi5fYmFyY29kZV9zY2FubmVkKCkKICAgICAgICAgICAgc2VsZi5wb3N0X2JhcmNvZGVfc2Nhbm5lZChzZWxmLmdldF9odHRwX3NldHRpbmdzKCkpCiAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC5ydW5fZXZlbnRfYXN5bmMoJ2RvY19kZXRhaWxzX2JhcmNvZGVfc2Nhbm5lZCcpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5iZWVwKCc3MCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2cobGlzdGVuZXI9IlJldHJ5Q29ubmVjdGlvbiIsIHRpdGxlPSfQntGC0YHRg9GC0YHRgtCy0YPQtdGCINGB0L7QtdC00LjQvdC10L3QuNC1INGBINGB0LXRgNCy0LXRgNC+0LwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM9WyLQn9C+0LLRgtC+0YDQuNGC0YwiLCAi0J7RgtC80LXQvdCwIl0pCgogICAgZGVmIF91cGRhdGVfZG9jdW1lbnRfZGF0YShzZWxmKToKICAgICAgICBkb2NzX2RhdGEgPSBzZWxmLl9nZXRfdXBkYXRlX2N1cnJlbnRfZG9jX2RhdGEoKQogICAgICAgIGlmIGRvY3NfZGF0YToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnVwZGF0ZV9kYXRhX2Zyb21fanNvbihkb2NzX2RhdGEpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LfQsNC/0LjRgdC4INC00L7QutGD0LzQtdC90YLQsDogIHtlfScpCgogICAgZGVmIF9nZXRfdXBkYXRlX2N1cnJlbnRfZG9jX2RhdGEoc2VsZik6CiAgICAgICAgc2VsZi5oc19zZXJ2aWNlLmdldF9kYXRhKCkKICAgICAgICBhbnN3ZXIgPSBzZWxmLmhzX3NlcnZpY2UuaHR0cF9hbnN3ZXIKCiAgICAgICAgaWYgYW5zd2VyLnVuYXV0aG9yaXplZDoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0J7RiNC40LHQutCwINCw0LLRgtC+0YDQuNC30LDRhtC40Lgg0YHQtdGA0LLQtdGA0LAgMdChJykKICAgICAgICBlbGlmIGFuc3dlci5mb3JiaWRkZW46CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAubm90aWZpY2F0aW9uKGFuc3dlci5lcnJvcl90ZXh0LCB0aXRsZT0n0J7RiNC40LHQutCwINC+0LHQvNC10L3QsCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoYW5zd2VyLmVycm9yX3RleHQpCiAgICAgICAgZWxpZiBhbnN3ZXIuZXJyb3I6CiAgICAgICAgICAgIHNlbGYuc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0LA6ICB7YW5zd2VyLmVycm9yX3RleHR9JykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gYW5zd2VyLmRhdGEKCiAgICBkZWYgcG9zdF9iYXJjb2RlX3NjYW5uZWQoc2VsZiwgaHR0cF9zZXR0aW5ncyk6CiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnYmFyY29kZV9zY2FubmVkJyk6CiAgICAgICAgICAgIGFuc3dlciA9IE5vbmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYW5zd2VyID0gc2VsZi5fcG9zdF9nb29kc190b19zZXJ2ZXIoKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2Uud3JpdGVfZXJyb3Jfb25fbG9nKGUuYXJnc1swXSkKCiAgICAgICAgICAgIGlmIGFuc3dlciBhbmQgYW5zd2VyLmdldCgnRXJyb3InKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZXJyb3JfbG9nKGFuc3dlci5nZXQoJ0Vycm9yJykpCgogICAgICAgICAgICBkb2NfZGV0YWlscyA9IHNlbGYuX2dldF9kb2NfZGV0YWlsc19kYXRhKCkKICAgICAgICAgICAgdGFibGVfZGF0YSA9IHNlbGYuX3ByZXBhcmVfdGFibGVfZGF0YShkb2NfZGV0YWlscykKICAgICAgICAgICAgdGFibGVfdmlldyA9IHNlbGYuX2dldF9kb2NfdGFibGVfdmlldyh0YWJsZV9kYXRhPXRhYmxlX2RhdGEpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJkb2NfZ29vZHNfdGFibGUiLCB0YWJsZV92aWV3LnRvX2pzb24oKSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgZGVmIF9wb3N0X2dvb2RzX3RvX3NlcnZlcihzZWxmKToKICAgICAgICByZXMgPSBzZWxmLnNlcnZpY2UuZ2V0X2xhc3RfZWRpdGVkX2dvb2RzKHRvX2pzb249RmFsc2UpCiAgICAgICAgaHNfc2VydmljZSA9IEhzU2VydmljZShzZWxmLmdldF9odHRwX3NldHRpbmdzKCkpCgogICAgICAgIGlmIGlzaW5zdGFuY2UocmVzLCBkaWN0KSBhbmQgcmVzLmdldCgnRXJyb3InKToKICAgICAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWUsICdFcnJvcic6IHJlcy5nZXQoJ0Vycm9yJyl9CiAgICAgICAgICAgIHJldHVybiBhbnN3ZXIKICAgICAgICBlbGlmIHJlczoKICAgICAgICAgICAgaHNfc2VydmljZS5zZW5kX2RvY3VtZW50cyhyZXMpCiAgICAgICAgICAgIGFuc3dlciA9IGhzX3NlcnZpY2UuaHR0cF9hbnN3ZXIKICAgICAgICAgICAgaWYgYW5zd2VyLmVycm9yOgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhhbnN3ZXIuZXJyb3JfdGV4dCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2UudXBkYXRlX3NlbnRfZGF0YShyZXMpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhlLmFyZ3NbMF0pCgogICAgICAgICMg0L/QvtC60LAg0YfRgtC+INC+0YLQutC70Y7Rh9C40Lsg0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YvQuSBnZXQt0LfQsNC/0YDQvtGBLCDQv9GA0L7QstC10YDRj9C10Lwg0L/RgNC+0LjQt9Cy0L7QtNC40YLQtdC70YzQvdC+0YHRgtGMCgogICAgICAgICMgZG9jc19kYXRhID0gaHNfc2VydmljZS5nZXRfZGF0YSgpCiAgICAgICAgIwogICAgICAgICMgaWYgZG9jc19kYXRhLmdldCgnZGF0YScpOgogICAgICAgICMgICAgIHRyeToKICAgICAgICAjICAgICAgICAgc2VsZi5zZXJ2aWNlLnVwZGF0ZV9kYXRhX2Zyb21fanNvbihkb2NzX2RhdGFbJ2RhdGEnXSkKICAgICAgICAjICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgIyAgICAgICAgIHNlbGYuc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZS5hcmdzWzBdKQoKICAgIGRlZiBfY2hlY2tfY29ubmVjdGlvbihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuaHNfc2VydmljZS5jb21tdW5pY2F0aW9uX3Rlc3QodGltZW91dD0xKQogICAgICAgICAgICBhbnN3ZXIgPSBzZWxmLmhzX3NlcnZpY2UuaHR0cF9hbnN3ZXIKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGFuc3dlciA9IHNlbGYuaHNfc2VydmljZS5IdHRwQW5zd2VyKAogICAgICAgICAgICAgICAgZXJyb3I9VHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yX3RleHQ9c3RyKGUuYXJnc1swXSksCiAgICAgICAgICAgICAgICBzdGF0dXNfY29kZT00MDQsCiAgICAgICAgICAgICAgICB1cmw9c2VsZi5oc19zZXJ2aWNlLnVybCkKCiAgICAgICAgcmV0dXJuIG5vdCBhbnN3ZXIuZXJyb3IKCgpjbGFzcyBEb2N1bWVudHNEb2NEZXRhaWxTY3JlZW4oRG9jRGV0YWlsc1NjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fb25fc3RhcnQoKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGxpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIGlkX2RvYyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpZF9kb2MnKQoKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIHNlbGVjdGVkX2NhcmRfa2V5ID0gc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgICAgICBkb2NfZ29vZHNfdGFibGUgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCdkb2NfZ29vZHNfdGFibGUnKQogICAgICAgICAgICB0YWJsZV9kYXRhID0gZG9jX2dvb2RzX3RhYmxlWydjdXN0b210YWJsZSddWyd0YWJsZWRhdGEnXQoKICAgICAgICAgICAgY3VycmVudF9lbGVtID0gTm9uZQogICAgICAgICAgICBjdXJyZW50X2VsZW1fZmlsdGVyID0gW2l0ZW0gZm9yIGl0ZW0gaW4gdGFibGVfZGF0YSBpZiBpdGVtLmdldCgna2V5JykgPT0gc2VsZWN0ZWRfY2FyZF9rZXldCgogICAgICAgICAgICBpZiBjdXJyZW50X2VsZW1fZmlsdGVyOgogICAgICAgICAgICAgICAgY3VycmVudF9lbGVtID0gY3VycmVudF9lbGVtX2ZpbHRlclswXQoKICAgICAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwWyJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIl0KICAgICAgICAgICAgdGFibGVfbGluZXNfcXR0eSA9IHNlbGYuaGFzaF9tYXBbJ3RhYmxlX2xpbmVzX3F0dHknXQoKICAgICAgICAgICAgIyDRgtC10LrRg9GJ0LjQuSDRjdC70LXQvNC10L3RgiDQvdC1INC90LDQudC00LXQvSDQuNC70Lgg0Y3RgtC+INC30LDQs9C+0LvQvtCy0L7QuiDRgtCw0LHQu9C40YbRiwogICAgICAgICAgICBpZiBjdXJyZW50X2VsZW0gaXMgTm9uZSBvciAnZ29vZF9uYW1lJyBub3QgaW4gY3VycmVudF9lbGVtOgogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICB0aXRsZSA9ICd7fSDihJYge30g0L7RgiB7fScuZm9ybWF0KHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlJ10sIHNlbGYuaGFzaF9tYXBbJ2RvY19uJ10sIHNlbGYuaGFzaF9tYXBbJ2RvY19kYXRlJ10pCiAgICAgICAgICAgIHB1dF9kYXRhID0gewogICAgICAgICAgICAgICAgJ0RvY19kYXRhJzogdGl0bGUsCiAgICAgICAgICAgICAgICAnR29vZCc6IGN1cnJlbnRfZWxlbVsnZ29vZF9uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9hcnQnOiBjdXJyZW50X2VsZW1bJ2FydCddLAogICAgICAgICAgICAgICAgJ2dvb2Rfc24nOiBjdXJyZW50X2VsZW1bJ3Nlcmllc19uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9wcm9wZXJ0eSc6IGN1cnJlbnRfZWxlbVsncHJvcGVydGllc19uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9wcmljZSc6IGN1cnJlbnRfZWxlbVsncHJpY2UnXSwKICAgICAgICAgICAgICAgICdnb29kX3VuaXQnOiBjdXJyZW50X2VsZW1bJ3VuaXRzX25hbWUnXSwKICAgICAgICAgICAgICAgICdnb29kX3N0cic6IGYne2N1cnJlbnRfc3RyfSAvIHt0YWJsZV9saW5lc19xdHR5fScsCiAgICAgICAgICAgICAgICAncXR0eV9wbGFuJzogY3VycmVudF9lbGVtWydxdHR5X3BsYW4nXSwKICAgICAgICAgICAgICAgICdnb29kX3BsYW4nOiBjdXJyZW50X2VsZW1bJ3F0dHlfcGxhbiddLAogICAgICAgICAgICAgICAgJ2tleSc6IGN1cnJlbnRfZWxlbVsna2V5J10sCiAgICAgICAgICAgICAgICAncHJpY2UnOiBjdXJyZW50X2VsZW1bJ3ByaWNlJ10sCiAgICAgICAgICAgICAgICAncHJpY2VfdHlwZSc6IGN1cnJlbnRfZWxlbVsncHJpY2VfbmFtZSddLAogICAgICAgICAgICAgICAgJ3F0dHknOiBjdXJyZW50X2VsZW1bJ3F0dHknXSBpZiBjdXJyZW50X2VsZW1bJ3F0dHknXSBhbmQgZmxvYXQoY3VycmVudF9lbGVtWydxdHR5J10pICE9IDAgZWxzZSAnJywKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLl9maWxsX25vbmVfdmFsdWVzKAogICAgICAgICAgICAgICAgcHV0X2RhdGEsCiAgICAgICAgICAgICAgICAoJ2dvb2RfYXJ0JywgJ2dvb2Rfc24nLCAnZ29vZF9wcm9wZXJ0eScsICdnb29kX3ByaWNlJywgJ2dvb2RfcGxhbicpLAogICAgICAgICAgICAgICAgZGVmYXVsdD0n0L7RgtGB0YPRgtGB0YLQstGD0LXRgicpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YLQsNCx0LvQuNGG0YMgUVIg0LrQvtC00L7Qsi0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgYXJncyA9IHsKICAgICAgICAgICAgICAgICdpZF9kb2MnOiBpZF9kb2MsCiAgICAgICAgICAgICAgICAnaWRfZ29vZCc6IGN1cnJlbnRfZWxlbVsnaWRfZ29vZCddLAogICAgICAgICAgICAgICAgJ2lkX3Byb3BlcnR5JzogY3VycmVudF9lbGVtWydpZF9wcm9wZXJ0aWVzJ10sCiAgICAgICAgICAgICAgICAnaWRfc2VyaWVzJzogY3VycmVudF9lbGVtWydpZF9zZXJpZXMnXSwKICAgICAgICAgICAgICAgICdpZF91bml0JzogY3VycmVudF9lbGVtWydpZF91bml0J10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzID0gc2VsZi5fZ2V0X2RvY19iYXJjb2RlX2RhdGEoYXJncykKCiAgICAgICAgICAgICMgVE9ETyDQn9C10YDQtdC00LXQu9Cw0YLRjCDRh9C10YDQtdC3INCy0LjQtNC20LXRgtGLCiAgICAgICAgICAgIGNhcmRzID0gc2VsZi5fZ2V0X2JhcmNvZGVfY2FyZCgpCgogICAgICAgICAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgdC/0LjRgdC+0Log0LrQsNGA0YLQvtGH0LXQuiDQsdCw0YDQutC+0LTQvtCyCiAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXSA9IFtdCiAgICAgICAgICAgIGZvciBlbCBpbiByZXM6CiAgICAgICAgICAgICAgICBwaWN0dXJlID0gJyNmMDBjJyBpZiBlbFsnYXBwcm92ZWQnXSBpbiBbJ1RydWUnLCAndHJ1ZScsICcxJ10gZWxzZSAnJwogICAgICAgICAgICAgICAgcm93ID0gewogICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogZWxbJ21hcmtfY29kZSddLAogICAgICAgICAgICAgICAgICAgICdwaWN0dXJlJzogcGljdHVyZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChyb3cpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZV9jYXJkcycsIGNhcmRzLCB0b19qc29uPVRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCi0L7QstCw0YAg0LLRi9Cx0L7RgCIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2JhcmNvZGUnIG9yIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgn0JLQstC10YHRgtC40KjRgtGA0LjRhdC60L7QtCcpOgogICAgICAgICAgICByZXMgPSBzZWxmLl9iYXJjb2RlX3NjYW5uZWQoKQogICAgICAgICAgICBpZiByZXMuZ2V0KCdrZXknKToKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS51cGRhdGVfcnNfZG9jc190YWJsZV9zZW50X3N0YXR1cyhyZXMuZ2V0KCdrZXknKSkKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS5zZXRfZG9jX3N0YXR1c190b191cGxvYWQoaWRfZG9jKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fYmFyY29kZXMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKCfQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0JykKCiAgICAgICAgZWxpZiBsaXN0ZW5lciBpbiBbJ09OX0JBQ0tfUFJFU1NFRCcsICdCQUNLX0JVVFRPTiddOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV92ZXJpZmllZCcpOgogICAgICAgICAgICBpZF9kb2MgPSBzZWxmLmhhc2hfbWFwWydpZF9kb2MnXQogICAgICAgICAgICBkb2MgPSBSc0RvYyhpZF9kb2MpCiAgICAgICAgICAgIGRvYy5tYXJrX3ZlcmlmaWVkKDEpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9kb2NfbWFya192ZXJpZmllZCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coJ2NvbmZpcm1fdmVyaWZpZWQnLCAn0JfQsNCy0LXRgNGI0LjRgtGMINC00L7QutGD0LzQtdC90YI/JywgWyfQlNCwJywgJ9Cd0LXRgiddKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fcm93c19maWx0ZXJfb24nOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncm93c19maWx0ZXInLCAnMScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fcm93c19maWx0ZXJfb2ZmJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ3Jvd3NfZmlsdGVyJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgZGVmIF9nZXRfYmFyY29kZV9jYXJkKHNlbGYpOgogICAgICAgICMgVE9ETyDQn9C10YDQtdC00LXQu9Cw0YLRjCDRh9C10YDQtdC3INCy0LjQtNC20LXRgtGLCgogICAgICAgIGxzID0geyJjdXN0b21jYXJkcyI6IHsKICAgICAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICJzYXZlX3Bvc2l0aW9uIjogVHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBiYXJjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnZ29vZHNUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBwaWN0dXJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiI0ZGRkZGRiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogImJ0bl90c3QxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2FyZENvcm5lclJhZGl1cyI6ICIxNWRwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9fQogICAgICAgIH0KICAgICAgICByZXR1cm4gbHMKCiAgICBkZWYgX2dldF9kb2NfYmFyY29kZV9kYXRhKHNlbGYsIGFyZ3MpOgogICAgICAgIHJldHVybiBzZWxmLnNlcnZpY2UuZ2V0X2RvY19iYXJjb2RlX2RhdGEoYXJncykKCmNsYXNzIEFkckRvY0RldGFpbHNTY3JlZW4oRG9jRGV0YWlsc1NjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQkNC00YDQtdGB0L3QvtC1INGF0YDQsNC90LXQvdC40LUnCiAgICB0YWJsZV90eXBlc19mcm9tX2RvY190eXBlID0geyfQntGC0LHQvtGAJzogWydvdXQnLCBdLCAn0KDQsNC30LzQtdGJ0LXQvdC40LUnOiBbJ2luJywgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn0J/QtdGA0LXQvNC10YnQtdC90LjQtSc6IFsnaW4nLCAnb3V0J119CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhyc19zZXR0aW5ncz1yc19zZXR0aW5ncywgaGFzaF9tYXA9aGFzaF9tYXApCgogICAgICAgIHNlbGYuY3VycmVudF9jZWxsID0gc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfY2VsbF9pZCcpCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID17J2RvY19uJzogJycsICdkb2NfZGF0ZSc6ICcnLCAnd2FyZWhvdXNlJzogJyd9CiAgICAgICAgc2VsZi50YWJsZV90eXBlID0gJycKICAgICAgICBzZWxmLnNlcnZpY2UgPSBBZHJEb2NTZXJ2aWNlKHNlbGYuaWRfZG9jLCB0YWJsZV90eXBlPXNlbGYudGFibGVfdHlwZSkKCgoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX29uX3N0YXJ0KCkKCgogICAgZGVmIF9vbl9zdGFydChzZWxmKToKCiAgICAgICAgaWYgbm90IHNlbGYudGFibGVfdHlwZToKICAgICAgICAgICAgc2VsZi50YWJsZV90eXBlID0gc2VsZi5fZ2V0X3RhYmxlX3R5cGVfZm9yX3NjcmVlbigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgI9CS0YvQsdC+0YAg0YLQsNCx0LvQuNGH0L3QvtC5INGH0LDRgdGC0LggKNC+0YLQsdC+0YAv0YDQsNC30LzQtdGJ0LXQvdC40LUpCiAgICAgICAgICAgICNzZWxmLl9nZXRfdGFibGVfdHlwZV9mcm9tX3NjcmVlbigpCiAgICAgICAgICAgIHNlbGYudGFibGVfdHlwZSA9IHNlbGYuX2dldF90YWJsZV90eXBlX2Zyb21fbmFtZShzZWxmLmhhc2hfbWFwWyd0YWJsZV90eXBlJ10pCgogICAgICAgIHNlbGYuX3NldF92aXNpYmlsaXR5X29uX3N0YXJ0KCkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnU2V0VGl0bGUnLCBzZWxmLmhhc2hfbWFwWyJkb2NfdHlwZSJdKQoKICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBGYWxzZQogICAgICAgIGhhdmVfbWFya19wbGFuID0gRmFsc2UKICAgICAgICBzZWxmLnNlcnZpY2UudGFibGVfdHlwZSA9IHNlbGYudGFibGVfdHlwZQogICAgICAgIGRvY19kZXRhaWxzID0gc2VsZi5fZ2V0X2RvY19kZXRhaWxzX2RhdGEoKQogICAgICAgIHRhYmxlX2RhdGEgPSBzZWxmLl9wcmVwYXJlX3RhYmxlX2RhdGEoZG9jX2RldGFpbHMpCiAgICAgICAgdGFibGVfdmlldyA9IHNlbGYuX2dldF9kb2NfdGFibGVfdmlldyh0YWJsZV9kYXRhPXRhYmxlX2RhdGEpCgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hpZ2hsaWdodCcpOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaGlnaGxpZ2h0JywgRmFsc2UpCiAgICAgICAgICAgICMgc2VsZi5lbmFibGVfaGlnaGxpZ2h0KHRhYmxlX3ZpZXcuY3VzdG9tdGFibGUpCiAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC5ydW5fZXZlbnRfYXN5bmMoJ2hpZ2hsaWdodF9zY2FubmVkX2l0ZW0nKQoKICAgICAgICBpZiBkb2NfZGV0YWlsczoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsndGFibGVfbGluZXNfcXR0eSddID0gbGVuKGRvY19kZXRhaWxzKQogICAgICAgICAgICBoYXZlX3plcm9fcGxhbiA9IFRydWUKICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSBzdW0oW2l0ZW1bJ3F0dHlfcGxhbiddIGZvciBpdGVtIGluIGRvY19kZXRhaWxzIGlmIGl0ZW1bJ3F0dHlfcGxhbiddXSkgPiAwCgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfcXR0eV9wbGFuJ10gPSBoYXZlX3F0dHlfcGxhbgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfemVyb19wbGFuJ10gPSBoYXZlX3plcm9fcGxhbgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2hhdmVfbWFya19wbGFuJ10gPSBoYXZlX21hcmtfcGxhbgoKICAgICAgICBjb250cm9sID0gc2VsZi5zZXJ2aWNlLmdldF9kb2NfdmFsdWUoJ2NvbnRyb2wnLCBzZWxmLmlkX2RvYykgbm90IGluICgwLCAnMCcsICdmYWxzZScsICdGYWxzZScsIE5vbmUpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnY29udHJvbCddID0gY29udHJvbAoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZG9jX2dvb2RzX3RhYmxlIiwgdGFibGVfdmlldy50b19qc29uKCkpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3JldHVybl9zZWxlY3RlZF9kYXRhJywnJykKCiAgICBkZWYgX2dldF9kb2NfZGV0YWlsc19kYXRhKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnNlcnZpY2UuZ2V0X2RvY19kZXRhaWxzX2RhdGEoc2VsZi5pZF9kb2MsIHNlbGYuY3VycmVudF9jZWxsKQoKCiAgICBkZWYgb25faW5wdXQoc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKICAgICAgICBsaXN0ZW5lciA9IHNlbGYuaGFzaF9tYXBbJ2xpc3RlbmVyJ10KCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxmLl9maWxsX29uZV9zdHJpbmdfc2NyZWVuKCkKICAgICAgICAgICAgI3NlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCi0L7QstCw0YAg0LLRi9Cx0L7RgCIpIC0tLSoqKiDQrdC60YDQsNC9INCyINGE0YPQvdC60YbQuNC4IF9maWxsX29uZV9zdHJpbmdfc2NyZWVuCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiQkFDS19CVVRUT04iOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQlNC+0LrRg9C80LXQvdGC0YsiKQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9iYXJjb2RlcyI6CgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd0RpYWxvZyIsICLQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0IikKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYmFyY29kZScgb3Igc2VsZi5oYXNoX21hcC5nZXQoImV2ZW50IikgPT0gIm9uUmVzdWx0UG9zaXRpdmUiOgogICAgICAgICAgICBjdXJyZW50X2NlbGwgPSBzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9jZWxsJykKCiAgICAgICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19hZHJfZG9jCiAgICAgICAgICAgIGRvYy5pZF9kb2MgPSBzZWxmLmhhc2hfbWFwLmdldCgnaWRfZG9jJykKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoImV2ZW50IikgPT0gIm9uUmVzdWx0UG9zaXRpdmUiOgogICAgICAgICAgICAgICAgYmFyY29kZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdmbGRfYmFyY29kZScpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhJykKCiAgICAgICAgICAgIGRvY19jZWxsID0gZG9jLmZpbmRfY2VsbChkb2MsIGJhcmNvZGUpCiAgICAgICAgICAgIGlmIG5vdCBjdXJyZW50X2NlbGwgYW5kIG5vdCBkb2NfY2VsbDoKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiZWVwX2R1cmF0aW9uICcsIHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdiZWVwX2R1cmF0aW9uJykpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiYmVlcCIsIHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdzaWduYWxfbnVtJykpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndG9hc3QnLCAn0J3QtSDQvdCw0LnQtNC10L3QsCDRj9GH0LXQudC60LAnKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGlmIGRvY19jZWxsOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfY2VsbCcsIGRvY19jZWxsWyduYW1lJ10pCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9jZWxsX2lkJywgZG9jX2NlbGxbJ2lkJ10pCgogICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfcXR0eV9wbGFuJykKICAgICAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoYXZlX3plcm9fcGxhbicpCiAgICAgICAgICAgIGhhdmVfbWFya19wbGFuID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnaGF2ZV9tYXJrX3BsYW4nKQogICAgICAgICAgICBjb250cm9sID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnY29udHJvbCcpCgogICAgICAgICAgICByZXMgPSBkb2MucHJvY2Vzc190aGVfYmFyY29kZShkb2MsIGJhcmNvZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAoaGF2ZV9xdHR5X3BsYW4pLCAoaGF2ZV96ZXJvX3BsYW4pLCAoY29udHJvbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2NlbGxfaWQnKSwgc2VsZi50YWJsZV90eXBlKQogICAgICAgICAgICBpZiByZXMgPT0gTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzY2FubmVkX2JhcmNvZGUnLCBiYXJjb2RlKQogICAgICAgICAgICAgICAgIyBzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoVHJ1ZSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93U2NyZWVuJywgJ9Ce0YjQuNCx0LrQsCDRgdC60LDQvdC10YDQsCcpCiAgICAgICAgICAgICAgICAjIGhhc2hNYXAucHV0KCd0b2FzdCcsCiAgICAgICAgICAgICAgICAjICAgICAgICAgICAgICfQqNGC0YDQuNGFINC60L7QtCDQvdC1INC30LDRgNC10LPQuNGB0YLRgNC40YDQvtCy0LDQvSDQsiDQsdCw0LfQtSDQtNCw0L3QvdGL0YUuINCf0YDQvtCy0LXRgNGM0YLQtSDRgtC+0LLQsNGAINC40LvQuCDQstGL0L/QvtC70L3QuNGC0LUg0L7QsdC80LXQvSDQtNCw0L3QvdGL0LzQuCcpCiAgICAgICAgICAgIGVsaWYgcmVzWydFcnJvciddOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2JlZXBfZHVyYXRpb24gJywgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ2JlZXBfZHVyYXRpb24nKSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJiZWVwIiwgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3NpZ25hbF9udW0nKSkKICAgICAgICAgICAgICAgIGlmIHJlc1snRXJyb3InXSA9PSAnQWxyZWFkeVNjYW5uZWQnOgoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZScsIGpzb24uZHVtcHMoeydiYXJjb2RlJzogcmVzWydCYXJjb2RlJ10sICdkb2NfaW5mbyc6IHJlc1snZG9jX2luZm8nXX0pKQogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93U2NyZWVuJywgJ9Cj0LTQsNC70LXQvdC40LUg0YjRgtGA0LjRhdC60L7QtNCwJykKICAgICAgICAgICAgICAgIGVsaWYgcmVzWydFcnJvciddID09ICdRdWFudGl0eVBsYW5SZWFjaGVkJzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pCiAgICAgICAgICAgICAgICBlbGlmIHJlc1snRXJyb3InXSA9PSAnWmVyb19wbGFuX2Vycm9yJzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0b2FzdCcsIHJlc1snRGVzY3InXSkgICMgKyAnICcrIHJlc1snQmFyY29kZSddCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndG9hc3QnLCAn0KLQvtCy0LDRgCDQtNC+0LHQsNCy0LvQtdC9INCyINC00L7QutGD0LzQtdC90YInKQogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fZG9jX21hcmtfdmVyaWZpZWQnOgogICAgICAgICAgICBkb2MgPSB1aV9nbG9iYWwuUnNfYWRyX2RvYwogICAgICAgICAgICBkb2MuaWRfZG9jID0gc2VsZi5oYXNoX21hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgICAgIGRvYy5tYXJrX3ZlcmlmaWVkKGRvYywgMSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0JTQvtC60YPQvNC10L3RgtGLIikKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgaWYgIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2NlbGxfaWQnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdjdXJyZW50X2NlbGwnKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ2N1cnJlbnRfY2VsbF9pZCcpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fY2xlYXJfY2VsbCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdjdXJyZW50X2NlbGwnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgnY3VycmVudF9jZWxsX2lkJykKICAgICAgICAgICAgc2VsZi5jdXJyZW50X2NlbGwgPSBOb25lCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fc2VsZWN0X2NlbGwnOiAgIyDQmtC90L7Qv9C60LAg0LLRi9Cx0YDQsNGC0Ywg0Y/Rh9C10LnQutGDCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgnY3VycmVudF9jZWxsJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ2N1cnJlbnRfY2VsbF9pZCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdTZWFyY2hTdHJpbmcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19jZWxscycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X2NlbGxfdmFsdWUnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2JhcmNvZGUnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3RfY2VsbF92YWx1ZSc6CiAgICAgICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2lkJyk6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9jZWxsX2lkJywgc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X2NlbGwnLCBzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9uYW1lJykpCiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRfY2VsbCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2lkJykKICAgICAgICAgICAgICAgICMgc2VsZi5fb25fc3RhcnQoKQogICAgICAgICAgICAgICAgIyBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdMYXlvdXRBY3Rpb24nOgogICAgICAgICAgICBzZWxmLl9sYXlvdXRfYWN0aW9uKCkKCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF9jZWxsX3ZhbHVlX2Zvcl9jYXJkJzoKICAgICAgICAgICAgI1RPRE8g0JjQt9C80LXQvdC10L3QuNC1INC00LDQvdC90YvRhSDQvtGC0L/RgNCw0LLQuNGC0Ywg0LIg0LrQu9Cw0YHRgSDQsiBkYl9zZXJ2aWNlCiAgICAgICAgICAgIGN1cnJlbnRfa2V5ID0gc2VsZi5oYXNoX21hcC5nZXQoImtleSIpCiAgICAgICAgICAgIGlmIGN1cnJlbnRfa2V5OgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQoJ1VwZGF0ZSBSU19hZHJfZG9jc190YWJsZSBTRVQgaWRfY2VsbCA9ID8gV2hlcmUgaWQgPSA/JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9pZCcpLCBjdXJyZW50X2tleSkpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnUmVmcmVzaFNjcmVlbicsICcnKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fYWRkX3N0cmluZyc6CgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiRG9jX2RhdGEiLAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmdldCgnZG9jX3R5cGUnKSArICcg4oSWJyArIHNlbGYuaGFzaF9tYXAuZ2V0KCdkb2NfbicpICsKICAgICAgICAgICAgICAgICAgICAgICAgJyDQvtGCJyArIHNlbGYuaGFzaF9tYXAuZ2V0KCdkb2NfZGF0ZScpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiR29vZCIsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgicHJvcGVydGllcyIsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgicXR0eV9wbGFuIiwgJycpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQotC+0LLQsNGAIikKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fcm93c19maWx0ZXJfb24nOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncm93c19maWx0ZXInLCAnMScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdSZWZyZXNoU2NyZWVuJywgJycpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX3Jvd3NfZmlsdGVyX29mZic6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdyb3dzX2ZpbHRlcicpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdSZWZyZXNoU2NyZWVuJywgJycpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAndGFibGVfdHlwZSc6CiAgICAgICAgICAgIHNlbGYudGFibGVfdHlwZSA9IHNlbGYuX2dldF90YWJsZV90eXBlX2Zyb21fbmFtZShzZWxmLmhhc2hfbWFwWyd0YWJsZV90eXBlJ10pCiAgICAgICAgICAgIHNlbGYuX29uX3N0YXJ0KCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgIyDQkiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0LLQuNC00LAg0LTQvtC60YPQvNC10L3RgtCwINC90LDQt9C90LDRh9Cw0LXQvCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRgtCw0LHQu9C40YfQvdGD0Y4g0YfQsNGB0YLRjCDQv9C+INGD0LzQvtC70YfQsNC90LjRjtGOCiAgICAjINCd0LDQv9GA0LjQvNC10YAsINC00LvRjyDQtNC+0LrRg9C80LXQvdGC0LAg0J7RgtCx0L7RgCDRjdGC0L4gb3V0INCwINC00LvRjyDQoNCw0LfQvNC10YnQtdC90LjQtSBpbgogICAgZGVmIF9nZXRfdGFibGVfdHlwZV9mb3Jfc2NyZWVuKHNlbGYpOgogICAgICAgIHRhYmxlc190eXBlID0gJ9Ce0YLQsdC+0YA70KDQsNC30LzQtdGJ0LXQvdC40LUnICMgJzsnLmpvaW4oc2VsZi50YWJsZV90eXBlc19mcm9tX2RvY190eXBlWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZSddXSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndGFibGVzX3R5cGUnLCB0YWJsZXNfdHlwZSkKCiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2RvY190eXBlJykgaW4gWyfQntGC0LHQvtGAJywgJ9Cf0LXRgNC10LzQtdGJ0LXQvdC40LUnXToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsndGFibGVfdHlwZSddID0gJ9Ce0YLQsdC+0YAnCiAgICAgICAgICAgIHJldHVybiAnb3V0JwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3RhYmxlX3R5cGUnXSA9ICfQoNCw0LfQvNC10YnQtdC90LjQtScKICAgICAgICAgICAgcmV0dXJuICdpbicKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2dldF90YWJsZV90eXBlX2Zyb21fbmFtZShfdmFsKToKCiAgICAgICAgcmV0dXJuICdpbicgaWYgX3ZhbCA9PSAn0KDQsNC30LzQtdGJ0LXQvdC40LUnIGVsc2UgJ291dCcKICAgICAgICAgICNjdXJyZW50X3RhYmxlX3R5cGUnXV0KCiAgICBkZWYgX2xheW91dF9hY3Rpb24oc2VsZik6CiAgICAgICAgbGF5b3V0X2xpc3RlbmVyID0gc2VsZi5oYXNoX21hcC5nZXQoJ2xheW91dF9saXN0ZW5lcicpCgogICAgICAgIGN1cnJlbnRfa2V5ID0gc2VsZi5oYXNoX21hcC5nZXQoImtleSIpCiAgICAgICAgaWYgbGF5b3V0X2xpc3RlbmVyID09ICfQo9C00LDQu9C40YLRjCDRgdGC0YDQvtC60YMnOgoKICAgICAgICAgICAgaWYgY3VycmVudF9rZXk6ICNjdXJyZW50X2VsZW1bJ2tleSddOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQoJ0RFTEVURSBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkID0gPycsIChjdXJyZW50X2tleSwgKSkgI2N1cnJlbnRfZWxlbVsna2V5J10sKSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdSZWZyZXNoU2NyZWVuJywnJykKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0JjQt9C80LXQvdC40YLRjCDRj9GH0LXQudC60YMnOgoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX2NlbGxzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfY2VsbF92YWx1ZV9mb3JfY2FyZCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWU7YmFyY29kZScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCgogICAgZGVmIF9maWxsX29uZV9zdHJpbmdfc2NyZWVuKHNlbGYsIF9maWx0ZXI9JycpOgogICAgICAgIGhhc2hNYXAgPSBzZWxmLmhhc2hfbWFwCiAgICAgICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kc190YWJsZSIpKQogICAgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b210YWJsZSddWyd0YWJsZWRhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgIGhhc2hNYXAucHV0KCJEb2NfZGF0YSIsCiAgICAgICAgICAgICAgICAgICAgaGFzaE1hcC5nZXQoJ2RvY190eXBlJykgKyAnIOKElicgKyBoYXNoTWFwLmdldCgnZG9jX24nKSArCiAgICAgICAgICAgICAgICAgICAgJyDQvtGCJyArIGhhc2hNYXAuZ2V0KCdkb2NfZGF0ZScpKQogICAgICAgIGhhc2hNYXAucHV0KCJjdXJyZW50X2NlbGxfbmFtZSIsICfQr9GH0LXQudC60LA6ICcgKyBjdXJyZW50X2VsZW1bJ2NlbGwnXSkKICAgICAgICBoYXNoTWFwLnB1dCgnaWRfY2VsbCcsIGN1cnJlbnRfZWxlbVsnaWRfY2VsbCddKQogICAgICAgIGhhc2hNYXAucHV0KCJHb29kIiwgY3VycmVudF9lbGVtWydnb29kX25hbWUnXSkKICAgICAgICBoYXNoTWFwLnB1dCgicXR0eV9wbGFuIiwgc3RyKGN1cnJlbnRfZWxlbVsncXR0eV9wbGFuJ10pKQogICAgICAgIGlmIG5vdCBjdXJyZW50X2VsZW1bJ3F0dHknXTogICMgb3IgZmxvYXQoY3VycmVudF9lbGVtWydxdHR5J10pID09IDA6CiAgICAgICAgICAgIGhhc2hNYXAucHV0KCJxdHR5IiwgJycpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgZmxvYXQoY3VycmVudF9lbGVtWydxdHR5J10pID09IDA6CiAgICAgICAgICAgICAgICBoYXNoTWFwLnB1dCgicXR0eSIsICcnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoInF0dHkiLCBzdHIoY3VycmVudF9lbGVtWydxdHR5J10pKQogICAgICAgIGhhc2hNYXAucHV0KCdrZXknLCBjdXJyZW50X2VsZW1bJ2tleSddKQoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQotC+0LLQsNGAINCy0YvQsdC+0YAiKQoKCiAgICBkZWYgX3ByZXBhcmVfdGFibGVfZGF0YShzZWxmLCBkb2NfZGV0YWlscyk6CiAgICAgICAgIyBUT0RPINC00L7QsdCw0LLQuNGC0Ywg0LPRgNGD0L/Qv9C40YDQvtCy0LrRgyDQv9C+INGP0YfQtdC50LrQsNC8CiAgICAgICAgdGFibGVfZGF0YSA9IFt7fV0gIyDQsdGL0LvQviBbe31dCiAgICAgICAgcm93X2ZpbHRlciA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ3Jvd3NfZmlsdGVyJykKCiAgICAgICAgZm9yIHJlY29yZCBpbiBkb2NfZGV0YWlsczoKICAgICAgICAgICAgaWYgcm93X2ZpbHRlciBhbmQgcmVjb3JkWydxdHR5J10gPT0gcmVjb3JkWydxdHR5X3BsYW4nXToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICBwaWMgPSAnI2YwMmEnIGlmIHJlY29yZFsnSXNEb25lJ10gIT0gMCBlbHNlICcjZjAwYycKICAgICAgICAgICAgaWYgcmVjb3JkWydxdHR5J10gPT0gMCBhbmQgcmVjb3JkWydxdHR5X3BsYW4nXSA9PSAwOgogICAgICAgICAgICAgICAgcGljID0gJycKCiAgICAgICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAgICAgJ2tleSc6IHN0cihyZWNvcmRbJ2lkJ10pLAogICAgICAgICAgICAgICAgJ2NlbGwnOiBzdHIocmVjb3JkWydjZWxsX25hbWUnXSksCiAgICAgICAgICAgICAgICAnaWRfY2VsbCc6IHN0cihyZWNvcmRbJ2lkX2NlbGwnXSksCiAgICAgICAgICAgICAgICAnZ29vZF9uYW1lJzogc3RyKHJlY29yZFsnZ29vZF9uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2lkX2dvb2QnOiBzdHIocmVjb3JkWydpZF9nb29kJ10pLAogICAgICAgICAgICAgICAgJ2lkX3Byb3BlcnRpZXMnOiBzdHIocmVjb3JkWydpZF9wcm9wZXJ0aWVzJ10pLAogICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Byb3BlcnRpZXNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdpZF9zZXJpZXMnOiBzdHIocmVjb3JkWydpZF9zZXJpZXMnXSksCiAgICAgICAgICAgICAgICAnc2VyaWVzX25hbWUnOiBzdHIocmVjb3JkWydzZXJpZXNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdpZF91bml0Jzogc3RyKHJlY29yZFsnaWRfdW5pdCddKSwKICAgICAgICAgICAgICAgICd1bml0c19uYW1lJzogc3RyKHJlY29yZFsndW5pdHNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdjb2RlX2FydCc6ICfQmtC+0LQ6ICcgKyBzdHIocmVjb3JkWydjb2RlJ10pLAogICAgICAgICAgICAgICAgJ2FydCc6IHN0cihyZWNvcmRbJ2FydCddKSwKICAgICAgICAgICAgICAgICdwaWN0dXJlJzogcGljLAogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm9wcyA9IFsKICAgICAgICAgICAgICAgICd7fSAnLmZvcm1hdChwcm9kdWN0X3Jvd1snYXJ0J10pIGlmIHByb2R1Y3Rfcm93WydhcnQnXSBlbHNlICcnLAogICAgICAgICAgICAgICAgJyh7fSkgJy5mb3JtYXQocHJvZHVjdF9yb3dbJ3Byb3BlcnRpZXNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1sncHJvcGVydGllc19uYW1lJ10gZWxzZSAnJywKICAgICAgICAgICAgICAgICd7fScuZm9ybWF0KHByb2R1Y3Rfcm93WydzZXJpZXNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1snc2VyaWVzX25hbWUnXSBlbHNlICcnLAogICAgICAgICAgICAgICAgJywge30nLmZvcm1hdChwcm9kdWN0X3Jvd1sndW5pdHNfbmFtZSddKSBpZiBwcm9kdWN0X3Jvd1sndW5pdHNfbmFtZSddIGVsc2UgJycsCiAgICAgICAgICAgIF0KICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ2dvb2RfaW5mbyddID0gJycuam9pbihwcm9wcykKICAgICAgICAgICAgaWYgcmVjb3JkWydxdHR5J10gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eSddID0gc3RyKGludChyZWNvcmRbJ3F0dHknXSkgaWYgcmVjb3JkWydxdHR5J10uaXNfaW50ZWdlcigpIGVsc2UgcmVjb3JkWydxdHR5J10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eSddID0gIjAiCiAgICAgICAgICAgIGlmIHJlY29yZFsncXR0eV9wbGFuJ10gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1sncXR0eV9wbGFuJ10gPSBzdHIoaW50KHJlY29yZFsncXR0eV9wbGFuJ10pIGlmIHJlY29yZFsncXR0eV9wbGFuJ10uaXNfaW50ZWdlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZWNvcmRbJ3F0dHlfcGxhbiddKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ3F0dHlfcGxhbiddID0gIjAiCgogICAgICAgICAgICBwcm9kdWN0X3Jvd1snX2xheW91dCddID0gc2VsZi5fZ2V0X2RvY190YWJsZV9yb3dfdmlldygpCiAgICAgICAgICAgIHNlbGYuX3NldF9iYWNrZ3JvdW5kX3Jvd19jb2xvcihwcm9kdWN0X3JvdykKCiAgICAgICAgICAgIGlmIHNlbGYuX2FkZGVkX2dvb2RzX2hhc19rZXkocHJvZHVjdF9yb3dbJ2tleSddKToKICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEuaW5zZXJ0KDEsIHByb2R1Y3Rfcm93KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3ZpZXcoc2VsZiwgdGFibGVfZGF0YSk6CiAgICAgICAgdGFibGVfdmlldyA9IHdpZGdldHMuQ3VzdG9tVGFibGUoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0K/Rh9C10LnQutCwJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ID0gMQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cd0LDQt9Cy0LDQvdC40LUnKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cf0LvQsNC9JyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQpNCw0LrRgicpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgICAgICksCgogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIHRhYmxlZGF0YT10YWJsZV9kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGFibGVfdmlldwoKCiAgICBkZWYgX2dldF9kb2NfdGFibGVfcm93X3ZpZXcoc2VsZik6CgogICAgICAgIHJvd192aWV3ID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGNlbGwnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ0Bnb29kX25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAZ29vZF9pbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTIsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHF0dHlfcGxhbicsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcXR0eScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcm93X3ZpZXcKCgogICAgZGVmIF9nZXRfZGV0YWlsX2NhcmRzKHNlbGYsIHFfcmVzdWx0KToKICAgICAgICByZXN1bHRzID0gcV9yZXN1bHQKICAgICAgICBoYXNoTWFwID0gc2VsZi5oYXNoX21hcAogICAgICAgIGNhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSdAZ29vZF9uYW1lJywgVGV4dFNpemU9c2VsZi5yc19zZXR0aW5ncy5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEpLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oVmFsdWU9ItCj0LTQsNC70LjRgtGMINGB0YLRgNC+0LrRgyIpLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldyhUZXh0Qm9sZD1UcnVlLCB3ZWlnaHQ9MSwgVmFsdWU9J0Bjb2RlX2FydCcpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVGV4dEJvbGQ9RmFsc2UsIHdlaWdodD0xLCBWYWx1ZT0nQGFydCcpLAogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSJob3Jpem9udGFsIiksCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQn9C70LDQvScsIFRleHRTaXplPXNlbGYucnNfc2V0dGluZ3MuZ2V0KCdnb29kc1RleHRTaXplJykpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5X3BsYW4nKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQpNCw0LrRgicpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5JyksCiAgICAgICAgICAgICAgICAgICAgIyB3aWRnZXRzLlRleHRWaWV3KFZhbHVlID0gJ0AnKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQptC10L3QsCcpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BwaWN0dXJlJyksCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249Imhvcml6b250YWwiKSwgb3JpZW50YXRpb249InZlcnRpY2FsIiksIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkpCgogICAgICAgIGlmIHJlc3VsdHM6CiAgICAgICAgICAgIGhhc2hNYXAucHV0KCdpZF9kb2MnLCBzdHIocmVzdWx0c1swXVsnaWRfZG9jJ10pKQogICAgICAgICAgICBjdXJyZW50X2NlbGwgPSAnJwogICAgICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICBpZiBzZWxmLnJvd19maWx0ZXIgYW5kIHJlY29yZFsncXR0eSddID09IHJlY29yZFsncXR0eV9wbGFuJ106CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIHBpYyA9ICcjZjAyYScgaWYgcmVjb3JkWydJc0RvbmUnXSAhPSAwIGVsc2UgJyNmMDBjJwogICAgICAgICAgICAgICAgaWYgcmVjb3JkWydxdHR5J10gPT0gMCBhbmQgcmVjb3JkWydxdHR5X3BsYW4nXSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHBpYyA9ICcnCgogICAgICAgICAgICAgICAgaWYgY3VycmVudF9jZWxsICE9IHJlY29yZFsnY2VsbF9uYW1lJ106CiAgICAgICAgICAgICAgICAgICAgYyA9IHsiZ3JvdXAiOiByZWNvcmRbJ2NlbGxfbmFtZSddfQogICAgICAgICAgICAgICAgICAgICMgZG9jX2RldGFpbF9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQoYykKICAgICAgICAgICAgICAgICAgICBjYXJkcy5jdXN0b21jYXJkc1snY2FyZHNkYXRhJ10uYXBwZW5kKGMpCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jZWxsID0gcmVjb3JkWydjZWxsX25hbWUnXQoKICAgICAgICAgICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydpZCddKSwKICAgICAgICAgICAgICAgICAgICAnZ29vZF9uYW1lJzogc3RyKHJlY29yZFsnZ29vZF9uYW1lJ10pLAogICAgICAgICAgICAgICAgICAgICdpZF9nb29kJzogc3RyKHJlY29yZFsnaWRfZ29vZCddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfcHJvcGVydGllcyc6IHN0cihyZWNvcmRbJ2lkX3Byb3BlcnRpZXMnXSksCiAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Byb3BlcnRpZXNfbmFtZSddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfc2VyaWVzJzogc3RyKHJlY29yZFsnaWRfc2VyaWVzJ10pLAogICAgICAgICAgICAgICAgICAgICdzZXJpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Nlcmllc19uYW1lJ10pLAogICAgICAgICAgICAgICAgICAgICdpZF91bml0Jzogc3RyKHJlY29yZFsnaWRfdW5pdCddKSwKICAgICAgICAgICAgICAgICAgICAndW5pdHNfbmFtZSc6IHN0cihyZWNvcmRbJ3VuaXRzX25hbWUnXSksCiAgICAgICAgICAgICAgICAgICAgJ2NvZGVfYXJ0JzogJ9Ca0L7QtDogJyArIHN0cihyZWNvcmRbJ2NvZGUnXSksCiAgICAgICAgICAgICAgICAgICAgJ2NlbGxfbmFtZSc6IHN0cihyZWNvcmRbJ2NlbGxfbmFtZSddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfY2VsbCc6IHN0cihyZWNvcmRbJ2lkX2NlbGwnXSksCgogICAgICAgICAgICAgICAgICAgICdxdHR5Jzogc3RyKHJlY29yZFsncXR0eSddIGlmIHJlY29yZFsncXR0eSddIGlzIG5vdCBOb25lIGVsc2UgMCksCiAgICAgICAgICAgICAgICAgICAgJ3F0dHlfcGxhbic6IHN0cihyZWNvcmRbJ3F0dHlfcGxhbiddIGlmIHJlY29yZFsncXR0eV9wbGFuJ10gaXMgbm90IE5vbmUgZWxzZSAwKSwKICAgICAgICAgICAgICAgICAgICAncGljdHVyZSc6IHBpYwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgICAgICAgICAgICBkb2NfZGV0YWlsX2xpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChwcm9kdWN0X3JvdykKICAgICAgICAgICAgICAgIGNhcmRzLmN1c3RvbWNhcmRzWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gRG9jRGV0YWlscyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgojID09PT09PT09PT09PT09PT09PT09IEdvb2RzIHNlbGVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCmNsYXNzIEdvb2RzU2VsZWN0U2NyZWVuKFNjcmVlbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBEb2NTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgIyDQoNC10LbQuNC8INGA0LDQsdC+0YLRiyDRgSDQvNGD0LvRjNGC0LjQvNC10LTQuNCwINC4INGE0LDQudC70LDQvNC4INC/0L4g0YHRgdGL0LvQutCw0LwgKNGE0LvQsNCzIG1tX2xvY2FsKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ21tX2xvY2FsJ10gPSAnJwoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gImJ0bl9vayI6CiAgICAgICAgICAgIGFsbG93X2ZhY3RfaW5wdXQgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnYWxsb3dfZmFjdF9pbnB1dCcpIG9yIEZhbHNlCiAgICAgICAgICAgIGlmIG5vdCBhbGxvd19mYWN0X2lucHV0OgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0JhY2tTY3JlZW4nKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBjdXJyZW50X2VsZW0gPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCdzZWxlY3RlZF9jYXJkX2RhdGEnKQoKICAgICAgICAgICAgcXR0eSA9IHNlbGYuaGFzaF9tYXBbJ3F0dHknXQogICAgICAgICAgICBwcmljZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdwcmljZScpIG9yIDAKCiAgICAgICAgICAgIGlmIHF0dHkgIT0gY3VycmVudF9lbGVtWydxdHR5J106CiAgICAgICAgICAgICAgICB1cGRhdGVfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAnc2VudCc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ3F0dHknOiBmbG9hdChxdHR5KSBpZiBxdHR5IGVsc2UgMCwKICAgICAgICAgICAgICAgICAgICAjICdwcmljZSc6IGZsb2F0KHByaWNlKSAjINCyIEFkciBkb2NzINC90LXRgiDQutC+0LvQvtC90LrQuCDQv9GA0LDQudGBLCDQvdC1INC/0L7QvdGP0YLQvdC+INC90YPQttC90LAg0L7QvdCwINCy0L7QvtCx0YnQtSDQuNC70Lgg0L3QtdGCCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByb3dfaWQgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS51cGRhdGVfZG9jX3RhYmxlX3JvdyhkYXRhPXVwZGF0ZV9kYXRhLCByb3dfaWQ9cm93X2lkKQogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2Nfc3RhdHVzX3RvX3VwbG9hZChzZWxmLmhhc2hfbWFwLmdldCgnaWRfZG9jJykpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnQmFja1NjcmVlbicpCgoKICAgICAgICBlbGlmIGxpc3RlbmVyIGluIFsiYnRuX2NhbmNlbCIsICdCQUNLX0JVVFRPTicsICdPTl9CQUNLX1BSRVNTRUQnXToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2RvYyhzZWxmKToKICAgICAgICBwYXNzCgoKY2xhc3MgQWRyR29vZHNTZWxlY3RTY3JlZW4oR29vZHNTZWxlY3RTY3JlZW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gQWRyRG9jU2VydmljZSgpCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBHb29kcyBzZWxlY3QgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gR29vZHMoUHJvY2VzcykgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY2xhc3MgR29vZHNMaXN0U2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQotC+0LLQsNGA0Ysg0YHQv9C40YHQvtC6JwogICAgcHJvY2Vzc19uYW1lID0gJ9Ci0L7QstCw0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBHb29kc1NlcnZpY2UoKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIGNhcmRzX2RhdGEgPSBzZWxmLl9nZXRfZ29vZHNfbGlzdF9kYXRhKHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9nb29kc190eXBlJykpCiAgICAgICAgZ29vZHNfY2FyZHMgPSBzZWxmLl9nZXRfZ29vZHNfY2FyZHNfdmlldyhjYXJkc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2dvb2RzX2NhcmRzJ10gPSBnb29kc19jYXJkcy50b19qc29uKCkKICAgICAgICBzZWxmLmhhc2hfbWFwWydyZXR1cm5fc2VsZWN0ZWRfZGF0YSddID0gIiIKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmxpc3RlbmVyCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfZ29vZF9pZCcsIHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZScsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQmtCw0YDRgtC+0YfQutCwINGC0L7QstCw0YDQsCIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAic2VsZWN0X2dvb2RzX3R5cGUiOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQktGL0LHQvtGAINC60LDRgtC10LPQvtGA0LjQuCDRgtC+0LLQsNGA0L7QsiIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIkZpbmlzaFByb2Nlc3MiLCAiIikKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJzoKICAgICAgICAgICAgc2VsZi5faWRlbnRpZnlfYmFyY29kZV9nb29kcygpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQoKICAgIGRlZiBfZ2V0X2dvb2RzX2xpc3RfZGF0YShzZWxmLCBzZWxlY3RlZF9nb29kX3R5cGU9Tm9uZSkgLT4gbGlzdDoKCiAgICAgICAgcmVzdWx0cyA9IHNlbGYuc2VydmljZS5nZXRfZ29vZHNfbGlzdF9kYXRhKHNlbGVjdGVkX2dvb2RfdHlwZSkKICAgICAgICBjYXJkc19kYXRhID0gW10KICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgIHNpbmdsZV9jYXJkX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAna2V5JzogcmVjb3JkWydpZCddLAogICAgICAgICAgICAgICAgJ2NvZGUnOiByZWNvcmRbJ2NvZGUnXSwKICAgICAgICAgICAgICAgICduYW1lJzogcmVjb3JkWyduYW1lJ10sCiAgICAgICAgICAgICAgICAnYXJ0JzogcmVjb3JkWydhcnQnXSBpZiByZWNvcmRbJ2FydCddIGVsc2UgIuKAlCIsCiAgICAgICAgICAgICAgICAndW5pdCc6IHJlY29yZFsndW5pdCddIGlmIHJlY29yZFsndW5pdCddIGVsc2UgIuKAlCIsCiAgICAgICAgICAgICAgICAndHlwZV9nb29kJzogcmVjb3JkWyd0eXBlX2dvb2QnXSwKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IHJlY29yZFsnZGVzY3JpcHRpb24nXSBpZiByZWNvcmRbJ2Rlc2NyaXB0aW9uJ10gZWxzZSAi4oCUIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhcmRzX2RhdGEuYXBwZW5kKHNpbmdsZV9jYXJkX2RhdGEpCgogICAgICAgIHJldHVybiBjYXJkc19kYXRhCgogICAgZGVmIF9nZXRfZ29vZHNfY2FyZHNfdmlldyhzZWxmLCBjYXJkc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRleHRTaXplJykKCiAgICAgICAgZ29vZHNfY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BuYW1lJywKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2xlZnQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgIFRleHRDb2xvcj0nIzdBMDA1QycKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAY29kZScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGFydCcsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHVuaXQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0eXBlX2dvb2QnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0ndmVydGljYWwnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPWNhcmRzX2RhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiBnb29kc19jYXJkcwoKICAgIGRlZiBfaWRlbnRpZnlfYmFyY29kZV9nb29kcyhzZWxmKToKICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZScpOgogICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKQogICAgICAgICAgICBpZiBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImJhcmNvZGUiLCBiYXJjb2RlKToKICAgICAgICAgICAgICAgIGl0ZW1faWQgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImJhcmNvZGUiLCBiYXJjb2RlKVswXVsnaWRfZ29vZCddCiAgICAgICAgICAgICAgICBpdGVtX3ZhbHVlcyA9IHNlbGYuc2VydmljZS5nZXRfZ29vZHNfbGlzdF9kYXRhKGl0ZW1faWQ9aXRlbV9pZClbMF0KICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoaXRlbV92YWx1ZXMpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgic2VsZWN0ZWRfZ29vZF9pZCIsIGl0ZW1faWQpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZ29vZF9uYW1lIiwgaXRlbV92YWx1ZXNbJ25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2FydCIsIGl0ZW1fdmFsdWVzWydhcnQnXSBpZiBpdGVtX3ZhbHVlc1snYXJ0J10gZWxzZSAi4oCUIikKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2NvZGUiLCBpdGVtX3ZhbHVlc1snY29kZSddKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfZGVzY3IiLCBpdGVtX3ZhbHVlc1snZGVzY3JpcHRpb24nXSBpZiBpdGVtX3ZhbHVlc1snZGVzY3JpcHRpb24nXSBlbHNlICLigJQiKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfdHlwZSIsIGl0ZW1fdmFsdWVzWyd0eXBlX2dvb2QnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Ca0LDRgNGC0L7Rh9C60LAg0YLQvtCy0LDRgNCwJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoJ9Ci0L7QstCw0YAg0L3QtSDRgNCw0YHQv9C+0LfQvdCw0L0g0L/QviDRiNGC0YDQuNGF0LrQvtC00YMnKQoKCmNsYXNzIFNlbGVjdEdvb2RzVHlwZShTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JLRi9Cx0L7RgCDQutCw0YLQtdCz0L7RgNC40Lgg0YLQvtCy0LDRgNC+0LInCiAgICBwcm9jZXNzX25hbWUgPSAn0KLQvtCy0LDRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuc2VydmljZSA9IEdvb2RzU2VydmljZSgpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIGdvb2RzX3R5cGVzX2RhdGEgPSBzZWxmLl9nZXRfZ29vZHNfdHlwZXNfZGF0YSgpCiAgICAgICAgZ29vZHNfdHlwZXNfY2FyZHMgPSBzZWxmLl9nZXRfZ29vZHNfdHlwZXNfY2FyZHNfdmlldyhnb29kc190eXBlc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2dvb2RzX3R5cGVzX2NhcmRzJ10gPSBnb29kc190eXBlc19jYXJkcy50b19qc29uKCkKICAgICAgICBzZWxmLmhhc2hfbWFwWydyZXR1cm5fc2VsZWN0ZWRfZGF0YSddID0gIiIKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmxpc3RlbmVyCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBjYXJkX2RhdGEgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9kYXRhIiwgZnJvbV9qc29uPVRydWUpCiAgICAgICAgICAgIHR5cGVfaWQgPSBjYXJkX2RhdGFbJ2tleSddCiAgICAgICAgICAgIHR5cGVfbmFtZSA9IGNhcmRfZGF0YVsnbmFtZSddCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RfZ29vZHNfdHlwZScsIHR5cGVfbmFtZSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX2dvb2RzX3R5cGUnLCB0eXBlX2lkKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQotC+0LLQsNGA0Ysg0YHQv9C40YHQvtC6IikKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICJPTl9CQUNLX1BSRVNTRUQiOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0X2dvb2RzX3R5cGUnLCAiIikKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX2dvb2RzX3R5cGUnLCAiIikKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIkJhY2tTY3JlZW4iLCAiIikKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF9nZXRfZ29vZHNfdHlwZXNfZGF0YShzZWxmKToKICAgICAgICBnb29kc190eXBlc19kYXRhX3Jlc3VsdCA9IHNlbGYuc2VydmljZS5nZXRfYWxsX2dvb2RzX3R5cGVzX2RhdGEoKQogICAgICAgIGdvb2RzX3R5cGVzX2RhdGEgPSBbXQogICAgICAgIGZvciByZWNvcmQgaW4gZ29vZHNfdHlwZXNfZGF0YV9yZXN1bHQ6CiAgICAgICAgICAgIHNpbmdsZV9jYXJkX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAna2V5JzogcmVjb3JkWydpZCddLAogICAgICAgICAgICAgICAgJ25hbWUnOiByZWNvcmRbJ25hbWUnXSwKICAgICAgICAgICAgfQogICAgICAgICAgICBnb29kc190eXBlc19kYXRhLmFwcGVuZChzaW5nbGVfY2FyZF9kYXRhKQogICAgICAgIHJldHVybiBnb29kc190eXBlc19kYXRhCgogICAgZGVmIF9nZXRfZ29vZHNfdHlwZXNfY2FyZHNfdmlldyhzZWxmLCBnb29kc190eXBlc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCgogICAgICAgIHR5cGVfY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BuYW1lJywKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2xlZnQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgIFRleHRDb2xvcj0nIzAwMDAwMCcKICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J3ZlcnRpY2FsJywKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT1nb29kc190eXBlc19kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdHlwZV9jYXJkcwoKCmNsYXNzIEl0ZW1DYXJkKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQmtCw0YDRgtC+0YfQutCwINGC0L7QstCw0YDQsCcKICAgIHByb2Nlc3NfbmFtZSA9ICfQotC+0LLQsNGA0YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gR29vZHNTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfYnV0dG9ucyIsICItMSIpICAjINCf0L7QutCwINGB0L/RgNGP0YLQsNC70Lgg0L/QtdGA0LXRhdC+0LQg0Log0L/RgNC+0YbQtdGB0YHQsNC8ICLQvtGB0YLQsNGC0LrQuCIg0LggItGG0LXQvdGLIgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2RhdGEiLCBmcm9tX2pzb249VHJ1ZSkKICAgICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoInNlbGVjdGVkX2dvb2RfaWQiLCBjYXJkX2RhdGFbJ2tleSddKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZ29vZF9uYW1lIiwgY2FyZF9kYXRhWyduYW1lJ10pCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2FydCIsIGNhcmRfZGF0YVsnYXJ0J10pCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2NvZGUiLCBjYXJkX2RhdGFbJ2NvZGUnXSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfZGVzY3IiLCBjYXJkX2RhdGFbJ2Rlc2NyaXB0aW9uJ10gaWYgY2FyZF9kYXRhWydkZXNjcmlwdGlvbiddIGVsc2UgIuKAlCIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX3R5cGUiLCBjYXJkX2RhdGFbJ3R5cGVfZ29vZCddKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIjoKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGVfY2FyZHMnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiYXJjb2RlX2NhcmRzJywgJycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJCYWNrU2NyZWVuIiwgIiIpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZWN0ZWRfZ29vZF9pZCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9nb29kX2lkIikKICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKQogICAgICAgIGlmIGJhcmNvZGU6CiAgICAgICAgICAgIGdvb2RzX2JhcmNvZGUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImJhcmNvZGUiLCBiYXJjb2RlKQogICAgICAgIGVsaWYgc2VsZWN0ZWRfZ29vZF9pZDogICMg0JLRi9Cx0L7RgCDRgtC+0LLQsNGA0LAg0YfQtdGA0LXQtyDQutCw0YDRgtC+0YfQutGDCiAgICAgICAgICAgIGdvb2RzX2JhcmNvZGUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImlkX2dvb2QiLCBzZWxlY3RlZF9nb29kX2lkKQoKICAgICAgICBpZiBnb29kc19iYXJjb2RlOgogICAgICAgICAgICB2YXJpYW50c19jYXJkc19kYXRhID0gc2VsZi5fZ2V0X3ZhcmlhbnRzX2NhcmRzX2RhdGEoZ29vZHNfYmFyY29kZSkKICAgICAgICAgICAgdmFyaWFudHNfY2FyZHMgPSBzZWxmLl9nZXRfdmFyaWFudHNfY2FyZHNfdmlldyh2YXJpYW50c19jYXJkc19kYXRhKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydiYXJjb2RlX2NhcmRzJ10gPSB2YXJpYW50c19jYXJkcy50b19qc29uKCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImxvYWRfaW5mbyIsICIiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJsb2FkX2luZm8iLCAi0JTQsNC90L3Ri9C1INC+INGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60LDRhSDQvtGC0YHRg9GC0YHRgtCy0YPRjtGCIikKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2dldF92YXJpYW50c19jYXJkc19kYXRhKGdvb2RzX2JhcmNvZGUpOgogICAgICAgIHZhcmlhbnRzX2NhcmRzX2RhdGEgPSBbXQogICAgICAgIGkgPSAwCiAgICAgICAgZm9yIGVsZW1lbnQgaW4gZ29vZHNfYmFyY29kZToKICAgICAgICAgICAgYyA9IHsia2V5Ijogc3RyKGkpLCAiYmFyY29kZSI6IGVsZW1lbnRbJ2JhcmNvZGUnXSwKICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6IGVsZW1lbnRbJ3Byb3BlcnR5J10gaWYgZWxlbWVudFsncHJvcGVydHknXSBlbHNlICIiLAogICAgICAgICAgICAgICAgICJ1bml0IjogZWxlbWVudFsndW5pdCddLCAic2VyaWVzIjogZWxlbWVudFsnc2VyaWVzJ119CiAgICAgICAgICAgIHZhcmlhbnRzX2NhcmRzX2RhdGEuYXBwZW5kKGMpCiAgICAgICAgICAgIGkgKz0gMQogICAgICAgIHJldHVybiB2YXJpYW50c19jYXJkc19kYXRhCgogICAgZGVmIF9nZXRfdmFyaWFudHNfY2FyZHNfdmlldyhzZWxmLCBjYXJkc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRleHRTaXplJykKCiAgICAgICAgdmFyaWFudHNfY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcHJvcGVydGllcycsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B1bml0JywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BiYXJjb2RlJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAc2VyaWVzJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRDb2xvcj0nIzAwMDAwMCcKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0ndmVydGljYWwnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPWNhcmRzX2RhdGEKICAgICAgICApCiAgICAgICAgcmV0dXJuIHZhcmlhbnRzX2NhcmRzCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gR29vZHMoUHJvY2VzcykgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gU2V0dGluZ3MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNsYXNzIFNldHRpbmdzU2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQndCw0YHRgtGA0L7QudC60Lgg0Lgg0L7QsdC80LXQvScKICAgIHByb2Nlc3NfbmFtZSA9ICfQn9Cw0YDQsNC80LXRgtGA0YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gZGJfc2VydmljZXMuRG9jU2VydmljZSgpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCd0b2FzdCcpCiAgICAgICAgc2V0dGluZ3Nfa2V5cyA9IFsKICAgICAgICAgICAgJ3VzZV9tYXJrJywKICAgICAgICAgICAgJ2FsbG93X2ZhY3RfaW5wdXQnLAogICAgICAgICAgICAnYWRkX2lmX25vdF9pbl9wbGFuJywKICAgICAgICAgICAgJ3BhdGgnLAogICAgICAgICAgICAnZGVsZXRlX2ZpbGVzJywKICAgICAgICAgICAgJ2FsbG93X292ZXJzY2FuJywKICAgICAgICBdCgogICAgICAgIHB1dF9kYXRhID0ge2tleTogc2VsZi5yc19zZXR0aW5ncy5nZXQoa2V5KSBmb3Iga2V5IGluIHNldHRpbmdzX2tleXN9CiAgICAgICAgcHV0X2RhdGFbJ2lwX2FkciddID0gc2VsZi5fZ2V0X2lwX2FkZHJlc3MoKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBzZWxmLl91cGRhdGVfcnNfc2V0dGluZ3MoKQoKICAgICAgICBsaXN0ZW5lcnMgPSB7CiAgICAgICAgICAgICdidG5faHR0cF9zZXR0aW5ncyc6IGxhbWJkYTogc2VsZi5fc2hvd19zY3JlZW4oJ9Cd0LDRgdGC0YDQvtC50LrQuCBodHRwINGB0L7QtdC00LjQvdC10L3QuNGPJyksCiAgICAgICAgICAgICdidG5fc2l6ZSc6IGxhbWJkYTogc2VsZi5fc2hvd19zY3JlZW4oJ9Cd0LDRgdGC0YDQvtC50LrQuCDQqNGA0LjRhNGC0L7QsicpLAogICAgICAgICAgICAnYnRuX3NvdW5kX3NldHRpbmdzJzogbGFtYmRhOiBzZWxmLl9zaG93X3NjcmVlbign0J3QsNGB0YLRgNC+0LnQutCwINC30LLRg9C60LAnKSwKICAgICAgICAgICAgJ2J0bl90ZXN0X2JhcmNvZGUnOiBsYW1iZGE6IHNlbGYuX3Nob3dfc2NyZWVuKCfQotC10YHRgiDRgdC60LDQvdC10YDQsCcpLAogICAgICAgICAgICAnYnRuX2Vycl9sb2cnOiBsYW1iZGE6IHNlbGYuX3Nob3dfc2NyZWVuKCfQntGI0LjQsdC60LgnKSwKICAgICAgICAgICAgJ2J0bl91cGxvYWRfZG9jcyc6IHNlbGYuX3VwbG9hZF9kb2NzLAogICAgICAgICAgICAnYnRuX3RpbWVyJzogc2VsZi5fbG9hZF9kb2NzLAogICAgICAgICAgICAnT05fQkFDS19QUkVTU0VEJzogbGFtYmRhOiBzZWxmLmhhc2hfbWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKSwKICAgICAgICB9CiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciBpbiBsaXN0ZW5lcnM6CiAgICAgICAgICAgIGxpc3RlbmVyc1tzZWxmLmxpc3RlbmVyXSgpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfdXBsb2FkX2RvY3Moc2VsZik6CiAgICAgICAgaWYgc2VsZi5fY2hlY2tfaHR0cF9zZXR0aW5ncygpOgogICAgICAgICAgICB0aW1lciA9IFRpbWVyKHNlbGYuaGFzaF9tYXAsIHNlbGYucnNfc2V0dGluZ3MpCiAgICAgICAgICAgIHRpbWVyLnVwbG9hZF9hbGxfZG9jcygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50b2FzdCgn0J3QtSDQt9Cw0LTQsNC90Ysg0L3QsNGB0YLRgNC+0LnQutC4INGB0L7QtdC00LjQvdC10L3QuNGPJykKCiAgICBkZWYgX2xvYWRfZG9jcyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9jaGVja19odHRwX3NldHRpbmdzKCk6CiAgICAgICAgICAgIHRpbWVyID0gVGltZXIoc2VsZi5oYXNoX21hcCwgc2VsZi5yc19zZXR0aW5ncykKICAgICAgICAgICAgdGltZXIudGltZXJfb25fc3RhcnQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudG9hc3QoJ9Cd0LUg0LfQsNC00LDQvdGLINC90LDRgdGC0YDQvtC50LrQuCDRgdC+0LXQtNC40L3QtdC90LjRjycpCgogICAgZGVmIF91cGRhdGVfcnNfc2V0dGluZ3Moc2VsZikgLT4gTm9uZToKICAgICAgICB1c2VfbWFyayA9IHNlbGYuaGFzaF9tYXAuZ2V0KCd1c2VfbWFyaycpIG9yICdmYWxzZScKICAgICAgICBwYXRoID0gc2VsZi5oYXNoX21hcC5nZXQoJ3BhdGgnKSBvciAnLy9zdG9yYWdlL2VtdWxhdGVkLzAvQW5kcm9pZC9kYXRhL3J1LnRyYXZlbGZvb2Quc2ltcGxlX3VpLycKICAgICAgICBhbGxvd19mYWN0X2lucHV0ID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnYWxsb3dfZmFjdF9pbnB1dCcpIG9yIEZhbHNlCgogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCd1c2VfbWFyaycsIHVzZV9tYXJrLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdwYXRoJywgcGF0aCwgVHJ1ZSkKICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnYWxsb3dfZmFjdF9pbnB1dCcsIGFsbG93X2ZhY3RfaW5wdXQsIFRydWUpCgogICAgZGVmIF9zaG93X3NjcmVlbihzZWxmLCBzY3JlZW5fbmFtZSkgLT4gTm9uZToKICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKHNjcmVlbl9uYW1lKQoKICAgIGRlZiBfZ2V0X2h0dHBfc2V0dGluZ3Moc2VsZikgLT4gZGljdDoKICAgICAgICBodHRwX3NldHRpbmdzID0gewogICAgICAgICAgICAndXJsJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoIlVSTCIpLAogICAgICAgICAgICAndXNlcic6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdVU0VSJyksCiAgICAgICAgICAgICdwYXNzJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1BBU1MnKSwKICAgICAgICAgICAgJ2RldmljZV9tb2RlbCc6IHNlbGYuaGFzaF9tYXBbJ0RFVklDRV9NT0RFTCddLAogICAgICAgICAgICAnYW5kcm9pZF9pZCc6IHNlbGYuaGFzaF9tYXBbJ0FORFJPSURfSUQnXSwKICAgICAgICAgICAgJ3VzZXJfbmFtZSc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCd1c2VyX25hbWUnKX0KICAgICAgICByZXR1cm4gaHR0cF9zZXR0aW5ncwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZ2V0X2lwX2FkZHJlc3MoKSAtPiBzdHI6CiAgICAgICAgcmVzID0gZ2V0X2lwX2FkZHJlc3MoKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmV0dXJuIHJlcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAn0L3QtdGCINGB0LXRgtC4JwoKICAgIGRlZiBfY2hlY2tfaHR0cF9zZXR0aW5ncyhzZWxmKSAtPiBib29sOgogICAgICAgIGh0dHAgPSBzZWxmLl9nZXRfaHR0cF9zZXR0aW5ncygpCiAgICAgICAgcmV0dXJuIGFsbChbaHR0cC5nZXQoJ3VybCcpLCBodHRwLmdldCgndXNlcicpLCBodHRwLmdldCgncGFzcycpXSkKCgpjbGFzcyBGb250U2l6ZVNldHRpbmdzU2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQndCw0YHRgtGA0L7QudC60Lgg0KjRgNC40YTRgtC+0LInCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBwdXRfZGF0YSA9IHt9CiAgICAgICAgZmllbGRzX2RhdGEgPSB7CiAgICAgICAgICAgICdUaXRsZVRleHRTaXplJzogJ9Cg0LDQt9C80LXRgCDQt9Cw0LPQvtC70L7QstC60LAnLAogICAgICAgICAgICAnQ2FyZFRpdGxlVGV4dFNpemUnOiAn0KDQsNC30LzQtdGAINC30LDQs9C+0LvQvtCy0LrQsCDQutCw0YDRgtC+0YfQutC4JywKICAgICAgICAgICAgIkNhcmREYXRlVGV4dFNpemUiOiAn0JTQsNC90L3Ri9C1INC60LDRgNGC0L7Rh9C60LgnLAogICAgICAgICAgICAnQ2FyZFRleHRTaXplJzogJ9Cg0LDQt9C80LXRgCDRgtC10LrRgdGC0LAg0Y3Qu9C10LzQtdC90YLQvtCyJywKICAgICAgICAgICAgJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnOiAn0JfQsNCz0L7Qu9C+0LLQvtC6INGC0L7QstCw0YDQsCcsCiAgICAgICAgICAgICdnb29kc1RleHRTaXplJzogJ9Ci0L7QstCw0YAnLAogICAgICAgICAgICAnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJzogJ9Ch0LXRgNC40Lgg0YHQstC+0LnRgdGC0LLQsCcsCiAgICAgICAgICAgICdEb2NUeXBlQ2FyZFRleHRTaXplJzogJ9Ci0LjQvyDQtNC+0LrRg9C80LXQvdGC0LAnLAogICAgICAgICAgICAndGl0bGVEb2NUeXBlQ2FyZFRleHRTaXplJzogJ9Cd0LDQt9Cy0LDQvdC40LUg0LTQvtC60YPQvNC10L3RgtCwINCyINC60LDRgNGC0L7Rh9C60LUnCiAgICAgICAgfQoKICAgICAgICBmb3IgZmllbGQsIGhpbnQgaW4gZmllbGRzX2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgcHV0X2RhdGFbZmllbGRdID0gd2lkZ2V0cy5Nb2Rlcm5GaWVsZCgKICAgICAgICAgICAgICAgIGhpbnQ9aGludCwKICAgICAgICAgICAgICAgIGRlZmF1bHRfdGV4dD1zZWxmLnJzX3NldHRpbmdzLmdldChmaWVsZCkgb3IgJycKICAgICAgICAgICAgKS50b19qc29uKCkKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXRfZGF0YShwdXRfZGF0YSkKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAnYnRuX29uX3NhdmUnOgogICAgICAgICAgICBzYXZlX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAnVGl0bGVUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ1RpdGxlVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdDYXJkVGl0bGVUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ0NhcmRUaXRsZVRleHRTaXplJ10sCiAgICAgICAgICAgICAgICAnQ2FyZFRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnQ2FyZFRleHRTaXplJ10sCiAgICAgICAgICAgICAgICAnQ2FyZERhdGVUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ0NhcmREYXRlVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdHb29kc0NhcmRUaXRsZVRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnR29vZHNDYXJkVGl0bGVUZXh0U2l6ZSddLAogICAgICAgICAgICAgICAgJ2dvb2RzVGV4dFNpemUnOiBzZWxmLmhhc2hfbWFwWydnb29kc1RleHRTaXplJ10sCiAgICAgICAgICAgICAgICAnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJzogc2VsZi5oYXNoX21hcFsnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJ10sCiAgICAgICAgICAgICAgICAnRG9jVHlwZUNhcmRUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ0RvY1R5cGVDYXJkVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnOiBzZWxmLmhhc2hfbWFwWyd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnXSwKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIGssIHYgaW4gc2F2ZV9kYXRhLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dChrLCB2LCBUcnVlKQoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ2J0bl9vbl9jYW5jZWwnIG9yIHNlbGYubGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdCYWNrU2NyZWVuJywgJycpCgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ25vUmVmcmVzaCddID0gJycKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgoKY2xhc3MgQmFyY29kZVRlc3RTY3JlZW4oU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Ci0LXRgdGCINGB0LrQsNC90LXRgNCwJwogICAgcHJvY2Vzc19uYW1lID0gJ9Cf0LDRgNCw0LzQtdGC0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lcnMgPSB7CiAgICAgICAgICAgICdiYXJjb2RlJzogc2VsZi5fYmFyY29kZV9zY2FubmVkLAogICAgICAgICAgICAnT05fQkFDS19QUkVTU0VEJzogc2VsZi5fYmFja19zY3JlZW4sCiAgICAgICAgICAgICdCQUNLX0JVVFRPTic6IHNlbGYuX2JhY2tfc2NyZWVuLAogICAgICAgIH0KCiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciBpbiBsaXN0ZW5lcnM6CiAgICAgICAgICAgIGxpc3RlbmVyc1tzZWxmLmxpc3RlbmVyXSgpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfYmFja19zY3JlZW4oc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0JhY2tTY3JlZW4nLCAnJykKCiAgICBkZWYgX2JhcmNvZGVfc2Nhbm5lZChzZWxmKToKICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhJykKICAgICAgICBpZiBub3QgYmFyY29kZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGJhcmNvZGVfcGFyc2VyID0gQmFyY29kZVBhcnNlcigpCiAgICAgICAgcmVzdWx0ID0gYmFyY29kZV9wYXJzZXIucGFyc2UoYmFyY29kZSkKICAgICAgICBmaWVsZHNfY291bnQgPSA3CgogICAgICAgIGtleXNfbGlzdCA9IFsnRVJST1InLCAnR1RJTicsICdTRVJJQUwnLCAnRnVsbENvZGUnLCAnQkFSQ09ERScsICdTQ0hFTUUnLCAnRVhQSVJZJywgJ0JBVENIJywgJ05IUk4nLCAnQ0hFQ0snLAogICAgICAgICAgICAgICAgICAgICAnV0VJR0hUJywgJ1BQTiddCgogICAgICAgIHZhbHVlcyA9IFtmJ3trZXl9OiB7cmVzdWx0W2tleV19JyBmb3Iga2V5IGluIGtleXNfbGlzdCBpZiByZXN1bHQuZ2V0KGtleSkgaXMgbm90IE5vbmVdCgogICAgICAgIHB1dF9kYXRhID0gewogICAgICAgICAgICBmJ2ZsZF97aSsxfSc6IHZhbHVlc1tpXSBpZiBsZW4odmFsdWVzKSA+IGkgZWxzZSAnJwogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBmaWVsZHNfY291bnQpCiAgICAgICAgfQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKCmNsYXNzIEh0dHBTZXR0aW5nc1NjcmVlbihTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0J3QsNGB0YLRgNC+0LnQutC4IGh0dHAg0YHQvtC10LTQuNC90LXQvdC40Y8nCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuaHNfc2VydmljZSA9IE5vbmUKCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgndG9hc3QnKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2J0bl90ZXN0X2Nvbm5lY3Rpb24nXSA9ICfQotC10YHRgiDRgdC+0LXQtNC40L3QtdC90LjRjycKICAgICAgICBodHRwX3NldHRpbmdzID0gc2VsZi5fZ2V0X2h0dHBfc2V0dGluZ3MoKQoKICAgICAgICBwdXRfZGF0YSA9IHsKICAgICAgICAgICAgJ3VybCc6IHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0n0JDQtNGA0LXRgSDRgdC10YDQstC10YDQsCcsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWyd1cmwnXSBvciAnJyksCiAgICAgICAgICAgICd1c2VyJzogc2VsZi5fZ2V0X21vZGVybl9maWVsZChoaW50PSfQn9C+0LvRjNC30L7QstCw0YLQtdC70YwnLCBkZWZhdWx0X3RleHQ9aHR0cF9zZXR0aW5nc1sndXNlciddIG9yICcnKSwKICAgICAgICAgICAgJ3Bhc3MnOiBzZWxmLl9nZXRfbW9kZXJuX2ZpZWxkKGhpbnQ9J9Cf0LDRgNC+0LvRjCcsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWydwYXNzJ10gb3IgJycsIHBhc3N3b3JkPVRydWUpLAogICAgICAgICAgICAndXNlcl9uYW1lJzogc2VsZi5fZ2V0X21vZGVybl9maWVsZChoaW50PSfQktCw0YjQtSDQuNC80Y8g0LTQu9GPINC40LTQtdC90YLQuNGE0LjQutCw0YbQuNC4INCyIDHQoScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWyd1c2VyX25hbWUnXSBvciAnJyksCiAgICAgICAgfQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0X2RhdGEocHV0X2RhdGEpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgbGlzdGVuZXJzID0gewogICAgICAgICAgICAnYnRuX3Rlc3RfY29ubmVjdGlvbic6IHNlbGYuX3Rlc3RfY29ubmVjdGlvbiwKICAgICAgICAgICAgJ2J0bl9zYXZlJzogc2VsZi5fc2F2ZV9zZXR0aW5ncywKICAgICAgICAgICAgJ2JhcmNvZGUnOiBzZWxmLl9iYXJjb2RlX3NjYW5uZWQsCiAgICAgICAgICAgICdidG5fY2FuY2VsJzogc2VsZi5fYmFja19zY3JlZW4sCiAgICAgICAgICAgICdPTl9CQUNLX1BSRVNTRUQnOiBzZWxmLl9iYWNrX3NjcmVlbiwKICAgICAgICB9CiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciBpbiBsaXN0ZW5lcnM6CiAgICAgICAgICAgIGxpc3RlbmVyc1tzZWxmLmxpc3RlbmVyXSgpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfdGVzdF9jb25uZWN0aW9uKHNlbGYpOgogICAgICAgIHNlbGYuaHNfc2VydmljZSA9IGhzX3NlcnZpY2VzLkhzU2VydmljZShzZWxmLl9nZXRfaHR0cF9zZXR0aW5ncygpKQoKICAgICAgICBpZiBzZWxmLl9jaGVja19odHRwX3NldHRpbmdzKCk6CiAgICAgICAgICAgIHNlbGYuaHNfc2VydmljZS5jb21tdW5pY2F0aW9uX3Rlc3QoKQogICAgICAgICAgICByZXN1bHQgPSBzZWxmLmhzX3NlcnZpY2UuaHR0cF9hbnN3ZXIKCiAgICAgICAgICAgIGlmIHJlc3VsdC51bmF1dGhvcml6ZWQ6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQntGI0LjQsdC60LAg0LDQstGC0L7RgNC40LfQsNGG0LjQuCDRgdC10YDQstC10YDQsCAx0KEnKQogICAgICAgICAgICBlbGlmIHJlc3VsdC5mb3JiaWRkZW46CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQl9Cw0L/RgNC+0YEg0L3QsCDQsNCy0YLQvtGA0LjQt9Cw0YbQuNGOINC/0YDQuNC90Y/RgicpCiAgICAgICAgICAgIGVsaWYgcmVzdWx0LmVycm9yOgogICAgICAgICAgICAgICAgc2VsZi50b2FzdCgn0J3QtSDRg9C00LDQu9C+0YHRjCDRg9GB0YLQsNC90L7QstC40YLRjCDRgdC+0LXQtNC40L3QtdC90LjQtScpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQodC+0LXQtNC40L3QtdC90LjQtSDRg9GB0YLQsNC90L7QstC70LXQvdC+JykKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50b2FzdCgi0J3QtSDRg9C60LDQt9Cw0L3RiyDQvdCw0YHRgtGA0L7QudC60LggSFRUUCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INGB0LXRgNCy0LXRgNGDIikKCiAgICBkZWYgX3NhdmVfc2V0dGluZ3Moc2VsZik6CiAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ1VSTCcsIHNlbGYuaGFzaF9tYXBbJ3VybCddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdVU0VSJywgc2VsZi5oYXNoX21hcFsndXNlciddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdQQVNTJywgc2VsZi5oYXNoX21hcFsncGFzcyddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBzZWxmLmhhc2hfbWFwWyd1c2VyX25hbWUnXSwgVHJ1ZSkKCiAgICAgICAgc2VsZi5fYmFja19zY3JlZW4oKQoKICAgIGRlZiBfYmFyY29kZV9zY2FubmVkKHNlbGYpOgogICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZV9jYW1lcmEyJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJhcmNfc3RydWN0ID0ganNvbi5sb2FkcyhiYXJjb2RlKQoKICAgICAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ1VSTCcsIGJhcmNfc3RydWN0LmdldCgndXJsJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdVU0VSJywgYmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdQQVNTJywgYmFyY19zdHJ1Y3QuZ2V0KCdwYXNzJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBiYXJjX3N0cnVjdC5nZXQoJ3VzZXJfbmFtZScpLCBUcnVlKQoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3VybCcsIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXJsJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgndXJsJykpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndXNlcicsIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXNlcicsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VzZXInKSkpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwYXNzJywgc2VsZi5fZ2V0X21vZGVybl9maWVsZChoaW50PSdwYXNzJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgncGFzcycpKSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3VzZXJfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXNlcl9uYW1lJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgndXNlcl9uYW1lJykpKQogICAgICAgIGV4Y2VwdCAoSlNPTkRlY29kZUVycm9yLCBBdHRyaWJ1dGVFcnJvcikgYXMgZToKICAgICAgICAgICAgc2VsZi50b2FzdCgn0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIgUVIt0LrQvtC00LAnKQoKCiAgICBkZWYgX2JhY2tfc2NyZWVuKHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdCYWNrU2NyZWVuJywgJycpCgogICAgZGVmIF9nZXRfbW9kZXJuX2ZpZWxkKHNlbGYsICoqZGF0YSk6CiAgICAgICAgcmV0dXJuIHdpZGdldHMuTW9kZXJuRmllbGQoKipkYXRhKS50b19qc29uKCkKCiAgICBkZWYgX2NoZWNrX2h0dHBfc2V0dGluZ3Moc2VsZikgLT4gYm9vbDoKICAgICAgICBodHRwID0gc2VsZi5fZ2V0X2h0dHBfc2V0dGluZ3MoKQogICAgICAgIHJldHVybiBhbGwoW2h0dHAuZ2V0KCd1cmwnKSwgaHR0cC5nZXQoJ3VzZXInKSwgaHR0cC5nZXQoJ3Bhc3MnKV0pCgogICAgZGVmIF9nZXRfaHR0cF9zZXR0aW5ncyhzZWxmKToKICAgICAgICBodHRwX3NldHRpbmdzID0gewogICAgICAgICAgICAndXJsJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoIlVSTCIpLAogICAgICAgICAgICAndXNlcic6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdVU0VSJyksCiAgICAgICAgICAgICdwYXNzJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1BBU1MnKSwKICAgICAgICAgICAgJ2RldmljZV9tb2RlbCc6IHNlbGYuaGFzaF9tYXBbJ0RFVklDRV9NT0RFTCddLAogICAgICAgICAgICAnYW5kcm9pZF9pZCc6IHNlbGYuaGFzaF9tYXBbJ0FORFJPSURfSUQnXSwKICAgICAgICAgICAgJ3VzZXJfbmFtZSc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCd1c2VyX25hbWUnKX0KICAgICAgICByZXR1cm4gaHR0cF9zZXR0aW5ncwoKCmNsYXNzIEVycm9yTG9nU2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQntGI0LjQsdC60LgnCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuc2VydmljZSA9IEVycm9yU2VydmljZSgpCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0ge30KCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKICAgICAgICBkYXRlX3NvcnQgPSBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9kYXRlX3NvcnQnXQogICAgICAgIGVycm9yc190YWJsZV9kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF9hbGxfZXJyb3JzKGRhdGVfc29ydCkKICAgICAgICB0YWJsZV9yYXdzID0gc2VsZi5fZ2V0X2Vycm9yc190YWJsZV9yb3dzKGVycm9yc190YWJsZV9kYXRhKQogICAgICAgIHRhYmxlX3ZpZXcgPSBzZWxmLl9nZXRfZXJyb3JzX3RhYmxlX3ZpZXcodGFibGVfcmF3cykKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZXJyb3JfbG9nX3RhYmxlIiwgdGFibGVfdmlldy50b19qc29uKCkpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZGF0ZV9zb3J0X3NlbGVjdCddID0gJ9Cd0L7QstGL0LU7Q9GC0LDRgNGL0LUnCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCgogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gImJ0bl9jbGVhcl9lcnIiOgogICAgICAgICAgICBzZWxmLnNlcnZpY2UuY2xlYXIoKQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93U2NyZWVuIiwgItCd0LDRgdGC0YDQvtC50LrQuCDQuCDQvtCx0LzQtdC9IikKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICJkYXRlX3NvcnRfY2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9kYXRlX3NvcnQnXSA9IHNlbGYuaGFzaF9tYXBbImRhdGVfc29ydF9jbGljayJdCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQoKICAgIGRlZiBfZ2V0X2Vycm9yc190YWJsZV9yb3dzKHNlbGYsIGVycm9yc190YWJsZV9kYXRhKToKICAgICAgICB0YWJsZV9kYXRhID0gW3t9XQogICAgICAgIGkgPSAxCiAgICAgICAgZm9yIHJlY29yZCBpbiBlcnJvcnNfdGFibGVfZGF0YToKICAgICAgICAgICAgZXJyb3Jfcm93ID0geyJrZXkiOiBpLCAibWVzc2FnZSI6IHJlY29yZFswXSwgInRpbWUiOiByZWNvcmRbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAnX2xheW91dCc6IHNlbGYuX2dldF9lcnJvcnNfdGFibGVfcm93X2xheW91dCgpfQogICAgICAgICAgICB0YWJsZV9kYXRhLmFwcGVuZChlcnJvcl9yb3cpCiAgICAgICAgICAgIGkgKz0gMQoKICAgICAgICByZXR1cm4gdGFibGVfZGF0YQoKICAgIGRlZiBfZ2V0X2Vycm9yc190YWJsZV92aWV3KHNlbGYsIHRhYmxlX3Jvd3MpOgogICAgICAgIHRhYmxlX3ZpZXcgPSB3aWRnZXRzLkN1c3RvbVRhYmxlKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9CS0YDQtdC80Y8nKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ch0L7QvtCx0YnQtdC90LjQtScpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0zCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgdGFibGVkYXRhPXRhYmxlX3Jvd3MKICAgICAgICApCiAgICAgICAgcmV0dXJuIHRhYmxlX3ZpZXcKCiAgICBkZWYgX2dldF9lcnJvcnNfdGFibGVfcm93X2xheW91dChzZWxmKToKICAgICAgICByb3dfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0aW1lJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSd3cmFwX2NvbnRlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0wCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQG1lc3NhZ2UnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSd3cmFwX2NvbnRlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTMsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0ZGRkZGRicsCiAgICAgICAgICAgIGhlaWdodD0nd3JhcF9jb250ZW50JywKICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHJvd192aWV3CgogICAgY2xhc3MgTGluZWFyTGF5b3V0KHdpZGdldHMuTGluZWFyTGF5b3V0KToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIHNlbGYub3JpZW50YXRpb24gPSAndmVydGljYWwnCiAgICAgICAgICAgIHNlbGYuaGVpZ2h0ID0gIm1hdGNoX3BhcmVudCIKICAgICAgICAgICAgc2VsZi53aWR0aCA9ICJtYXRjaF9wYXJlbnQiCiAgICAgICAgICAgIHNlbGYuU3Ryb2tlV2lkdGggPSAxCgogICAgY2xhc3MgVGV4dFZpZXcod2lkZ2V0cy5UZXh0Vmlldyk6CiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCiAgICAgICAgICAgIHNlbGYuVGV4dFNpemUgPSAnMTUnCiAgICAgICAgICAgIHNlbGYuVGV4dEJvbGQgPSBUcnVlCiAgICAgICAgICAgIHNlbGYud2lkdGggPSAnbWF0Y2hfcGFyZW50JwogICAgICAgICAgICBzZWxmLlZhbHVlID0gdmFsdWUKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBTZXR0aW5ncyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgoKIyA9PT09PT09PT09PT09PT09PT09PSBEZWJ1ZyBzZXR0aW5ncyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCmNsYXNzIERlYnVnU2V0dGluZ3NTY3JlZW4oU2NyZWVuKToKICAgIHByb2Nlc3NfbmFtZSA9ICfQntGC0LvQsNC00LrQsCcKICAgIHNjcmVlbl9uYW1lID0gJ9Ce0YLQu9Cw0LTQvtGH0L3Ri9C5INGN0LrRgNCw0L0nCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5oc19zZXJ2aWNlID0gaHNfc2VydmljZXMuRGVidWdTZXJ2aWNlCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIGRlYnVnX2hvc3RfaXAgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnZGVidWdfaG9zdF9pcCcpIG9yIHNlbGYuaGFzaF9tYXBbJ2lwX2hvc3QnXQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KAogICAgICAgICAgICAnaXBfaG9zdCcsCiAgICAgICAgICAgIHsnaGludCc6ICdJUC3QsNC00YDQtdGBINC00LvRjyDQstGL0LPRgNGD0LfQutC4INCx0LDQt9GLL9C70L7Qs9CwJywgJ2RlZmF1bHRfdGV4dCc6IGRlYnVnX2hvc3RfaXAgb3IgJyd9LAogICAgICAgICAgICB0b19qc29uPVRydWUpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGxpc3RlbmVycyA9IHsKICAgICAgICAgICAgJ2J0bl9jb3B5X2Jhc2UnOiBzZWxmLl9jb3B5X2Jhc2UsCiAgICAgICAgICAgICdidG5fdW5sb2FkX2xvZyc6IHNlbGYuX3VubG9hZF9sb2csCiAgICAgICAgICAgICdidG5fbG9jYWxfZmlsZXMnOiBzZWxmLl9sb2NhbF9maWxlcywKICAgICAgICAgICAgJ09OX0JBQ0tfUFJFU1NFRCc6IHNlbGYuX29uX2JhY2tfcHJlc3NlZAogICAgICAgIH0KICAgICAgICBpZiBzZWxmLmxpc3RlbmVyIGluIGxpc3RlbmVyczoKICAgICAgICAgICAgbGlzdGVuZXJzW3NlbGYubGlzdGVuZXJdKCkKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF9jb3B5X2Jhc2Uoc2VsZik6CiAgICAgICAgaXBfaG9zdCA9IHNlbGYuaGFzaF9tYXBbJ2lwX2hvc3QnXQogICAgICAgIHBhdGhfdG9fZGF0YWJhc2VzID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3BhdGhfdG9fZGF0YWJhc2VzJykKICAgICAgICBiYXNlX25hbWUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnc3FsaXRlX25hbWUnKQogICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihwYXRoX3RvX2RhdGFiYXNlcywgYmFzZV9uYW1lKQoKICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShmaWxlX3BhdGgpOgogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncmInKSBhcyBmOgogICAgICAgICAgICAgICAgcmVzID0gc2VsZi5oc19zZXJ2aWNlKGlwX2hvc3QpLmV4cG9ydF9kYXRhYmFzZShmKQoKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzX2NvZGUnXSA9PSAyMDA6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0JHQsNC30LAgU1FMaXRlINGD0YHQv9C10YjQvdC+INCy0YvQs9GA0YPQttC10L3QsCcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjycpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0KTQsNC50Lsg0L3QtSDQvdCw0LnQtNC10L0nKQoKICAgIGRlZiBfdW5sb2FkX2xvZyhzZWxmKToKICAgICAgICBpcF9ob3N0ID0gc2VsZi5oYXNoX21hcFsnaXBfaG9zdCddCgogICAgICAgIHBhdGhfdG9fZGF0YWJhc2VzID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3BhdGhfdG9fZGF0YWJhc2VzJykKICAgICAgICBiYXNlX25hbWUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnbG9nX25hbWUnKQogICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihwYXRoX3RvX2RhdGFiYXNlcywgYmFzZV9uYW1lKQoKICAgICAgICAjIFRPRE8g0JfQtNC10YHRjCDQvdGD0LbQvdC+INCx0YPQtNC10YIg0LLRi9C30YvQstCw0YLRjCDQutC70LDRgdGBLdGB0LXRgNCy0LjRgSDQtNC70Y8g0LLQt9Cw0LjQvNC+0LTQtdC50YHRgtCy0LjRjyDRgSBUaW55REIKICAgICAgICBmcm9tIHRpbnlkYiBpbXBvcnQgVGlueURCCgogICAgICAgIGRiID0gVGlueURCKGZpbGVfcGF0aCkKICAgICAgICBkYXRhID0gZGIuYWxsKCkKCiAgICAgICAgcmVzID0gc2VsZi5oc19zZXJ2aWNlKGlwX2hvc3QpLmV4cG9ydF9sb2coZGF0YSkKICAgICAgICBpZiByZXNbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQm9C+0LMg0YPRgdC/0LXRiNC90L4g0LLRi9Cz0YDRg9C20LXQvScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0J7RiNC40LHQutCwINGB0L7QtdC00LjQvdC10L3QuNGPJykKCiAgICBkZWYgX2xvY2FsX2ZpbGVzKHNlbGYpOgogICAgICAgIGltcG9ydCB1aV9jc3YKCiAgICAgICAgcGF0aCA9IHNlbGYuaGFzaF9tYXBbJ3BhdGgnXQogICAgICAgIGRlbGV0ZV9maWxlcyA9IHNlbGYuaGFzaF9tYXBbJ2RlbGV0ZV9maWxlcyddCgogICAgICAgIGlmIG5vdCBkZWxldGVfZmlsZXM6CiAgICAgICAgICAgIGRlbGV0ZV9maWxlcyA9ICcwJwogICAgICAgIGlmIG5vdCBwYXRoOgogICAgICAgICAgICBwYXRoID0gJy8vc3RvcmFnZS9lbXVsYXRlZC8wL2Rvd25sb2FkLycKCiAgICAgICAgcmV0X3RleHQgPSB1aV9jc3YubGlzdF9mb2xkZXIocGF0aCwgZGVsZXRlX2ZpbGVzKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KHJldF90ZXh0KQoKICAgIGRlZiBfb25fYmFja19wcmVzc2VkKHNlbGYpOgogICAgICAgIGlwX2hvc3QgPSBzZWxmLmhhc2hfbWFwWydpcF9ob3N0J10KICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnZGVidWdfaG9zdF9pcCcsIGlwX2hvc3QsIFRydWUpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0ZpbmlzaFByb2Nlc3MnLCAnJykKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBEZWJ1ZyBzZXR0aW5ncyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgoKIyA9PT09PT09PT09PT09PT09PT09PSBUaW1lciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCmNsYXNzIFRpbWVyOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc2VsZi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncyA9IHJzX3NldHRpbmdzCiAgICAgICAgc2VsZi5odHRwX3NldHRpbmdzID0gc2VsZi5fZ2V0X2h0dHBfc2V0dGluZ3MoKQogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IERvY1NlcnZpY2UoKQogICAgICAgIHNlbGYuaHR0cF9zZXJ2aWNlID0gSHNTZXJ2aWNlKHNlbGYuaHR0cF9zZXR0aW5ncykKCiAgICBkZWYgdGltZXJfb25fc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5sb2FkX2RvY3MoKQogICAgICAgIHNlbGYudXBsb2FkX2FsbF9kb2NzKCkKCiAgICBkZWYgc2F2ZV9kYXRhX3RvX2RiKHNlbGYsIGRhdGE6IGRpY3QpOgogICAgICAgICMgVE9ETyDQtNC+0LTQtdC70LDRgtGMINGH0LXRgNC10Lcg0L/QvtC90LgKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRhYmxlX2xpc3QgPSBbCiAgICAgICAgICAgICdSU19jb3VudHJhZ2VudHMnLAogICAgICAgICAgICAnUlNfd2FyZWhvdXNlcycsCiAgICAgICAgICAgICdSU19jZWxscycsCiAgICAgICAgICAgICdSU190eXBlc19nb29kcycsCiAgICAgICAgICAgICdSU19jbGFzc2lmaWVyX3VuaXRzJywKICAgICAgICAgICAgJ1JTX2dvb2RzJywKICAgICAgICAgICAgJ1JTX3Byb3BlcnRpZXMnLAogICAgICAgICAgICAnUlNfc2VyaWVzJywKICAgICAgICAgICAgJ1JTX3VuaXRzJywKICAgICAgICAgICAgJ1JTX3ByaWNlX3R5cGVzJywKICAgICAgICAgICAgJ1JTX3ByaWNlcycsCiAgICAgICAgICAgICdSU19iYXJjb2RlcycsCiAgICAgICAgXQoKICAgICAgICBmb3IgdGFibGVfbmFtZSBpbiB0YWJsZV9saXN0OgogICAgICAgICAgICB0YWJsZSA9IGRhdGEuZ2V0KHRhYmxlX25hbWUsIHt9KQogICAgICAgICAgICBzZXJ2aWNlID0gc2VsZi5kYl9zZXJ2aWNlKE5vbmUsIHRhYmxlX25hbWU9dGFibGVfbmFtZSkKICAgICAgICAgICAgZm9yIGl0ZW1fZGF0YSBpbiB0YWJsZToKICAgICAgICAgICAgICAgIHNlcnZpY2UudXBkYXRlKGl0ZW1fZGF0YSkKCiAgICBkZWYgcHV0X25vdGlmaWNhdGlvbihzZWxmLCB0ZXh0LCB0aXRsZT1Ob25lKToKICAgICAgICBzZWxmLmhhc2hfbWFwLm5vdGlmaWNhdGlvbih0ZXh0LCB0aXRsZSkKCiAgICBkZWYgX2dldF9odHRwX3NldHRpbmdzKHNlbGYpOgogICAgICAgIGh0dHBfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICd1cmwnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgiVVJMIiksCiAgICAgICAgICAgICd1c2VyJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1VTRVInKSwKICAgICAgICAgICAgJ3Bhc3MnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnUEFTUycpLAogICAgICAgICAgICAnZGV2aWNlX21vZGVsJzogc2VsZi5oYXNoX21hcFsnREVWSUNFX01PREVMJ10sCiAgICAgICAgICAgICdhbmRyb2lkX2lkJzogc2VsZi5oYXNoX21hcFsnQU5EUk9JRF9JRCddLAogICAgICAgICAgICAndXNlcl9uYW1lJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3VzZXJfbmFtZScpfQogICAgICAgIHJldHVybiBodHRwX3NldHRpbmdzCgogICAgZGVmIGxvYWRfZG9jcyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9jaGVja19odHRwX3NldHRpbmdzKCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRvY3NfZGF0YSA9IHNlbGYuaHR0cF9zZXJ2aWNlLmdldF9kYXRhKCkKICAgICAgICAgICAgICAgIGlmIGRvY3NfZGF0YS5nZXQoJ2RhdGEnKToKICAgICAgICAgICAgICAgICAgICBleGlzdGluZ19kb2NzID0gc2VsZi5kYl9zZXJ2aWNlLmdldF9leGlzdGluZ19kb2NzKCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2UudXBkYXRlX2RhdGFfZnJvbV9qc29uKGRvY3NfZGF0YVsnZGF0YSddKQogICAgICAgICAgICAgICAgICAgIGRvY3NfYWZ0ZXJfbG9hZCA9IHNlbGYuZGJfc2VydmljZS5nZXRfZXhpc3RpbmdfZG9jcygpCiAgICAgICAgICAgICAgICAgICAgZGlmZiA9IFtmJ3t4WzFdfToge3hbMF19JyBmb3IgeCBpbiBkb2NzX2FmdGVyX2xvYWQgaWYgeCBub3QgaW4gZXhpc3RpbmdfZG9jc10KICAgICAgICAgICAgICAgICAgICBpZiBkaWZmOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KHN0cihkaWZmKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wdXRfbm90aWZpY2F0aW9uKHRleHQ9IiwgIi5qb2luKGRpZmYpLCB0aXRsZT0i0JfQsNCz0YDRg9C20LXQvdGLINC00L7QutGD0LzQtdC90YLRizoiKQoKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5kYl9zZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhmJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INC00L7QutGD0LzQtdC90YLQvtCyOiB7ZX0nKQoKICAgIGRlZiB1cGxvYWRfYWxsX2RvY3Moc2VsZik6CiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi51cGxvYWRfZG9jcygpCiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gQWRyRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi51cGxvYWRfZG9jcygpCgoKICAgIGRlZiBsb2FkX2FsbF9kb2NzKHNlbGYpOgogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IERvY1NlcnZpY2UoKQogICAgICAgIHNlbGYubG9hZF9kb2NzKCkKICAgICAgICBzZWxmLmRiX3NlcnZpY2UgPSBBZHJEb2NTZXJ2aWNlKCkKICAgICAgICBzZWxmLmxvYWRfZG9jcygpCiAgICBkZWYgdXBsb2FkX2RvY3Moc2VsZik6CgogICAgICAgIGlmIHNlbGYuX2NoZWNrX2h0dHBfc2V0dGluZ3MoKToKICAgICAgICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgIGRvY3NfZ29vZHNfZm9ybWF0dGVkX2xpc3QgPSBzZWxmLmRiX3NlcnZpY2UuZ2V0X2RvY3NfYW5kX2dvb2RzX2Zvcl91cGxvYWQoKQogICAgICAgICAgICAgICAgaWYgZG9jc19nb29kc19mb3JtYXR0ZWRfbGlzdDoKICAgICAgICAgICAgICAgICAgICBhbnN3ZXIgPSBzZWxmLmh0dHBfc2VydmljZS5zZW5kX2RvY3VtZW50cyhkb2NzX2dvb2RzX2Zvcm1hdHRlZF9saXN0KQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zd2VyLmdldCgnRXJyb3InKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHV0X25vdGlmaWNhdGlvbih0ZXh0PSfQntGI0LjQsdC60LAg0L/RgNC4INC+0YLQv9GA0LDQstC60LUg0LTQvtC60YPQvNC10L3RgtC+0LInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyX3RleHQgPSBhbnN3ZXIuZ2V0KCd0ZXh0JykuZGVjb2RlKCd1dGYtOCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFuc3dlci5nZXQoIkVycm9yIikgb3IgJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2Vycl90ZXh0fVxue2Vycm9yfScpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NzX2xpc3Rfc3RyaW5nID0gJywgJy5qb2luKFtmIid7ZFsnaWRfZG9jJ119JyIgZm9yIGQgaW4gZG9jc19nb29kc19mb3JtYXR0ZWRfbGlzdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2UudXBkYXRlX3VwbG9hZGVkX2RvY3Nfc3RhdHVzKGRvY3NfbGlzdF9zdHJpbmcpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2V9JykKCiAgICBkZWYgX2NoZWNrX2h0dHBfc2V0dGluZ3Moc2VsZikgLT4gYm9vbDoKICAgICAgICBodHRwID0gc2VsZi5fZ2V0X2h0dHBfc2V0dGluZ3MoKQogICAgICAgIHJldHVybiBhbGwoW2h0dHAuZ2V0KCd1cmwnKSwgaHR0cC5nZXQoJ3VzZXInKSwgaHR0cC5nZXQoJ3Bhc3MnKV0pCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gVGltZXIgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gTWFpbiBldmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgpjbGFzcyBNYWluRXZlbnRzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc2VsZi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncyA9IHJzX3NldHRpbmdzCgogICAgZGVmIGFwcF9vbl9zdGFydChzZWxmKToKICAgICAgICAjIFRPRE8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvtCx0L3QvtCy0LvQtdC90LjRjyEKICAgICAgICByZWxlYXNlID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1JlbGVhc2UnKSBvciAnJwogICAgICAgIHRvYXN0ID0gJ9CT0L7RgtC+0LIg0Log0YDQsNCx0L7RgtC1JwogICAgICAgIGN1cnJlbnRfcmVsZWFzZSA9IHNlbGYuaGFzaF9tYXBbJ19jb25maWd1cmF0aW9uVmVyc2lvbiddCgogICAgICAgIGlmIGN1cnJlbnRfcmVsZWFzZSBpcyBOb25lOgogICAgICAgICAgICB0b2FzdCA9ICfQndC1INGD0LTQsNC70L7RgdGMINC+0L/RgNC10LTQtdC70LjRgtGMINCy0LXRgNGB0LjRjiDQutC+0L3RhNC40LPRg9GA0LDRhtC40LgnCgogICAgICAgIGlmIGN1cnJlbnRfcmVsZWFzZSBhbmQgcmVsZWFzZSAhPSBjdXJyZW50X3JlbGVhc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdVcGRhdGVDb25maWd1cmF0aW9ucycsICcnKQogICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnUmVsZWFzZScsIGN1cnJlbnRfcmVsZWFzZSwgVHJ1ZSkKICAgICAgICAgICAgdG9hc3QgPSBmJ9CS0YvQv9C+0LvQvdC10L3QviDQvtCx0L3QvtCy0LvQtdC90LjQtSDQvdCwINCy0LXRgNGB0LjRjiB7Y3VycmVudF9yZWxlYXNlfScKCiAgICAgICAgc2VsZi5fY3JlYXRlX3RhYmxlcygpCgogICAgICAgIHJzX2RlZmF1bHRfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICdUaXRsZVRleHRTaXplJzogMTgsCiAgICAgICAgICAgICd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnOiAxOCwKICAgICAgICAgICAgJ0NhcmRUaXRsZVRleHRTaXplJzogMjAsCiAgICAgICAgICAgICdDYXJkRGF0ZVRleHRTaXplJzogMTAsCiAgICAgICAgICAgICdDYXJkVGV4dFNpemUnOiAxNSwKICAgICAgICAgICAgJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnOiAxOCwKICAgICAgICAgICAgJ2dvb2RzVGV4dFNpemUnOiAxOCwKICAgICAgICAgICAgJ1Nlcmllc1Byb3BlcnRpZXNUZXh0U2l6ZSc6IDE2LAogICAgICAgICAgICAnRG9jVHlwZUNhcmRUZXh0U2l6ZSc6IDE1LAogICAgICAgICAgICAnc2lnbmFsX251bSc6IDgzLAogICAgICAgICAgICAnYmVlcF9kdXJhdGlvbic6IDEwMDAsCiAgICAgICAgICAgICd1c2VfbWFyayc6ICdmYWxzZScsCiAgICAgICAgICAgICdhZGRfaWZfbm90X2luX3BsYW4nOiAnZmFsc2UnLAogICAgICAgICAgICAncGF0aCc6ICcnLAogICAgICAgICAgICAnZGVsZXRlX2ZpbGVzJzogJ2ZhbHNlJywKICAgICAgICAgICAgJ2FsbG93X292ZXJzY2FuJzogJ2ZhbHNlJywKICAgICAgICAgICAgJ3BhdGhfdG9fZGF0YWJhc2VzJzogJy8vZGF0YS9kYXRhL3J1LnRyYXZlbGZvb2Quc2ltcGxlX3VpL2RhdGFiYXNlcycsCiAgICAgICAgICAgICdzcWxpdGVfbmFtZSc6ICdTaW1wbGVLZWVwJywKICAgICAgICAgICAgJ2xvZ19uYW1lJzogJ2xvZy5qc29uJywKICAgICAgICAgICAgJ3RpbWVyX2lzX2Rpc2FibGVkJzogRmFsc2UsCiAgICAgICAgICAgICdhbGxvd19mYWN0X2lucHV0JzogRmFsc2UKICAgICAgICB9CgogICAgICAgIGZvciBrLCB2IGluIHJzX2RlZmF1bHRfc2V0dGluZ3MuaXRlbXMoKToKICAgICAgICAgICAgaWYgc2VsZi5yc19zZXR0aW5ncy5nZXQoaykgaXMgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KGssIHYsIFRydWUpCgogICAgICAgIHNlbGYuaGFzaF9tYXBbIlNRTENvbm5lY3REYXRhYmFzZSJdID0gIlNpbXBsZUtlZXAiCiAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCh0b2FzdCkKCiAgICBkZWYgb25fc3FsX2Vycm9yKHNlbGYpOgogICAgICAgIHNxbF9lcnJvciA9IHNlbGYuaGFzaF9tYXBbJ1NRTEVycm9yJ10KICAgICAgICBpZiBzcWxfZXJyb3I6CiAgICAgICAgICAgIHNlcnZpY2UgPSBkYl9zZXJ2aWNlcy5Eb2NTZXJ2aWNlKCkKICAgICAgICAgICAgc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZidTUUxfRXJyb3I6IHtzcWxfZXJyb3J9JykKCiAgICBkZWYgcHV0X25vdGlmaWNhdGlvbihzZWxmKToKICAgICAgICBzZWxmLmhhc2hfbWFwWydfY29uZmlndXJhdGlvbiddID0gJycKICAgICAgICBxdGV4dCA9ICcnJwogICAgICAgIFNFTEVDVCAKICAgICAgICAgICAgZG9jX3R5cGUsIAogICAgICAgICAgICBjb3VudChpZF9kb2MpIGFzIGNvdW50LCAKICAgICAgICAgICAgbWF4KGNyZWF0ZWRfYXQpIGFzIGR0IAogICAgICAgIEZST00gUlNfZG9jcyAKICAgICAgICBXSEVSRSBjcmVhdGVkX2F0ID4gPyAKICAgICAgICBHUk9VUCBCWSBkb2NfdHlwZSAKICAgICAgICAnJycKCiAgICAgICAgbGFzdF9kYXRlID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ2xhc3REYXRlJykKICAgICAgICBpZiBub3QgbGFzdF9kYXRlOgogICAgICAgICAgICBsYXN0X2RhdGUgPSAnMjAyMC0wMS0wMSAwMDowMDowMCcKCiAgICAgICAgcmVzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsIChsYXN0X2RhdGUsKSwgVHJ1ZSkKCiAgICAgICAgZG9jX2xpc3QgPSAnJwogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgZm9yIGVsIGluIHJlczoKICAgICAgICAgICAgICAgIGRvY19saXN0ID0gZG9jX2xpc3QgKyAoJyAnICsgZWxbJ2RvY190eXBlJ10gKyAnOiAnICsgc3RyKGVsWydjb3VudCddKSkKCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KAogICAgICAgICAgICAgICAgJ2Jhc2ljX25vdGlmaWNhdGlvbicsCiAgICAgICAgICAgICAgICBqc29uLmR1bXBzKFt7J251bWJlcic6IDEsICd0aXRsZSc6ICfQndC+0LLRi9C1INC00L7QutGD0LzQtdC90YLRiycsICdtZXNzYWdlJzogZG9jX2xpc3R9XSkpCgogICAgICAgICAgICBxdGV4dCA9ICdTRUxFQ1QgbWF4KGNyZWF0ZWRfYXQpIGFzIGR0IEZST00gUlNfZG9jcycKICAgICAgICAgICAgcmVzMiA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0KQoKICAgICAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ2xhc3REYXRlJywgcmVzMlswXVswXSwgVHJ1ZSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdChsYXN0X2RhdGUpCgogICAgZGVmIF9jcmVhdGVfdGFibGVzKHNlbGYpOgogICAgICAgIHNlcnZpY2UgPSBkYl9zZXJ2aWNlcy5EYkNyZWF0b3IoKQogICAgICAgIHNlcnZpY2UuY3JlYXRlX3RhYmxlcygpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gTWFpbiBldmVudHMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKY2xhc3MgU2NyZWVuc0ZhY3Rvcnk6CiAgICBzY3JlZW5zID0gWwogICAgICAgIEFkckRvY3NMaXN0U2NyZWVuLAogICAgICAgIEFkckRvY0RldGFpbHNTY3JlZW4sCiAgICAgICAgR3JvdXBTY2FuVGlsZXMsCiAgICAgICAgRG9jdW1lbnRzVGlsZXMsCiAgICAgICAgR3JvdXBTY2FuRG9jc0xpc3RTY3JlZW4sCiAgICAgICAgRG9jdW1lbnRzRG9jc0xpc3RTY3JlZW4sCiAgICAgICAgR3JvdXBTY2FuRG9jRGV0YWlsc1NjcmVlbiwKICAgICAgICBEb2N1bWVudHNEb2NEZXRhaWxTY3JlZW4sCiAgICAgICAgRXJyb3JMb2dTY3JlZW4sCiAgICAgICAgRGVidWdTZXR0aW5nc1NjcmVlbiwKICAgICAgICBIdHRwU2V0dGluZ3NTY3JlZW4sCiAgICAgICAgU2V0dGluZ3NTY3JlZW4sCiAgICAgICAgR29vZHNMaXN0U2NyZWVuLAogICAgICAgIFNlbGVjdEdvb2RzVHlwZSwKICAgICAgICBJdGVtQ2FyZCwKICAgICAgICBGb250U2l6ZVNldHRpbmdzU2NyZWVuLAogICAgICAgIEJhcmNvZGVUZXN0U2NyZWVuCiAgICBdCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGdldF9zY3JlZW5fY2xhc3Moc2NyZWVuX25hbWU9Tm9uZSwgcHJvY2Vzcz1Ob25lLCAqKmt3YXJncyk6CiAgICAgICAgaWYgbm90IHNjcmVlbl9uYW1lOgogICAgICAgICAgICBzY3JlZW5fbmFtZSA9IGt3YXJnc1snaGFzaF9tYXAnXS5nZXRfY3VycmVudF9zY3JlZW4oKQogICAgICAgIGlmIG5vdCBwcm9jZXNzOgogICAgICAgICAgICBwcm9jZXNzID0ga3dhcmdzWydoYXNoX21hcCddLmdldF9jdXJyZW50X3Byb2Nlc3MoKQoKICAgICAgICBmb3IgaXRlbSBpbiBTY3JlZW5zRmFjdG9yeS5zY3JlZW5zOgogICAgICAgICAgICBpZiBnZXRhdHRyKGl0ZW0sICdzY3JlZW5fbmFtZScpID09IHNjcmVlbl9uYW1lIGFuZCBnZXRhdHRyKGl0ZW0sICdwcm9jZXNzX25hbWUnKSA9PSBwcm9jZXNzOgogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0KCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgY3JlYXRlX3NjcmVlbihzY3JlZW5fbmFtZT1Ob25lLCBwcm9jZXNzPU5vbmUsICoqa3dhcmdzKToKICAgICAgICBpZiBub3Qgc2NyZWVuX25hbWU6CiAgICAgICAgICAgIHNjcmVlbl9uYW1lID0ga3dhcmdzWydoYXNoX21hcCddLmdldF9jdXJyZW50X3NjcmVlbigpCiAgICAgICAgaWYgbm90IHByb2Nlc3M6CiAgICAgICAgICAgIHByb2Nlc3MgPSBrd2FyZ3NbJ2hhc2hfbWFwJ10uZ2V0X2N1cnJlbnRfcHJvY2VzcygpCgogICAgICAgIHNjcmVlbl9jbGFzcyA9IFNjcmVlbnNGYWN0b3J5LmdldF9zY3JlZW5fY2xhc3Moc2NyZWVuX25hbWUsIHByb2Nlc3MpCiAgICAgICAgcmV0dXJuIHNjcmVlbl9jbGFzcygqKmt3YXJncykKCgpjbGFzcyBNb2NrU2NyZWVuKFNjcmVlbik6CiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\ui_utils.py",
                "PyFileKey": "ui_utils",
                "PyFileData": "aW1wb3J0IGpzb24KZnJvbSB0eXBpbmcgaW1wb3J0IENhbGxhYmxlLCBVbmlvbiwgTGlzdCwgRGljdCwgT3B0aW9uYWwKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzCmltcG9ydCBzb2NrZXQKCmZyb20gamF2YSBpbXBvcnQgamNsYXNzCmZyb20gdWlfZ2xvYmFsIGltcG9ydCBSc19kb2MsIGZpbmRfYmFyY29kZV9pbl9iYXJjb2RlX3RhYmxlCmZyb20gZGJfc2VydmljZXMgaW1wb3J0IERvY1NlcnZpY2UKCm5vQ2xhc3MgPSBqY2xhc3MoInJ1LnRyYXZlbGZvb2Quc2ltcGxlX3VpLk5vU1FMIikKcnNfc2V0dGluZ3MgPSBub0NsYXNzKCJyc19zZXR0aW5ncyIpCgoKIyDQmtC70LDRgdGBLdC00LXQutC+0YDQsNGC0L7RgCDQtNC70Y8g0YPQtNC+0LHQvdC+0Lkg0YDQsNCx0L7RgtGLINGBIGhhc2hNYXAuINCi0LDQutC20LUg0LzQvtC20L3QviDQtNC+0LHQsNCy0LjRgtGMINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGD0Y4g0LvQvtCz0LjQutGDLgpjbGFzcyBIYXNoTWFwOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwPU5vbmUsIGRlYnVnOiBib29sID0gRmFsc2UpOgogICAgICAgIHNlbGYuaGFzaF9tYXAgPSBoYXNoX21hcAogICAgICAgIHNlbGYuZGVidWdfbW9kZSA9IGRlYnVnCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIGZ1bmM6IENhbGxhYmxlWy4uLiwgTm9uZV0pOgogICAgICAgIEB3cmFwcyhmdW5jKQogICAgICAgIGRlZiB3cmFwcGVyKGhhc2hNYXAsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHNlbGYuaW5pdChoYXNoTWFwKQogICAgICAgICAgICBmdW5jKHNlbGYpCiAgICAgICAgICAgIHJldHVybiBoYXNoTWFwCgogICAgICAgIHJldHVybiB3cmFwcGVyCgogICAgZGVmIGluaXQoc2VsZiwgaGFzaE1hcCk6CiAgICAgICAgc2VsZi5oYXNoX21hcCA9IGhhc2hNYXAKCiAgICBkZWYgZmluaXNoX3Byb2Nlc3Moc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0ZpbmlzaFByb2Nlc3MnLCAnJykKCgogICAgZGVmIGZpbmlzaF9wcm9jZXNzKHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdGaW5pc2hQcm9jZXNzJywnJykKCiAgICBkZWYgdG9hc3Qoc2VsZiwgdGV4dCwgYWRkX3RvX2xvZz1GYWxzZSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RvYXN0Jywgc3RyKHRleHQpKQogICAgICAgIGlmIGFkZF90b19sb2c6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbG9nKHRleHQpCgogICAgZGVmIG5vdGlmaWNhdGlvbihzZWxmLCB0ZXh0LCB0aXRsZT1Ob25lLCBhZGRfdG9fbG9nPUZhbHNlKToKICAgICAgICBub3RpZmljYXRpb25faWQgPSByc19zZXR0aW5ncy5nZXQoIm5vdGlmaWNhdGlvbl9pZCIpICsgMSBpZiByc19zZXR0aW5ncy5nZXQoIm5vdGlmaWNhdGlvbl9pZCIpIGVsc2UgMQogICAgICAgIGlmIHRpdGxlIGlzIE5vbmU6CiAgICAgICAgICAgIHRpdGxlID0gc2VsZi5nZXRfY3VycmVudF9zY3JlZW4oKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgKICAgICAgICAgICAgImJhc2ljX25vdGlmaWNhdGlvbiIsCiAgICAgICAgICAgIGpzb24uZHVtcHMoW3snbnVtYmVyJzogbm90aWZpY2F0aW9uX2lkLCAndGl0bGUnOiBzdHIodGl0bGUpLCAnbWVzc2FnZSc6IHRleHR9XSkKICAgICAgICApCgogICAgICAgIHJzX3NldHRpbmdzLnB1dCgibm90aWZpY2F0aW9uX2lkIiwgbm90aWZpY2F0aW9uX2lkLCBUcnVlKQogICAgICAgIGlmIGFkZF90b19sb2c6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbG9nKHRleHQpCgogICAgZGVmIGRlYnVnKHNlbGYsIHRleHQpOgogICAgICAgIGlmIHNlbGYuZGVidWdfbW9kZToKICAgICAgICAgICAgc2VsZi50b2FzdCh0ZXh0LCBhZGRfdG9fbG9nPVRydWUpCgogICAgZGVmIHJlZnJlc2hfc2NyZWVuKHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdSZWZyZXNoU2NyZWVuJywgJycpCgogICAgZGVmIHJ1bl9ldmVudChzZWxmLCBtZXRob2RfbmFtZSk6CiAgICAgICAgc2VsZlsnUnVuRXZlbnQnXSA9IGpzb24uZHVtcHMoc2VsZi5fZ2V0X2V2ZW50KG1ldGhvZF9uYW1lKSkKCiAgICBkZWYgcnVuX2V2ZW50X2FzeW5jKHNlbGYsIG1ldGhvZF9uYW1lKToKICAgICAgICBzZWxmWydSdW5FdmVudCddID0ganNvbi5kdW1wcyhzZWxmLl9nZXRfZXZlbnQobWV0aG9kX25hbWUsICdydW5hc3luYycpKQoKICAgIGRlZiBydW5fZXZlbnRfcHJvZ3Jlc3Moc2VsZiwgbWV0aG9kX25hbWUpOgogICAgICAgIHNlbGZbJ1J1bkV2ZW50J10gPSBqc29uLmR1bXBzKHNlbGYuX2dldF9ldmVudChtZXRob2RfbmFtZSwgJ3J1bnByb2dyZXNzJykpCgogICAgZGVmIGJlZXAoc2VsZiwgdG9uZT0nJyk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2JlZXAnLCBzdHIodG9uZSkpCgogICAgZGVmIF9nZXRfZXZlbnQoc2VsZiwgbWV0aG9kX25hbWUsIGFjdGlvbj1Ob25lKToKICAgICAgICAiIiIKICAgICAgICA6cGFyYW0gbWV0aG9kX25hbWU6IGhhbmRsZXJzIG5hbWUKICAgICAgICA6cGFyYW0gYWN0aW9uOiBydW58cnVuYXN5bmN8cnVucHJvZ3Jlc3MKCiAgICAgICAgOnJldHVybjogZXZlbnQgZGljdAogICAgICAgICIiIgoKICAgICAgICBldnQgPSBbewogICAgICAgICAgICAnYWN0aW9uJzogYWN0aW9uIGlmIGFjdGlvbiBlbHNlICdydW4nLAogICAgICAgICAgICAndHlwZSc6ICdweXRob24nLAogICAgICAgICAgICAnbWV0aG9kJzogbWV0aG9kX25hbWUsCiAgICAgICAgfV0KICAgICAgICByZXR1cm4gZXZ0CgogICAgZGVmIGVycm9yX2xvZyhzZWxmLCBlcnJfZGF0YSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBlcnJfZGF0YSA9IGpzb24uZHVtcHMoZXJyX2RhdGEsIGVuc3VyZV9hc2NpaT1GYWxzZSwgaW5kZW50PTIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBlcnJfZGF0YSA9IHN0cihlcnJfZGF0YSkKCiAgICAgICAgcnNfc2V0dGluZ3MucHV0KCdlcnJvcl9sb2cnLCBlcnJfZGF0YSwgVHJ1ZSkKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbSk6CiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0KGl0ZW0sIEZhbHNlKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToKICAgICAgICBzZWxmLnB1dChrZXksIHZhbHVlLCBGYWxzZSkKCiAgICBkZWYgZ2V0KHNlbGYsIGl0ZW0sIGZyb21fanNvbj1GYWxzZSk6CiAgICAgICAgaWYgZnJvbV9qc29uOgogICAgICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhzZWxmLmhhc2hfbWFwLmdldChpdGVtKSkgaWYgc2VsZi5oYXNoX21hcC5nZXQoaXRlbSkgZWxzZSBOb25lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuaGFzaF9tYXAuZ2V0KGl0ZW0pCgogICAgZGVmIGdldF9qc29uKHNlbGYsIGl0ZW0pOgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKHNlbGYuaGFzaF9tYXAuZ2V0KGl0ZW0pKSBpZiBzZWxmLmhhc2hfbWFwLmdldChpdGVtKSBlbHNlIE5vbmUKCiAgICBkZWYgZ2V0X2Jvb2woc2VsZiwgaXRlbSk6CiAgICAgICAgdmFsdWUgPSBzdHIoc2VsZi5oYXNoX21hcC5nZXQoaXRlbSkpLmxvd2VyKCkgbm90IGluICgnMCcsICdmYWxzZScsICdub25lJykKICAgICAgICByZXR1cm4gdmFsdWUKCiAgICBkZWYgcHV0KHNlbGYsIGtleSwgdmFsdWU6IFVuaW9uW3N0ciwgTGlzdCwgRGljdF0gPSAnJywgdG9fanNvbj1GYWxzZSk6CiAgICAgICAgaWYgdG9fanNvbjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoa2V5LCBqc29uLmR1bXBzKHZhbHVlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBib29sKToKICAgICAgICAgICAgICAgIHZhbHVlID0gc3RyKHZhbHVlKS5sb3dlcigpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KGtleSwgc3RyKHZhbHVlKSkKCiAgICBkZWYgcHV0X2RhdGEoc2VsZiwgZGF0YTogZGljdCk6CiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGF0YS5pdGVtcygpOgogICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQoKICAgIGRlZiBjb250YWluc0tleShzZWxmLCBrZXkpOgogICAgICAgIHJldHVybiBzZWxmLmhhc2hfbWFwLmNvbnRhaW5zS2V5KGtleSkKCiAgICBkZWYgcmVtb3ZlKHNlbGYsIGtleSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoa2V5KQoKICAgIGRlZiBkZWxldGUoc2VsZiwga2V5KToKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZShrZXkpCgogICAgZGVmIGV4cG9ydChzZWxmKSAtPiBsaXN0OgogICAgICAgIHJldHVybiBzZWxmLmhhc2hfbWFwLmV4cG9ydCgpCgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoc2VsZi5leHBvcnQoKSwgaW5kZW50PTQsIGVuc3VyZV9hc2NpaT1GYWxzZSkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkKCiAgICBkZWYgc2hvd19zY3JlZW4oc2VsZiwgbmFtZSwgZGF0YT1Ob25lKToKICAgICAgICBzZWxmLnB1dCgnU2hvd1NjcmVlbicsIG5hbWUpCiAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgc2VsZi5wdXRfZGF0YShkYXRhKQoKICAgIGRlZiBzaG93X2RpYWxvZyhzZWxmLCBsaXN0ZW5lciwgdGl0bGU9JycsIGJ1dHRvbnM9Tm9uZSk6CiAgICAgICAgc2VsZi5wdXQoIlNob3dEaWFsb2ciLCBsaXN0ZW5lcikKCiAgICAgICAgaWYgdGl0bGUgb3IgYnV0dG9uczoKICAgICAgICAgICAgZGlhbG9nX3N0eWxlID0gewogICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUgb3IgbGlzdGVuZXIsCiAgICAgICAgICAgICAgICAneWVzJzogJ9Ce0LonLAogICAgICAgICAgICAgICAgJ25vJzogJ9Ce0YLQvNC10L3QsCcKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiBidXR0b25zIGFuZCBsZW4oYnV0dG9ucykgPiAxOgogICAgICAgICAgICAgICAgZGlhbG9nX3N0eWxlWyd5ZXMnXSA9IGJ1dHRvbnNbMF0KICAgICAgICAgICAgICAgIGRpYWxvZ19zdHlsZVsnbm8nXSA9IGJ1dHRvbnNbMV0KCiAgICAgICAgICAgIHNlbGYucHV0KCdTaG93RGlhbG9nU3R5bGUnLCBkaWFsb2dfc3R5bGUpCgogICAgZGVmIGdldF9jdXJyZW50X3NjcmVlbihzZWxmKToKCiAgICAgICAgcmV0dXJuIHNlbGZbJ2N1cnJlbnRfc2NyZWVuX25hbWUnXSBpZiBzZWxmLmNvbnRhaW5zS2V5KCdjdXJyZW50X3NjcmVlbl9uYW1lJykgZWxzZSAnJwoKICAgIGRlZiBnZXRfY3VycmVudF9wcm9jZXNzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmWydjdXJyZW50X3Byb2Nlc3NfbmFtZSddCgogICAgZGVmIHNldF90aXRsZShzZWxmLCB0aXRsZSk6CiAgICAgICAgc2VsZlsnU2V0VGl0bGUnXSA9IHRpdGxlCgogICAgZGVmIHJ1bl9weV90aHJlYWRfcHJvZ3Jlc3Moc2VsZiwgaGFuZGxlcnNfbmFtZTogc3RyKToKICAgICAgICAiIiIKICAgICAgICDQl9Cw0L/Rg9GB0LrQsNC10YIg0LDRgdC40L3RhdGA0L7QvdC90L7QtSDRhNC+0L3QvtCy0L7QtSDQstGL0L/QvtC70L3QtdC90LjQtSDRgdC60YDQuNC/0YLQsCBjINCx0LvQvtC60LjRgNGD0Y7RidC40Lwg0L/RgNC+0LPRgNC10YHRgS3QsdCw0YDQvtC8LCDQutC+0YLQvtGA0YvQuSDQsdC70L7QutC40YDRg9C10YIgVUkt0L/QvtGC0L7Qui4KICAgICAgICDQkiDQutCw0YfQtdGB0YLQstC1INCw0YDQs9GD0LzQtdC90YLQsCAtINC40LzRjyDRhNGD0L3QutGG0LjQuC3RhdC10L3QtNC70LXRgNCwLgogICAgICAgICIiIgoKICAgICAgICBzZWxmWydSdW5QeVRocmVhZFByb2dyZXNzRGVmJ10gPSBoYW5kbGVyc19uYW1lCgogICAgZGVmIHNxbF9leGVjKHNlbGYsIHF1ZXJ5LCBwYXJhbXM9JycpOgogICAgICAgIHNlbGYuX3B1dF9zcWwoJ1NRTEV4ZWMnLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBzcWxfZXhlY19tYW55KHNlbGYsIHF1ZXJ5LCBwYXJhbXM9Tm9uZSk6CiAgICAgICAgcGFyYW1zID0gcGFyYW1zIG9yIFtdCiAgICAgICAgc2VsZi5fcHV0X3NxbCgnU1FMRXhlY01hbnknLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBzcWxfcXVlcnkoc2VsZiwgcXVlcnksIHBhcmFtcz0nJyk6CiAgICAgICAgc2VsZi5fcHV0X3NxbCgnU1FMUXVlcnknLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBfcHV0X3NxbChzZWxmLCBzcWxfdHlwZSwgcXVlcnksIHBhcmFtcyk6CiAgICAgICAgc2VsZi5wdXQoCiAgICAgICAgICAgIHNxbF90eXBlLAogICAgICAgICAgICB7InF1ZXJ5IjogcXVlcnksICdwYXJhbXMnOiBwYXJhbXN9LAogICAgICAgICAgICB0b19qc29uPVRydWUKICAgICAgICApCgoKY2xhc3MgUnNEb2MoUnNfZG9jKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpZF9kb2MpOgogICAgICAgIHNlbGYuaWRfZG9jID0gaWRfZG9jCgogICAgZGVmIHVwZGF0ZV9kb2Nfc3RyKHNlbGYsIHByaWNlPTApOgogICAgICAgIHBhc3MKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG1hcmtfZm9yX3VwbG9hZChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG1hcmtfdmVyaWZpZWQoc2VsZiwga2V5KToKICAgICAgICBzdXBlcigpLm1hcmtfdmVyaWZpZWQoa2V5KQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fdGFibGUoc2VsZiwgc2VhcmNoX3ZhbHVlLCBmdW5jX2NvbXBhcmVkPSc9PycpIC0+IGRpY3Q6CiAgICAgICAgcmVzdWx0ID0gc3VwZXIoKS5maW5kX2JhcmNvZGVfaW5fdGFibGUoc2VhcmNoX3ZhbHVlLCBmdW5jX2NvbXBhcmVkKQogICAgICAgIGlmIHJlc3VsdDoKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFswXQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fbWFya190YWJsZShzZWxmLCBzZWFyY2hfdmFsdWU6IHN0ciwgZnVuY19jb21wYXJlZD0nPT8nKToKICAgICAgICBwYXNzCgogICAgZGVmIHVwZGF0ZV9kb2NfdGFibGVfZGF0YShzZWxmLCBlbGVtX2Zvcl9hZGQ6IGRpY3QsIHF0dHk9MSwgdXNlcl90bXo9MCk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBhZGRfbWFya2VkX2NvZGVzX2luX2RvYyhzZWxmLCBiYXJjb2RlX2luZm8pOgogICAgICAgIHBhc3MKCiAgICBkZWYgYWRkX25ld19iYXJjb2RlX2luX2RvY19iYXJjb2Rlc190YWJsZShzZWxmLCBlbCwgYmFyY29kZV9pbmZvKToKICAgICAgICBwYXNzCgogICAgZGVmIHByb2Nlc3NfdGhlX2JhcmNvZGUoCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIGJhcmNvZGUsCiAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuPUZhbHNlLAogICAgICAgICAgICBoYXZlX3plcm9fcGxhbj1GYWxzZSwKICAgICAgICAgICAgY29udHJvbD1GYWxzZSwKICAgICAgICAgICAgaGF2ZV9tYXJrX3BsYW49RmFsc2UsCiAgICAgICAgICAgIGVsZW09Tm9uZSwKICAgICAgICAgICAgdXNlX21hcmtfc2V0dGluZz0nZmFsc2UnLAogICAgICAgICAgICB1c2VyX3Rtej0wKToKCiAgICAgICAgUnNfZG9jLmlkX2RvYyA9IHNlbGYuaWRfZG9jCiAgICAgICAgcmVzdWx0ID0gUnNfZG9jLnByb2Nlc3NfdGhlX2JhcmNvZGUoCiAgICAgICAgICAgIFJzX2RvYywgYmFyY29kZSwgaGF2ZV9xdHR5X3BsYW4sIGhhdmVfemVyb19wbGFuLCBjb250cm9sLCBoYXZlX21hcmtfcGxhbiwgZWxlbSwgdXNlX21hcmtfc2V0dGluZywgdXNlcl90bXoKICAgICAgICApCiAgICAgICAgaWYgbm90IHJlc3VsdC5nZXQoJ0Vycm9yJyk6CiAgICAgICAgICAgIHNlcnZpY2UgPSBEb2NTZXJ2aWNlKHNlbGYuaWRfZG9jKQogICAgICAgICAgICBzZXJ2aWNlLnNldF9kb2NfdmFsdWUoJ3NlbnQnLCAwKQoKICAgICAgICAgICAgcmVzID0gc2VsZi5maW5kX2JhcmNvZGVfaW5fdGFibGUoYmFyY29kZSkKICAgICAgICAgICAgaWYgcmVzLmdldCgnaWQnKToKICAgICAgICAgICAgICAgIHJlc3VsdFsna2V5J10gPSByZXNbJ2lkJ10KCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBhZGQoc2VsZiwgYXJncyk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBnZXRfbmV3X2lkKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZmluZF9iYXJjb2RlX2luX2JhcmNvZGVfdGFibGUoc2VsZiwgYmFyY29kZSk6CiAgICAgICAgcmV0dXJuIGZpbmRfYmFyY29kZV9pbl9iYXJjb2RlX3RhYmxlKGJhcmNvZGUpCgoKY2xhc3MgQmFyY29kZVBhcnNlcjoKICAgIGRlZiBwYXJzZShzZWxmLCBiYXJjb2RlOiBzdHIpIC0+IGRpY3Q6CiAgICAgICAgcmV0dXJuIHsnU0NIRU1FJzogJ0VBTjEzJywgJ0JBUkNPREUnOiBiYXJjb2RlLCAnR1RJTic6IGJhcmNvZGUsICdTRVJJQUwnOiAnJ30KCgpkZWYgZ2V0X2lwX2FkZHJlc3MoKToKICAgIHMgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19ER1JBTSkKICAgIHRyeToKICAgICAgICBzLmNvbm5lY3QoKCI4LjguOC44IiwgODApKQogICAgICAgIGlwX2FkZHJlc3MgPSBzLmdldHNvY2tuYW1lKClbMF0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBpcF9hZGRyZXNzID0gTm9uZQogICAgZmluYWxseToKICAgICAgICBzLmNsb3NlKCkKCiAgICByZXR1cm4gaXBfYWRkcmVzcwo="
            },
            {
                "file_path": "D:/projects/simple UI/keep/sui_keep_dev\\widgets.py",
                "PyFileKey": "widgets",
                "PyFileData": "ZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0CmltcG9ydCBqc29uCgp3cmFwX2NvbnRlbnQgPSAid3JhcF9jb250ZW50IgptYXRjaF9wYXJlbnQgPSAnbWF0Y2hfcGFyZW50JwoKCmNsYXNzIFdpZGdldChBQkMpOgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYudHlwZTogc3RyCiAgICAgICAgc2VsZi5WYWx1ZTogc3RyCiAgICAgICAgc2VsZi53aWR0aCA9IHdyYXBfY29udGVudAogICAgICAgIHNlbGYuaGVpZ2h0ID0gd3JhcF9jb250ZW50CiAgICAgICAgc2VsZi53ZWlnaHQgPSAwCgogICAgICAgIGlmIGt3YXJnczoKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4ga3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZWxmLl9fZGljdF9fW2tleV0gPSB2YWx1ZQoKICAgIGRlZiB0b19qc29uKHNlbGYpOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHNlbGYsIGRlZmF1bHQ9bGFtYmRhIHg6IHZhcnMoeCksIGluZGVudD00KQoKCmNsYXNzIFBpY3R1cmUoV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5WYWx1ZSA9ICdAcGljJwogICAgICAgIHN1cGVyKCkuX19pbml0X18oKiprd2FyZ3MpCiAgICAgICAgc2VsZi50eXBlID0gIlBpY3R1cmUiCgoKY2xhc3MgVGV4dFZpZXcoV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5WYWx1ZSA9ICdAdmFsdWUnCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncykKICAgICAgICBzZWxmLnR5cGUgPSAiVGV4dFZpZXciCgoKY2xhc3MgQ2hlY2tCb3goV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncykKICAgICAgICBzZWxmLnR5cGUgPSAnQ2hlY2tCb3gnCgoKY2xhc3MgUG9wdXBNZW51QnV0dG9uKFdpZGdldCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuVmFsdWUgPSAnQHZhbHVlJwogICAgICAgIHN1cGVyKCkuX19pbml0X18oKiprd2FyZ3MpCiAgICAgICAgc2VsZi50eXBlID0gIlBvcHVwTWVudUJ1dHRvbiIKICAgICAgICBzZWxmLnNob3dfYnlfY29uZGl0aW9uID0gJycKICAgICAgICBzZWxmLk5vUmVmcmVzaCA9IEZhbHNlCiAgICAgICAgc2VsZi5kb2N1bWVudF90eXBlID0gJycKICAgICAgICBzZWxmLm1hc2sgPSAnJwoKCmNsYXNzIExpbmVhckxheW91dChXaWRnZXQpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi50eXBlID0gJ0xpbmVhckxheW91dCcKICAgICAgICBzZWxmLm9yaWVudGF0aW9uID0gInZlcnRpY2FsIgoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCoqa3dhcmdzKQogICAgICAgIHNlbGYuRWxlbWVudHMgPSBsaXN0KGFyZ3MpIG9yIFtdCgogICAgZGVmIGFwcGVuZChzZWxmLCAqd2lkZ2V0cyk6CiAgICAgICAgZm9yIHdpZGdldCBpbiB3aWRnZXRzOgogICAgICAgICAgICBzZWxmLkVsZW1lbnRzLmFwcGVuZCh3aWRnZXQpCgoKY2xhc3MgT3B0aW9uczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzZWFyY2hfZW5hYmxlZD1UcnVlLCBzYXZlX3Bvc2l0aW9uPVRydWUpOgogICAgICAgIHNlbGYub3B0aW9ucyA9IHsKICAgICAgICAgICAgJ3NlYXJjaF9lbmFibGVkJzogc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICdzYXZlX3Bvc2l0aW9uJzogc2F2ZV9wb3NpdGlvbgogICAgICAgIH0KCgpjbGFzcyBDdXN0b21DYXJkczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsYXlvdXQ6IExpbmVhckxheW91dCwgb3B0aW9uczogT3B0aW9ucywgY2FyZHNkYXRhOiBMaXN0W2RpY3RdID0gW10pOgogICAgICAgIHNlbGYuY3VzdG9tY2FyZHMgPSB7CiAgICAgICAgICAgICdvcHRpb25zJzogb3B0aW9ucyBvciBPcHRpb25zKCksCiAgICAgICAgICAgICdsYXlvdXQnOiBsYXlvdXQsCiAgICAgICAgICAgICdjYXJkc2RhdGEnOiBjYXJkc2RhdGEKICAgICAgICB9CgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoc2VsZiwgZGVmYXVsdD1sYW1iZGEgeDogdmFycyh4KSwgaW5kZW50PTQsIGVuc3VyZV9hc2NpaT1GYWxzZSkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkKCgpjbGFzcyBDdXN0b21UYWJsZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsYXlvdXQ6IExpbmVhckxheW91dCwgb3B0aW9uczogT3B0aW9ucywgdGFibGVkYXRhOiBMaXN0W2RpY3RdKToKICAgICAgICBzZWxmLmN1c3RvbXRhYmxlID0gewogICAgICAgICAgICAnb3B0aW9ucyc6IG9wdGlvbnMgb3IgT3B0aW9ucygpLAogICAgICAgICAgICAnbGF5b3V0JzogbGF5b3V0LAogICAgICAgICAgICAndGFibGVkYXRhJzogdGFibGVkYXRhCiAgICAgICAgfQoKICAgIGRlZiB0b19qc29uKHNlbGYpOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHNlbGYsIGRlZmF1bHQ9bGFtYmRhIHg6IHZhcnMoeCksIGluZGVudD00LCBlbnN1cmVfYXNjaWk9RmFsc2UpLmVuY29kZSgndXRmOCcpLmRlY29kZSgpCgoKQGRhdGFjbGFzcwpjbGFzcyBNb2Rlcm5GaWVsZDoKICAgIGhpbnQ6IHN0ciA9ICcnCiAgICBkZWZhdWx0X3RleHQ6IHN0ciA9ICcnCiAgICBjb3VudGVyOiBib29sID0gRmFsc2UKICAgIGNvdW50ZXJfbWF4OiBpbnQgPSAwCiAgICBpbnB1dF90eXBlOiBpbnQgPSAwCiAgICBwYXNzd29yZDogYm9vbCA9IEZhbHNlCiAgICBldmVudHM6IGJvb2wgPSBGYWxzZQoKICAgICIiIgogICAgVFlQRV9OVUxMOiAwCiAgICAKICAgIFRZUEVfQ0xBU1NfTlVNQkVSOiAyCiAgICBUWVBFX05VTUJFUl9GTEFHX0RFQ0lNQUw6IDgxOTIgCiAgICBUWVBFX05VTUJFUl9GTEFHX1NJR05FRDogNDA5NiAKICAgIFRZUEVfTlVNQkVSX1ZBUklBVElPTl9OT1JNQUw6IDAKICAgIFRZUEVfTlVNQkVSX1ZBUklBVElPTl9QQVNTV09SRDogMTYKICAgIAogICAgVFlQRV9DTEFTU19EQVRFVElNRSA6IDQKICAgIFRZUEVfREFURVRJTUVfVkFSSUFUSU9OX0RBVEU6IDE2CiAgICBUWVBFX0RBVEVUSU1FX1ZBUklBVElPTl9OT1JNQUw6IDAKICAgIFRZUEVfREFURVRJTUVfVkFSSUFUSU9OX1RJTUU6IDMyCiAgICAKICAgIFRZUEVfQ0xBU1NfUEhPTkU6IDMKICAgIAogICAgVFlQRV9NQVNLX0NMQVNTOiAxNQogICAgVFlQRV9NQVNLX0ZMQUdTOiAxNjc3MzEyMCAKICAgIFRZUEVfTUFTS19WQVJJQVRJT046IDQwODAgCgogICAgVFlQRV9DTEFTU19URVhUOiAxCiAgICBUWVBFX1RFWFRfRkxBR19BVVRPX0NPTVBMRVRFOiA2NTUzNiAKICAgIFRZUEVfVEVYVF9GTEFHX0FVVE9fQ09SUkVDVDogMzI3NjggCiAgICBUWVBFX1RFWFRfRkxBR19DQVBfQ0hBUkFDVEVSUzogNDA5NiAKICAgIFRZUEVfVEVYVF9GTEFHX0NBUF9TRU5URU5DRVM6IDE2Mzg0IAogICAgVFlQRV9URVhUX0ZMQUdfQ0FQX1dPUkRTOiA4MTkyICAKICAgIFRZUEVfVEVYVF9GTEFHX0VOQUJMRV9URVhUX0NPTlZFUlNJT05fU1VHR0VTVElPTlM6IDEwNDg1NzYgCiAgICBUWVBFX1RFWFRfRkxBR19JTUVfTVVMVElfTElORTogMjYyMTQ0IAogICAgVFlQRV9URVhUX0ZMQUdfTVVMVElfTElORTogMTMxMDcyIAogICAgVFlQRV9URVhUX0ZMQUdfTk9fU1VHR0VTVElPTlM6IDUyNDI4OCAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fRU1BSUxfQUREUkVTUzogMzIKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fRU1BSUxfU1VCSkVDVDogNDgKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fRklMVEVSOiAxNzYgCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX0xPTkdfTUVTU0FHRTogODAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fTk9STUFMOiAwCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1BBU1NXT1JEOiAxMjggCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1BFUlNPTl9OQU1FOiAgOTYKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fUEhPTkVUSUM6IDE5MiAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fUE9TVEFMX0FERFJFU1M6IDExMiAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fU0hPUlRfTUVTU0FHRTogNjQgCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1VSSTogMTYgCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1ZJU0lCTEVfUEFTU1dPUkQ6IDE0NCAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fV0VCX0VESVRfVEVYVDogMTYwCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1dFQl9FTUFJTF9BRERSRVNTOiAyMDggCiAgICBUWVBFX1RFWFRfVkFSSUFUSU9OX1dFQl9QQVNTV09SRDogMjI0IAogICAgIiIiCgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIGRlZmF1bHQ9bGFtYmRhIHg6IHtrOiB2IGZvciBrLCB2IGluIHZhcnMoeCkuaXRlbXMoKSBpZiB2fSwKICAgICAgICAgICAgaW5kZW50PTQsIGVuc3VyZV9hc2NpaT1GYWxzZQogICAgICAgICkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkK"
            }
        ],
        "StyleTemplates": [],
        "arch2": true,
        "CommonHandlers": [
            {
                "event": "onLaunch",
                "listener": "",
                "action": "run",
                "type": "pythonreload",
                "method": "app_on_start",
                "postExecute": "",
                "alias": "on_start"
            },
            {
                "event": "onWebServiceSyncCommand",
                "action": "run",
                "type": "python",
                "method": "event_service",
                "postExecute": "",
                "alias": "event_service"
            },
            {
                "event": "onWebServiceSyncCommand",
                "listener": "",
                "action": "run",
                "type": "python",
                "method": "put_notification",
                "postExecute": "",
                "alias": ""
            },
            {
                "event": "onBackgroundCommand",
                "listener": "menu_2",
                "action": "run",
                "type": "set",
                "method": "UpdateConfigurations",
                "postExecute": "",
                "alias": ""
            },
            {
                "event": "onSQLError",
                "action": "run",
                "type": "set",
                "method": "beep",
                "postExecute": "",
                "alias": ""
            }
        ]
    }
}