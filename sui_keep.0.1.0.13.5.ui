{
    "ClientConfiguration": {
        "ConfigurationName": "Simple Учет",
        "ConfigurationDescription": "Простое решение для работы с штрихкодами товаров. Поставляется в комплекте с расширением для 1С. Подробнее про расширение Вы можете узнать по ссылке: https://www.simple-kit.ru/products/simple-uchet/ ",
        "ConfigurationVersion": "0.1.0.13.5",
        "Processes": [
            {
                "type": "Process",
                "ProcessName": "Документы",
                "PlanFactHeader": "...",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Плитки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "gravity_horizontal": "center",
                                "gravity_vertical": "center",
                                "weight": "0",
                                "type": "Tiles",
                                "Value": "@tiles",
                                "Variable": "tiles",
                                "Elements": [
                                    {
                                        "Value": "@gtin",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@series",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "docs_tiles_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "tiles_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_type_select",
                                                "Variable": "doc_type_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            },
                                            {
                                                "Value": "@doc_status_select",
                                                "Variable": "doc_status_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@docCards",
                                        "Variable": "doc_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документ товары",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "vertical",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "@doc_n",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "TextSize": "24",
                                                                "TextColor": "#7A005C",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@doc_date",
                                                                "Variable": "doc_date",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "TextBold": false,
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@warehouse",
                                                                "Variable": "warehouse",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@countragent",
                                                                "Variable": "countragent",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "type": "TextView"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "pagination_controls",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "<",
                                                "Variable": "previous_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "3",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "match_parent",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Страница:",
                                                        "Variable": "",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "18",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@current_page",
                                                        "Variable": "current_page",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "18",
                                                        "TextColor": "",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@items_on_page_select",
                                                        "Variable": "items_on_page_click",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "16",
                                                        "TextColor": "#000000",
                                                        "type": "SpinnerLayout"
                                                    }
                                                ],
                                                "BackgroundColor": "",
                                                "StrokeWidth": "",
                                                "Padding": ""
                                            },
                                            {
                                                "Value": ">",
                                                "Variable": "next_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "orientation": "",
                                                "weight": "3",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "Value": "@doc_goods_table",
                                        "Variable": "doc_goods_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "@doc_goods_table",
                                        "Variable": "doc_goods_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "CardsLayout"
                                    },
                                    {
                                        "Value": "Выгрузить документ",
                                        "Variable": "btn_doc_mark_verified",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "type": "Button"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "CButtons"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@new_text",
                                        "Variable": "new_text",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Все строки",
                                "Variable": "btn_rows_filter_off"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Необработанные строки",
                                "Variable": "btn_rows_filter_on"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Ввести штрихкод",
                                "Variable": "btn_barcodes"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Выгрузить документ",
                                "Variable": "btn_doc_mark_verified"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@Doc_data",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@Good",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_good_select",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@properties",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "16",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_properties",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "0",
                                        "width": "0",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@Series",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "16",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_series",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@Unit",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "16",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_unit",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "План",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty_plan",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "TextSize": "24",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "TextSize": "24",
                                                        "type": "EditTextNumeric"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Цена",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@price",
                                                "Variable": "price",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "EditTextNumeric"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "HorizontalGallery",
                                "Value": "@photoGallery",
                                "Variable": "photoGallery"
                            },
                            {
                                "type": "photo",
                                "Value": "",
                                "Variable": "photo"
                            },
                            {
                                "type": "photoGallery",
                                "Value": "",
                                "Variable": "photo"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "elem_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "elem_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар выбор",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@Doc_data",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "16",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "match_parent",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "Elements": [
                                                            {
                                                                "Value": "Артикул:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "wrap_content",
                                                                "weight": "0",
                                                                "TextBold": true,
                                                                "TextColor": "#000000",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@good_art",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "wrap_content",
                                                                "weight": "0",
                                                                "TextColor": "#000000",
                                                                "type": "TextView"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "7",
                                                        "Elements": [
                                                            {
                                                                "Value": "@good_str",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "wrap_content",
                                                                "weight": "0",
                                                                "TextColor": "#000000",
                                                                "type": "TextView"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Серия:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_sn",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Характеристика:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_property",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Цена:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "TextColor": "#cc0000",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_price",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextColor": "#cc0000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Упаковка:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_unit",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@Good",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "24",
                                        "TextColor": "#7A005C",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "План",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty_plan",
                                                        "Variable": "qtty_plan",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "0",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_input",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "vertical",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_1",
                                                                        "height": "wrap_content",
                                                                        "width": "match_parent",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "horizontal",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "Было:",
                                                                        "Variable": "",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "1",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "TextSize": "18",
                                                                        "type": "TextView"
                                                                    },
                                                                    {
                                                                        "Value": "@qtty",
                                                                        "Variable": "qtty",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "orientation": "",
                                                                        "weight": "1",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "TextSize": "18",
                                                                        "TextColor": "",
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_2",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "center"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "vertical",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_left",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "Будет:",
                                                                        "Variable": "",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "1",
                                                                        "TextBold": true,
                                                                        "TextItalic": false,
                                                                        "TextSize": "21",
                                                                        "type": "TextView"
                                                                    },
                                                                    {
                                                                        "Value": "@new_qtty",
                                                                        "Variable": "new_qtty",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "orientation": "",
                                                                        "weight": "1",
                                                                        "TextBold": true,
                                                                        "TextItalic": false,
                                                                        "TextSize": "24",
                                                                        "TextColor": "",
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_right",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "center"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_note",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "0",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "fact_qtty_input",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Добавить:",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "TextView"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_input",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "-5",
                                                        "Variable": "ops_-5",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "-1",
                                                        "Variable": "ops_-1",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "@delta",
                                                        "Variable": "delta",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "#000000",
                                                        "type": "ModernEditText"
                                                    },
                                                    {
                                                        "Value": "+1",
                                                        "Variable": "ops_+1",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "+5",
                                                        "Variable": "ops_+5",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    }
                                                ],
                                                "BackgroundColor": "",
                                                "StrokeWidth": "",
                                                "Padding": ""
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Сохранить",
                                                        "Variable": "btn_ok",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "type": "Button"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "Печать этикетки",
                                        "Variable": "btn_print",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "elem_viev_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "elem_viev_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документ штрихкоды",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@barc_cards",
                                        "Variable": "barcode_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "doc_barcodes_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "doc_barcodes_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Удаление штрихкода",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Товар с такой маркировкой уже есть в документе!",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@good",
                                        "Variable": "id_good",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "24",
                                        "TextColor": "#7A005C",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@code_art",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@unit_name",
                                        "Variable": "id_unit",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@barcode_value",
                                        "Variable": "barcode_value1",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Отменить",
                                                "Variable": "btn_barcode_cancel",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            },
                                            {
                                                "Value": "Удалить",
                                                "Variable": "btn_barcode_delete",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "delete_barcode_screen_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "delete_barcode_screen_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибка сканера",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@scanned_barcode",
                                        "Variable": "scanned_barcode",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "ОШИБКА",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "24",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Товар не найден по штрихкоду!",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Сканер отключен",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Продолжить сканирование",
                                        "Variable": "btn_continue_scan",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_error_screen_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ВвестиШтрихкод",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Введите значение штрихкода",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_barcode",
                                        "Variable": "fld_barcode",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ПотокШтрихкодовДокумента",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@doc_type",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "18",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_n",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@doc_date",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "|| ||| ||",
                                                "Variable": "btn_barcodes",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@warehouse",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@countragent",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "vertical",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@doc_barc_flow",
                                        "Variable": "doc_barc_flow",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "Выгрузить документ",
                                        "Variable": "btn_doc_mark_verified",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_flow_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_flow_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Групповая обработка",
                "PlanFactHeader": "...",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Плитки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "gravity_horizontal": "center",
                                "gravity_vertical": "center",
                                "weight": "0",
                                "type": "Tiles",
                                "Value": "@tiles",
                                "Variable": "tiles",
                                "Elements": [
                                    {
                                        "Value": "@gtin",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@series",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "runprogress",
                                "type": "python",
                                "method": "gs_tiles_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "tiles_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_type_select",
                                                "Variable": "doc_type_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            },
                                            {
                                                "Value": "@doc_status_select",
                                                "Variable": "doc_status_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@docCards",
                                        "Variable": "doc_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документ товары",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "vertical",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "@doc_n",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "TextSize": "24",
                                                                "TextColor": "#7A005C",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@doc_date",
                                                                "Variable": "doc_date",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "TextBold": false,
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@warehouse",
                                                                "Variable": "warehouse",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@countragent",
                                                                "Variable": "countragent",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "0",
                                                                "type": "TextView"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "pagination_controls",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "<",
                                                "Variable": "previous_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "2",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "match_parent",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Страница:",
                                                        "Variable": "",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@current_page",
                                                        "Variable": "current_page",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@items_on_page_select",
                                                        "Variable": "items_on_page_click",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "16",
                                                        "TextColor": "#000000",
                                                        "type": "SpinnerLayout"
                                                    }
                                                ],
                                                "BackgroundColor": "",
                                                "StrokeWidth": "",
                                                "Padding": ""
                                            },
                                            {
                                                "Value": ">",
                                                "Variable": "next_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "orientation": "",
                                                "weight": "2",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "Value": "@doc_goods_table",
                                        "Variable": "doc_goods_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "@doc_goods_cards",
                                        "Variable": "doc_goods_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "CButtons"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Все строки",
                                "Variable": "btn_rows_filter_off"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Необработанные строки",
                                "Variable": "btn_rows_filter_on"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Ввести штрихкод",
                                "Variable": "btn_barcodes"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибка сканера",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@scanned_barcode",
                                        "Variable": "scanned_barcode",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "ОШИБКА",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "24",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Товар не найден по штрихкоду!",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Сканер отключен",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Продолжить сканирование",
                                        "Variable": "btn_continue_scan",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_error_screen_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ВвестиШтрихкод",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Введите значение штрихкода",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_barcode",
                                        "Variable": "fld_barcode",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Подтвердите действие",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Вы открываете документ в режиме групповой работы. Работает только онлайн.",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "TextView"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Адресное хранение",
                "PlanFactHeader": "",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_adr_type_select",
                                                "Variable": "doc_adr_type_click",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "SpinnerLayout"
                                            },
                                            {
                                                "Value": "@doc_status_select",
                                                "Variable": "doc_status_click",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "SpinnerLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@docAdrCards",
                                        "Variable": "doc_adr_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документ товары",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Текущая ячейка: ",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@current_cell",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextSize": "20",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "pagination_controls",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "<",
                                                "Variable": "previous_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "2",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "match_parent",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Страница:",
                                                        "Variable": "",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@current_page",
                                                        "Variable": "current_page",
                                                        "height": "match_parent",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@items_on_page_select",
                                                        "Variable": "items_on_page_click",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "orientation": "",
                                                        "weight": "",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "16",
                                                        "TextColor": "#000000",
                                                        "type": "SpinnerLayout"
                                                    }
                                                ],
                                                "BackgroundColor": "",
                                                "StrokeWidth": "",
                                                "Padding": ""
                                            },
                                            {
                                                "Value": ">",
                                                "Variable": "next_page",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "orientation": "",
                                                "weight": "2",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "Button"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Отменить выбор",
                                                "Variable": "btn_clear_cell",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_type",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "18",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "Табл.",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@tables_type",
                                                "Variable": "table_type",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_n",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@doc_date",
                                                "Variable": "",
                                                "height": "0",
                                                "width": "0",
                                                "weight": "0",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "|| ||| ||",
                                                "Variable": "btn_barcodes",
                                                "height": "0",
                                                "width": "0",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "Value": "@warehouse",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@doc_goods_table",
                                        "Variable": "doc_goods_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "Выгрузить документ",
                                        "Variable": "btn_doc_mark_verified",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Все строки",
                                "Variable": "btn_rows_filter_off"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Необработанные строки",
                                "Variable": "btn_rows_filter_on"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Ввести штрихкод",
                                "Variable": "btn_barcodes"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Выгрузить документ",
                                "Variable": "btn_doc_mark_verified"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Выбрать ячейку",
                                "Variable": "btn_select_cell"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_details_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "adr_doc_details_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@Doc_data",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@current_cell_name",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextSize": "20",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_select_cell",
                                                "height": "30",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@Good",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_good_select",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@properties",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "16",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_properties",
                                                "height": "wrap_content",
                                                "width": "30",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "План",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty_plan",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "TextSize": "24",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "TextSize": "24",
                                                        "type": "EditTextNumeric"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "HorizontalGallery",
                                "Value": "@photoGallery",
                                "Variable": "photoGallery"
                            },
                            {
                                "type": "photo",
                                "Value": "",
                                "Variable": "photo"
                            },
                            {
                                "type": "photoGallery",
                                "Value": "",
                                "Variable": "photo"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Товар выбор",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@Doc_data",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "16",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@Good",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "24",
                                        "TextColor": "#7A005C",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "План",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty_plan",
                                                        "Variable": "qtty_plan",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "0",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_input",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "vertical",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_1",
                                                                        "height": "wrap_content",
                                                                        "width": "match_parent",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "horizontal",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "Было:",
                                                                        "Variable": "",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "1",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "TextSize": "18",
                                                                        "type": "TextView"
                                                                    },
                                                                    {
                                                                        "Value": "@qtty",
                                                                        "Variable": "qtty",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "orientation": "",
                                                                        "weight": "1",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "TextSize": "18",
                                                                        "TextColor": "",
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_2",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "center"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "vertical",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_left",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "Будет:",
                                                                        "Variable": "",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "1",
                                                                        "TextBold": true,
                                                                        "TextItalic": false,
                                                                        "TextSize": "21",
                                                                        "type": "TextView"
                                                                    },
                                                                    {
                                                                        "Value": "@new_qtty",
                                                                        "Variable": "new_qtty",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "orientation": "",
                                                                        "weight": "1",
                                                                        "TextBold": true,
                                                                        "TextItalic": false,
                                                                        "TextSize": "24",
                                                                        "TextColor": "",
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            },
                                                            {
                                                                "type": "LinearLayout",
                                                                "Variable": "",
                                                                "orientation": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "Elements": [
                                                                    {
                                                                        "Value": "",
                                                                        "Variable": "blank_right",
                                                                        "height": "wrap_content",
                                                                        "width": "wrap_content",
                                                                        "weight": "0",
                                                                        "TextBold": false,
                                                                        "TextItalic": false,
                                                                        "type": "TextView"
                                                                    }
                                                                ],
                                                                "BackgroundColor": "",
                                                                "StrokeWidth": "",
                                                                "Padding": ""
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": "center"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_note",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "Value": "Факт",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "0",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "#000000",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "fact_qtty_input",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Добавить:",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "21",
                                                "TextColor": "#000000",
                                                "type": "TextView"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "fact_qtty_input",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "-5",
                                                        "Variable": "ops_-5",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "-1",
                                                        "Variable": "ops_-1",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "@delta",
                                                        "Variable": "delta",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "24",
                                                        "TextColor": "#000000",
                                                        "type": "ModernEditText"
                                                    },
                                                    {
                                                        "Value": "+1",
                                                        "Variable": "ops_+1",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    },
                                                    {
                                                        "Value": "+5",
                                                        "Variable": "ops_+5",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "orientation": "",
                                                        "weight": "1",
                                                        "TextBold": false,
                                                        "TextItalic": false,
                                                        "TextSize": "21",
                                                        "TextColor": "",
                                                        "type": "Button"
                                                    }
                                                ],
                                                "BackgroundColor": "",
                                                "StrokeWidth": "",
                                                "Padding": ""
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Сохранить",
                                                        "Variable": "btn_ok",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "type": "Button"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_viev_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "adr_elem_viev_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибка сканера",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@scanned_barcode",
                                        "Variable": "scanned_barcode",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "ОШИБКА",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "24",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Товар не найден по штрихкоду!",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Сканер отключен",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Продолжить сканирование",
                                        "Variable": "btn_continue_scan",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_error_screen_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ВвестиШтрихкод",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Введите значение штрихкода",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_barcode",
                                        "Variable": "fld_barcode",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Новый документ",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@doc_adr_type_select",
                                        "Variable": "doc_type_click",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "SpinnerLayout"
                                    },
                                    {
                                        "Value": "@fld_number",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "50",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    },
                                    {
                                        "Value": "@doc_date",
                                        "Variable": "fld_data",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "DateField"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@warehouse",
                                                "Variable": "warehouse",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "1",
                                                "TextSize": "18",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "...",
                                                "Variable": "btn_select_warehouse",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextSize": "18",
                                                "type": "Button"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            },
                                            {
                                                "Value": "Отменить",
                                                "Variable": "btn_cancel",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "Button"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "new_adr_doc_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "new_adr_doc_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Сбор ШК",
                "PlanFactHeader": "",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Плитки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "gravity_horizontal": "center",
                                "gravity_vertical": "center",
                                "weight": "0",
                                "type": "Tiles",
                                "Value": "@tiles",
                                "Variable": "tiles",
                                "Elements": [
                                    {
                                        "Value": "@gtin",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@series",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "flow_tiles_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "flow_tiles_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_type_select",
                                                "Variable": "doc_type_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            },
                                            {
                                                "Value": "@doc_status_select",
                                                "Variable": "doc_status_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@docCards",
                                        "Variable": "doc_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "flow_docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "flow_docs_on_select",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ПотокШтрихкодовДокумента",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@doc_type",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "18",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@doc_n",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@doc_date",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "TextView"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@warehouse",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@countragent",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "vertical",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@doc_barc_flow",
                                        "Variable": "doc_barc_flow",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "Выгрузить документ",
                                        "Variable": "btn_doc_mark_verified",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "Button"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Ввести штрихкод",
                                "Variable": "btn_barcodes"
                            },
                            {
                                "type": "MenuItem",
                                "Value": "Выгрузить документ",
                                "Variable": "btn_doc_mark_verified"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_flow_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_flow_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "ВвестиШтрихкод",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Введите значение штрихкода",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_barcode",
                                        "Variable": "fld_barcode",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Универсальный справочник",
                "DefineOnBackPressed": false,
                "hidden": true,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Справочник",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@cards",
                                        "Variable": "current_card",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "universal_cards_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "universal_cards_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Товары",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Товары список",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Категория:",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "2",
                                                "TextItalic": false,
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@select_goods_type",
                                                "Variable": "select_goods_type",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "object"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@error_txt",
                                        "Variable": "error_txt",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextColor": "#ff0000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@goods_cards",
                                        "Variable": "goods_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Карточка товара",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "buttons",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Цены",
                                                "Variable": "to_prices",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "ProgressButton"
                                            },
                                            {
                                                "Value": "",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "2",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "Остатки",
                                                "Variable": "to_balances",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "orientation": "",
                                                "weight": "1",
                                                "type": "ProgressButton"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "name",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@good_name",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "TextSize": "22",
                                                "TextColor": "#7A005C",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@item_key",
                                                "Variable": "item_key",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "TextView"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "good_info",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "@good_type",
                                                "Variable": "good_type",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": true,
                                                "type": "TextView"
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "art",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Артикул:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_art",
                                                        "Variable": "good_art",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": false,
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "code",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Код:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_code",
                                                        "Variable": "good_code",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "descr",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Описание:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "TextBold": true,
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@good_descr",
                                                        "Variable": "good_descr",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    }
                                                ]
                                            },
                                            {
                                                "Value": "@barcode_cards",
                                                "Variable": "barcode_cards",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "type": "CardsLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@load_info",
                                        "Variable": "load_info",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_on_input",
                                "postExecute": ""
                            },
                            {
                                "event": "onPostStart",
                                "action": "run",
                                "type": "python",
                                "method": "good_card_post_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор категории товаров ",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@goods_types_cards",
                                        "Variable": "goods_types_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "select_type_goods_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "select_type_goods_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Остатки",
                "DefineOnBackPressed": true,
                "hidden": true,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Проверить остатки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "get_balances_controls",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "head_block",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "Elements": [
                                                            {
                                                                "Value": "Выбор склада:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@wh_select",
                                                                "Variable": "wh_select",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "type": "object"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "input_block",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "art",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "Артикул товара:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@item_art_input",
                                                                "Variable": "item_art_input",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "orientation": "",
                                                                "weight": "1",
                                                                "TextBold": false,
                                                                "TextItalic": false,
                                                                "TextSize": "",
                                                                "TextColor": "",
                                                                "type": "EditTextText"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "cell",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "Артикул ячейки:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@cell_input",
                                                                "Variable": "cell_input",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "type": "EditTextText"
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": ""
                                                    }
                                                ]
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    }
                                ]
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "info_block",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@selected_object_name",
                                        "Variable": "selected_object_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "16",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@barcode_info",
                                        "Variable": "barcode_info",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@selected_cell_name",
                                        "Variable": "selected_cell_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextSize": "16",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@error_msg",
                                        "Variable": "error_msg",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextSize": "16",
                                        "TextColor": "#ff0000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@selected_wh_name",
                                        "Variable": "selected_wh_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "get_balances_controls",
                                "orientation": "horizontal",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "2",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Запросить остатки",
                                        "Variable": "get_balance_btn",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "1",
                                        "TextSize": "15",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "2",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TextView"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@balances_table",
                                        "Variable": "balances_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode"
                            },
                            {
                                "type": "fab",
                                "Value": "#f1de",
                                "Variable": "show_filters"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "balances_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "balances_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор склада",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@wh_cards",
                                        "Variable": "wh_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "fab",
                                "Value": "backward",
                                "Variable": "back_to_remains"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "wh_select_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "wh_select_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Цены",
                "DefineOnBackPressed": true,
                "hidden": true,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Проверка цен",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "get_prices_controls",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "head_block",
                                        "orientation": "vertical",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "horizontal",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Elements": [
                                                    {
                                                        "Value": "Артикул товара:",
                                                        "Variable": "",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "2",
                                                        "TextItalic": true,
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "Value": "@input_good_art",
                                                        "Variable": "input_good_art",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "1",
                                                        "type": "EditTextText"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "input_block",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Elements": [
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "price_type",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "Тип цены:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@price_type_select",
                                                                "Variable": "price_type_select",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "type": "object"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "Value": "",
                                                        "Variable": "",
                                                        "height": "10",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "properties",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "Характеристики:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@property_select",
                                                                "Variable": "property_select",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "type": "object"
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": ""
                                                    },
                                                    {
                                                        "Value": "",
                                                        "Variable": "",
                                                        "height": "10",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "type": "TextView"
                                                    },
                                                    {
                                                        "type": "LinearLayout",
                                                        "Variable": "units",
                                                        "orientation": "horizontal",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Elements": [
                                                            {
                                                                "Value": "Упаковка:",
                                                                "Variable": "",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "2",
                                                                "type": "TextView"
                                                            },
                                                            {
                                                                "Value": "@unit_select",
                                                                "Variable": "unit_select",
                                                                "height": "wrap_content",
                                                                "width": "match_parent",
                                                                "weight": "1",
                                                                "type": "object"
                                                            }
                                                        ],
                                                        "BackgroundColor": "",
                                                        "StrokeWidth": "",
                                                        "Padding": ""
                                                    }
                                                ]
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    }
                                ]
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@prices_object_name",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@selected_price_type_name",
                                        "Variable": "selected_price_type_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@selected_property_name",
                                        "Variable": "selected_property_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@selected_unit_name",
                                        "Variable": "selected_unit_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@barcode_info",
                                        "Variable": "barcode_info",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@prices_error_msg",
                                        "Variable": "prices_error_msg",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextColor": "#ff0000",
                                        "type": "TextView"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "get_prices_controls",
                                "orientation": "horizontal",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "2",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Показать",
                                        "Variable": "get_prices_btn",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "1",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "2",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TextView"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@prices_table",
                                        "Variable": "prices_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode"
                            },
                            {
                                "type": "fab",
                                "Value": "#f1de",
                                "Variable": "show_filters"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "prices_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "prices_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор типа цены",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@price_type_cards",
                                        "Variable": "price_type_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "fab",
                                "Value": "backward",
                                "Variable": "back_to_prices"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "price_types_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "price_types_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор характеристик",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@property_cards",
                                        "Variable": "property_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "fab",
                                "Value": "backward",
                                "Variable": "back_to_prices"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "properties_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "properties_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Выбор упаковки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@unit_cards",
                                        "Variable": "unit_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CardsLayout"
                                    }
                                ]
                            },
                            {
                                "type": "fab",
                                "Value": "backward",
                                "Variable": "back_to_prices"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "units_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "units_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Таблица цен",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@barcode_info",
                                        "Variable": "barcode_info",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@prices_object_name",
                                        "Variable": "prices_object_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextColor": "#008000",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@prices_table",
                                        "Variable": "prices_table",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "type": "TableLayout"
                                    }
                                ]
                            },
                            {
                                "type": "fab",
                                "Value": "#f1de",
                                "Variable": "show_filters"
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "prices_table_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "prices_table_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Параметры",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Настройки и обмен",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@ip_adr",
                                        "Variable": "text_ip",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "25",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "Настройки маркировки",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "ИспользоватьМаркировку",
                                        "Variable": "use_mark",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CheckBox"
                                    },
                                    {
                                        "Value": "Разрешить ввод факт товара",
                                        "Variable": "allow_fact_input",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CheckBox"
                                    },
                                    {
                                        "Value": "@path",
                                        "Variable": "path",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "EditTextText"
                                    },
                                    {
                                        "Value": "Настройки HTTP подключения",
                                        "Variable": "btn_http_settings",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Настройки шрифтов",
                                        "Variable": "btn_size",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Настройки звука",
                                        "Variable": "btn_sound_settings",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Тест сканера",
                                        "Variable": "btn_test_barcode",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Лог ошибок",
                                        "Variable": "btn_err_log",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Очистить базу",
                                        "Variable": "bnt_clear_tables",
                                        "height": "0",
                                        "width": "0",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Выгрузить данные на  HTTP сервер",
                                        "Variable": "btn_upload_docs",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Обмен с HTTP 1c сервером",
                                        "Variable": "btn_timer",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Удалить настройки этикеток",
                                        "Variable": "btn_delete_template_settings",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "ProgressButton"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "СписокФайлов",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@files_list",
                                        "Variable": "files_list",
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "MultilineText"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "file_list_on_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройки Шрифтов",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Размеры",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@TitleTextSize",
                                        "Variable": "TitleTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@CardTitleTextSize",
                                        "Variable": "CardTitleTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@CardDateTextSize",
                                        "Variable": "CardDateTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@CardTextSize",
                                        "Variable": "CardTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@GoodsCardTitleTextSize",
                                        "Variable": "GoodsCardTitleTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@goodsTextSize",
                                        "Variable": "goodsTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@SeriesPropertiesTextSize",
                                        "Variable": "SeriesPropertiesTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@DocTypeCardTextSize",
                                        "Variable": "DocTypeCardTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@titleDocTypeCardTextSize",
                                        "Variable": "titleDocTypeCardTextSize",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "Сохранить",
                                        "Variable": "btn_on_save",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "font_sizes_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "font_size_settings_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Тест сканера",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Отсканируйте штрихкод",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": true,
                                        "TextSize": "20",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_1",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_2",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_3",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_4",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_5",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_6",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@fld_7",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "TextColor": "",
                                        "type": "TextView"
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "test_barcode_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Ошибки",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Очистить",
                                                "Variable": "btn_clear_err",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "ProgressButton"
                                            },
                                            {
                                                "Value": "@date_sort_select",
                                                "Variable": "date_sort_click",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "type": "SpinnerLayout"
                                            }
                                        ]
                                    },
                                    {
                                        "Value": "@error_log_table",
                                        "Variable": "error_log_table",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TableLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "settings_errors_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "settings_errors_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройки http соединения",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@url",
                                        "Variable": "url",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@user",
                                        "Variable": "user",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@pass",
                                        "Variable": "pass",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@user_name",
                                        "Variable": "user_name",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "@btn_test_connection",
                                        "Variable": "btn_test_connection",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "@ANDROID_ID",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextSize": "20",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Elements": [
                                            {
                                                "Value": "Отменить",
                                                "Variable": "btn_cancel",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "ProgressButton"
                                            },
                                            {
                                                "Value": "Сохранить",
                                                "Variable": "btn_save",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "type": "ProgressButton"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "barcode",
                                "Value": "",
                                "Variable": "barcode_camera2"
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "http_settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "http_settings_on_click",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Настройка звука",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@event_cards",
                                        "Variable": "event_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "CardsLayout"
                                    },
                                    {
                                        "Value": "Сохранить и закрыть",
                                        "Variable": "save_btn",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "Button"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "sound_settings_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "sound_settings_listener",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Отладка",
                "DefineOnBackPressed": false,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Отладочный экран",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": true,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Настройки маркировки",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "ИспользоватьМаркировку",
                                        "Variable": "use_mark",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CheckBox"
                                    },
                                    {
                                        "Value": "@ip_host",
                                        "Variable": "ip_host",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ModernEditText"
                                    },
                                    {
                                        "Value": "Скопировать базу на компьютер",
                                        "Variable": "btn_copy_base",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Выгрузить лог",
                                        "Variable": "btn_unload_log",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "@path",
                                        "Variable": "path",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "EditTextText"
                                    },
                                    {
                                        "Value": "Удалять файлы после загрузки",
                                        "Variable": "delete_files",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "CheckBox"
                                    },
                                    {
                                        "Value": "Загрузить локальные csv файлы",
                                        "Variable": "btn_local_files",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Выгрузить изменения в csv ",
                                        "Variable": "btn_export",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Создать таблицы БД",
                                        "Variable": "btn_init",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Список локальных файлов",
                                        "Variable": "btn_files_list",
                                        "height": "0",
                                        "width": "0",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Версия конфигурации",
                                        "Variable": "btn_conf_version",
                                        "height": "0",
                                        "width": "0",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Очистить базу",
                                        "Variable": "bnt_clear_tables",
                                        "height": "0",
                                        "width": "0",
                                        "weight": "0",
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "Заполнить Ratio",
                                        "Variable": "btn_fill_ratio",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "1",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "ProgressButton"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "debug_listener",
                                "postExecute": ""
                            },
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "debug_on_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Печать",
                "PlanFactHeader": "",
                "DefineOnBackPressed": true,
                "hidden": true,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Список шаблонов",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": true,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Получить с сервера",
                                        "Variable": "btn_get_http_templates",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "@current_template",
                                        "Variable": "current_template",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@templates_cards",
                                        "Variable": "templates_cards",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "template_list_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "template_list_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "Результат",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "Шаблон:",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "TextView"
                                    },
                                    {
                                        "Value": "@html",
                                        "Variable": "html",
                                        "height": "300",
                                        "width": "match_parent",
                                        "orientation": "vertical",
                                        "weight": "3",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "html"
                                    },
                                    {
                                        "Value": "@matching_table",
                                        "Variable": "matching_table_values",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "1",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TableLayout"
                                    },
                                    {
                                        "Value": "Размер штрихкода",
                                        "Variable": "",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "1",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "TextView"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "1",
                                        "Elements": [
                                            {
                                                "Value": "Ширина",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@picture_with",
                                                "Variable": "picture_with",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "orientation": "",
                                                "weight": "",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "",
                                                "TextColor": "",
                                                "type": "EditTextNumeric"
                                            },
                                            {
                                                "Value": "Высота",
                                                "Variable": "",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "orientation": "",
                                                "weight": "",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "",
                                                "TextColor": "",
                                                "type": "TextView"
                                            },
                                            {
                                                "Value": "@picture_highth",
                                                "Variable": "picture_highth",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "orientation": "",
                                                "weight": "",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "",
                                                "TextColor": "",
                                                "type": "EditTextNumeric"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "1",
                                        "Elements": [
                                            {
                                                "Value": "Отмена",
                                                "Variable": "btn_cancel",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "type": "Button"
                                            },
                                            {
                                                "Value": "Сохранить",
                                                "Variable": "btn_save",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "orientation": "",
                                                "weight": "",
                                                "TextBold": false,
                                                "TextItalic": false,
                                                "TextSize": "",
                                                "TextColor": "",
                                                "type": "Button"
                                            }
                                        ],
                                        "BackgroundColor": "",
                                        "StrokeWidth": "",
                                        "Padding": ""
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "html_view_on_input",
                                "postExecute": ""
                            },
                            {
                                "event": "onStart",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "html_view_on_start",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    },
                    {
                        "type": "Operation",
                        "Name": "НастройкаСоответствияДиалог",
                        "Timer": false,
                        "hideBottomBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideToolBarScreen": false,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "layout",
                                "orientation": "vertical",
                                "height": "match_parent",
                                "width": "match_parent",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@list_field",
                                        "Variable": "select_field",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "type": "SpinnerLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            },
            {
                "type": "Process",
                "ProcessName": "Проводник",
                "PlanFactHeader": "",
                "DefineOnBackPressed": false,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Проводник файлов",
                        "Timer": false,
                        "hideBottomBarScreen": true,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideToolBarScreen": true,
                        "Elements": [
                            {
                                "type": "LinearLayout",
                                "Variable": "",
                                "orientation": "vertical",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "weight": "0",
                                "Elements": [
                                    {
                                        "Value": "@ip_host",
                                        "Variable": "ip_host",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "1",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "EditTextText"
                                    },
                                    {
                                        "Value": "Вверх",
                                        "Variable": "btn_get_up",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "type": "ProgressButton"
                                    },
                                    {
                                        "Value": "@templates_cards",
                                        "Variable": "templates_cards",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "orientation": "",
                                        "weight": "",
                                        "TextBold": false,
                                        "TextItalic": false,
                                        "TextSize": "",
                                        "TextColor": "",
                                        "type": "CardsLayout"
                                    }
                                ]
                            }
                        ],
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "file_browser_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "listener": "",
                                "action": "run",
                                "type": "python",
                                "method": "file_browser_on_input",
                                "postExecute": ""
                            }
                        ],
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false
                    }
                ]
            }
        ],
        "ConfigurationSettings": {
            "uid": "a6ce59bc3f714a5284213f6e293e3e91",
            "vendor": "Simple",
            "vendor_url": "",
            "vendor_auth": "",
            "handler_split_mode": false,
            "handler_code": "",
            "handler_url": "",
            "handler_auth": "",
            "dictionaries": ""
        },
        "ConfigurationTags": "",
        "FaceRecognitionURL": "",
        "ForegroundService": false,
        "StopForegroundServiceOnExit": false,
        "RunPython": true,
        "LaunchProcess": "",
        "MainMenu": [
            {
                "MenuId": "01",
                "MenuItem": "faq",
                "MenuTitle": "FAQ",
                "MenuTop": false
            },
            {
                "MenuId": "02",
                "MenuItem": "update_conf",
                "MenuTitle": "Обновить конфигурацию",
                "MenuTop": false
            }
        ],
        "Mediafile": [],
        "PyHandlers": "aW1wb3J0IGpzb24KaW1wb3J0IHNvY2tldAppbXBvcnQgcmVxdWVzdHMKZnJvbSByZXF1ZXN0cy5hdXRoIGltcG9ydCBIVFRQQmFzaWNBdXRoCmltcG9ydCBvcwpmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKCmltcG9ydCB1aV9iYXJjb2RlcwppbXBvcnQgdWlfY3N2CmltcG9ydCB1aV9nbG9iYWwKaW1wb3J0IHVpX2Zvcm1fZGF0YQppbXBvcnQgaHR0cF9leGNoYW5nZQpmcm9tIG5ld19oYW5kbGVycyBpbXBvcnQgKgoKCgojICoqKioqKioqKioqKioqKioqKioqKiDQodGC0LDRgNC+0LUg0LDQtNGA0LXRgdC90L7QtSDRhdGA0LDQvdC10L3QuNC1CiMgVG9kbyDQn9C10YDQtdC/0LjRgdCw0YLRjCDRjdGC0L4g0L/QviDQvdC+0LLQvtC5INC60LvQsNGB0YHQvtCy0L7QuSDRgdGF0LXQvNC1INC4INGD0LTQsNC70LjRgtGMINC40Lcg0LrQvtC00LAKCmRlZiBhZHJfZWxlbV9vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBoYXNoTWFwLnB1dCgnbW1fbG9jYWwnLCAnJykKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGFkcl9lbGVtX29uX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKCgogICAgaWYgbGlzdGVuZXIgPT0gImJ0bl9vayI6CiAgICAgICAgIyAjINC/0L7Qu9GD0YfQuNC8INGC0LXQutGD0YnRg9GOINGB0YLRgNC+0LrRgyDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICAjIGN1cnJlbnRfc3RyID0gaGFzaE1hcC5nZXQoInNlbGVjdGVkX2NhcmRfcG9zaXRpb24iKQogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19hZHJfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgICMgaWYgbm90IGN1cnJlbnRfc3RyID09ICcwJzoKICAgICAgICAjICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kcyIpKQogICAgICAgICMgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgICMgICAgIGtleSA9IGludChjdXJyZW50X2VsZW1bJ2tleSddKQogICAgICAgICMgICAgIGRvYy5pZF9zdHIgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIC4uLiDQuCDQt9Cw0L/QuNGI0LXQvCDQtdC1INCyINCx0LDQt9GDCiAgICAgICAgcXR0eSA9IGhhc2hNYXAuZ2V0KCdxdHR5JykKICAgICAgICBkb2MucXR0eSA9IGZsb2F0KHF0dHkpIGlmIHF0dHkgZWxzZSAwCiAgICAgICAgZWxlbV9mb3JfYWRkID17J2lkX2dvb2QnOmhhc2hNYXAuZ2V0KCdHb29kX2lkJyksICdpZF9wcm9wZXJ0eSc6aGFzaE1hcC5nZXQoJ3Byb3BlcnRpZXNfaWQnKSwgJ2lkX3Nlcmllcyc6aGFzaE1hcC5nZXQoJ3Nlcmllc19pZCcpLCAnaWRfdW5pdCc6IGhhc2hNYXAuZ2V0KCd1bml0X2lkJyl9CgogICAgICAgIGRvYy51cGRhdGVfZG9jX3RhYmxlX2RhdGEoZG9jLCBlbGVtX2Zvcl9hZGQsIHF0dHksIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2NlbGxfbmFtZScpLGhhc2hNYXAuZ2V0KCd0YWJsZV90eXBlX2ZpbHRlcicpKSAjKGRvYywgKQoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2NhbmNlbCI6CgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICIiOgogICAgICAgIGhhc2hNYXAucHV0KCJxdHR5Iiwgc3RyKGZsb2F0KGhhc2hNYXAuZ2V0KCdxdHR5JykpKSkKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9nb29kX3NlbGVjdCI6CiAgICAgICAgaGFzaE1hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfZ29vZHMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X2dvb2RzX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2FydCcpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICMtLQogICAgZWxpZiBsaXN0ZW5lciA9PSAic2VsZWN0X2dvb2RzX3ZhbHVlIjoKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgnR29vZF9pZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2lkJykpCiAgICAgICAgIyDQn9GA0Lgg0LLRi9Cx0L7RgNC1INGC0L7QstCw0YDQsCDQt9Cw0L/QvtC70L3QuNC8INC10LTQuNC90LjRhtGDINC40LfQvNC10YDQtdC90LjRjyDQv9C+INGD0LzQvtC70YfQsNC90LjRjgogICAgICAgIHF0ZXh0ID0gJycnU2VsZWN0IFJTX2dvb2RzLnVuaXQgYXMgdW5pdF9pZCwgCiAgICAgICAgICAgICAgICAgICAgUlNfdW5pdHMubmFtZSAKICAgICAgICAgICAgICAgICAgICBGcm9tIFJTX2dvb2RzCiAgICAgICAgICAgICAgICAgICAgICBMZWZ0IEpvaW4gUlNfdW5pdHMgb24gUlNfdW5pdHMuaWRfb3duZXIgPSBSU19nb29kcy5pZCBhbmQgUlNfdW5pdHMuaWQgPSBSU19nb29kcy51bml0IAogICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX2dvb2RzLmlkID0gPycnJwogICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSwpKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3VuaXRfaWQnLCByZXNbMF1bMF0pCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1bml0JywgcmVzWzBdWzFdKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9wcm9wZXJ0aWVzIjoKICAgICAgICBoYXNoTWFwLnB1dCgnU2VhcmNoU3RyaW5nJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19wcm9wZXJ0aWVzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9wcm9wZXJ0aWVzX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lO2lkX293bmVyJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgIyAtLQogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X3Byb3BlcnRpZXNfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCdwcm9wZXJ0aWVzJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCdwcm9wZXJ0aWVzX2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fc2VyaWVzIjoKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19zZXJpZXMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X3Nlcmllc192YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTsgaWRfb3duZXInKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCiAgICAgICAgI19fCiAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3Rfc2VyaWVzX3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgnc2VyaWVzJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCdzZXJpZXNfaWQnLCBoYXNoTWFwLmdldCgnY3VycmVudF9pZCcpKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl91bml0IjoKICAgICAgICBoYXNoTWFwLnB1dCgnU2VhcmNoU3RyaW5nJywgaGFzaE1hcC5nZXQoJ0dvb2RfaWQnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU191bml0cycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgIGhhc2hNYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfdW5pdF92YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTtpZF9vd25lcicpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICAgICAjX18KICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF91bml0X3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgndW5pdCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndW5pdF9pZCcsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X2lkJykpCiAgICAjYnRuX3NlbGVjdF9jZWxsCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fc2VsZWN0X2NlbGwiOgogICAgICAgIGhhc2hNYXAucHV0KCdTZWFyY2hTdHJpbmcnLCAnJykKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19jZWxscycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgIGhhc2hNYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfY2VsbF92YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTtiYXJjb2RlJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgICAgICNfXwogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X2NlbGxfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCdjdXJyZW50X2NlbGxfbmFtZScsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICBoYXNoTWFwLnB1dCgnY3VycmVudF9jZWxsX2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJwaG90byI6CgogICAgICAgICMg0JzQvtC20L3QviDQstC+0L7QsdGJ0LUg0Y3RgtC+0LPQviDQvdC1INC00LXQu9Cw0YLRjC3QvtGB0YLQsNCy0LvRj9GC0Ywg0LrQsNC6INC10YHRgtGMLiDQrdGC0L4g0LTQu9GPINC/0YDQuNC80LXRgNCwLgogICAgICAgIGltYWdlX2ZpbGUgPSBzdHIoCiAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCJwaG90b19wYXRoIikpICAjICLQv9C10YDQtdC80LXQvdC90LDRjyIrIl9wYXRoIiAtINGB0Y7QtNCwINC/0L7QvNC10YnQsNC10YLRgdGPINC/0YPRgtGMINC6INC/0L7Qu9GD0YfQtdC90L3QvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC4CgogICAgICAgIGltYWdlID0gSW1hZ2Uub3BlbihpbWFnZV9maWxlKQoKICAgICAgICAjINGB0YDQsNC30YMg0YHQtNC10LvQsNC10Lwg0YTQvtGC0LrRgyAtINC60LLQsNC00YDQsNGC0L3QvtC5IC0g0Y3RgtC+INC/0YDQvtGB0YLQvtC5INCy0LDRgNC40LDQvdGCLiDQnNC+0LbQvdC+INGB0LTQtdC70LDRgtGMINC90LDQv9GA0LjQvNC10YAg0L7RgtC00LXQu9GM0L4g0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRgdC/0LjRgdC60LAsINGN0YLQviDQvdC10LzQvdC+0LPQviDRgdC70L7QttC90LXQtQogICAgICAgIGltID0gaW1hZ2UucmVzaXplKCg1MDAsIDUwMCkpCiAgICAgICAgaW0uc2F2ZShpbWFnZV9maWxlKQoKICAgICAgICBqcGhvdG9hcnIgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJwaG90b0dhbGxlcnkiKSkKICAgICAgICBoYXNoTWFwLnB1dCgicGhvdG9HYWxsZXJ5IiwganNvbi5kdW1wcyhqcGhvdG9hcnIpKQogICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0Iixqc29uLmR1bXBzKGpwaG90b2FycikpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiZ2FsbGVyeV9jaGFuZ2UiOiAgIyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LzQvtC20LXRgiDRg9C00LDQu9C40YLRjCDRhNC+0YLQviDQuNC3INCz0LDQu9C10YDQtdC4LiDQndC+0LLRi9C5INC80LDRgdGB0LjQsiDQvdCw0LTQviDQv9C+0LzQtdGB0YLQuNGC0Ywg0Log0LTQvtC60YPQvNC10L3RgtGDCgogICAgICAgIGlmIGhhc2hNYXAuY29udGFpbnNLZXkoInBob3RvR2FsbGVyeSIpOiAgIyDRjdGC0LggMiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwIC0g0LDQvdCw0LvQvtCz0LjRh9C90YvQtSwg0L/RgNC+0YHRgtC+INC00LvRjyDRgNCw0LfQvdGL0YUg0YHQvtCx0YvRgtC40LkKICAgICAgICAgICAganBob3RvYXJyID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgicGhvdG9HYWxsZXJ5IikpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCJwaG90b0dhbGxlcnkiLCBqc29uLmR1bXBzKGpwaG90b2FycikpCiAgICAgICAgICAgICMgaGFzaE1hcC5wdXQoInRvYXN0IiwiIzIiK2pzb24uZHVtcHMoanBob3RvYXJyKSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBuZXdfYWRyX2RvY19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnZG9jX2Fkcl90eXBlX3NlbGVjdCcpID09IE5vbmU6CiAgICAgICAgIyDQl9Cw0L/QvtC70L3QuNC8INC/0L7Qu9C1INGE0LjQu9GM0YLRgNCwINC/0L4g0LLQuNC00YMg0LTQvtC60YPQvNC10L3RgtC+0LIKICAgICAgICBkb2NfdHlwZV9saXN0ID0gWyfQntGC0LHQvtGAJywgJ9Cg0LDQt9C80LXRidC10L3QuNC1JywgJ9Cf0LXRgNC10LzQtdGJ0LXQvdC40LUnXQogICAgICAgIGhhc2hNYXAucHV0KCdkb2NfYWRyX3R5cGVfc2VsZWN0JywgJzsnLmpvaW4oZG9jX3R5cGVfbGlzdCkpCgoKICAgIGlmIGhhc2hNYXAuZ2V0KCd3YXJlaG91c2UnKSA9PSBOb25lOgogICAgICAgICNmbGRfY291bnRyYWdlbnQgPSB1aV9nbG9iYWwuZ2V0X25hbWVfbGlzdCgnUlNfd2FyZWhvdXNlcycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3dhcmVob3VzZScsICfQodC60LvQsNC0JykgI2RvY193YXJlaG91c2UKCiAgICBpZiBub3QgaGFzaE1hcC5jb250YWluc0tleSgnZG9jX2RhdGUnKToKICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX2RhdGUnLCAnMDEuMDEuMjAyMicpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgbmV3X2Fkcl9kb2Nfb25fc2VsZWN0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKICAgIHR5cGUgPSBoYXNoTWFwLmdldCgnZG9jX3R5cGVfY2xpY2snKQogICAgaWYgbm90IHR5cGUgb3IgdHlwZT09J9CS0YHQtSc6CiAgICAgICAgdHlwZSA9ICfQntGC0LHQvtGAJwogICAgZmxkX251bWJlciA9IGhhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKCiAgICBpZiBsaXN0ZW5lciA9PSAiYnRuX29rIjoKICAgICAgICBpZiBub3QgZmxkX251bWJlcjoKCiAgICAgICAgICAgIGlkID0gdWlfZ2xvYmFsLlJzX2Fkcl9kb2MuZ2V0X25ld19pZCgxKQogICAgICAgICAgICAjIGlkID0gKGYne2lkOjA0fScpCiAgICAgICAgICAgICMgaWQgPSAiezA6MD40fSIuZm9ybWF0KGlkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlkID0gZmxkX251bWJlcgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVpX2dsb2JhbC5Sc19hZHJfZG9jLmFkZCgnMDEnLCAoaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsICAjIGhhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCdmbGRfZGF0YScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9ieV9uYW1lKGhhc2hNYXAuZ2V0KCdkb2Nfd2FyZWhvdXNlJyksICdSU193YXJlaG91c2VzJykpKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQlNC+0LrRg9C80LXQvdGC0YsnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Cd0L7QvNC10YAg0LTQvtC60YPQvNC10L3RgtCwINC90LXRg9C90LjQutCw0LvQtdC9IScpCgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9jYW5jZWwnOgogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9CU0L7QutGD0LzQtdC90YLRiycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdmbGRfZGF0YSc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ2RvY19kYXRlJywgaGFzaE1hcC5nZXQoJ2ZsZF9kYXRhJykpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09J2J0bl9zZWxlY3Rfd2FyZWhvdXNlJzoKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU193YXJlaG91c2VzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgJ3NlbGVjdF9jZWxsX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X2NlbGxfdmFsdWUnOgogICAgICAgIGlmIGhhc2hNYXAuZ2V0KCd0YWJsZV9mb3Jfc2VsZWN0JykgPT0gJ1JTX3dhcmVob3VzZXMnOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgnd2FyZWhvdXNlJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKSAgIyBmbGRfY291bnRyYWdlbnQKCiAgICByZXR1cm4gaGFzaE1hcAoKCkBIYXNoTWFwKCkKZGVmIGRvY19kZXRhaWxzX2JlZm9yZV9wcm9jZXNzX2JhcmNvZGUoaGFzaF9tYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRgdC40L3RhdGA0L7QvdC90L7Qs9C+INC30LDQv9GA0L7RgdCwINC4INC+0LHQvdC+0LLQu9C10L3QuNGPINC00LDQvdC90YvRhSDQv9C+0YHQu9C1INGB0LrQsNC90LjRgNC+0LLQsNC90LjRjyDQuCDQv9C10YDQtdC0INC+0LHRgNCw0LHQvtGC0LrQvtC5INCo0JoiIiIKCiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR3JvdXBTY2FuRG9jRGV0YWlsc1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4uYmVmb3JlX3Byb2Nlc3NfYmFyY29kZSgpCgpASGFzaE1hcCgpCmRlZiBkb2NfZGV0YWlsc19iYXJjb2RlX3NjYW5uZWQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQsNGB0LjQvdGF0YDQvtC90L3QvtC5INC+0YLQv9GA0LDQstC60Lgg0Lgg0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQv9C+0YHQu9C1INGB0LrQsNC90LjRgNC+0LLQsNC90LjRjyDQqNCaIiIiCgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdyb3VwU2NhbkRvY0RldGFpbHNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLnBvc3RfYmFyY29kZV9zY2FubmVkKCkKCgpASGFzaE1hcCgpCmRlZiBkb2NfcnVuX3Bvc3RfYmFyY29kZV9zY2FubmVkKGhhc2hfbWFwKToKICAgICIiIiDQntGC0L/RgNCw0LLQutCwINC00LDQvdC90YvRhSDQv9C+0YHQu9C1INC+0LHRgNCw0LHQvtGC0LrQuCDQqNCaIiIiCgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdyb3VwU2NhbkRvY0RldGFpbHNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLmhhc2hfbWFwLnJlbW92ZSgndG9hc3QnKQogICAgc2NyZWVuLnBvc3RfYmFyY29kZV9zY2FubmVkKCkKCgpASGFzaE1hcCgpCmRlZiBkb2Nfc2Nhbl9lcnJvcl9zb3VuZChoYXNoX21hcCk6CiAgICAiIiIg0JfQstGD0LrQvtCy0YvQtSDRgdC40LPQvdCw0LvRiyDQvtGI0LjQsdC+0Log0YHQutCw0L3QuNGA0L7QstCw0L3QuNGPIiIiCgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdyb3VwU2NhbkRvY0RldGFpbHNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLnNjYW5fZXJyb3Jfc291bmQoKQoKCkBIYXNoTWFwKCkKZGVmIGhpZ2hsaWdodF9zY2FubmVkX2l0ZW0oaGFzaF9tYXA6IEhhc2hNYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQvtGC0LzQtdC90Ysg0YDQsNGB0LrRgNCw0YHQutC4INC+0YLRgdC60LDQvdC40YDQvtCy0LDQvdC90L7Qs9C+INGC0L7QstCw0YDQsCAiIiIKCiAgICAjIHRpbWUuc2xlZXAoMikKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Eb2NEZXRhaWxzU2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5kaXNhYmxlX2hpZ2hsaWdodCgpCgoKQEhhc2hNYXAoKQpkZWYgZWxlbV9vbl9zdGFydChoYXNoX21hcCk6CiAgICAjINCg0LXQttC40Lwg0YDQsNCx0L7RgtGLINGBINC80YPQu9GM0YLQuNC80LXQtNC40LAg0Lgg0YTQsNC50LvQsNC80Lgg0L/QviDRgdGB0YvQu9C60LDQvCAo0YTQu9Cw0LMgbW1fbG9jYWwpCiAgICBoYXNoX21hcFsnbW1fbG9jYWwnXSA9ICcnCgoKZGVmIGVsZW1fb25fY2xpY2soaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQoKICAgIGlmIGxpc3RlbmVyID09ICJidG5fb2siOgogICAgICAgICMg0L/QvtC70YPRh9C40Lwg0YLQtdC60YPRidGD0Y4g0YHRgtGA0L7QutGDINC00L7QutGD0LzQtdC90YLQsAogICAgICAgIGN1cnJlbnRfc3RyID0gaGFzaE1hcC5nZXQoInNlbGVjdGVkX2NhcmRfcG9zaXRpb24iKQogICAgICAgICPQldGB0LvQuCDRgdGC0YDQvtC60LAg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgiwg0YHQvtC30LTQsNC00LjQvCDQtdC1CiAgICAgICAgZG9jID0gdWlfZ2xvYmFsLlJzX2RvYwogICAgICAgIGRvYy5pZF9kb2MgPSBoYXNoTWFwLmdldCgnaWRfZG9jJykKICAgICAgICAjIGlmIGN1cnJlbnRfc3RyID09JzAnOgogICAgICAgICMgICAgIHBhc3MKICAgICAgICAjICAgICAjamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddCiAgICAgICAgIyBlbHNlOgogICAgICAgICMgICAgIGpsaXN0ID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgiZG9jX2dvb2RzIikpCiAgICAgICAgIyAgICAgY3VycmVudF9lbGVtID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCiAgICAgICAgIyAgICAga2V5ID0gaW50KGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgIyAgICAgZG9jLmlkX3N0ciA9IGludChjdXJyZW50X2VsZW1bJ2tleSddKQogICAgICAgICMgLi4uINC4INC30LDQv9C40YjQtdC8INC10LUg0LIg0LHQsNC30YMKCiAgICAgICAgcXR0eSA9IGhhc2hNYXAuZ2V0KCdxdHR5JykKICAgICAgICBkb2MucXR0eSA9IGZsb2F0KHF0dHkpIGlmIHF0dHkgZWxzZSAwCiAgICAgICAgZWxlbV9mb3JfYWRkID0geydpZF9nb29kJzogaGFzaE1hcC5nZXQoJ0dvb2RfaWQnKSwgJ2lkX3Byb3BlcnR5JzogaGFzaE1hcC5nZXQoJ3Byb3BlcnRpZXNfaWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2lkX3Nlcmllcyc6IGhhc2hNYXAuZ2V0KCdzZXJpZXNfaWQnKSwnaWRfdW5pdCc6IGhhc2hNYXAuZ2V0KCd1bml0X2lkJyl9CiAgICAgICAgZG9jLnVwZGF0ZV9kb2NfdGFibGVfZGF0YShkb2MsIGVsZW1fZm9yX2FkZCwgcXR0eSkgICMgKGRvYywgKQoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2NhbmNlbCI6CgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICIiOgogICAgICAgIGhhc2hNYXAucHV0KCJxdHR5Iiwgc3RyKGZsb2F0KGhhc2hNYXAuZ2V0KCdxdHR5JykpKSkKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9nb29kX3NlbGVjdCI6CiAgICAgICAgaGFzaE1hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfZ29vZHMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X2dvb2RzX3ZhbHVlJykKICAgICAgICBoYXNoTWFwLnB1dCgnZmlsdGVyX2ZpZWxkcycsICduYW1lJykKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1Byb2Nlc3NSZXN1bHQnLCAn0KPQvdC40LLQtdGA0YHQsNC70YzQvdGL0Lkg0YHQv9GA0LDQstC+0YfQvdC40Lp80KHQv9GA0LDQstC+0YfQvdC40LonKQogICAgIy0tCiAgICBlbGlmIGxpc3RlbmVyID09ICJzZWxlY3RfZ29vZHNfdmFsdWUiOgogICAgICAgIGhhc2hNYXAucHV0KCdHb29kJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfbmFtZScpKQogICAgICAgIGhhc2hNYXAucHV0KCdHb29kX2lkJywgaGFzaE1hcC5nZXQoJ2N1cnJlbnRfaWQnKSkKICAgICAgICAj0J/RgNC4INCy0YvQsdC+0YDQtSDRgtC+0LLQsNGA0LAg0LfQsNC/0L7Qu9C90LjQvCDQtdC00LjQvdC40YbRgyDQuNC30LzQtdGA0LXQvdC40Y8g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4KICAgICAgICBxdGV4dCA9ICcnJ1NlbGVjdCBSU19nb29kcy51bml0IGFzIHVuaXRfaWQsIAogICAgICAgICAgICAgICAgICAgIFJTX3VuaXRzLm5hbWUgCiAgICAgICAgICAgICAgICAgICAgRnJvbSBSU19nb29kcwogICAgICAgICAgICAgICAgICAgICAgTGVmdCBKb2luIFJTX3VuaXRzIG9uIFJTX3VuaXRzLmlkX293bmVyID0gUlNfZ29vZHMuaWQgYW5kIFJTX3VuaXRzLmlkID0gUlNfZ29vZHMudW5pdCAKICAgICAgICAgICAgICAgICAgICBXSEVSRSBSU19nb29kcy5pZCA9ID8nJycKICAgICAgICByZXMgPSAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsIChoYXNoTWFwLmdldCgnY3VycmVudF9pZCcpLCkpCiAgICAgICAgaWYgcmVzOgoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3VuaXRfaWQnLCByZXNbMF1bMF0pCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1bml0JywgcmVzWzBdWzFdKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9wcm9wZXJ0aWVzIjoKCiAgICAgICAgaGFzaE1hcC5wdXQoJ1NlYXJjaFN0cmluZycsIGhhc2hNYXAuZ2V0KCdHb29kX2lkJykpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfcHJvcGVydGllcycpICAjINCi0LDQsdC70LjRhtCwINC00LvRjyDQstGL0LHQvtGA0LAg0LfQvdCw0YfQtdC90LjRjwogICAgICAgIGhhc2hNYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfcHJvcGVydGllc192YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZTtpZF9vd25lcicpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICMgLS0KICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF9wcm9wZXJ0aWVzX3ZhbHVlJzoKICAgICAgICBoYXNoTWFwLnB1dCgncHJvcGVydGllcycsIGhhc2hNYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fc2VyaWVzIjoKICAgICAgICBoYXNoTWFwLnB1dCgndGFibGVfZm9yX3NlbGVjdCcsICdSU19zZXJpZXMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X3Nlcmllc192YWx1ZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2ZpbHRlcl9maWVsZHMnLCAnbmFtZScpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgJ9Cj0L3QuNCy0LXRgNGB0LDQu9GM0L3Ri9C5INGB0L/RgNCw0LLQvtGH0L3QuNC6fNCh0L/RgNCw0LLQvtGH0L3QuNC6JykKICAgICAgICAjX18KICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF9zZXJpZXNfdmFsdWUnOgogICAgICAgIGhhc2hNYXAucHV0KCdzZXJpZXMnLCBoYXNoTWFwLmdldCgnY3VycmVudF9uYW1lJykpCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fdW5pdCI6CiAgICAgICAgaGFzaE1hcC5wdXQoJ3RhYmxlX2Zvcl9zZWxlY3QnLCAnUlNfdW5pdHMnKSAgIyDQotCw0LHQu9C40YbQsCDQtNC70Y8g0LLRi9Cx0L7RgNCwINC30L3QsNGH0LXQvdC40Y8KICAgICAgICBoYXNoTWFwLnB1dCgnU2V0UmVzdWx0TGlzdGVuZXInLCAnc2VsZWN0X3VuaXRfdmFsdWUnKQogICAgICAgIGhhc2hNYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWU7aWRfb3duZXInKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCiAgICAgICAgI19fCiAgICBlbGlmIGxpc3RlbmVyID09ICdzZWxlY3RfdW5pdF92YWx1ZSc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ3VuaXQnLCBoYXNoTWFwLmdldCgnY3VycmVudF9uYW1lJykpCiAgICAgICAgaGFzaE1hcC5wdXQoJ3VuaXRfaWQnLCBoYXNoTWFwLmdldCgnY3VycmVudF9pZCcpKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gInBob3RvIjoKCiAgICAgICAgIyDQnNC+0LbQvdC+INCy0L7QvtCx0YnQtSDRjdGC0L7Qs9C+INC90LUg0LTQtdC70LDRgtGMLdC+0YHRgtCw0LLQu9GP0YLRjCDQutCw0Log0LXRgdGC0YwuINCt0YLQviDQtNC70Y8g0L/RgNC40LzQtdGA0LAuCiAgICAgICAgaW1hZ2VfZmlsZSA9IHN0cigKICAgICAgICAgICAgaGFzaE1hcC5nZXQoInBob3RvX3BhdGgiKSkgICMgItC/0LXRgNC10LzQtdC90L3QsNGPIisiX3BhdGgiIC0g0YHRjtC00LAg0L/QvtC80LXRidCw0LXRgtGB0Y8g0L/Rg9GC0Ywg0Log0L/QvtC70YPRh9C10L3QvdC+0Lkg0YTQvtGC0L7Qs9GA0LDRhNC40LgKCiAgICAgICAgaW1hZ2UgPSBJbWFnZS5vcGVuKGltYWdlX2ZpbGUpCgogICAgICAgICMg0YHRgNCw0LfRgyDRgdC00LXQu9Cw0LXQvCDRhNC+0YLQutGDIC0g0LrQstCw0LTRgNCw0YLQvdC+0LkgLSDRjdGC0L4g0L/RgNC+0YHRgtC+0Lkg0LLQsNGA0LjQsNC90YIuINCc0L7QttC90L4g0YHQtNC10LvQsNGC0Ywg0L3QsNC/0YDQuNC80LXRgCDQvtGC0LTQtdC70YzQviDQvNC40L3QuNCw0YLRjtGA0Ysg0LTQu9GPINGB0L/QuNGB0LrQsCwg0Y3RgtC+INC90LXQvNC90L7Qs9C+INGB0LvQvtC20L3QtdC1CiAgICAgICAgaW0gPSBpbWFnZS5yZXNpemUoKDUwMCwgNTAwKSkKICAgICAgICBpbS5zYXZlKGltYWdlX2ZpbGUpCgogICAgICAgIGpwaG90b2FyciA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoInBob3RvR2FsbGVyeSIpKQogICAgICAgIGhhc2hNYXAucHV0KCJwaG90b0dhbGxlcnkiLCBqc29uLmR1bXBzKGpwaG90b2FycikpCiAgICAgICAgIyBoYXNoTWFwLnB1dCgidG9hc3QiLGpzb24uZHVtcHMoanBob3RvYXJyKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJnYWxsZXJ5X2NoYW5nZSI6ICAjINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvNC+0LbQtdGCINGD0LTQsNC70LjRgtGMINGE0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10LguINCd0L7QstGL0Lkg0LzQsNGB0YHQuNCyINC90LDQtNC+INC/0L7QvNC10YHRgtC40YLRjCDQuiDQtNC+0LrRg9C80LXQvdGC0YMKCiAgICAgICAgaWYgaGFzaE1hcC5jb250YWluc0tleSgicGhvdG9HYWxsZXJ5Iik6ICAjINGN0YLQuCAyINC+0LHRgNCw0LHQvtGC0YfQuNC60LAgLSDQsNC90LDQu9C+0LPQuNGH0L3Ri9C1LCDQv9GA0L7RgdGC0L4g0LTQu9GPINGA0LDQt9C90YvRhSDRgdC+0LHRi9GC0LjQuQogICAgICAgICAgICBqcGhvdG9hcnIgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJwaG90b0dhbGxlcnkiKSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoInBob3RvR2FsbGVyeSIsIGpzb24uZHVtcHMoanBob3RvYXJyKSkKICAgICAgICAgICAgIyBoYXNoTWFwLnB1dCgidG9hc3QiLCIjMiIranNvbi5kdW1wcyhqcGhvdG9hcnIpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIHJlbW92ZV9hZGRlZF9nb29kX2hpZ2hsaWdodChoYXNoTWFwLCBnb29kX2lkPU5vbmUsIHByb3BlcnR5X2lkPU5vbmUpOgogICAgaWYgaGFzaE1hcC5nZXQoImFkZGVkX2dvb2RzIik6CiAgICAgICAgaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgYWRkZWRfZ29vZHNfZGljdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImFkZGVkX2dvb2RzIikpCiAgICAgICAgaWYgaWRfZG9jIGluIGFkZGVkX2dvb2RzX2RpY3Qua2V5cygpOgogICAgICAgICAgICBpZiBnb29kX2lkIGluIGFkZGVkX2dvb2RzX2RpY3RbaWRfZG9jXVswXToKICAgICAgICAgICAgICAgIGFkZGVkX2dvb2RzX2RpY3RbaWRfZG9jXVswXS5yZW1vdmUoZ29vZF9pZCkKICAgICAgICAgICAgIiIiaWYgcHJvcGVydHlfaWQgaW4gYWRkZWRfZ29vZHNfZGljdFtnb29kX2lkXVsxXToKICAgICAgICAgICAgICAgIGFkZGVkX2dvb2RzX2RpY3RbZ29vZF9pZF1bMV0ucmVtb3ZlKHByb3BlcnR5X2lkKSIiIgogICAgICAgICAgICBoYXNoTWFwLnB1dCgiYWRkZWRfZ29vZHMiLCBzdHIoYWRkZWRfZ29vZHNfZGljdCkucmVwbGFjZSgiJyIsICciJykpCiAgICAgICAgICAgIGlmIGxlbihhZGRlZF9nb29kc19kaWN0W2lkX2RvY11bMF0pID09IDA6CiAgICAgICAgICAgICAgICBkZWwgYWRkZWRfZ29vZHNfZGljdFtpZF9kb2NdCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBnZXRfY3VycmVudF9lbGVtX2RvY19nb29kcyhoYXNoTWFwLCBjdXJyZW50X3N0cik6CgogICAgaWYgaGFzaE1hcC5nZXQoJ3ZpZXcnKSA9PSAiY2FyZHMiOgogICAgICAgIGpsaXN0ID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgiZG9jX2dvb2RzX2NhcmRzIikpCiAgICAgICAgY2FyZHNfZGF0YSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXQogICAgZWxzZToKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kc190YWJsZSIpKQogICAgICAgIGNhcmRzX2RhdGEgPSBqbGlzdFsnY3VzdG9tdGFibGUnXVsndGFibGVkYXRhJ10KICAgIGZvciBlbGVtZW50IGluIGNhcmRzX2RhdGE6CiAgICAgICAgaWYgImtleSIgaW4gZWxlbWVudDoKICAgICAgICAgICAgaWYgZWxlbWVudFsia2V5Il0gPT0gaGFzaE1hcC5nZXQoInNlbGVjdGVkX2NhcmRfa2V5Iik6CiAgICAgICAgICAgICAgICBjdXJyZW50X2VsZW0gPSBlbGVtZW50CiAgICByZXR1cm4gY3VycmVudF9lbGVtCgoKZGVmIGRvY19iYXJjb2Rlc19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBkb2NfZGV0YWlsX2xpc3QgPSB1aV9mb3JtX2RhdGEuZ2V0X2JhcmNvZGVfY2FyZChyc19zZXR0aW5ncykKICAgIHF1ZXJ5X3RleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X2JhcmNvZGVfcXVlcnkoKQogICAgaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICByZXN1bHRzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKGlkX2RvYywpKQoKICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgJ2tleSc6IHN0cihyZWNvcmRbMF0pLAogICAgICAgICAgICAnYmFyY29kZV92YWx1ZSc6IHN0cihyZWNvcmRbM10pLAogICAgICAgICAgICAncmF0aW8nOnN0cihyZWNvcmRbNl0pLAogICAgICAgICAgICAnYXBwcm92ZWQnOiBzdHIocmVjb3JkWzRdKQoKICAgICAgICB9CgogICAgICAgIGRvY19kZXRhaWxfbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10uYXBwZW5kKHByb2R1Y3Rfcm93KQoKICAgIGhhc2hNYXAucHV0KCJiYXJjX2NhcmRzIiwganNvbi5kdW1wcyhkb2NfZGV0YWlsX2xpc3QpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGRvY19iYXJjb2Rlc19saXN0ZW5lcihoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBkZWxldGVfYmFyY29kZV9zY3JlZW5fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgIGJhcmNvZGVfZGF0YSA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoJ2JhcmNvZGUnKSlbJ2JhcmNvZGUnXQogICAgIyDQndCw0LnQtNC10Lwg0L3Rg9C20L3Ri9C1INC/0L7Qu9GPINC30LDQv9GA0L7RgdC+0Lwg0Log0LHQsNC30LUKICAgIHF0ZXh0ID0gdWlfZm9ybV9kYXRhLmdldF9tYXJrY29kZV9xdWVyeSgpCiAgICBhcmdzID0geydpZF9kb2MnOiBoYXNoTWFwLmdldCgnaWRfZG9jJyksCiAgICAgICAgICAgICdHVElOJzogYmFyY29kZV9kYXRhWydHVElOJ10sICdTZXJpZXMnOiBiYXJjb2RlX2RhdGFbJ1NFUklBTCddfQoKICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCBhcmdzLCBUcnVlKQoKICAgIGhhc2hNYXAucHV0KCdjdXJyZW50U3RyJywganNvbi5kdW1wcyhyZXNbMF0pKQogICAgaGFzaE1hcC5wdXQoIkN1clN0ciIsIHN0cihyZXNbMF1bJ0N1clN0ciddKSkKICAgIGhhc2hNYXAucHV0KCJnb29kIiwgcmVzWzBdWydnb29kX25hbWUnXSkKICAgIGhhc2hNYXAucHV0KCInY29kZV9hcnQnIiwgcmVzWzBdWydnb29kX2NvZGUnXSkKICAgIGhhc2hNYXAucHV0KCJ1bml0X25hbWUiLCBzdHIocmVzWzBdWyd1bml0J10pKQogICAgaGFzaE1hcC5wdXQoJ2JhcmNvZGVfdmFsdWUnLCAnMDEnICsgYmFyY29kZV9kYXRhWydHVElOJ10gKyAnMjEnICsgYmFyY29kZV9kYXRhWydTRVJJQUwnXSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBkZWxldGVfYmFyY29kZV9zY3JlZW5fY2xpY2soaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQogICAgaWYgbGlzdGVuZXIgPT0gImJ0bl9iYXJjb2RlX2NhbmNlbCI6CgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fYmFyY29kZV9kZWxldGUiOgogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19kb2MKICAgICAgICBkb2MuaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgY3VycmVudF9iYXJjb2RlX3N0ciA9IGludChoYXNoTWFwLmdldCgiQ3VyU3RyIikpCiAgICAgICAgZWwgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCdjdXJyZW50U3RyJykpCgogICAgICAgICMgZG9jLmlkX3N0ciA9IGludChjdXJyZW50X2VsZW1bJ2tleSddKQogICAgICAgICMgZG9jLnF0dHkgPSBmbG9hdChoYXNoTWFwLmdldCgncXR0eScpKQogICAgICAgICMgZG9jLnVwZGF0ZV9kb2Nfc3RyKGRvYywgaGFzaE1hcC5nZXQoJ3ByaWNlJykpCiAgICAgICAgcXVlcnlfdGV4dCA9ICdVcGRhdGUgIFJTX2RvY3NfYmFyY29kZXMgU0VUIGFwcHJvdmVkPT8gV2hlcmUgaWQ9PycKICAgICAgICB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCAoJzAnLCBjdXJyZW50X2JhcmNvZGVfc3RyKSkKICAgICAgICBkb2MudXBkYXRlX2RvY190YWJsZV9kYXRhKGRvYywgZWwsIC0xKQoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiQkFDS19CVVRUT04iOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGJhcmNvZGVfZXJyb3Jfc2NyZWVuX2xpc3RlbmVyKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICMgc3VDbGFzcy51cm92b19zZXRfbG9ja190cmlnZ2VyKEZhbHNlKQogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykgPT0gJ2J0bl9jb250aW51ZV9zY2FuJzoKICAgICAgICAjIHN1Q2xhc3MudXJvdm9fc2V0X2xvY2tfdHJpZ2dlcihGYWxzZSkKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICByZXR1cm4gaGFzaE1hcAoKZGVmIHBsYW5fZXhjZXNzX2Vycm9yX3NjcmVlbl9saXN0ZW5lcihoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAjIHN1Q2xhc3MudXJvdm9fc2V0X2xvY2tfdHJpZ2dlcihGYWxzZSkKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdidG5fY29udGludWVfc2Nhbic6CiAgICAgICAgIyBzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoRmFsc2UpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgcmV0dXJuIGhhc2hNYXAKCgoKCiMgPT09PT09PT09PT09PT09IFVuaXZlcnNhbCBjYXJkcyA9PT09PT09PT09PT09PT09PQoKCmRlZiB1bml2ZXJzYWxfY2FyZHNfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgZmlsdGVyX3ZhbHVlID1oYXNoTWFwLmdldCgnU2VhcmNoU3RyaW5nJykKICAgIGlmIGZpbHRlcl92YWx1ZToKICAgICAgIGZpbHRlcl9maWVsZHMgPSBoYXNoTWFwLmdldCgnZmlsdGVyX2ZpZWxkcycpLnNwbGl0KCc7JykKICAgIGVsc2U6CiAgICAgICAgZmlsdGVyX2ZpZWxkcyA9IGxpc3QoKQogICAgaGFzaE1hcC5wdXQoJ2NhcmRzJywgZ2V0X3RhYmxlX2NhcmRzKGhhc2hNYXAuZ2V0KCd0YWJsZV9mb3Jfc2VsZWN0JyksZmlsdGVyX2ZpZWxkcyxmaWx0ZXJfdmFsdWUpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIHVuaXZlcnNhbF9jYXJkc19saXN0ZW5lcihoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQoKICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImNhcmRzIikpCiAgICAgICAgY3VycmVudF9lbGVtID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCiAgICAgICAgaGFzaE1hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2N1cnJlbnRfaWQnLGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgaGFzaE1hcC5wdXQoJ2N1cnJlbnRfbmFtZScsIGN1cnJlbnRfZWxlbVsnbmFtZSddKQogICAgICAgIGhhc2hNYXAucHV0KCdGaW5pc2hQcm9jZXNzUmVzdWx0JywgJycpCgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgbGF5b3V0X2xpc3RlbmVyID0gaGFzaE1hcC5nZXQoJ2xheW91dF9saXN0ZW5lcicpCiAgICAgICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X2NhcmQgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJjdXJyZW50X2NhcmQiKSkKCgogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnJlbW92ZSgnU2VhcmNoU3RyaW5nJykKICAgICAgICBoYXNoTWFwLnB1dCgnY3VycmVudF9pZCcsICcnKQogICAgICAgIGhhc2hNYXAucHV0KCdGaW5pc2hQcm9jZXNzUmVzdWx0JywgJycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdTZWFyY2gnOgogICAgICAgIGZpbHRlcl92YWx1ZSA9IGhhc2hNYXAuZ2V0KCdTZWFyY2hTdHJpbmcnKQogICAgICAgIGlmIGxlbihmaWx0ZXJfdmFsdWUpID4gMjoKICAgICAgICAgICAgZmlsdGVyX2ZpZWxkcyA9IGhhc2hNYXAuZ2V0KCdmaWx0ZXJfZmllbGRzJykuc3BsaXQoJzsnKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgnY2FyZHMnLCBnZXRfdGFibGVfY2FyZHMoaGFzaE1hcC5nZXQoJ3RhYmxlX2Zvcl9zZWxlY3QnKSwgZmlsdGVyX2ZpZWxkcywgZmlsdGVyX3ZhbHVlKSkKCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCdSZWZyZXNoU2NyZWVuJywnJykKICAgICAgICAjdW5pdmVyc2FsX2NhcmRzX29uX3N0YXJ0KGhhc2hNYXApCgogICAgcmV0dXJuIGhhc2hNYXAKCgpjbGFzcyBVbml2ZXJzYWxDYXJkOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRhYmxlX25hbWU6IHN0ciwgZmlsdGVyX2ZpZWxkcz1saXN0KCksIGZpbHRlcl92YWx1ZT0nJywgZXhjbHVkZV9saXN0PWxpc3QoKSxub19sYWJlbD1GYWxzZSwgc3RydWN0X3ZpZXc6bGlzdCA9IGxpc3QoKSk6CiAgICAgICAgc2VsZi50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIHNlbGYuZmlsdGVyX2ZpZWxkcyA9IGZpbHRlcl9maWVsZHMKICAgICAgICBzZWxmLmZpbHRlcl92YWx1ZSA9IGZpbHRlcl92YWx1ZQogICAgICAgIHNlbGYuZXhjbHVkZV9saXN0ID0gZXhjbHVkZV9saXN0CiAgICAgICAgc2VsZi5ub19sYWJlbCA9IG5vX2xhYmVsCiAgICAgICAgc2VsZi5zdHJ1Y3RfdmlldyA9IHN0cnVjdF92aWV3CgogICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KGYiUFJBR01BIHRhYmxlX2luZm8oe3RhYmxlX25hbWV9KSIpCiAgICAgICAgc2VsZi5maWVsZHMgPSBbZlsxXSBmb3IgZiBpbiByZXNdCiAgICAgICAgIyDQodC70L7QstCw0YDRjCDRgNGD0YHRgdC60LjRhSDQuNC80LXQvSDQv9C+0LvQtdC5CiAgICAgICAgc2VsZi5hbGlhc2VzID0gdWlfZm9ybV9kYXRhLmZpZWxkc19hbGlhc19kaWN0KCkKICAgICAgICAjINCh0LvQvtCy0LDRgNGMINC/0L7Qu9C10Lkt0YHRgdGL0LvQvtC6INC90LAg0YLQsNCx0LvQuNGG0YsKICAgICAgICBzZWxmLnRhYmxlc19kaWN0ID0gdWlfZm9ybV9kYXRhLnRhYmxlX25hbWVzX2RpY3QoKQogICAgICAgIHNlbGYuY2FyZF9lbGVtID0gdWlfZm9ybV9kYXRhLmdldF9lbGVtX2RpY3QoMjQpCiAgICAgICAgc2VsZi5jYXJkcyA9IHVpX2Zvcm1fZGF0YS5nZXRfdW5pdmVyc2FsX2NhcmQoKQogICAgICAgIHNlbGYuZ29yaXpvbnRhbF9sYXlvdXQgPSB7ImxheW91dCI6IHsKICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImdvcml6b250YWwiLAogICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2VpZ2h0IjogIjAiLAoKICAgICAgICAgICAgIkVsZW1lbnRzIjogW119fQoKICAgIGRlZiBnZXRfcXVlcnlfYnlfdGFibGVfbmFtZShzZWxmKToKICAgICAgICBxZmllbGRfdGV4dCA9IFtdCiAgICAgICAgbGVmdF9qb2luc19saXN0ID0gW10KICAgICAgICBmb3IgZWwgaW4gc2VsZi5maWVsZHM6CiAgICAgICAgICAgIGxpbmtfdGFibGVfbmFtZSA9IHNlbGYudGFibGVzX2RpY3QuZ2V0KGVsKQogICAgICAgICAgICBxZmllbGRfdGV4dC5hcHBlbmQoc2VsZi50YWJsZV9uYW1lICsgJy4nICsgZWwpCiAgICAgICAgICAgICNxdGV4dCA9ICdTZWxlY3QgJyArICcsJy5qb2luKHFmaWVsZF90ZXh0KSArIGYnIEZST00ge3NlbGYudGFibGVfbmFtZX0gJyArICcgJy5qb2luKGxlZnRfam9pbnNfbGlzdCkKICAgICAgICAgICAgIyDQldGB0LvQuCDQtdGB0YLRjCDRhNC40LvRjNGC0YDRiy/QvtGC0LHQvtGA0YsgLSDQtNC+0LHQsNCy0LjQvCDQuNGFINCyINC30LDQv9GA0L7RgQogICAgICAgICAgICBpZiBsaW5rX3RhYmxlX25hbWU6CiAgICAgICAgICAgICAgICAjINCt0YLQviDRgdGB0YvQu9C60LAg0L3QsCDRgtCw0LHQu9C40YbRgwogICAgICAgICAgICAgICAgcWZpZWxkX3RleHQuYXBwZW5kKGxpbmtfdGFibGVfbmFtZSArIGYnLm5hbWUgYXMge2xpbmtfdGFibGVfbmFtZX1fbmFtZScpCiAgICAgICAgICAgICAgICBsZWZ0X2pvaW5zX2xpc3QuYXBwZW5kKGYnJycKICAgICAgICAgICAgICAgICAgICBMRUZUIEpPSU4ge2xpbmtfdGFibGVfbmFtZX0KICAgICAgICAgICAgICAgICAgICBPTiB7bGlua190YWJsZV9uYW1lfS5pZCA9IHtzZWxmLnRhYmxlX25hbWV9LntlbH0KICAgICAgICAgICAgICAgICAgICAnJycpCiAgICAgICAgcXRleHQgPSAnU2VsZWN0ICcgKyAnLCcuam9pbihxZmllbGRfdGV4dCkgKyBmJyBGUk9NIHtzZWxmLnRhYmxlX25hbWV9ICcgKyAnICcuam9pbihsZWZ0X2pvaW5zX2xpc3QpCiAgICAgICAgIyDQldGB0LvQuCDQtdGB0YLRjCDRhNC40LvRjNGC0YDRiy/QvtGC0LHQvtGA0YsgLSDQtNC+0LHQsNCy0LjQvCDQuNGFINCyINC30LDQv9GA0L7RgQogICAgICAgIGlmIHNlbGYuZmlsdGVyX3ZhbHVlOgogICAgICAgICAgICAjIGNvbmRpdGlvbnMgPSBbZiJ7ZmllbGR9IExJS0UgJyV7ZmlsdGVyX3ZhbHVlfSUnIiBmb3IgZmllbGQgaW4gZmlsdGVyX2ZpZWxkc10KICAgICAgICAgICAgY29uZGl0aW9ucyA9IFtmIntzZWxmLnRhYmxlX25hbWV9LntmaWVsZH0gTElLRSAnJXtzZWxmLmZpbHRlcl92YWx1ZX0lJyIgZm9yIGZpZWxkIGluIHNlbGYuZmlsdGVyX2ZpZWxkc10KICAgICAgICAgICAgcXRleHQgPSBxdGV4dCArIGYiIFdIRVJFIHsnIE9SICcuam9pbihjb25kaXRpb25zKX0iCiAgICAgICAgcmV0dXJuIHF0ZXh0CgogICAgZGVmIGZvcm1fY2FyZF9zdHJ1Y3Qoc2VsZik6CiAgICAgICAgI3FmaWVsZF90ZXh0ID0gW10KICAgICAgICBjYXJkX2VsZW0gPSBzZWxmLmNhcmRfZWxlbQogICAgICAgIGNhcmRzID0gc2VsZi5jYXJkcwogICAgICAgIGZvciBlbCBpbiBzZWxmLmZpZWxkczoKICAgICAgICAgICAgaWYgZWwgbm90IGluIHNlbGYuZXhjbHVkZV9saXN0OgogICAgICAgICAgICAgICAgbGlua190YWJsZV9uYW1lID0gc2VsZi50YWJsZXNfZGljdC5nZXQoZWwpCiAgICAgICAgICAgICAgICAjcWZpZWxkX3RleHQuYXBwZW5kKHNlbGYudGFibGVfbmFtZSArICcuJyArIGVsKQoKICAgICAgICAgICAgICAgICMg0JTQvtC/0L7Qu9C90LjQvCDQstGL0YXQvtC00L3Rg9GOINGB0YLRgNGD0LrRgtGD0YDRgyDQv9C+0LvRj9C80Lgg0YLQsNCx0LvQuNGG0Ys6CiAgICAgICAgICAgICAgICBhbGlhc2VzX2VsZW0gPSBzZWxmLmFsaWFzZXMuZ2V0KGVsKQogICAgICAgICAgICAgICAgaWYgYWxpYXNlc19lbGVtOiAgIyDQlNC70Y8g0Y3RgtC+0LPQviDQv9C+0LvRjyDQv9GA0LXQtNGD0YHQvNC+0YLRgNC10L3QsCDQvdCw0YHRgtGA0L7QudC60LAKICAgICAgICAgICAgICAgICAgICBpZiBub3QgYWxpYXNlc19lbGVtWyduYW1lJ10gPT0gJ2tleSc6ICAjINCU0LvRjyDQutC70Y7Rh9CwINC90LDRgdGC0YDQvtC50LrQuCDQvdC1INC90YPQttC90YsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYubm9fbGFiZWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjINC00L7QsdCw0LLQuNC8INC+0L/QuNGB0LDQvdC40LUg0L/QvtC70Y86Li4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSBhbGlhc2VzX2VsZW1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0U2l6ZSddID0gcnNfc2V0dGluZ3MuZ2V0KCdDYXJkRGF0ZVRleHRTaXplJykgICMgYWxpYXNlc19lbGVtWyd0ZXh0X3NpemUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydsYXlvdXQnXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtLmNvcHkoKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICMg0KLQtdC/0LXRgNGMINGB0LDQvNC+INC/0L7Qu9C1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSAnQCcgKyBlbAogICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1RleHRTaXplJ10gPSByc19zZXR0aW5ncy5nZXQoYWxpYXNlc19lbGVtWyd0ZXh0X3NpemUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gYWxpYXNlc19lbGVtWydUZXh0Qm9sZCddCiAgICAgICAgICAgICAgICBlbHNlOiAgIyDQmNC90LDRh9C1INC/0YDQvtGB0YLQviDQtNC+0LHQsNCy0LjQvCDQtdCz0L4g0YHQviDRgdGC0LDQvdC00LDRgNGC0L3Ri9C80Lgg0L3QsNGB0YLRgNC+0LnQutCw0LzQuAogICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVmFsdWUnXSA9ICdAJyArIGVsCiAgICAgICAgICAgICAgICAgICAgIyDQlNC+0LHQsNCy0LjQvCDQv9C+0LvQtSDQsiDQutCw0YDRgtC+0YfQutC4CiAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydsYXlvdXQnXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXVswXVsnRWxlbWVudHMnXS5hcHBlbmQoY2FyZF9lbGVtLmNvcHkoKSkKCiAgICBkZWYgZm9ybV9jYXJkX3N0cnVjdF9mcm9tX3JlYWR5X3NydWN0KHNlbGYpOgogICAgICAgIHRlbXBfc3RydWN0ID0gKCdjb2RlJywnbmFtZScsKCdhcnQnLCd0aW1lc3RhbXAnKSwnZnVsbF9uYW1lJykKICAgICAgICBqc29uX3N0cnVjdHVyZSA9IFtdCgogICAgICAgIGZvciBpdGVtIGluIHRlbXBfc3RydWN0OgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZW0sIGxpc3QpOgogICAgICAgICAgICAgICAgbmVzdGVkX3N0cnVjdHVyZSA9IFtdCiAgICAgICAgICAgICAgICBmb3IgbmVzdGVkX2l0ZW0gaW4gaXRlbToKICAgICAgICAgICAgICAgICAgICBuZXN0ZWRfc3RydWN0dXJlLmFwcGVuZChuZXN0ZWRfaXRlbSkKICAgICAgICAgICAgICAgIGpzb25fc3RydWN0dXJlLmFwcGVuZChuZXN0ZWRfc3RydWN0dXJlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAganNvbl9zdHJ1Y3R1cmUuYXBwZW5kKGl0ZW0pCgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKGpzb25fc3RydWN0dXJlLCBpbmRlbnQ9NCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eIFVuaXZlcnNhbCBjYXJkcyBeXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09IFNldHRpbmdzID09PT09PT09PT09PT09PT09CgpkZWYgZmlsZV9saXN0X29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIHR4ID0gJycKCiAgICAjIHRyYXZlcnNlIHJvb3QgZGlyZWN0b3J5LCBhbmQgbGlzdCBkaXJlY3RvcmllcyBhcyBkaXJzIGFuZCBmaWxlcyBhcyBmaWxlcwogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoIi4iKToKICAgICAgICBwYXRoID0gcm9vdC5zcGxpdChvcy5zZXApCiAgICAgICAgcHJpbnQoKGxlbihwYXRoKSAtIDEpICogJy0tLScsIG9zLnBhdGguYmFzZW5hbWUocm9vdCkpCiAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgIHByaW50KGxlbihwYXRoKSAqICctLS0nLCBmaWxlKQoKICAgIGhhc2hNYXAucHV0KCdmaWxlc19saXN0JywgdHgpCiAgICByZXR1cm4gaGFzaE1hcAoKCgoKCkBIYXNoTWFwKCkKZGVmIGh0dHBfc2V0dGluZ3Nfb25fY2xpY2tfKGhhc2hNYXAsICBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBsaXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpCiAgICBpZiBsaXN0ZW5lciA9PSAnYnRuX3NhdmUnOgogICAgICAgIGlmIG5vdCBhbGwoW2hhc2hNYXAuZ2V0KCd1cmwnKSwgaGFzaE1hcC5nZXQoJ3VzZXInKSwgaGFzaE1hcC5nZXQoJ3Bhc3MnKV0pOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgidG9hc3QiLCAi0J3QtSDRg9C60LDQt9Cw0L3RiyDQvdCw0YHRgtGA0L7QudC60LggSFRUUCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INGB0LXRgNCy0LXRgNGDIikKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ1VSTCcsIGhhc2hNYXAuZ2V0KCd1cmwnKSwgVHJ1ZSkKICAgICAgICByc19zZXR0aW5ncy5wdXQoJ1VTRVInLCBoYXNoTWFwLmdldCgndXNlcicpLCBUcnVlKQogICAgICAgIHJzX3NldHRpbmdzLnB1dCgnUEFTUycsIGhhc2hNYXAuZ2V0KCdwYXNzJyksIFRydWUpCiAgICAgICAgcnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBoYXNoTWFwLmdldCgndXNlcl9uYW1lJyksIFRydWUpCiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX2NhbmNlbCc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQndCw0YHRgtGA0L7QudC60Lgg0Lgg0L7QsdC80LXQvScpCiAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJzoKICAgICAgICBiYXJjb2RlID0gaGFzaE1hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhMicpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBiYXJjX3N0cnVjdCA9IGpzb24ubG9hZHMoYmFyY29kZSkKCiAgICAgICAgICAgIHJzX3NldHRpbmdzLnB1dCgnVVJMJywgYmFyY19zdHJ1Y3QuZ2V0KCd1cmwnKSwgVHJ1ZSkKICAgICAgICAgICAgcnNfc2V0dGluZ3MucHV0KCdVU0VSJywgYmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJyksIFRydWUpCiAgICAgICAgICAgIHJzX3NldHRpbmdzLnB1dCgnUEFTUycsIGJhcmNfc3RydWN0LmdldCgncGFzcycpLCBUcnVlKQogICAgICAgICAgICByc19zZXR0aW5ncy5wdXQoJ3VzZXJfbmFtZScsIGJhcmNfc3RydWN0LmdldCgndXNlcl9uYW1lJyksIFRydWUpCgogICAgICAgICAgICBoYXNoTWFwLnB1dCgndXJsJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VybCcsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VybCcpKS50b19qc29uKCkpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd1c2VyJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VzZXInLCBkZWZhdWx0X3RleHQ9YmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJykpLnRvX2pzb24oKSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3Bhc3MnLCB1aV9mb3JtX2RhdGEuTW9kZXJuRmllbGQoaGludD0ncGFzcycsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3Bhc3MnKSkudG9fanNvbigpKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgndXNlcl9uYW1lJywgdWlfZm9ybV9kYXRhLk1vZGVybkZpZWxkKGhpbnQ9J3VzZXJfbmFtZScsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VzZXJfbmFtZScpKS50b19qc29uKCkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCAn0L3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIgUVIt0LrQvtC00LAnKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX3Rlc3RfY29ubmVjdGlvbic6CiAgICAgICAgIy9jb21tdW5pY2F0aW9uX3Rlc3QKICAgICAgICBodHRwID0gZ2V0X2h0dHBfc2V0dGluZ3MoaGFzaE1hcCkKICAgICAgICBpZiBub3QgYWxsKFtodHRwLmdldCgndXJsJyksIGh0dHAuZ2V0KCd1c2VyJyksIGh0dHAuZ2V0KCdwYXNzJyldKToKICAgICAgICAgICAgaGFzaE1hcC5wdXQoInRvYXN0IiwgItCd0LUg0YPQutCw0LfQsNC90Ysg0L3QsNGB0YLRgNC+0LnQutC4IEhUVFAg0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQuiDRgdC10YDQstC10YDRgyIpCiAgICAgICAgICAgIHJldHVybiBoYXNoTWFwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldChodHRwWyd1cmwnXSArICcvc2ltcGxlX2FjY291bnRpbmcvY29tbXVuaWNhdGlvbl90ZXN0P2FuZHJvaWRfaWQ9JyArIGh0dHBbJ2FuZHJvaWRfaWQnXSwgYXV0aD1IVFRQQmFzaWNBdXRoKGh0dHBbJ3VzZXInXSwgaHR0cFsncGFzcyddKSwKICAgICAgICAgICAgICAgICBoZWFkZXJzPXsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCd9LAogICAgICAgICAgICAgICAgIHBhcmFtcz17J3VzZXJfbmFtZSc6IGh0dHBbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHR0cFsnZGV2aWNlX21vZGVsJ119KQogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCdidG5fdGVzdF9jb25uZWN0aW9uJywgJ9Ch0L7QtdC00LjQvdC10L3QuNC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L4nKQogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Ch0L7QtdC00LjQvdC10L3QuNC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L4nKQogICAgICAgICAgICBlbGlmIHIuc3RhdHVzX2NvZGUgPT0gNDAzOgogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ2J0bl90ZXN0X2Nvbm5lY3Rpb24nLCAn0KLQtdGB0YIg0YHQvtC10LTQuNC90LXQvdC40Y8nKQogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoInRvYXN0IiwgItCX0LDQv9GA0L7RgSDQvdCwINCw0LLRgtC+0YDQuNC30LDRhtC40Y4g0L/RgNC40L3Rj9GCIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCdidG5fdGVzdF9jb25uZWN0aW9uJywgJ9Ci0LXRgdGCINGB0L7QtdC00LjQvdC10L3QuNGPJykKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsICfQndC1INGD0LTQsNC70L7RgdGMINGD0YHRgtCw0L3QvtCy0LjRgtGMINGB0L7QtdC00LjQvdC10L3QuNC1JykKCiAgICByZXR1cm4gaGFzaE1hcAoKCiMgXl5eXl5eXl5eXl5eXl5eXl4gU2V0dGluZ3MgXl5eXl5eXl5eXl5eXl5eXl4KCgojID09PT09PT09PT09PT09PSBEZWJ1ZyA9PT09PT09PT09PT09PT09PQoKQEhhc2hNYXAoKQpkZWYgZGVidWdfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRGVidWdTZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGRlYnVnX2xpc3RlbmVyKGhhc2hfbWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBzY3JlZW46IHVpX21vZGVscy5EZWJ1Z1NldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKZGVmIHRlc3Rfc2NyZWVuX2lucHV0KGhhc2hNYXAsICBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnYnRuX29rJyBvciAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICBoYXNoTWFwLnB1dCgnRmluaXNoUHJvY2VzcycsJycpCiAgICByZXR1cm4gaGFzaE1hcAojIF5eXl5eXl5eXl5eXl5eXl5eIERlYnVnIF5eXl5eXl5eXl5eXl5eXl5eCgoKZGVmIGdldF9odHRwX3NldHRpbmdzKGhhc2hNYXApOgogICAgaHR0cF9zZXR0aW5ncyA9IHsKICAgICd1cmwnIDogcnNfc2V0dGluZ3MuZ2V0KCJVUkwiKSwKICAgICd1c2VyJyA6IHJzX3NldHRpbmdzLmdldCgnVVNFUicpLAogICAgJ3Bhc3MnIDogcnNfc2V0dGluZ3MuZ2V0KCdQQVNTJyksCiAgICAnZGV2aWNlX21vZGVsJyA6IGhhc2hNYXAuZ2V0KCdERVZJQ0VfTU9ERUwnKSwKICAgICdhbmRyb2lkX2lkJzpoYXNoTWFwLmdldCgnQU5EUk9JRF9JRCcpLAogICAgJ3VzZXJfbmFtZSc6IHJzX3NldHRpbmdzLmdldCgndXNlcl9uYW1lJyl9CiAgICByZXR1cm4gaHR0cF9zZXR0aW5ncwoKCiMg0JTQvtCx0LDQstC70LXQvSDQv9Cw0YDQsNC80LXRgtGAICJub19sYWJlbCIKZGVmIGdldF90YWJsZV9jYXJkcyh0YWJsZV9uYW1lOiBzdHIsIGZpbHRlcl9maWVsZHM9bGlzdCgpLCBmaWx0ZXJfdmFsdWU9JycsIGV4Y2x1ZGVfbGlzdD1saXN0KCksIG5vX2xhYmVsPUZhbHNlLCBzdHJ1Y3RfdmlldzpsaXN0ID0gbGlzdCgpKToKICAgICMg0J/QvtC70YPRh9C40Lwg0YHQv9C40YHQvtC6INC/0L7Qu9C10Lkg0YLQsNCx0LvQuNGG0YsKICAgICMgdGFibGVfbmFtZSA9ICdSU19nb29kcycKICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KGYiUFJBR01BIHRhYmxlX2luZm8oe3RhYmxlX25hbWV9KSIpCiAgICBmaWVsZHMgPSBbZlsxXSBmb3IgZiBpbiByZXNdCiAgICAjINCh0LvQvtCy0LDRgNGMINGA0YPRgdGB0LrQuNGFINC40LzQtdC9INC/0L7Qu9C10LkKICAgIGFsaWFzZXMgPSB1aV9mb3JtX2RhdGEuZmllbGRzX2FsaWFzX2RpY3QoKQogICAgIyDQodC70L7QstCw0YDRjCDQv9C+0LvQtdC5LdGB0YHRi9C70L7QuiDQvdCwINGC0LDQsdC70LjRhtGLCiAgICB0YWJsZXNfZGljdCA9IHVpX2Zvcm1fZGF0YS50YWJsZV9uYW1lc19kaWN0KCkKCiAgICAjINCh0L7Qt9C00LDQtNC40Lwg0LfQsNC/0YDQvtGBINC6INGC0LDQsdC70LjRhtC1LiDQodGB0YvQu9C+0YfQvdGL0LUg0L/QvtC70Y8g0LfQsNC80LXQvdC40Lwg0L3QsCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0LjQtyDRgdCy0Y/Qt9Cw0L3QvdGL0YUg0YLQsNCx0LvQuNGGCiAgICBjYXJkX2VsZW0gPSB1aV9mb3JtX2RhdGEuZ2V0X2VsZW1fZGljdCgyNCkKICAgIGNhcmRzID0gdWlfZm9ybV9kYXRhLmdldF91bml2ZXJzYWxfY2FyZCgpCgogICAgcWZpZWxkX3RleHQgPSBbXQogICAgbGVmdF9qb2luc19saXN0ID0gW10KICAgIGZvciBlbCBpbiBmaWVsZHM6CiAgICAgICAgaWYgZWwgbm90IGluIGV4Y2x1ZGVfbGlzdDoKICAgICAgICAgICAgbGlua190YWJsZV9uYW1lID0gdGFibGVzX2RpY3QuZ2V0KGVsKQogICAgICAgICAgICBxZmllbGRfdGV4dC5hcHBlbmQodGFibGVfbmFtZSArICcuJyArIGVsKQoKICAgICAgICAgICAgIyDQlNC+0L/QvtC70L3QuNC8INCy0YvRhdC+0LTQvdGD0Y4g0YHRgtGA0YPQutGC0YPRgNGDINC/0L7Qu9GP0LzQuCDRgtCw0LHQu9C40YbRizoKICAgICAgICAgICAgYWxpYXNlc19lbGVtID0gYWxpYXNlcy5nZXQoZWwpCiAgICAgICAgICAgIGlmIGFsaWFzZXNfZWxlbTogICMg0JTQu9GPINGN0YLQvtCz0L4g0L/QvtC70Y8g0L/RgNC10LTRg9GB0LzQvtGC0YDQtdC90LAg0L3QsNGB0YLRgNC+0LnQutCwCiAgICAgICAgICAgICAgICBpZiBub3QgYWxpYXNlc19lbGVtWyduYW1lJ10gPT0gJ2tleSc6ICAjINCU0LvRjyDQutC70Y7Rh9CwINC90LDRgdGC0YDQvtC50LrQuCDQvdC1INC90YPQttC90YsKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgbm9fbGFiZWw6CiAgICAgICAgICAgICAgICAgICAgICAgICMg0LTQvtCx0LDQstC40Lwg0L7Qv9C40YHQsNC90LjQtSDQv9C+0LvRjzouLi4KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydWYWx1ZSddID0gYWxpYXNlc19lbGVtWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0U2l6ZSddID0gcnNfc2V0dGluZ3MuZ2V0KCdDYXJkRGF0ZVRleHRTaXplJykgICMgYWxpYXNlc19lbGVtWyd0ZXh0X3NpemUnXQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1RleHRCb2xkJ10gPSBGYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkc1snY3VzdG9tY2FyZHMnXVsnbGF5b3V0J11bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ10uYXBwZW5kKGNhcmRfZWxlbS5jb3B5KCkpCgogICAgICAgICAgICAgICAgICAgICMg0KLQtdC/0LXRgNGMINGB0LDQvNC+INC/0L7Qu9C1OgogICAgICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsnVmFsdWUnXSA9ICdAJyArIGVsCiAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0U2l6ZSddID0gcnNfc2V0dGluZ3MuZ2V0KGFsaWFzZXNfZWxlbVsndGV4dF9zaXplJ10pCiAgICAgICAgICAgICAgICAgICAgY2FyZF9lbGVtWydUZXh0Qm9sZCddID0gYWxpYXNlc19lbGVtWydUZXh0Qm9sZCddCiAgICAgICAgICAgIGVsc2U6ICAjINCY0L3QsNGH0LUg0L/RgNC+0YHRgtC+INC00L7QsdCw0LLQuNC8INC10LPQviDRgdC+INGB0YLQsNC90LTQsNGA0YLQvdGL0LzQuCDQvdCw0YHRgtGA0L7QudC60LDQvNC4CiAgICAgICAgICAgICAgICBjYXJkX2VsZW1bJ1ZhbHVlJ10gPSAnQCcgKyBlbAoKICAgICAgICAgICAgaWYgbGlua190YWJsZV9uYW1lOgogICAgICAgICAgICAgICAgIyDQrdGC0L4g0YHRgdGL0LvQutCwINC90LAg0YLQsNCx0LvQuNGG0YMKICAgICAgICAgICAgICAgIHFmaWVsZF90ZXh0LmFwcGVuZChsaW5rX3RhYmxlX25hbWUgKyBmJy5uYW1lIGFzIHtsaW5rX3RhYmxlX25hbWV9X25hbWUnKQogICAgICAgICAgICAgICAgbGVmdF9qb2luc19saXN0LmFwcGVuZChmJycnCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHtsaW5rX3RhYmxlX25hbWV9CiAgICAgICAgICAgICAgICAgICAgT04ge2xpbmtfdGFibGVfbmFtZX0uaWQgPSB7dGFibGVfbmFtZX0ue2VsfQogICAgICAgICAgICAgICAgICAgICcnJykKICAgICAgICAgICAgICAgIGNhcmRfZWxlbVsKICAgICAgICAgICAgICAgICAgICAnVmFsdWUnXSA9IGYnQHtsaW5rX3RhYmxlX25hbWV9X25hbWUnICAjINCi0LDQuiDQutCw0Log0L/QvtC70LUg0YHRgdGL0LvQvtGH0L3QvtC1IC0g0L/QtdGA0LXQuNC80LXQvdGD0LXQvCDQtdCz0L4g0LrQsNC6INCyINC30LDQv9GA0L7RgdC1CgogICAgICAgICAgICAjINCU0L7QsdCw0LLQuNC8INC/0L7Qu9C1INCyINC60LDRgNGC0L7Rh9C60LgKICAgICAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmFwcGVuZChjYXJkX2VsZW0uY29weSgpKQoKICAgIHF0ZXh0ID0gJ1NlbGVjdCAnICsgJywnLmpvaW4ocWZpZWxkX3RleHQpICsgZicgRlJPTSB7dGFibGVfbmFtZX0gJyArICcgJy5qb2luKGxlZnRfam9pbnNfbGlzdCkKICAgICMg0JXRgdC70Lgg0LXRgdGC0Ywg0YTQuNC70YzRgtGA0Ysv0L7RgtCx0L7RgNGLIC0g0LTQvtCx0LDQstC40Lwg0LjRhSDQsiDQt9Cw0L/RgNC+0YEKICAgIGlmIGZpbHRlcl92YWx1ZToKICAgICAgICAjIGNvbmRpdGlvbnMgPSBbZiJ7ZmllbGR9IExJS0UgJyV7ZmlsdGVyX3ZhbHVlfSUnIiBmb3IgZmllbGQgaW4gZmlsdGVyX2ZpZWxkc10KICAgICAgICBjb25kaXRpb25zID0gW2Yie3RhYmxlX25hbWV9LntmaWVsZH0gTElLRSAnJXtmaWx0ZXJfdmFsdWV9JSciIGZvciBmaWVsZCBpbiBmaWx0ZXJfZmllbGRzXQogICAgICAgIHF0ZXh0ID0gcXRleHQgKyBmIiBXSEVSRSB7JyBPUiAnLmpvaW4oY29uZGl0aW9ucyl9IgogICAgcmVzX3F1ZXJ5ID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsIE5vbmUsIFRydWUpCiAgICAjIHNldHRpbmdzX2dsb2JhbC5nZXQKCiAgICBjYXJkc1snY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10gPSBbXQoKICAgIGZvciBpIGluIHJlc19xdWVyeToKICAgICAgICBwcm9kdWN0X3JvdyA9IHt9CiAgICAgICAgZm9yIHggaW4gaToKICAgICAgICAgICAgaWYgeCA9PSAnaWQnOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ2tleSddID0gc3RyKGlbeF0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcm9kdWN0X3Jvd1t4XSA9IHN0cihpW3hdKQoKICAgICAgICBjYXJkc1snY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10uYXBwZW5kKHByb2R1Y3Rfcm93KQoKICAgIHJldHVybiBqc29uLmR1bXBzKGNhcmRzKQoKQEhhc2hNYXAoKQpkZWYgZGVidWdfYmFyY29kZV9lcnJvcl9zY3JlZW5fbGlzdGVuZXIoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgaGFzaF9tYXAuc2hvd19zY3JlZW4obGlzdGVuZXI9J9Ce0YjQuNCx0LrQsCDQv9GA0LXQstGL0YjQtdC90LjRjyDQv9C70LDQvdCwJywgdGl0bGU9J9Ca0L7Qu9C40YfQtdGB0YLQstC+INC/0LvQsNC9INCyINC00L7QutGD0LzQtdC90YLQtSDQv9GA0LXQstGL0YjQtdC90L4nKQo=",
        "pyHandlersPath": "E:/РайтСкан/simple_keep_2\\main.py",
        "PyTimerTask": [
            {
                "PyTimerTaskKey": "timer_update",
                "PyTimerTaskDef": "timer_update",
                "PyTimerTaskPeriod": "15000",
                "PyTimerTaskBuilIn": false
            }
        ],
        "PyFiles": [
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\database_init_queryes.py",
                "PyFileKey": "database_init_queryes",
                "PyFileData": "I2ltcG9ydCB1aV9nbG9iYWwKZGVmIGRhdGFiYXNlX3NoZW1hKCk6CiAgICBScyA9IFtdCgoKICAgICPQmtC+0L3RgdGC0LDQvdGC0Ysg0Lgg0YXRgNCw0L3QuNC80YvQtSDQvdCw0YHRgtGA0L7QudC60LggUlNfY29uc3RhbnRzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19jb25zdGFudHMgKAogICAgICAgIGlkICAgICAgICAgICAgIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgICAgICB1c2Vfc2VyaWVzICAgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICAgICAgdXNlX3Byb3BlcnRpZXMgVEVYVCAgICBERUZBVUxUIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgICAgIHVzZV9tYXJrICAgICAgIFRFWFQgICAgREVGQVVMVCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgICAgICBhZGRfaWZfbm90X2luX3BsYW4gICAgIFRFWFQgICAgREVGQVVMVCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgICAgICBwYXRoICAgICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUICIvL3N0b3JhZ2UvZW11bGF0ZWQvMC9BbmRyb2lkL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvIiwKICAgICAgICBkZWxldGVfZmlsZXMgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICAgICAgcmVzZXJ2ZWQgICAgICAgVEVYVCAgICBOT1QgTlVMTCwKICAgICAgICBtYXhfaWRfZG9jICAgICAgICAgSU5URUdFUiBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVCAoMSksCiAgICAgICAgYWxsb3dfb3ZlcnNjYW4gVEVYVCAgICBERUZBVUxUIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgICAgIHJlbGVhc2UgICAgICAgIFRFWFQKICAgICkKICAgICcnJykKCgogICAgIyDQmtC70LDRgdGB0LjRhNC40LrQsNGC0L7RgCDQtdC00LjQvdC40YYg0LjQt9C80LXRgNC10L3QuNGPIFJTX2NsYXNzaWZpZXJfdW5pdHMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NsYXNzaWZpZXJfdW5pdHMgKAogICAgICAgIGlkIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgY29kZSAgICBURVhUIE5PVCBOVUxMLAogICAgICAgIG5hbWUgICAgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKICAgICMg0JLQuNC00Ysg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3R5cGVzX2dvb2RzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU190eXBlc19nb29kcyAoCiAgICBpZCAgICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgIFBSSU1BUlkgS0VZLAogICAgbmFtZSAgICAgVEVYVCBOT1QgTlVMTCwKICAgIHVzZV9tYXJrIElOVCAgREVGQVVMVCAoMCkgCiAgICApCiAgICAnJycpCgogICAgIyDQndC+0LzQtdC90LrQu9Cw0YLRg9GA0LAgUlNfZ29vZHMKICAgIFJzLmFwcGVuZCgnJycKICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19nb29kcyAoCiAgICAgICAgICAgIGlkICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgICAgIGNvZGUgICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgICAgIG5hbWUgICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgICAgIGFydCAgICAgICAgIFRFWFQsCiAgICAgICAgICAgIHVuaXQgICAgICAgIFRFWFQgIFJFRkVSRU5DRVMgUlNfY2xhc3NpZmllcl91bml0cyAoaWQpLAogICAgICAgICAgICB0eXBlX2dvb2QgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU190eXBlc19nb29kcyAoaWQpIE9OIERFTEVURSBOTyBBQ1RJT04KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNQVRDSCBbRlVMTF0sCiAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQKICAgICAgICApCiAgICAgICAgJycnKQoKCiAgICAjINCl0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60Lgg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3Byb3BlcnRpZXMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX3Byb3BlcnRpZXMgKAogICAgaWQgICAgICAgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSBPTiBDT05GTElDVCBSRVBMQUNFLAogICAgaWRfb3duZXIgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCkgT04gREVMRVRFIE5PIEFDVElPTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT04gVVBEQVRFIE5PIEFDVElPTiwKICAgIG5hbWUgICAgIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCgogICAgIyDQo9C/0LDQutC+0LLQutC4INCV0LTQuNC90LjRhtGLINC40LfQvNC10YDQtdC90LjRjyBSU191bml0cwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfdW5pdHMgKAogICAgICAgIGlkICAgICAgIFRFWFQgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgaWRfb3duZXIgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZ29vZHMgKGlkKSwKICAgICAgICBjb2RlICAgICAgICAgIFRFWFQgICAgTk9UIE5VTEwsCiAgICAgICAgbmFtZSAgICAgICAgICBURVhUICAgIE5PVCBOVUxMLAogICAgICAgIG5vbWluYXRvciAgICAgSU5URUdFUiBOT1QgTlVMTCwKICAgICAgICBkZW5vbWluYXRvciAgIElOVEVHRVIgTk9UIE5VTEwsCiAgICAgICAgaW50X3JlZHVjdGlvbiBURVhUICAgIE5PVCBOVUxMCiAgICApCiAgICAnJycpCgoKCiAgICAjINCh0LXRgNC40Lgg0L3QvtC80LXQvdC60LvQsNGC0YPRgNGLIFJTX3NlcmllcwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfc2VyaWVzICgKICAgICAgICBpZCAgICAgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBuYW1lICAgICAgICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBiZXN0X2JlZm9yZSAgICAgVEVYVCwKICAgICAgICB0eXBlX2dvb2RzICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBudW1iZXIgICAgICAgICAgVEVYVCBOT1QgTlVMTCwKICAgICAgICBwcm9kdWN0aW9uX2RhdGUgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKCiAgICAjINCo0YLRgNC40YXQutC+0LTRiyBSU19iYXJjb2RlcwogICAgUnMuYXBwZW5kKCAnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2JhcmNvZGVzICgKICAgIGJhcmNvZGUgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICBpZF9nb29kICAgICBURVhUIE5PVCBOVUxMLAogICAgaWRfcHJvcGVydHkgVEVYVCwKICAgIGlkX3NlcmllcyAgIFRFWFQsCiAgICBpZF91bml0ICAgICBURVhULAogICAgcmF0aW8gICAgICAgSU5UICBERUZBVUxUICgxKSAKICAgICAgICAgICAgICAgIE5PVCBOVUxMCiAgICApCiAgICAnJycpCgogICAgI9Ca0L7QtNGLINC80LDRgNC60LjRgNC+0LLQutC4IFJTX21hcmtpbmdfY29kZXMKICAgIFJzLmFwcGVuZCggJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19tYXJraW5nX2NvZGVzICgKICAgICAgICBpZCAgICAgICAgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBtYXJrX2NvZGUgICBURVhUIE5PVCBOVUxMLAogICAgICAgIGlkX2dvb2QgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZ29vZHMgKGlkKSwKICAgICAgICBpZF9wcm9wZXJ0eSBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgICAgICBpZF9zZXJpZXMgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3NlcmllcyAoaWQpLAogICAgICAgIGlkX3VuaXQgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfdW5pdHMgKGlkKSAKICAgICkKICAgICcnJykKCgoKICAgICMg0JrQvtC90YLRgNCw0LPQtdC90YLRiyBSU19jb3VudHJhZ2VudHMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NvdW50cmFnZW50cyAoCiAgICAgICAgaWQgICBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgbmFtZSAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsCiAgICAgICAgaW5uICAgICAgIFRFWFQgTk9UIE5VTEwsCiAgICAgICAga3BwICAgICAgIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCiAgICAjINCh0LrQu9Cw0LTRiyBSU193YXJlaG91c2VzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU193YXJlaG91c2VzICgKICAgICAgICBpZCBURVhUIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgIFBSSU1BUlkgS0VZLAogICAgICAgIG5hbWUgICAgVEVYVCBOT1QgTlVMTAogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2NlbGxzICgKICAgIGlkICAgVEVYVCBQUklNQVJZIEtFWQogICAgICAgICAgICAgIE5PVCBOVUxMLAogICAgbmFtZSBURVhUIE5PVCBOVUxMLAogICAgYmFyY29kZSBURVhUCiAgICApJycnKQoKICAgICMg0JLQuNC00Ysg0YbQtdC9INC90L7QvNC10L3QutC70LDRgtGD0YDRiyBSU19wcmljZV90eXBlcwogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfcHJpY2VfdHlwZXMgKAogICAgICAgIGlkICAgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICBQUklNQVJZIEtFWSwKICAgICAgICBuYW1lIFRFWFQgTk9UIE5VTEwKICAgICkKICAgICcnJykKCiAgICAjINCm0LXQvdGLINC90L7QvNC10L3QutC70LDRgtGD0YDRiyBSU19wcmljZXMKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX3ByaWNlcyAoCiAgICAgICAgaWQgICAgICAgICAgICAgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgIGlkX3ByaWNlX3R5cGVzIFRFWFQgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfcHJpY2VfdHlwZXMgKGlkKSwKICAgICAgICBpZF9nb29kcyAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCksCiAgICAgICAgaWRfcHJvcGVydGllcyAgVEVYVCAgICBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19wcm9wZXJ0aWVzIChpZCksCiAgICAgICAgcHJpY2UgICAgICAgICAgUkVBTCwKICAgICAgICBpZF91bml0ICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3VuaXRzIChpZCkgCiAgICApCiAgICAnJycpCgogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfZG9jX3R5cGVzICgKICAgIGRvY190eXBlIFRFWFQgUFJJTUFSWSBLRVkgT04gQ09ORkxJQ1QgUkVQTEFDRQogICAgICAgICAgICAgICAgTk9UIE5VTEwsCiAgICBpc19hZHJfc3RvcmFnZSBJTlQgIERFRkFVTFQgKDApIAogICAgKQogICAgJycnKQoKICAgICMg0JLRgdC1INC00L7QutGD0LzQtdC90YLRiyDRgdC/0LjRgdC60L7QvCBSU19kb2NzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19kb2NzICgKICAgICAgICBpZF9kb2MgICAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICAgICAgZG9jX3R5cGUgICAgICAgICAgIFRFWFQgICAgIE5PVCBOVUxMLAogICAgICAgIGRvY19uICAgICAgICAgICAgICBURVhUICAgICBOT1QgTlVMTCwKICAgICAgICBkb2NfZGF0ZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICAgICAgaWRfY291bnRyYWdlbnRzICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfY291bnRyYWdlbnRzIChpZCksCiAgICAgICAgaWRfd2FyZWhvdXNlICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfd2FyZWhvdXNlcyAoaWQpLAogICAgICAgIHZlcmlmaWVkICAgICAgICAgICBJTlRFR0VSLAogICAgICAgIHNlbnQgICAgICAgICAgICAgICBJTlRFR0VSLAogICAgICAgIGFkZF9tYXJrX3NlbGVjdGlvbiBJTlRFR0VSLAogICAgICAgIGNyZWF0ZWRfYXQgICAgICAgICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgICAgIGNvbnRyb2wgICAgICAgICAgICBURVhUIERFRkFVTFQgMCwKICAgICAgICBpc19ncm91cF9zY2FuICAgICAgVEVYVCBERUZBVUxUIDAsCiAgICAgICAgYWxsb3dfZmFjdF9pbnB1dCAgIFRFWFQgREVGQVVMVCAwCiAgICAgICAgCiAgICApCiAgICAnJycpCgoKICAgICMg0KLQsNCx0LvQuNGH0L3QsNGPINGH0LDRgdGC0Ywg0LTQvtC60YPQvNC10L3RgtC+0LIgUlNfZG9jc190YWJsZQogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfZG9jc190YWJsZSAoCiAgICAgICAgaWQgICAgICAgICAgICBJTlRFR0VSICBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgIGlkX2RvYyAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFVQREFURSBTRVQgREVGQVVMVCwKICAgICAgICBpZF9nb29kICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX2dvb2RzIChpZCksCiAgICAgICAgaWRfcHJvcGVydGllcyBURVhUICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgICAgICBpZF9zZXJpZXMgICAgIFRFWFQgICAgIFJFRkVSRU5DRVMgUlNfc2VyaWVzIChpZCksCiAgICAgICAgaWRfdW5pdCAgICAgICBURVhUICAgICBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpLAogICAgICAgIHF0dHkgICAgICAgICAgUkVBTCwKICAgICAgICBkX3F0dHkgICAgICAgIFJFQUwsICAKICAgICAgICBxdHR5X3BsYW4gICAgIFJFQUwsCiAgICAgICAgcHJpY2UgICAgICAgICBSRUFMLAogICAgICAgIGlkX3ByaWNlICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19wcmljZV90eXBlcyAoaWQpLAogICAgICAgIHNlbnQgICAgICAgICAgSU5URUdFUiwKICAgICAgICBsYXN0X3VwZGF0ZWQgIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsCiAgICAgICAgaXNfcGxhbiAgICAgICBURVhUIERFRkFVTFQgIlRydWUiLAogICAgICAgIGlkX2NlbGwgICAgICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19jZWxscyAoaWQpIAogICAgKQogICAgJycnKQoKCiAgICAjINCa0L7QtNGLINC80LDRgNC60LjRgNC+0LLQutC4INCyINC00L7QutGD0LzQtdC90YLQtSBSU19kb2NzX2JhcmNvZGVzCiAgICBScy5hcHBlbmQoJycnCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBSU19kb2NzX2JhcmNvZGVzICgKICAgIGlkICAgICAgICAgICAgICAgICAgIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgIGlkX2RvYyAgICAgICAgICAgICAgIFRFWFQgICAgTk9UIE5VTEwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFRkVSRU5DRVMgUlNfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERSwKICAgIGlkX2dvb2QgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgUkVGRVJFTkNFUyBSU19nb29kcyAoaWQpLAogICAgaWRfcHJvcGVydHkgVEVYVCBOT1QgTlVMTAogICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgIGlkX3NlcmllcyAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19zZXJpZXMgKGlkKSwKICAgIGlkX3VuaXQgICAgIFRFWFQgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpICwKICAgIC0tIyBpZF9iYXJjb2RlICAgICAgICAgICBURVhUICAgIE5PVCBOVUxMCiAgICAtLSMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX21hcmtpbmdfY29kZXMgKGlkKSwKICAgIGJhcmNvZGVfZnJvbV9zY2FubmVyIFRFWFQsCiAgICBpc19wbGFuICAgICAgICAgICAgICBURVhUICAgIERFRkFVTFQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1QgTlVMTCwKICAgIGFwcHJvdmVkICAgICAgICAgICAgIFRFWFQgICAgREVGQVVMVCAwLAogICAgR1RJTiAgICAgICAgICAgICAgICAgVEVYVCwKICAgIFNlcmllcyAgICAgICAgICAgICAgIFRFWFQKICAgICkKICAgICcnJykKCiAgICAj0J/QvtGC0L7QuiDQv9GA0L7QuNC30LLQvtC70YzQvdGL0YUg0YjRgtGA0LjRhdC60L7QtNC+0LIKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2JhcmNfZmxvdyAoCiAgICBpZF9kb2MgIFRFWFQgUkVGRVJFTkNFUyBSU19kb2NzIChpZF9kb2MpLAogICAgYmFyY29kZSBURVhUCiAgICApCiAgICAnJycpCgogICAgUnMuYXBwZW5kKCcnJwogICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgUlNfYWRyX2RvY3MgKAogICAgaWRfZG9jICAgICAgICAgICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJTUFSWSBLRVksCiAgICBkb2NfdHlwZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBkb2NfbiAgICAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBkb2NfZGF0ZSAgICAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwsCiAgICBpZF93YXJlaG91c2UgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRUZFUkVOQ0VTIFJTX3dhcmVob3VzZXMgKGlkKSwKICAgIHZlcmlmaWVkICAgICAgICAgICBJTlRFR0VSLAogICAgc2VudCAgICAgICAgICAgICAgIElOVEVHRVIsCiAgICBhZGRfbWFya19zZWxlY3Rpb24gSU5URUdFUiwKICAgIGNyZWF0ZWRfYXQgICAgICAgICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgY29udHJvbCAgICAgICAgICAgIFRFWFQgICAgIERFRkFVTFQgMCwKICAgIGFsbG93X2ZhY3RfaW5wdXQgICBURVhUIERFRkFVTFQgMAogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFJTX2Fkcl9kb2NzX3RhYmxlICgKICAgIGlkICAgICAgICAgICAgSU5URUdFUiAgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgIGlkX2RvYyAgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19hZHJfZG9jcyAoaWRfZG9jKSBPTiBERUxFVEUgQ0FTQ0FERQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFVQREFURSBTRVQgREVGQVVMVCwKICAgIGlkX2dvb2QgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVGRVJFTkNFUyBSU19nb29kcyAoaWQpLAogICAgaWRfcHJvcGVydGllcyBURVhUICAgICBSRUZFUkVOQ0VTIFJTX3Byb3BlcnRpZXMgKGlkKSwKICAgIGlkX3NlcmllcyAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU19zZXJpZXMgKGlkKSwKICAgIGlkX3VuaXQgICAgICAgVEVYVCAgICAgUkVGRVJFTkNFUyBSU191bml0cyAoaWQpLAogICAgcXR0eSAgICAgICAgICBSRUFMLAogICAgcXR0eV9wbGFuICAgICBSRUFMLAogICAgc2VudCAgICAgICAgICBJTlRFR0VSLAogICAgbGFzdF91cGRhdGVkICBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgaXNfcGxhbiAgICAgICBURVhUICAgICBERUZBVUxUIFRydWUsCiAgICBpZF9jZWxsICAgICAgIFRFWFQgICAgIFJFRkVSRU5DRVMgUlNfY2VsbHMgKGlkKSwgCiAgICB0YWJsZV90eXBlICAgIFRFWFQgICAgIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFQgJ291dCcKICAgICkKICAgICcnJykKCiAgICBScy5hcHBlbmQoJycnCiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgRXJyb3JfbG9nICgKICAgICAgICBsb2cgICAgICAgVEVYVCAgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVCAoJycpLAogICAgICAgIHRpbWVzdGFtcCBEQVRFVElNRSBERUZBVUxUIChDVVJSRU5UX1RJTUVTVEFNUCkpIAogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBJTkRFWCAgSUYgTk9UIEVYSVNUUyBjZWxsX25hbWUgT04gUlNfY2VsbHMgKAogICAgbmFtZQogICAgKQogICAgJycnKQoKICAgIFJzLmFwcGVuZCgnJycKICAgIENSRUFURSBJTkRFWCAgSUYgTk9UIEVYSVNUUyBjZWxsX25hbWUgT04gUlNfY2VsbHMgKAogICAgYmFyY29kZQogICAgKQogICAgJycnKQoKCiMgUlNfY29uc3RhbnRzICsgUlNfY2xhc3NpZmllcl91bml0cyArIFJTX3R5cGVzX2dvb2RzCiMgICAgIFJzID0gKyBSU19nb29kcyArIFJTX3Byb3BlcnRpZXNcCiMgICAgICAgICAgKyBSU19zZXJpZXMgKyBSU191bml0cyArIFJTX2JhcmNvZGVzICsgUlNfbWFya2luZ19jb2RlcyArIFJTX2RvY3MgKyBSU19kb2NzX2JhcmNvZGVzXAojICAgICAgICAgICsgUlNfZG9jc190YWJsZSArIFJTX3ByaWNlX3R5cGVzICsgUlNfcHJpY2VzICsgUlNfY291bnRyYWdlbnRzICsgUlNfd2FyZWhvdXNlcwoKICAgIHJldHVybiBScwojcHJpbnQoZGF0YWJhc2Vfc2hlbWEoKSkKICAgICMKICAgICMgUnMuYXBwZW5kKFJTX2NvbnN0YW50cykKICAgICMgUnMuYXBwZW5kKFJTX2NsYXNzaWZpZXJfdW5pdHMpCiAgICAjIFJzLmFwcGVuZChSU190eXBlc19nb29kcykKICAgICMKICAgICMgUnMuYXBwZW5kKFJTX2dvb2RzKQogICAgIyBScy5hcHBlbmQoUlNfcHJvcGVydGllcykKICAgICMgUnMuYXBwZW5kKFJTX3NlcmllcykKICAgICMgUnMuYXBwZW5kKFJTX3VuaXRzKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfYmFyY29kZXMpCiAgICAjIFJzLmFwcGVuZChSU19tYXJraW5nX2NvZGVzKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfZG9jcykKICAgICMgUnMuYXBwZW5kKFJTX2RvY3NfYmFyY29kZXMpCiAgICAjIFJzLmFwcGVuZChSU19kb2NzX3RhYmxlKQogICAgIwogICAgIyBScy5hcHBlbmQoUlNfcHJpY2VfdHlwZXMpCiAgICAjIFJzLmFwcGVuZChSU19wcmljZXMpCiAgICAjCiAgICAjIFJzLmFwcGVuZChSU19jb3VudHJhZ2VudHMpCiAgICAjIFJzLmFwcGVuZChSU193YXJlaG91c2VzKQogICAgI3VpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KFJzKQoK"
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\db_services.py",
                "PyFileKey": "db_services",
                "PyFileData": "aW1wb3J0IGpzb24KZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKCmZyb20gcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkgaW1wb3J0IFNpbXBsZVNRTFByb3ZpZGVyIGFzIHNxbENsYXNzCmZyb20gdWlfZ2xvYmFsIGltcG9ydCBnZXRfcXVlcnlfcmVzdWx0LCBidWxrX3F1ZXJ5CgoKY2xhc3MgRGJTZXJ2aWNlOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuc3FsX3RleHQgPSAnJwogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IE5vbmUKICAgICAgICBzZWxmLmRlYnVnID0gRmFsc2UKICAgICAgICBzZWxmLnByb3ZpZGVyID0gU3FsUXVlcnlQcm92aWRlcihzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgX3dyaXRlX2Vycm9yX29uX2xvZyhzZWxmLCBlcnJvcl90ZXh0OiBzdHIpOgogICAgICAgIGlmIGVycm9yX3RleHQ6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9ICdFcnJvcl9sb2cnCiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIuY3JlYXRlKHsnbG9nJzogZXJyb3JfdGV4dH0pCiAgICAgICAgICAgIHNlbGYuc3FsX3RleHQgPSBzZWxmLnByb3ZpZGVyLnNxbF90ZXh0CiAgICAgICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHNlbGYucHJvdmlkZXIuc3FsX3BhcmFtcwoKICAgIGRlZiBfc3FsX2V4ZWMoc2VsZiwgcSwgcGFyYW1zLCB0YWJsZV9uYW1lPScnKToKICAgICAgICBpZiB0YWJsZV9uYW1lOgogICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnRhYmxlX25hbWUgPSB0YWJsZV9uYW1lCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXJhbXMsIHN0cik6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIuc3FsX2V4ZWMocSwgcGFyYW1zKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9zcWxfcXVlcnkoc2VsZiwgcSwgcGFyYW1zOiBzdHIgPSAnJywgdGFibGVfbmFtZT0nJyk6CiAgICAgICAgaWYgdGFibGVfbmFtZToKICAgICAgICAgICAgc2VsZi5wcm92aWRlci50YWJsZV9uYW1lID0gdGFibGVfbmFtZQogICAgICAgIHJldHVybiBzZWxmLnByb3ZpZGVyLnNxbF9xdWVyeShxLCBwYXJhbXMpCgoKY2xhc3MgVGltZXJTZXJ2aWNlKERiU2VydmljZSk6CiAgICBkZWYgX19pbnRfXyhzZWxmKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKCiAgICBkZWYgc2F2ZV9sb2FkX2RhdGEoc2VsZiwgZGF0YSk6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjbGVhcl90YWJsZXMgPSBbJ1JTX2RvY3NfdGFibGUnLCAnUlNfYWRyX2RvY3NfdGFibGUnLCAnUlNfZG9jc19iYXJjb2RlcywgUlNfYmFyY19mbG93J10KCiAgICAgICAgZm9yIHRhYmxlX25hbWUsIHZhbHVlcyBpbiBkYXRhLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9IHRhYmxlX25hbWUKCiAgICAgICAgICAgIGlmIHRhYmxlX25hbWUgaW4gY2xlYXJfdGFibGVzIGFuZCB2YWx1ZXM6CiAgICAgICAgICAgICAgICBpZF9kb2MgPSB2YWx1ZXNbMF1bJ2lkX2RvYyddCiAgICAgICAgICAgICAgICBfZmlsdGVyID0geydpZF9kb2MnOiBpZF9kb2N9CgogICAgICAgICAgICAgICAgc2VsZi5wcm92aWRlci5kZWxldGUoX2ZpbHRlcikKICAgICAgICAgICAgICAgIHNlbGYucHJvdmlkZXIucmVwbGFjZSh2YWx1ZXMpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnJlcGxhY2UodmFsdWVzKQoKICAgIGRlZiBnZXRfbmV3X2xvYWRfZG9jcyhzZWxmLCBkYXRhOiBkaWN0KSAtPiBkaWN0OgogICAgICAgIGxvYWRlZF9kb2N1bWVudHMgPSB7fQoKICAgICAgICBmb3IgZG9jX3R5cGUgaW4gWydSU19kb2NzJywgJ1JTX2Fkcl9kb2NzJ106CiAgICAgICAgICAgIGZvciBpdGVtIGluIGRhdGEuZ2V0KGRvY190eXBlLCBbXSk6CiAgICAgICAgICAgICAgICBsb2FkZWRfZG9jdW1lbnRzW2l0ZW1bJ2lkX2RvYyddXSA9IGl0ZW0KCiAgICAgICAgaWYgbm90IGxvYWRlZF9kb2N1bWVudHM6CiAgICAgICAgICAgIHJldHVybiBsb2FkZWRfZG9jdW1lbnRzCgogICAgICAgIHEgPSAnJycKICAgICAgICAgICAgU0VMRUNUIGlkX2RvYyBGUk9NIFJTX2RvY3MKICAgICAgICAgICAgVU5JT04KICAgICAgICAgICAgU0VMRUNUIGlkX2RvYyBGUk9NIFJTX2Fkcl9kb2NzCiAgICAgICAgJycnCgogICAgICAgIGRiX2RvY3MgPSBzZWxmLnByb3ZpZGVyLnNxbF9xdWVyeShxKQogICAgICAgIGZvciBkb2MgaW4gZGJfZG9jczoKICAgICAgICAgICAgaWYgZG9jWydpZF9kb2MnXSBpbiBsb2FkZWRfZG9jdW1lbnRzOgogICAgICAgICAgICAgICAgbG9hZGVkX2RvY3VtZW50cy5wb3AoZG9jWydpZF9kb2MnXSkKCiAgICAgICAgcmV0dXJuIGxvYWRlZF9kb2N1bWVudHMKCiAgICBkZWYgZ2V0X2RhdGFfdG9fc2VuZChzZWxmKToKICAgICAgICBkYXRhID0gRG9jU2VydmljZSgpLmdldF9kYXRhX3RvX3NlbmQoKSArIEFkckRvY1NlcnZpY2UoKS5nZXRfZGF0YV90b19zZW5kKCkKICAgICAgICByZXR1cm4gZGF0YQoKCmNsYXNzIEJhcmNvZGVTZXJ2aWNlKERiU2VydmljZSk6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5wcm92aWRlciA9IFNxbFF1ZXJ5UHJvdmlkZXIodGFibGVfbmFtZT0nUnNfYmFyY29kZXMnLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X2JhcmNvZGVfZGF0YShzZWxmLCBiYXJjb2RlX2luZm8sIGlkX2RvYyk6CiAgICAgICAgaWYgYmFyY29kZV9pbmZvLnNjaGVtZSA9PSAnR1MxJzoKICAgICAgICAgICAgc2VhcmNoX3ZhbHVlID0gYmFyY29kZV9pbmZvLmd0aW4KICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWFyY2hfdmFsdWUgPSBiYXJjb2RlX2luZm8uYmFyY29kZQoKICAgICAgICBxID0gJycnCiAgICAgICAgICAgIFNFTEVDVCAKICAgICAgICAgICAgICAgIGJhcmNvZGVzLmlkX2dvb2QgQVMgaWRfZ29vZCwgCiAgICAgICAgICAgICAgICBiYXJjb2Rlcy5pZF9wcm9wZXJ0eSBBUyBpZF9wcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGJhcmNvZGVzLmlkX3NlcmllcyBBUyBpZF9zZXJpZXMsCiAgICAgICAgICAgICAgICBiYXJjb2Rlcy5pZF91bml0IEFTIGlkX3VuaXQsCiAgICAgICAgICAgICAgICBiYXJjb2Rlcy5yYXRpbyBBUyByYXRpbywKICAgICAgICAgICAgICAgIElGTlVMTChkb2NfYmFyY29kZXMuYXBwcm92ZWQsIDApIEFTIGFwcHJvdmVkLAogICAgICAgICAgICAgICAgSUZOVUxMKGRvY19iYXJjb2Rlcy5pZCwgMCkgQVMgbWFya19pZCwKICAgICAgICAgICAgICAgIElGTlVMTChnb29kcy51c2VfbWFyaywgZmFsc2UpIEFTIHVzZV9tYXJrLAogICAgICAgICAgICAgICAgSUZOVUxMKGRvY190YWJsZS5pZCwgJycpIEFTIHJvd19rZXksCiAgICAgICAgICAgICAgICBJRk5VTEwoZG9jX3RhYmxlLnF0dHksIDAuMCkgQVMgcXR0eSwKICAgICAgICAgICAgICAgIElGTlVMTChkb2NfdGFibGUucXR0eV9wbGFuLCAwLjApIEFTIHF0dHlfcGxhbgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIEZST00gUlNfYmFyY29kZXMgQVMgYmFyY29kZXMKICAgICAgICAgICAgTEVGVCBKT0lOIAogICAgICAgICAgICAgICAgICAgIChTRUxFQ1QgCiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RzLmlkIEFTIGlkX2dvb2RzLCAKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXNfZ29vZHMudXNlX21hcmsgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIEZST00gIFJTX2dvb2RzIEFTIGdvb2RzCiAgICAgICAgICAgICAgICAgICAgSk9JTiBSU190eXBlc19nb29kcyBBUyB0eXBlc19nb29kcyBPTiBnb29kcy50eXBlX2dvb2QgPSB0eXBlc19nb29kcy5pZCkgQVMgZ29vZHMKICAgICAgICAgICAgICAgIE9OIGJhcmNvZGVzLmlkX2dvb2QgPSBnb29kcy5pZF9nb29kcwogICAgICAgICAgICAKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX2RvY3NfdGFibGUgQVMgZG9jX3RhYmxlIAogICAgICAgICAgICAgICAgT04gYmFyY29kZXMuaWRfZ29vZCA9IGRvY190YWJsZS5pZF9nb29kCiAgICAgICAgICAgICAgICAgICAgIEFORCBiYXJjb2Rlcy5pZF9wcm9wZXJ0eSA9IGRvY190YWJsZS5pZF9wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAgICAgIEFORCBiYXJjb2Rlcy5pZF91bml0ID0gZG9jX3RhYmxlLmlkX3VuaXQKICAgICAgICAgICAgICAgICAgICAgQU5EIGRvY190YWJsZS5pZF9kb2MgPSB7fQogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX2RvY3NfYmFyY29kZXMgYXMgZG9jX2JhcmNvZGVzCiAgICAgICAgICAgICAgICBPTiBkb2NfYmFyY29kZXMuaWRfZG9jID0ge30KICAgICAgICAgICAgICAgICAgICBBTkQgZG9jX2JhcmNvZGVzLkdUSU4gPSB7fQogICAgICAgICAgICAgICAgICAgIEFORCBkb2NfYmFyY29kZXMuU2VyaWVzID0ge30KICAgICAgICAgICAgICAgIAogICAgICAgICAgICBXSEVSRSBiYXJjb2Rlcy5iYXJjb2RlID0ge30nJycuZm9ybWF0KAogICAgICAgICAgICBpZF9kb2MsIGlkX2RvYywgYmFyY29kZV9pbmZvLkdUSU4sIGJhcmNvZGVfaW5mby5TZXJpZXMsIHNlYXJjaF92YWx1ZSkKCiAgICAgICAgcmVzdWx0ID0gc2VsZi5wcm92aWRlci5zcWxfcXVlcnkocSkKICAgICAgICBpZiByZXN1bHQ6CiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF0KCgpjbGFzcyBEb2NTZXJ2aWNlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvY19pZD0nJyk6CiAgICAgICAgc2VsZi5kb2NfaWQgPSBkb2NfaWQKICAgICAgICBzZWxmLmRvY3NfdGFibGVfbmFtZSA9ICdSU19kb2NzJwogICAgICAgIHNlbGYuZGV0YWlsc190YWJsZV9uYW1lID0gJ1JTX2RvY3NfdGFibGUnCiAgICAgICAgc2VsZi5pc0FkciA9IEZhbHNlCiAgICAgICAgc2VsZi5zcWxfdGV4dCA9ICcnCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gTm9uZQogICAgICAgIHNlbGYuZGVidWcgPSBGYWxzZQogICAgICAgIHNlbGYucHJvdmlkZXIgPSBTcWxRdWVyeVByb3ZpZGVyKHNlbGYuZG9jc190YWJsZV9uYW1lLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X2xhc3RfZWRpdGVkX2dvb2RzKHNlbGYsIHRvX2pzb249RmFsc2UpOgogICAgICAgIHF1ZXJ5X2RvY3MgPSBmJ1NFTEVDVCAqIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfSBXSEVSRSBpZF9kb2MgPSA/IGFuZCB2ZXJpZmllZCA9IDEnCgogICAgICAgIHF1ZXJ5X2dvb2RzID0gZicnJwogICAgICAgIFNFTEVDVCAqIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfV90YWJsZQogICAgICAgIFdIRVJFIGlkX2RvYyA9ID8gYW5kIHNlbnQgPSAwCiAgICAgICAgJycnCgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzX2RvY3MgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2RvY3MsIChzZWxmLmRvY19pZCwpLCBUcnVlKQogICAgICAgICAgICByZXNfZ29vZHMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2dvb2RzLCAoc2VsZi5kb2NfaWQsKSwgVHJ1ZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIGUKICAgICAgICAgICAgIyByZXR1cm4geydFcnJvcic6IGUuYXJnc1swXX0KCiAgICAgICAgaWYgbm90IHJlc19nb29kczoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgcmV0dXJuIHNlbGYuZm9ybV9kYXRhX2Zvcl9yZXF1ZXN0KHJlc19kb2NzLCByZXNfZ29vZHMsIHRvX2pzb24pCgogICAgZGVmIGZvcm1fZGF0YV9mb3JfcmVxdWVzdChzZWxmLCByZXNfZG9jcywgcmVzX2dvb2RzLCB0b19qc29uKToKICAgICAgICBmb3IgaXRlbSBpbiByZXNfZG9jczoKICAgICAgICAgICAgZmlsdGVyZWRfbGlzdCA9IFtkIGZvciBkIGluIHJlc19nb29kcyBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICAgICAgZ29vZHNfdGFibGUgPSBmJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX1fdGFibGUnCiAgICAgICAgICAgIGl0ZW1bZ29vZHNfdGFibGVdID0gZmlsdGVyZWRfbGlzdAogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc0FkcjoKICAgICAgICAgICAgICAgIGl0ZW1bJ1JTX2RvY3NfYmFyY29kZXMnXSA9IFtdCiAgICAgICAgICAgICAgICBpdGVtWydSU19iYXJjX2Zsb3cnXSA9IFtdCgogICAgICAgIGlmIHRvX2pzb246CiAgICAgICAgICAgIHJldHVybiBqc29uLmR1bXBzKHJlc19kb2NzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByZXNfZG9jcwoKICAgIGRlZiB1cGRhdGVfZGF0YV9mcm9tX2pzb24oc2VsZiwganNvbl9kYXRhKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKGpzb25fZGF0YSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGRhdGEgPSBqc29uX2RhdGEKCiAgICAgICAgaWYgZGF0YS5nZXQoc2VsZi5kb2NzX3RhYmxlX25hbWUpOgogICAgICAgICAgICBzZWxmLnVwZGF0ZV9kb2NzKGRhdGEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi51cGRhdGVfbnNpKGRhdGEpCgogICAgZGVmIHVwZGF0ZV9kb2NzKHNlbGYsIGRhdGEpOgogICAgICAgIGRvY19pZHMgPSAnLCcuam9pbihbZicie2l0ZW0uZ2V0KCJpZF9kb2MiKX0iJyBmb3IgaXRlbSBpbiBkYXRhW3NlbGYuZG9jc190YWJsZV9uYW1lXV0pCgogICAgICAgIHF1ZXJ5ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgaWRfZG9jLCB2ZXJpZmllZAogICAgICAgICAgICBGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0KICAgICAgICAgICAgV0hFUkUgaWRfZG9jIElOICh7ZG9jX2lkc30pCiAgICAgICAgJycnCiAgICAgICAgZG9jcyA9IHtpdGVtWydpZF9kb2MnXTogaXRlbVsndmVyaWZpZWQnXSBvciBGYWxzZSBmb3IgaXRlbSBpbgogICAgICAgICAgICAgICAgc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0PXF1ZXJ5LCByZXR1cm5fZGljdD1UcnVlKX0KCiAgICAgICAgcXVlcmllcyA9IHNlbGYuanNvbl90b19zcWxpdGVfcXVlcnkoZGF0YSwgZG9jcykKCiAgICAgICAgZm9yIHF1ZXJ5IGluIHF1ZXJpZXM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnkpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHJhaXNlIGUKCiAgICAgICAgcmV0dXJuIGRvY3MKCiAgICBkZWYgdXBkYXRlX25zaShzZWxmLCBkYXRhKToKICAgICAgICBxdWVyaWVzID0gc2VsZi5qc29uX3RvX3NxbGl0ZV9xdWVyeShkYXRhKQoKICAgICAgICBmb3IgcXVlcnkgaW4gcXVlcmllczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgZQoKICAgIGRlZiB1cGRhdGVfc2VudF9kYXRhKHNlbGYsIGRhdGEpOgogICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgIGZvciBkb2MgaW4gZGF0YToKICAgICAgICAgICAgICAgIGlkX2RvYyA9IGRvY1snaWRfZG9jJ10KICAgICAgICAgICAgICAgIGlkX2dvb2RzID0gJywnLmpvaW4oW2YnIntpdGVtLmdldCgiaWRfZ29vZCIpfSInIGZvciBpdGVtIGluIGRvYy5nZXQoJ1JTX2RvY3NfdGFibGUnLCBbXSldKQoKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gZicnJwogICAgICAgICAgICAgICAgICAgIFVQREFURSB7c2VsZi5kZXRhaWxzX3RhYmxlX25hbWV9CiAgICAgICAgICAgICAgICAgICAgU0VUIHNlbnQgPSAxCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gJ3tpZF9kb2N9JyBBTkQgaWRfZ29vZCBJTiAoe2lkX2dvb2RzfSkKICAgICAgICAgICAgICAgICAgICAnJycKCiAgICAgICAgICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgICAgICAgICAgcXVlcnkgPSBmJ1VQREFURSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IFNFVCBzZW50PTEgV0hFUkUgaWRfZG9jID0gIntzZWxmLmRvY19pZH0iJwogICAgICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgIGRlZiBqc29uX3RvX3NxbGl0ZV9xdWVyeShzZWxmLCBkYXRhOiBkaWN0LCBkb2NzPU5vbmUpOgogICAgICAgIGlmIGRvY3MgaXMgTm9uZToKICAgICAgICAgICAgZG9jcyA9IHt9CgogICAgICAgIHFsaXN0ID0gW10KICAgICAgICAjINCm0LjQutC7INC/0L4g0LjQvNC10L3QsNC8INGC0LDQsdC70LjRhgogICAgICAgIHRhYmxlX2xpc3QgPSAoCiAgICAgICAgICAgICdSU19kb2NfdHlwZXMnLCAnUlNfZ29vZHMnLCAnUlNfcHJvcGVydGllcycsICdSU191bml0cycsICdSU190eXBlc19nb29kcycsICdSU19zZXJpZXMnLCAnUlNfY291bnRyYWdlbnRzJywKICAgICAgICAgICAgJ1JTX3dhcmVob3VzZXMnLCAnUlNfcHJpY2VfdHlwZXMnLCAnUlNfY2VsbHMnLCAnUlNfYmFyY29kZXMnLCAnUlNfcHJpY2VzJywgJ1JTX2RvY190eXBlcycsICdSU19kb2NzJywKICAgICAgICAgICAgJ1JTX2RvY3NfdGFibGUnLCAnUlNfZG9jc19iYXJjb2RlcycsICdSU19hZHJfZG9jcycsICdSU19hZHJfZG9jc190YWJsZScpICAjICwsICdSU19iYXJjX2Zsb3cnCiAgICAgICAgdGFibGVfZm9yX2RlbGV0ZSA9ICgnUlNfZG9jc190YWJsZScsICdSU19kb2NzX2JhcmNvZGVzLCBSU19iYXJjX2Zsb3cnLCAnUlNfYWRyX2RvY3NfdGFibGUnKSAgIyAsICdSU19iYXJjX2Zsb3cnCiAgICAgICAgZG9jX2lkX2xpc3QgPSBbXQogICAgICAgIGZvciB0YWJsZV9uYW1lIGluIHRhYmxlX2xpc3Q6CiAgICAgICAgICAgIGlmIG5vdCBkYXRhLmdldCh0YWJsZV9uYW1lKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjINCU0L7QsdCw0LLQuNC8INCyINC30LDQv9GA0L7RgdGLINGD0LTQsNC70LXQvdC40LUg0LjQtyDQsdCw0LfRiyDRgdGC0YDQvtC6INGC0LXRhSDQtNC+0LrRg9C80LXQvdGC0L7Qsiwg0YfRgtC+INC80Ysg0LfQsNCz0YDRg9C20LDQtdC8CiAgICAgICAgICAgIGlmIHRhYmxlX25hbWUgaW4gdGFibGVfZm9yX2RlbGV0ZToKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gZiJERUxFVEUgRlJPTSB7dGFibGVfbmFtZX0gV0hFUkUgaWRfZG9jIGluICh7JywgJy5qb2luKGRvY19pZF9saXN0KX0pICIKICAgICAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgICAgIGNvbHVtbl9uYW1lcyA9IGRhdGFbdGFibGVfbmFtZV1bMF0ua2V5cygpCiAgICAgICAgICAgIGlmICdtYXJrX2NvZGUnIGluIGNvbHVtbl9uYW1lczoKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQogICAgICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLmFwcGVuZCgnR1RJTicpCiAgICAgICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMuYXBwZW5kKCdTZXJpZXMnKQogICAgICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLnJlbW92ZSgnbWFya19jb2RlJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQoKICAgICAgICAgICAgaWYgdGFibGVfbmFtZSBpbiAoJ1JTX2RvY3MnLCAnUlNfYWRyX2RvY3MnKTogICMKICAgICAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcy5hcHBlbmQoJ3ZlcmlmaWVkJykKCiAgICAgICAgICAgIHF1ZXJ5ID0gZiJSRVBMQUNFIElOVE8ge3RhYmxlX25hbWV9ICh7JywgJy5qb2luKHF1ZXJ5X2NvbF9uYW1lcyl9KSBWQUxVRVMgIgogICAgICAgICAgICB2YWx1ZXMgPSBbXQoKICAgICAgICAgICAgZm9yIHJvdyBpbiBkYXRhW3RhYmxlX25hbWVdOgogICAgICAgICAgICAgICAgcm93X3ZhbHVlcyA9IFtdCiAgICAgICAgICAgICAgICBsaXN0X3F1b3RlZF9maWVsZHMgPSAoJ25hbWUnLCAnZnVsbF9uYW1lJywgIm1hcmtfY29kZSIpCiAgICAgICAgICAgICAgICBmb3IgY29sIGluIHF1ZXJ5X2NvbF9uYW1lczoKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgaW4gbGlzdF9xdW90ZWRfZmllbGRzIGFuZCAiXCIiIGluIHJvd1tjb2xdOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9IHJvd1tjb2xdLnJlcGxhY2UoIlwiIiwgIlwiXCIiKQoKICAgICAgICAgICAgICAgICAgICAjINCX0LTQtdGB0Ywg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YTQu9Cw0LMgdmVyaWZpZWQhISEKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgPT0gJ3ZlcmlmaWVkJyBhbmQgKHRhYmxlX25hbWUgaW4gWydSU19kb2NzJywgJ1JTX2Fkcl9kb2NzJ10pOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9IGRvY3MuZ2V0KHJvd1snaWRfZG9jJ10sIDApCgogICAgICAgICAgICAgICAgICAgIGlmIHJvdy5nZXQoY29sKSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICByb3dbY29sXSA9ICcnCgogICAgICAgICAgICAgICAgICAgIGlmIGNvbCA9PSAnbWFya19jb2RlJzogICMg0JfQsNC80LXQvdGP0LXQvCDRjdGC0L4g0L/QvtC70LUg0L3QsCDQv9C+0LvRjyBHVElOINC4IFNlcmllcwogICAgICAgICAgICAgICAgICAgICAgICBiYXJjX3N0cnVjdCA9IHNlbGYucGFyc2VfYmFyY29kZShyb3dbY29sXSkKICAgICAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ0dUSU4nXSkKICAgICAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ1NlcmllcyddKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd192YWx1ZXMuYXBwZW5kKHJvd1tjb2xdKSAgIyAoZicie3Jvd1tjb2xdfSInKQoKICAgICAgICAgICAgICAgICAgICBpZiBjb2wgPT0gJ2lkX2RvYycgYW5kICh0YWJsZV9uYW1lIGluIFsnUlNfZG9jcycsICdSU19hZHJfZG9jcyddKToKICAgICAgICAgICAgICAgICAgICAgICAgZG9jX2lkX2xpc3QuYXBwZW5kKCciJyArIHJvd1tjb2xdICsgJyInKQoKICAgICAgICAgICAgICAgIGZvcm1hdHRlZF92YWwgPSBbZicie3h9IicgaWYgaXNpbnN0YW5jZSh4LCBzdHIpIGVsc2Ugc3RyKHgpIGZvciB4IGluIHJvd192YWx1ZXNdCiAgICAgICAgICAgICAgICB2YWx1ZXMuYXBwZW5kKGYiKHsnLCAnLmpvaW4oZm9ybWF0dGVkX3ZhbCl9KSIpCiAgICAgICAgICAgIHF1ZXJ5ICs9ICIsICIuam9pbih2YWx1ZXMpCiAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgcmV0dXJuIHFsaXN0CgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9Tm9uZSwgcmV0dXJuX2RpY3Q9RmFsc2UpOgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3M9YXJncywgcmV0dXJuX2RpY3Q9cmV0dXJuX2RpY3QpCgogICAgZGVmIHNldF9kb2NfdmFsdWUoc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgcXVlcnkgPSBmJycnCiAgICAgICAgICAgIFVQREFURSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9CiAgICAgICAgICAgIFNFVCB7a2V5fSA9IHt2YWx1ZX0KICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gIntzZWxmLmRvY19pZH0iCiAgICAgICAgICAgICcnJwoKICAgICAgICBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQoKICAgIGRlZiBnZXRfZG9jX3ZhbHVlKHNlbGYsIGtleSwgaWRfZG9jKToKICAgICAgICBxdWVyeSA9IGYnU0VMRUNUIHtrZXl9IGZyb20ge3NlbGYuZG9jc190YWJsZV9uYW1lfSAgV0hFUkUgaWRfZG9jID0gPycKICAgICAgICByZXMgPSBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoaWRfZG9jLCksIFRydWUpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgICByZXR1cm4gcmVzWzBdW2tleV0KCiAgICBkZWYgZ2V0X2RvY190eXBlcyhzZWxmKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5ID0gZidTRUxFQ1QgRElTVElOQ1QgZG9jX3R5cGUgZnJvbSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9JwogICAgICAgIGRvY190eXBlcyA9IFtyZWNbMF0gZm9yIHJlYyBpbiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KV0KICAgICAgICByZXR1cm4gZG9jX3R5cGVzCgogICAgZGVmIGdldF9kb2Nfdmlld19kYXRhKHNlbGYsIGRvY190eXBlPScnLCBkb2Nfc3RhdHVzPScnKSAtPiBsaXN0OgogICAgICAgIGZpZWxkcyA9IFsKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX2RvYycsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfdHlwZScsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfbicsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5kb2NfZGF0ZScsCiAgICAgICAgICAgIGYne3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF93YXJlaG91c2UnLAogICAgICAgICAgICBmJ2lmbnVsbChSU193YXJlaG91c2VzLm5hbWUsIiIpIGFzIFJTX3dhcmVob3VzZScsCiAgICAgICAgICAgIGYnaWZudWxsKHtzZWxmLmRvY3NfdGFibGVfbmFtZX0udmVyaWZpZWQsIDApIGFzIHZlcmlmaWVkJywKICAgICAgICAgICAgZidpZm51bGwoe3NlbGYuZG9jc190YWJsZV9uYW1lfS5zZW50LCAwKSBhcyBzZW50JywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmFkZF9tYXJrX3NlbGVjdGlvbicsCiAgICAgICAgXQoKICAgICAgICBpZiBzZWxmLmRvY3NfdGFibGVfbmFtZSA9PSAnUlNfZG9jcyc6CiAgICAgICAgICAgIGZpZWxkcy5hcHBlbmQoZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX2NvdW50cmFnZW50cycpCiAgICAgICAgICAgIGZpZWxkcy5hcHBlbmQoZidpZm51bGwoUlNfY291bnRyYWdlbnRzLmZ1bGxfbmFtZSwgIiIpIGFzIFJTX2NvdW50cmFnZW50JykKCiAgICAgICAgcXVlcnlfdGV4dCA9ICdTRUxFQ1QgJyArICcsXG4nLmpvaW4oZmllbGRzKQoKICAgICAgICBqb2lucyA9IGYnJydGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0KICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3dhcmVob3VzZXMgYXMgUlNfd2FyZWhvdXNlcwogICAgICAgICAgICAgICAgT04gUlNfd2FyZWhvdXNlcy5pZCA9IHtzZWxmLmRvY3NfdGFibGVfbmFtZX0uaWRfd2FyZWhvdXNlCiAgICAgICAgJycnCgogICAgICAgIGlmIHNlbGYuZG9jc190YWJsZV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICAgICAgam9pbnMgKz0gZicnJwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfY291bnRyYWdlbnRzIGFzIFJTX2NvdW50cmFnZW50cwogICAgICAgICAgICAgICAgT04gUlNfY291bnRyYWdlbnRzLmlkID0ge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9jb3VudHJhZ2VudHMKICAgICAgICAgICAgICAgICcnJwoKICAgICAgICB3aGVyZSA9ICcnCgogICAgICAgIGlmIGRvY19zdGF0dXM6CiAgICAgICAgICAgIGlmIGRvY19zdGF0dXMgPT0gItCS0YvQs9GA0YPQttC10L0iOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgc2VudD0xIEFORCB2ZXJpZmllZD0xIgogICAgICAgICAgICBlbGlmIGRvY19zdGF0dXMgPT0gItCaINCy0YvQs9GA0YPQt9C60LUiOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgaWZudWxsKHZlcmlmaWVkLDApPTEgQU5EIGlmbnVsbChzZW50LDApPTAiCiAgICAgICAgICAgIGVsaWYgZG9jX3N0YXR1cyA9PSAi0Jog0LLRi9C/0L7Qu9C90LXQvdC40Y4iOgogICAgICAgICAgICAgICAgd2hlcmUgPSAiV0hFUkUgaWZudWxsKHZlcmlmaWVkLDApPTAgQU5EIGlmbnVsbChzZW50LDApPTAiCgogICAgICAgIGlmIG5vdCBkb2NfdHlwZSBvciBkb2NfdHlwZSA9PSAi0JLRgdC1IjoKICAgICAgICAgICAgYXJnc190dXBsZSA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBhcmdzX3R1cGxlID0gKGRvY190eXBlLCkKICAgICAgICAgICAgaWYgbm90IGRvY19zdGF0dXMgb3IgZG9jX3N0YXR1cyA9PSAi0JLRgdC1IjoKICAgICAgICAgICAgICAgIHdoZXJlID0gJ1dIRVJFIGRvY190eXBlPT8nCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB3aGVyZSArPSAnIEFORCBkb2NfdHlwZT0/JwoKICAgICAgICBxdWVyeV90ZXh0ID0gZicnJwogICAgICAgICAgICB7cXVlcnlfdGV4dH0KICAgICAgICAgICAge2pvaW5zfQogICAgICAgICAgICB7d2hlcmV9CiAgICAgICAgICAgIE9SREVSIEJZIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0uZG9jX2RhdGUKICAgICAgICAnJycKCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCBhcmdzX3R1cGxlLCByZXR1cm5fZGljdD1UcnVlKQogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmLCBpZF9kb2MpOgogICAgICAgIHF1ZXJ5ZXMgPSAoZidERUxFVEUgRlJPTSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IFdIRVJFIGlkX2RvYyA9ID8nLAogICAgICAgICdERUxFVEUgRlJPTSBSU19iYXJjX2Zsb3cgV0hFUkUgaWRfZG9jID0gPycsCiAgICAgICAgJ0RFTEVURSBGUk9NIFJTX2RvY3NfdGFibGUgV0hFUkUgaWRfZG9jID0gPycsCiAgICAgICAgJ0RFTEVURSBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkX2RvYyA9ID8nKQoKICAgICAgICBmb3IgcXVlcnkgaW4gcXVlcnllczoKICAgICAgICAgICAgc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGlkX2RvYywpKQoKCiAgICBkZWYgZ2V0X2RvY3Nfc3RhdChzZWxmKToKICAgICAgICBxdWVyeSA9IGYnJycKICAgICAgICBXSVRIIHRtcCBBUyAoCiAgICAgICAgICAgIFNFTEVDVCAKICAgICAgICAgICAgICAgIGRvY190eXBlLAogICAgICAgICAgICAgICAge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MsCiAgICAgICAgICAgICAgICAxIGFzIGRvY19Db3VudCwKICAgICAgICAgICAgICAgIElGTlVMTCh7c2VsZi5kb2NzX3RhYmxlX25hbWV9LnNlbnQsMCkgYXMgc2VudCwKICAgICAgICAgICAgICAgIElGTlVMTCh7c2VsZi5kb2NzX3RhYmxlX25hbWV9LnZlcmlmaWVkLDApIGFzIHZlcmlmaWVkLCAKICAgICAgICAgICAgICAgIENBU0UgV0hFTiBJRk5VTEwodmVyaWZpZWQsMCk9MCBUSEVOIAogICAgICAgICAgICAgICAgICAgIENPVU5UKHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0uaWQpCiAgICAgICAgICAgICAgICBFTFNFIAogICAgICAgICAgICAgICAgICAgIDAgCiAgICAgICAgICAgICAgICBFTkQgYXMgY291bnRfdmVyaWZpZWQsCiAgICAgICAgICAgICAgICBDQVNFIFdIRU4gSUZOVUxMKHZlcmlmaWVkLDApPTEgVEhFTiAKICAgICAgICAgICAgICAgICAgICBjb3VudCh7c2VsZi5kZXRhaWxzX3RhYmxlX25hbWV9LmlkKQogICAgICAgICAgICAgICAgRUxTRSAKICAgICAgICAgICAgICAgICAgICAwIAogICAgICAgICAgICAgICAgRU5EIGFzIGNvdW50X3VudmVyaWZpZWQsCiAgICAgICAgICAgICAgICBDQVNFIFdIRU4gSUZOVUxMKHZlcmlmaWVkLDApPTAgVEhFTgogICAgICAgICAgICAgICAgICAgICBTVU0oe3NlbGYuZGV0YWlsc190YWJsZV9uYW1lfS5xdHR5X3BsYW4pCiAgICAgICAgICAgICAgICBFTFNFIAogICAgICAgICAgICAgICAgICAgIDAgCiAgICAgICAgICAgICAgICBFTkQgYXMgcXR0eV9wbGFuX3ZlcmlmaWVkLAogICAgICAgICAgICAgICAgQ0FTRSBXSEVOIElGTlVMTCh2ZXJpZmllZCwwKT0xIFRIRU4gCiAgICAgICAgICAgICAgICAgICAgU1VNKHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0ucXR0eV9wbGFuKQogICAgICAgICAgICAgICAgRUxTRSAKICAgICAgICAgICAgICAgICAgICAwIAogICAgICAgICAgICAgICAgRU5EIGFzIHF0dHlfcGxhbl91bnZlcmlmaWVkCiAgICAgICAgICAgIEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfQogICAgICAgICAgICBMRUZUIEpPSU4ge3NlbGYuZGV0YWlsc190YWJsZV9uYW1lfSAKICAgICAgICAgICAgICAgIE9OIHtzZWxmLmRldGFpbHNfdGFibGVfbmFtZX0uaWRfZG9jID0ge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MKICAgICAgICAgICAgR1JPVVAgQlkge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF9kb2MKICAgICAgICApCiAgICAgICAgU0VMRUNUIAogICAgICAgICAgICBkb2NfdHlwZSBhcyBkb2NUeXBlLCAKICAgICAgICAgICAgQ09VTlQoaWRfZG9jKSwKICAgICAgICAgICAgU1VNKGRvY19Db3VudCkgYXMgY291bnQsIAogICAgICAgICAgICBTVU0oc2VudCkgYXMgc2VudCwgCiAgICAgICAgICAgIFNVTSh2ZXJpZmllZCkgYXMgdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShjb3VudF92ZXJpZmllZCkgYXMgY291bnRfdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShjb3VudF91bnZlcmlmaWVkKSBhcyBjb3VudF91bnZlcmlmaWVkLAogICAgICAgICAgICBTVU0ocXR0eV9wbGFuX3ZlcmlmaWVkKSBhcyBxdHR5X3BsYW5fdmVyaWZpZWQsCiAgICAgICAgICAgIFNVTShxdHR5X3BsYW5fdW52ZXJpZmllZCkgYXMgcXR0eV9wbGFuX3VudmVyaWZpZWQKICAgICAgICBGUk9NIHRtcAogICAgICAgIEdST1VQIEJZIGRvY190eXBlCiAgICAgICAgJycnCgogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnksIHJldHVybl9kaWN0PVRydWUpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBnZXRfZG9jX2Zsb3dfc3RhdChzZWxmKToKICAgICAgICBxdWVyeSA9IGYnJycKICAgICAgICBXSVRIIHRtcCBBUyAoCiAgICAgICAgICAgIFNFTEVDVCAKICAgICAgICAgICAgICAgIGRvY190eXBlLAogICAgICAgICAgICAgICAgUlNfZG9jcy5pZF9kb2MsCiAgICAgICAgICAgICAgICAxIGFzIGRvY19Db3VudCwKICAgICAgICAgICAgICAgIElGTlVMTChSU19kb2NzLnNlbnQsMCkgYXMgc2VudCwKICAgICAgICAgICAgICAgIElGTlVMTChSU19kb2NzLnZlcmlmaWVkLDApIGFzIHZlcmlmaWVkLAoKICAgICAgICAgICAgICAgIGNvdW50KFJTX2JhcmNfZmxvdy5iYXJjb2RlKSBhcyBiYXJjX2NvdW50CgogICAgICAgICAgICBGUk9NIFJTX2RvY3MKICAgICAgICAgICAgCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19iYXJjX2Zsb3cgCiAgICAgICAgICAgICAgICBPTiBSU19kb2NzLmlkX2RvYyA9IFJTX2JhcmNfZmxvdy5pZF9kb2MKICAgICAgICAgICAgICAgIAogICAgICAgICAgIFdIRVJFICBSU19kb2NzLmlkX2RvYyBub3QgaW4gKFNFTEVDVCBkaXN0aW5jdAogICAgICAgICAgICAgICAgaWRfZG9jCiAgICAgICAgICAgICAgICBGcm9tIAogICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZQogICAgICAgICAgICAgICAgKSAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBHUk9VUCBCWSBSU19kb2NzLmlkX2RvYwogICAgICAgICkKICAgICAgICBTRUxFQ1QgCiAgICAgICAgICAgIGRvY190eXBlIGFzIGRvY1R5cGUsIAogICAgICAgICAgICBDT1VOVChpZF9kb2MpIGFzIGlkX2NvdW50LAogICAgICAgICAgICBTVU0oZG9jX0NvdW50KSBhcyBjb3VudCwgCiAgICAgICAgICAgIFNVTShzZW50KSBhcyBzZW50LCAKICAgICAgICAgICAgU1VNKHZlcmlmaWVkKSBhcyB2ZXJpZmllZCwKICAgICAgICAgICAgU1VNKGJhcmNfY291bnQpIGFzIGJhcmNfY291bnQKICAgICAgICBGUk9NIHRtcAogICAgICAgIEdST1VQIEJZIGRvY190eXBlCiAgICAgICAgJycnCiAgICAgICAgcmVzID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgcmV0dXJuX2RpY3Q9VHJ1ZSkKICAgICAgICByZXR1cm4gcmVzCgogICAgZGVmIGdldF9kb2NfZGV0YWlsc19kYXRhKHNlbGYsIGlkX2RvYywgZmlyc3RfZWxlbSwgaXRlbXNfb25fcGFnZSwgcm93X2ZpbHRlcnM9Tm9uZSwgc2VhcmNoX3N0cmluZz1Ob25lKSAtPiBsaXN0OgogICAgICAgIHNlbGVjdF9xdWVyeSA9IGYiIiIKICAgICAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWQsCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZG9jLAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX2dvb2QsCiAgICAgICAgICAgIFJTX2dvb2RzLm5hbWUgYXMgZ29vZF9uYW1lLAogICAgICAgICAgICBSU19nb29kcy5jb2RlLAogICAgICAgICAgICBSU19nb29kcy5hcnQsCiAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcywKICAgICAgICAgICAgUlNfcHJvcGVydGllcy5uYW1lIGFzIHByb3BlcnRpZXNfbmFtZSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZF9zZXJpZXMsCiAgICAgICAgICAgIFJTX3Nlcmllcy5uYW1lIGFzIHNlcmllc19uYW1lLAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX3VuaXQsCiAgICAgICAgICAgIFJTX3VuaXRzLm5hbWUgYXMgdW5pdHNfbmFtZSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5LAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLnF0dHlfcGxhbiwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5wcmljZSwKICAgICAgICAgICAgUlNfcHJpY2VfdHlwZXMubmFtZSBhcyBwcmljZV9uYW1lLAogICAgICAgICAgICBSU19kb2NzX3RhYmxlLnF0dHlfcGxhbiAtUlNfZG9jc190YWJsZS5xdHR5IGFzIElzRG9uZSwKICAgICAgICAgICAgUlNfZG9jc190YWJsZS5sYXN0X3VwZGF0ZWQKICAgICAgICAgICAgCiAgICAgICAgICAgIEZST00gUlNfZG9jc190YWJsZSAKCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgT04gUlNfZ29vZHMuaWQ9UlNfZG9jc190YWJsZS5pZF9nb29kCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19wcm9wZXJ0aWVzCiAgICAgICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPVJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgICAgIE9OIFJTX3Nlcmllcy5pZCA9UlNfZG9jc190YWJsZS5pZF9zZXJpZXMKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkID0gUlNfZG9jc190YWJsZS5pZF91bml0CiAgICAgICAgICAgIExFRlQgSk9JTiBSU19wcmljZV90eXBlcwogICAgICAgICAgICBPTiBSU19wcmljZV90eXBlcy5pZCA9UlNfZG9jc190YWJsZS5pZF9wcmljZQogICAgICAgICAgICAiIiIKCiAgICAgICAgd2hlcmUgPSBmIiIiV0hFUkUgaWRfZG9jID0gJ3tzdHIoaWRfZG9jKX0nIiIiCiAgICAgICAgcm93X2ZpbHRlcnNfY29uZGl0aW9uID0gIiIiQU5EIFJTX2RvY3NfdGFibGUucXR0eSAhPSBSU19kb2NzX3RhYmxlLnF0dHlfcGxhbiIiIiBpZiByb3dfZmlsdGVycyBlbHNlICcnCiAgICAgICAgc2VhcmNoX3N0cmluZ19jb25kaXRpb24gPSBmIiIiQU5EIGdvb2RfbmFtZSBMSUtFICcle3NlYXJjaF9zdHJpbmd9JSciIiIgaWYgc2VhcmNoX3N0cmluZyBlbHNlICcnCgogICAgICAgIHdoZXJlX3F1ZXJ5ID0gZiIiIgogICAgICAgIHt3aGVyZX0KICAgICAgICB7cm93X2ZpbHRlcnNfY29uZGl0aW9ufQogICAgICAgIHtzZWFyY2hfc3RyaW5nX2NvbmRpdGlvbn0KICAgICAgICAiIiIKICAgICAgICBvcmRlcl9ieSA9ICIiIk9SREVSIEJZIGxhc3RfdXBkYXRlZCBERVNDIiIiCiAgICAgICAgbGltaXQgPSBmJ0xJTUlUIHtpdGVtc19vbl9wYWdlfSBPRkZTRVQge2ZpcnN0X2VsZW19JwogICAgICAgIHF1ZXJ5ID0gZiJ7c2VsZWN0X3F1ZXJ5fSB7d2hlcmVfcXVlcnl9IHtvcmRlcl9ieX0ge2xpbWl0fSIKCiAgICAgICAgcmVzID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgcmV0dXJuX2RpY3Q9VHJ1ZSkKICAgICAgICAjIHJlcyA9IHNlbGYuX3NxbF9xdWVyeShxdWVyeSwgJycpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBwYXJzZV9iYXJjb2RlKHNlbGYsIHZhbCk6CiAgICAgICAgaWYgbGVuKHZhbCkgPCAyMToKICAgICAgICAgICAgcmV0dXJuIHsnR1RJTic6ICcnLCAnU2VyaWVzJzogJyd9CgogICAgICAgIHZhbC5yZXBsYWNlKCcoMDEpJywgJzAxJykKICAgICAgICB2YWwucmVwbGFjZSgnKDIxKScsICcyMScpCgogICAgICAgIGlmIHZhbFs6Ml0gPT0gJzAxJzoKICAgICAgICAgICAgR1RJTiA9IHZhbFsyOjE2XQogICAgICAgICAgICBTZXJpZXMgPSB2YWxbMTg6XQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIEdUSU4gPSB2YWxbOjE0XQogICAgICAgICAgICBTZXJpZXMgPSB2YWxbMTQ6XQoKICAgICAgICByZXR1cm4geydHVElOJzogR1RJTiwgJ1Nlcmllcyc6IFNlcmllc30KCiAgICBkZWYgY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcXVlcnlfdGV4dCA9ICgnVXBkYXRlIFJTX2RvY3NfYmFyY29kZXMgU2V0IGFwcHJvdmVkID0gMCBXaGVyZSBpZF9kb2M9OmlkX2RvYycsCiAgICAgICAgICAgICAgICAgICAgICAnRGVsZXRlIEZyb20gUlNfZG9jc19iYXJjb2RlcyBXaGVyZSAgaWRfZG9jPTppZF9kb2MgQW5kIGlzX3BsYW4gPSAwJywKICAgICAgICAgICAgICAgICAgICAgICdVcGRhdGUgUlNfZG9jc190YWJsZSBTZXQgcXR0eSA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgICAgICAgICAgICAgICAgICAgJ0RlbGV0ZSBGcm9tIFJTX2RvY3NfdGFibGUgV2hlcmUgaWRfZG9jPTppZF9kb2MgYW5kIGlzX3BsYW4gPSAiRmFsc2UiJywKICAgICAgICAgICAgICAgICAgICAgICdEZWxldGUgRnJvbSBSU19iYXJjX2Zsb3cgV2hlcmUgaWRfZG9jID0gOmlkX2RvYycpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgZWwgaW4gcXVlcnlfdGV4dDoKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6IGlkX2RvY30pKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogRmFsc2UsICdlcnJvcic6IGUuYXJnc1swXX0KCiAgICAgICAgcmV0dXJuIHsncmVzdWx0JzogVHJ1ZSwgJ2Vycm9yJzogJyd9CgogICAgZGVmIGdldF9kb2NfYmFyY29kZV9kYXRhKHNlbGYsIGFyZ3MpOgogICAgICAgIHF1ZXJ5ID0gJycnCiAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICAiKDAxKSIgfHwgR1RJTiB8fCAiKDIxKSIgfHwgU2VyaWVzIGFzIG1hcmtfY29kZSwKICAgICAgICAgICAgYXBwcm92ZWQKICAgICAgICAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICAgICAgICAgIFdoZXJlCiAgICAgICAgICAgIGlkX2RvYyA9IDppZF9kb2MgQU5ECiAgICAgICAgICAgIGlkX2dvb2QgPSA6aWRfZ29vZCBBTkQKICAgICAgICAgICAgaWRfcHJvcGVydHkgPSA6aWRfcHJvcGVydHkgQU5ECiAgICAgICAgICAgIGlkX3NlcmllcyA9IDppZF9zZXJpZXMgCiAgICAgICAgICAgIC0tQU5EICBpZF91bml0ID0gOmlkX3VuaXQKICAgICAgICAgJycnCgogICAgICAgIHJlcyA9IHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnksIGFyZ3MsIHJldHVybl9kaWN0PVRydWUpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBnZXRfZG9jc19jb3VudChzZWxmLCBkb2NfdHlwZT0nJyk6CiAgICAgICAgcXVlcnkgPSBmJ1NFTEVDVCBDT1VOVCgqKSBBUyBkb2NzX2NvdW50IEZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfScKICAgICAgICBhcmdzID0gTm9uZQoKICAgICAgICBpZiBkb2NfdHlwZToKICAgICAgICAgICAgcXVlcnkgPSAnXG4nLmpvaW4oW3F1ZXJ5LCAnV0hFUkUgZG9jX3R5cGUgPSA/J10pCiAgICAgICAgICAgIGFyZ3MgPSAoZG9jX3R5cGUsKQoKICAgICAgICByZXMgPSBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCBhcmdzLCBUcnVlKQogICAgICAgIGlmIHJlczoKICAgICAgICAgICAgcmV0dXJuIHJlc1swXS5nZXQoJ2RvY3NfY291bnQnLCAwKQogICAgICAgIHJldHVybiAwCgogICAgZGVmIGdldF9leGlzdGluZ19kb2NzKHNlbGYpOgogICAgICAgIHF1ZXJ5X3RleHQgPSBmIlNFTEVDVCBkb2Nfbixkb2NfdHlwZSBGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0iCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0KQogICAgICAgIHJldHVybiByZXMKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgd3JpdGVfZXJyb3Jfb25fbG9nKEVycl92YWx1ZSk6CiAgICAgICAgaWYgRXJyX3ZhbHVlOgogICAgICAgICAgICBxdGV4dCA9ICdJbnNlcnQgaW50byBFcnJvcl9sb2cobG9nKSBWYWx1ZXMoPyknCiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChFcnJfdmFsdWUsKSkKCiAgICBkZWYgZ2V0X2RvY3NfYW5kX2dvb2RzX2Zvcl91cGxvYWQoc2VsZik6CgogICAgICAgIHF1ZXJ5X2RvY3MgPSBmJycnU0VMRUNUICogRlJPTSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IFdIRVJFIHZlcmlmaWVkID0gMSAgYW5kIChzZW50IDw+IDEgb3Igc2VudCBpcyBudWxsKScnJwogICAgICAgIHF1ZXJ5X2dvb2RzID0gZicnJ1NFTEVDVCAqIEZST00ge3NlbGYuZGV0YWlsc190YWJsZV9uYW1lfSBXSEVSRSAoc2VudCA9IDAgT1Igc2VudCBpcyBOdWxsKScnJwogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzX2RvY3MgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2RvY3MsIE5vbmUsIFRydWUpCiAgICAgICAgICAgIHJlc19nb29kcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZ29vZHMsIE5vbmUsIFRydWUpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBlCiAgICAgICAgaWYgbm90IHJlc19nb29kczoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4gc2VsZi5mb3JtX2RhdGFfZm9yX3JlcXVlc3QocmVzX2RvY3MsIHJlc19nb29kcywgRmFsc2UpCgogICAgZGVmIGdldF9kYXRhX3RvX3NlbmQoc2VsZik6CiAgICAgICAgZGF0YSA9IFtdCgogICAgICAgIHEgPSBmJycnU0VMRUNUIGlkX2RvYwogICAgICAgICAgICAgICAgRlJPTSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9IAogICAgICAgICAgICAgICAgV0hFUkUgdmVyaWZpZWQgPSAxICBBTkQgKHNlbnQgPSAwIE9SIHNlbnQgSVMgTlVMTCkKICAgICAgICAgICAgJycnCiAgICAgICAgcmVzID0gc2VsZi5wcm92aWRlci5zcWxfcXVlcnkocSkKCiAgICAgICAgZm9yIHJvdyBpbiByZXM6CiAgICAgICAgICAgIGlkX2RvYyA9IHJvd1snaWRfZG9jJ10KCiAgICAgICAgICAgIGRvY19kYXRhID0gewogICAgICAgICAgICAgICAgJ2lkX2RvYyc6IGlkX2RvYywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmllbGRzID0gWydpZF9kb2MnLCAnaWRfZ29vZCcsICdpZF9wcm9wZXJ0aWVzJywgJ2lkX3NlcmllcycsICdpZF91bml0JywgJ3F0dHknLCAncXR0eV9wbGFuJ10KICAgICAgICAgICAgcSA9ICcnJwogICAgICAgICAgICAgICAgU0VMRUNUIHt9CiAgICAgICAgICAgICAgICBGUk9NIFJTX2RvY3NfdGFibGUKICAgICAgICAgICAgICAgIFdIRVJFIGlkX2RvYyA9ID8gQU5EIChzZW50ID0gMCBPUiBzZW50IElTIE5VTEwpCiAgICAgICAgICAgICcnJy5mb3JtYXQoJywnLmpvaW4oZmllbGRzKSkKCiAgICAgICAgICAgIGdvb2RzID0gc2VsZi5wcm92aWRlci5zcWxfcXVlcnkocSwgaWRfZG9jKQogICAgICAgICAgICBkb2NfZGF0YVsnUlNfZG9jc190YWJsZSddID0gZ29vZHMKCgogICAgICAgICAgICBmaWVsZHMgPSBbJ2lkX2RvYycsICdpZF9nb29kJywgJ2lkX3Byb3BlcnR5JywgJ2lkX3NlcmllcycsICdiYXJjb2RlX2Zyb21fc2Nhbm5lcicsICdHVElOJywgJ1NlcmllcyddCiAgICAgICAgICAgIHEgPSAnJycKICAgICAgICAgICAgICAgIFNFTEVDVCB7fQogICAgICAgICAgICAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICAgICAgICAgICAgICBXSEVSRSBpZF9kb2MgPSA/CiAgICAgICAgICAgICcnJy5mb3JtYXQoJywnLmpvaW4oZmllbGRzKSkKCiAgICAgICAgICAgIGRvY19iYXJjb2RlcyA9IHNlbGYucHJvdmlkZXIuc3FsX3F1ZXJ5KHEsIGlkX2RvYykKICAgICAgICAgICAgZG9jX2RhdGFbJ1JTX2RvY3NfYmFyY29kZXMnXSA9IGRvY19iYXJjb2RlcwoKCiAgICAgICAgICAgIGZpZWxkcyA9IFsnaWRfZG9jJywgJ2JhcmNvZGUnXQogICAgICAgICAgICBxID0gJycnCiAgICAgICAgICAgICAgICBTRUxFQ1Qge30KICAgICAgICAgICAgICAgIEZST00gUlNfYmFyY19mbG93CiAgICAgICAgICAgICAgICBXSEVSRSBpZF9kb2MgPSA/CiAgICAgICAgICAgICcnJy5mb3JtYXQoJywnLmpvaW4oZmllbGRzKSkKCiAgICAgICAgICAgIGJhcmNfZmxvdyA9IHNlbGYucHJvdmlkZXIuc3FsX3F1ZXJ5KHEsIGlkX2RvYykKICAgICAgICAgICAgZG9jX2RhdGFbJ1JTX2JhcmNfZmxvdyddID0gYmFyY19mbG93CgogICAgICAgICAgICBkYXRhLmFwcGVuZChkb2NfZGF0YSkKCiAgICAgICAgcmV0dXJuIGRhdGEKCgogICAgZGVmIGdldF9jb3VudF9tYXJrX2NvZGVzKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcSA9ICcnJwogICAgICAgICAgICBTRUxFQ1QgRElTVElOQ1QgQ09VTlQoaWQpIGFzIGNvbF9zdHIgCiAgICAgICAgICAgIEZST00gUlNfZG9jc19iYXJjb2RlcyBXSEVSRSBpZF9kb2MgPSA/IEFORCBpc19wbGFuID0gMQogICAgICAgICcnJwogICAgICAgIHJlcyA9IHNlbGYuX3NxbF9xdWVyeSgKICAgICAgICAgICAgcT1xLAogICAgICAgICAgICBwYXJhbXM9aWRfZG9jLAogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHJlc1swXVsnY29sX3N0ciddCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIHVwZGF0ZV91cGxvYWRlZF9kb2NzX3N0YXR1cyhkb2NfaW5fc3RyKToKICAgICAgICBxdGV4dCA9IGYnVVBEQVRFIFJTX2RvY3MgU0VUIHNlbnQgPSAxICBXSEVSRSBpZF9kb2MgaW4gKHtkb2NfaW5fc3RyfSkgJwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQpCgogICAgICAgIHF0ZXh0ID0gZidVUERBVEUgUlNfYWRyX2RvY3MgU0VUIHNlbnQgPSAxICBXSEVSRSBpZF9kb2MgaW4gKHtkb2NfaW5fc3RyfSkgJwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQpCgogICAgICAgIHF0ZXh0ID0gZidVUERBVEUgUlNfZG9jc190YWJsZSBTRVQgc2VudCA9IDEgIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19pbl9zdHJ9KSAnCiAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCkKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgdXBkYXRlX3JzX2RvY3NfdGFibGVfc2VudF9zdGF0dXModGFibGVfc3RyaW5nX2lkOiBzdHIpOgogICAgICAgIHF0ZXh0ID0gZidVUERBVEUgUlNfZG9jc190YWJsZSBTRVQgc2VudCA9IDAgIFdIRVJFIGlkIGluICh7dGFibGVfc3RyaW5nX2lkfSkgJwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQpCgogICAgZGVmIHNldF9kb2Nfc3RhdHVzX3RvX3VwbG9hZChzZWxmLCBkb2NfaWQpOgogICAgICAgIHF0ZXh0ID0gZiJVUERBVEUge3NlbGYuZG9jc190YWJsZV9uYW1lfSBTRVQgc2VudCA9IDAsIHZlcmlmaWVkID0gMCAgV0hFUkUgaWRfZG9jID0gJ3tkb2NfaWR9JyIKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0KQoKICAgIGRlZiB1cGRhdGVfZG9jX3RhYmxlX3JvdyhzZWxmLCByb3dfaWQsIGRhdGEpOgogICAgICAgIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9IHNlbGYuZGV0YWlsc190YWJsZV9uYW1lCiAgICAgICAgc2VsZi5wcm92aWRlci51cGRhdGUoZGF0YT1kYXRhLCBfZmlsdGVyPXsnaWQnOiByb3dfaWR9KQoKICAgIGRlZiBfc3FsX2V4ZWMoc2VsZiwgcSwgcGFyYW1zLCB0YWJsZV9uYW1lPScnKToKICAgICAgICBpZiB0YWJsZV9uYW1lOgogICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnRhYmxlX25hbWUgPSB0YWJsZV9uYW1lCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXJhbXMsIHN0cik6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIuc3FsX2V4ZWMocSwgcGFyYW1zKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYucHJvdmlkZXIuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9zcWxfcXVlcnkoc2VsZiwgcSwgcGFyYW1zLCB0YWJsZV9uYW1lPScnKToKICAgICAgICBpZiB0YWJsZV9uYW1lOgogICAgICAgICAgICBzZWxmLnByb3ZpZGVyLnRhYmxlX25hbWUgPSB0YWJsZV9uYW1lCiAgICAgICAgcmV0dXJuIHNlbGYucHJvdmlkZXIuc3FsX3F1ZXJ5KHEsIHBhcmFtcykKCgpjbGFzcyBBZHJEb2NTZXJ2aWNlKERvY1NlcnZpY2UpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvY19pZD0nJywgY3VyX2NlbGw9JycsIHRhYmxlX3R5cGU9J2luJyk6CiAgICAgICAgc2VsZi5kb2NfaWQgPSBkb2NfaWQKICAgICAgICBzZWxmLmRvY3NfdGFibGVfbmFtZSA9ICdSU19BZHJfZG9jcycKICAgICAgICBzZWxmLmRldGFpbHNfdGFibGVfbmFtZSA9ICdSU19hZHJfZG9jc190YWJsZScKICAgICAgICBzZWxmLmlzQWRyID0gVHJ1ZQogICAgICAgIHNlbGYuY3VycmVudF9jZWxsID0gY3VyX2NlbGwKICAgICAgICBzZWxmLnRhYmxlX3R5cGUgPSB0YWJsZV90eXBlCiAgICAgICAgc2VsZi5wcm92aWRlciA9IFNxbFF1ZXJ5UHJvdmlkZXIoc2VsZi5kb2NzX3RhYmxlX25hbWUsIHNxbF9jbGFzcz1zcWxDbGFzcygpKQoKICAgIGRlZiBnZXRfY3VycmVudF9jZWxsKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2RvY19kZXRhaWxzX2RhdGEoc2VsZiwgaWRfZG9jPScnLCBjdXJDZWxsPScnKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5X3RleHQgPSAnJydTRUxFQ1QKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWQsCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLmlkX2RvYywKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZCwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLm5hbWUsIDpOdWxsVmFsdWUpIGFzIGdvb2RfbmFtZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmNvZGUsIDpFbXB0eVN0cmluZykgYXMgY29kZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmFydCwgOkVtcHR5U3RyaW5nKSBhcyBhcnQsCiAgICAgICAgICAgIGlmbnVsbChSU19hZHJfZG9jc190YWJsZS5pZF9wcm9wZXJ0aWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3Byb3BlcnRpZXMsCiAgICAgICAgICAgIGlmbnVsbChSU19wcm9wZXJ0aWVzLm5hbWUsIDpFbXB0eVN0cmluZykgYXMgcHJvcGVydGllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfc2VyaWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3NlcmllcywKICAgICAgICAgICAgaWZudWxsKFJTX3Nlcmllcy5uYW1lLCA6RW1wdHlTdHJpbmcpIGFzIHNlcmllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdCwgOkVtcHR5U3RyaW5nKSBhcyBpZF91bml0LAogICAgICAgICAgICBpZm51bGwoUlNfdW5pdHMubmFtZSwgOkVtcHR5U3RyaW5nKSBhcyB1bml0c19uYW1lLAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5xdHR5IGFzIHF0dHksCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiBhcyBxdHR5X3BsYW4sCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiAtIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHkgYXMgSXNEb25lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbCwgOkVtcHR5U3RyaW5nKSBhcyBpZF9jZWxsLAogICAgICAgICAgICBpZm51bGwoUlNfY2VsbHMubmFtZSwgOk51bGxWYWx1ZSkgYXMgY2VsbF9uYW1lCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgRlJPTSBSU19hZHJfZG9jc190YWJsZSAKCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgT04gUlNfZ29vZHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgICAgICBPTiBSU19wcm9wZXJ0aWVzLmlkID0gUlNfYWRyX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgICAgIE9OIFJTX3Nlcmllcy5pZCA9IFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3NlcmllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgICAgICAgICAgT04gUlNfdW5pdHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfY2VsbHMKICAgICAgICAgICAgT04gUlNfY2VsbHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbAoKICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyBhbmQgdGFibGVfdHlwZSA9IDp0YWJsZV90eXBlCiAgICAgICAgICAgIAogICAgICAgICAgICAnJycKCiAgICAgICAgaWYgY3VyQ2VsbDoKICAgICAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnJycKICAgICAgICAgICAgIGFuZCAoaWRfY2VsbD06Y3VycmVudF9jZWxsIE9SIGlkX2NlbGw9IiIgT1IgaWRfY2VsbCBpcyBOdWxsKQogICAgICAgICAgICAnJycKCiAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnIE9SREVSIEJZIFJTX2NlbGxzLm5hbWUsIFJTX2Fkcl9kb2NzX3RhYmxlLmxhc3RfdXBkYXRlZCBERVNDJwogICAgICAgICMgc2VsZi50YWJsZV90eXBlID0gJ291dCcgICMqKioqKiog0J7QotCb0JDQlNCe0KfQndCe0JUKICAgICAgICBwYXJhbXNfZGljdCA9IHsnaWRfZG9jJzogaWRfZG9jLCAnTnVsbFZhbHVlJzogTm9uZSwgJ0VtcHR5U3RyaW5nJzogJycsICd0YWJsZV90eXBlJzogc2VsZi50YWJsZV90eXBlfQogICAgICAgIGlmIGN1ckNlbGw6CiAgICAgICAgICAgIHBhcmFtc19kaWN0WydjdXJyZW50X2NlbGwnXSA9IGN1ckNlbGwKICAgICAgICByZXMgPSBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIHBhcmFtc19kaWN0LCByZXR1cm5fZGljdD1UcnVlKQogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcXVlcnlfdGV4dCA9ICgnVXBkYXRlIFJTX2Fkcl9kb2NzX3RhYmxlIFNldCBxdHR5ID0gMCBXaGVyZSBpZF9kb2M9OmlkX2RvYycsCiAgICAgICAgICAgICAgICAgICAgICAnRGVsZXRlIEZyb20gUlNfYWRyX2RvY3NfdGFibGUgV2hlcmUgaWRfZG9jPTppZF9kb2MgYW5kIGlzX3BsYW4gPSAiRmFsc2UiJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZvciBlbCBpbiBxdWVyeV90ZXh0OgogICAgICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChlbCwgKHsnaWRfZG9jJzogaWRfZG9jfSkpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByZXR1cm4geydyZXN1bHQnOiBGYWxzZSwgJ2Vycm9yJzogZS5hcmdzWzBdfQoKICAgICAgICByZXR1cm4geydyZXN1bHQnOiBUcnVlLCAnZXJyb3InOiAnJ30KCiAgICBkZWYgZ2V0X2RhdGFfdG9fc2VuZChzZWxmKToKICAgICAgICBkYXRhID0gW10KCiAgICAgICAgcSA9IGYnJydTRUxFQ1QgaWRfZG9jCiAgICAgICAgICAgICAgICBGUk9NIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0gCiAgICAgICAgICAgICAgICBXSEVSRSB2ZXJpZmllZCA9IDEgIEFORCAoc2VudCA9IDAgT1Igc2VudCBJUyBOVUxMKQogICAgICAgICAgICAnJycKICAgICAgICByZXMgPSBzZWxmLnByb3ZpZGVyLnNxbF9xdWVyeShxKQoKICAgICAgICBmb3Igcm93IGluIHJlczoKICAgICAgICAgICAgaWRfZG9jID0gcm93WydpZF9kb2MnXQoKICAgICAgICAgICAgZG9jX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAnaWRfZG9jJzogaWRfZG9jLAogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWVsZHMgPSBbJ2lkX2RvYycsICdpZF9nb29kJywgJ2lkX3Byb3BlcnRpZXMnLCAnaWRfc2VyaWVzJywgJ2lkX3VuaXQnLCAncXR0eScsICdxdHR5X3BsYW4nLCAndGFibGVfdHlwZSddCiAgICAgICAgICAgIHEgPSAnJycKICAgICAgICAgICAgICAgIFNFTEVDVCB7fQogICAgICAgICAgICAgICAgRlJPTSBSU19hZHJfZG9jc190YWJsZSAKICAgICAgICAgICAgICAgIFdIRVJFIGlkX2RvYyA9ID8gQU5EIChzZW50ID0gMCBPUiBzZW50IElTIE5VTEwpCiAgICAgICAgICAgICcnJy5mb3JtYXQoJywnLmpvaW4oZmllbGRzKSkKCiAgICAgICAgICAgIGdvb2RzID0gc2VsZi5wcm92aWRlci5zcWxfcXVlcnkocSwgaWRfZG9jKQogICAgICAgICAgICBkb2NfZGF0YVsnUlNfYWRyX2RvY3NfdGFibGUnXSA9IGdvb2RzCiAgICAgICAgICAgIGRhdGEuYXBwZW5kKGRvY19kYXRhKQoKICAgICAgICByZXR1cm4gZGF0YQoKY2xhc3MgRmxvd0RvY1NlcnZpY2UoRG9jU2VydmljZSk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvY19pZD0nJyk6CiAgICAgICAgc2VsZi5kb2NfaWQgPSBkb2NfaWQKICAgICAgICBzZWxmLmRvY3NfdGFibGVfbmFtZSA9ICdSU19kb2NzJwogICAgICAgIHNlbGYuZGV0YWlsc190YWJsZV9uYW1lID0gJ1JTX2RvY3NfdGFibGUnCiAgICAgICAgc2VsZi5pc0FkciA9IEZhbHNlCiAgICAgICAgc2VsZi5zcWxfdGV4dCA9ICcnCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gTm9uZQogICAgICAgIHNlbGYuZGVidWcgPSBGYWxzZQogICAgICAgIHNlbGYucHJvdmlkZXIgPSBTcWxRdWVyeVByb3ZpZGVyKHNlbGYuZG9jc190YWJsZV9uYW1lLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X2RvY192aWV3X2RhdGEoc2VsZiwgZG9jX3R5cGU9JycsIGRvY19zdGF0dXM9JycpIC0+IGxpc3Q6CiAgICAgICAgZmllbGRzID0gWwogICAgICAgICAgICBmJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX0uaWRfZG9jJywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmRvY190eXBlJywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmRvY19uJywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmRvY19kYXRlJywKICAgICAgICAgICAgZid7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX3dhcmVob3VzZScsCiAgICAgICAgICAgIGYnaWZudWxsKFJTX3dhcmVob3VzZXMubmFtZSwiIikgYXMgUlNfd2FyZWhvdXNlJywKICAgICAgICAgICAgZidpZm51bGwoe3NlbGYuZG9jc190YWJsZV9uYW1lfS52ZXJpZmllZCwgMCkgYXMgdmVyaWZpZWQnLAogICAgICAgICAgICBmJ2lmbnVsbCh7c2VsZi5kb2NzX3RhYmxlX25hbWV9LnNlbnQsIDApIGFzIHNlbnQnLAogICAgICAgICAgICBmJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX0uYWRkX21hcmtfc2VsZWN0aW9uJywKICAgICAgICBdCgogICAgICAgIGlmIHNlbGYuZG9jc190YWJsZV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICAgICAgZmllbGRzLmFwcGVuZChmJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX0uaWRfY291bnRyYWdlbnRzJykKICAgICAgICAgICAgZmllbGRzLmFwcGVuZChmJ2lmbnVsbChSU19jb3VudHJhZ2VudHMuZnVsbF9uYW1lLCAiIikgYXMgUlNfY291bnRyYWdlbnQnKQoKICAgICAgICBxdWVyeV90ZXh0ID0gJ1NFTEVDVCAnICsgJyxcbicuam9pbihmaWVsZHMpCgogICAgICAgIGpvaW5zID0gZicnJ0ZST00ge3NlbGYuZG9jc190YWJsZV9uYW1lfQogICAgICAgICAgICBMRUZUIEpPSU4gUlNfd2FyZWhvdXNlcyBhcyBSU193YXJlaG91c2VzCiAgICAgICAgICAgICAgICBPTiBSU193YXJlaG91c2VzLmlkID0ge3NlbGYuZG9jc190YWJsZV9uYW1lfS5pZF93YXJlaG91c2UKICAgICAgICAnJycKCiAgICAgICAgaWYgc2VsZi5kb2NzX3RhYmxlX25hbWUgPT0gJ1JTX2RvY3MnOgogICAgICAgICAgICBqb2lucyArPSBmJycnCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19jb3VudHJhZ2VudHMgYXMgUlNfY291bnRyYWdlbnRzCiAgICAgICAgICAgICAgICBPTiBSU19jb3VudHJhZ2VudHMuaWQgPSB7c2VsZi5kb2NzX3RhYmxlX25hbWV9LmlkX2NvdW50cmFnZW50cwogICAgICAgICAgICAgICAgJycnCiAgICAgICAgd2hlcmUgPSBbXQogICAgICAgIHdoZXJlLmFwcGVuZCggZicnJ3tzZWxmLmRvY3NfdGFibGVfbmFtZX0uaWRfZG9jIG5vdCBpbiAoU0VMRUNUIGRpc3RpbmN0CiAgICAgICAgICAgICAgICBpZF9kb2MKICAgICAgICAgICAgICAgIEZyb20gCiAgICAgICAgICAgICAgICB7c2VsZi5kZXRhaWxzX3RhYmxlX25hbWV9CiAgICAgICAgICAgICAgICApICcnJykKCiAgICAgICAgaWYgZG9jX3N0YXR1czoKICAgICAgICAgICAgaWYgZG9jX3N0YXR1cyA9PSAi0JLRi9Cz0YDRg9C20LXQvSI6CiAgICAgICAgICAgICAgICB3aGVyZS5hcHBlbmQoIiBzZW50PTEgQU5EIHZlcmlmaWVkPTEiKQogICAgICAgICAgICBlbGlmIGRvY19zdGF0dXMgPT0gItCaINCy0YvQs9GA0YPQt9C60LUiOgogICAgICAgICAgICAgICAgd2hlcmUuYXBwZW5kKCIgaWZudWxsKHZlcmlmaWVkLDApPTEgQU5EIGlmbnVsbChzZW50LDApPTAiKQogICAgICAgICAgICBlbGlmIGRvY19zdGF0dXMgPT0gItCaINCy0YvQv9C+0LvQvdC10L3QuNGOIjoKICAgICAgICAgICAgICAgIHdoZXJlLmFwcGVuZCgiIGlmbnVsbCh2ZXJpZmllZCwwKT0wIEFORCBpZm51bGwoc2VudCwwKT0wIikKCiAgICAgICAgaWYgbm90IGRvY190eXBlIG9yIGRvY190eXBlID09ICLQktGB0LUiOgogICAgICAgICAgICBhcmdzX3R1cGxlID0gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3NfdHVwbGUgPSAoZG9jX3R5cGUsKQogICAgICAgICAgICBpZiBub3QgZG9jX3N0YXR1cyBvciBkb2Nfc3RhdHVzID09ICLQktGB0LUiOgogICAgICAgICAgICAgICAgd2hlcmUuYXBwZW5kKCdkb2NfdHlwZT0/JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHdoZXJlLmFwcGVuZCgnIGRvY190eXBlPT8nKQogICAgICAgIHdoZXJlX3RleHQgPSBmJ1dIRVJFICcgKyAnIEFORCAnLmpvaW4od2hlcmUpCiAgICAgICAgcXVlcnlfdGV4dCA9IGYnJycKICAgICAgICAgICAge3F1ZXJ5X3RleHR9CiAgICAgICAgICAgIHtqb2luc30KICAgICAgICAgICAge3doZXJlX3RleHR9CiAgICAgICAgICAgIE9SREVSIEJZIHtzZWxmLmRvY3NfdGFibGVfbmFtZX0uZG9jX2RhdGUKICAgICAgICAnJycKCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCBhcmdzX3R1cGxlLCByZXR1cm5fZGljdD1UcnVlKQogICAgICAgIHJldHVybiByZXN1bHQKCgogICAgZGVmIGdldF9mbG93X3RhYmxlX2RhdGEoc2VsZik6CiAgICAgICAgcXVlcnlfdGV4dCA9ICcnJ1dJVEggdGVtcF9xIGFzIChTRUxFQ1QKICAgICAgICAgICAgICAgICAgICAgICAgUlNfYmFyY19mbG93LmJhcmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QgYXMgaWRfZ29vZCwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHkgYXMgaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgICAgIDEgYXMgcXR0eQoKICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBSU19iYXJjX2Zsb3cKICAgICAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIFJTX2JhcmNvZGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPTiBSU19iYXJjb2Rlcy5iYXJjb2RlID0gUlNfYmFyY19mbG93LmJhcmNvZGUKICAgICAgICAgICAgICAgICAgICAgICAgV0hFUkUgUlNfYmFyY19mbG93LmlkX2RvYyA9ID8pCgogICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgdGVtcF9xLmJhcmNvZGUsIHRlbXBfcS5pZF9nb29kLCB0ZW1wX3EuaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2dvb2RzLm5hbWUgYXMgbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bShxdHR5KSBhcyBxdHR5CiAgICAgICAgICAgICAgICAgICAgICAgIEZST00gdGVtcF9xCiAgICAgICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcwogICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFJTX2dvb2RzLmlkID0gdGVtcF9xLmlkX2dvb2QKICAgICAgICAgICAgICAgICAgICAgICAgR1JPVVAgQlkgdGVtcF9xLmJhcmNvZGUnJycKCiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKHNlbGYuZG9jX2lkLCksIFRydWUpCgogICAgZGVmIGdldF9kYXRhX2Zvcl90aWNrZXRfcHJpbnRpbmcoc2VsZiwgYmFyY29kZSk6CiAgICAgICAgcXVlcnlfdGV4dCA9ICcnJ1dJVEggdGVtcF9xIGFzIChTRUxFQ1QKICAgICAgICAgICAgICAgICAgICAgICAgUlNfYmFyY19mbG93LmJhcmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QgYXMgaWRfZ29vZCwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHkgYXMgaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgICAgIDEgYXMgcXR0eQoKICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBSU19iYXJjX2Zsb3cKICAgICAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIFJTX2JhcmNvZGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPTiBSU19iYXJjb2Rlcy5iYXJjb2RlID0gUlNfYmFyY19mbG93LmJhcmNvZGUKICAgICAgICAgICAgICAgICAgICAgICAgV0hFUkUgUlNfYmFyY19mbG93LmlkX2RvYz0/IEFORCBSU19iYXJjX2Zsb3cuYmFyY29kZSA9ID8pCgogICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgdGVtcF9xLmJhcmNvZGUsIHRlbXBfcS5pZF9nb29kLCB0ZW1wX3EuaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2dvb2RzLm5hbWUgYXMgbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBQcm9wX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bShxdHR5KSBhcyBxdHR5CiAgICAgICAgICAgICAgICAgICAgICAgIEZST00gdGVtcF9xCiAgICAgICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcwogICAgICAgICAgICAgICAgICAgICAgICAgIE9OIFJTX2dvb2RzLmlkID0gdGVtcF9xLmlkX2dvb2QKICAgICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAgICAgICBPTiBSU19wcm9wZXJ0aWVzLmlkID0gdGVtcF9xLmlkX3Byb3BlcnR5ICAgIAogICAgICAgICAgICAgICAgICAgICAgR1JPVVAgQlkgdGVtcF9xLmJhcmNvZGUKICAgICAgICAgICAgICAgICAgICAgICcnJwogICAgICAgIHJldHVybiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIChzZWxmLmRvY19pZCwgYmFyY29kZSksIFRydWUpCgpjbGFzcyBHb29kc1NlcnZpY2UoRGJTZXJ2aWNlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpdGVtX2lkPScnKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLml0ZW1faWQgPSBpdGVtX2lkCiAgICAgICAgc2VsZi5wcm92aWRlciA9IFNxbFF1ZXJ5UHJvdmlkZXIodGFibGVfbmFtZT0iUlNfZ29vZHMiLCBzcWxfY2xhc3M9c3FsQ2xhc3MoKSkKCiAgICBkZWYgZ2V0X3R5cGVfbmFtZV9ieV9pZChzZWxmLCBpZCk6CiAgICAgICAgcXVlcnlfdGV4dCA9IGYiU0VMRUNUIG5hbWUgRlJPTSBSU190eXBlc19nb29kcyBXSEVSRSBpZCA9J3tpZH0nIgogICAgICAgIHJldHVybiBzZWxmLl9nZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIHJldHVybl9kaWN0PVRydWUpCgogICAgZGVmIGdldF9nb29kc19saXN0X2RhdGEoc2VsZiwgZ29vZHNfdHlwZT0nJywgaXRlbV9pZD0nJykgLT4gbGlzdDoKICAgICAgICBxdWVyeV90ZXh0ID0gZiIiIgogICAgICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgUlNfZ29vZHMuaWQsCiAgICAgICAgICAgIGlmbnVsbChSU19nb29kcy5jb2RlLCAn4oCUJykgYXMgY29kZSwKICAgICAgICAgICAgUlNfZ29vZHMubmFtZSwKICAgICAgICAgICAgUlNfZ29vZHMuYXJ0LAogICAgICAgICAgICBpZm51bGwoUlNfdW5pdHMubmFtZSwn4oCUJykgYXMgdW5pdCwKICAgICAgICAgICAgaWZudWxsKFJTX3R5cGVzX2dvb2RzLm5hbWUsICfigJQnKSBhcyB0eXBlX2dvb2QsCiAgICAgICAgICAgIGlmbnVsbChSU19nb29kcy5kZXNjcmlwdGlvbiwn4oCUJykgYXMgZGVzY3JpcHRpb24KICAgICAgICAgICAgCiAgICAgICAgICAgIEZST00gUlNfZ29vZHMKICAgICAgICAgICAgTEVGVCBKT0lOIFJTX3R5cGVzX2dvb2RzCiAgICAgICAgICAgIE9OIFJTX3R5cGVzX2dvb2RzLmlkID0gUlNfZ29vZHMudHlwZV9nb29kCiAgICAgICAgICAgIExFRlQgSk9JTiBSU191bml0cwogICAgICAgICAgICBPTiBSU191bml0cy5pZCA9IFJTX2dvb2RzLnVuaXQKICAgICAgICAgICAgIiIiCiAgICAgICAgd2hlcmUgPSAnJyBpZiBub3QgZ29vZHNfdHlwZSBlbHNlICdXSEVSRSBSU19nb29kcy50eXBlX2dvb2Q9PycKICAgICAgICBpZiB3aGVyZSA9PSAnJyBhbmQgaXRlbV9pZDoKICAgICAgICAgICAgd2hlcmUgKz0gJ1dIRVJFIFJTX2dvb2RzLmlkPT8nCgogICAgICAgIHF1ZXJ5X3RleHQgPSBmJycnCiAgICAgICAgICAgICAgICAgICAge3F1ZXJ5X3RleHR9CiAgICAgICAgICAgICAgICAgICAge3doZXJlfQogICAgICAgICAgICAgICAgICAgIE9SREVSIEJZIFJTX2dvb2RzLmlkCiAgICAgICAgICAgICAgICAnJycKCiAgICAgICAgaWYgZ29vZHNfdHlwZToKICAgICAgICAgICAgYXJncyA9IGdvb2RzX3R5cGUKICAgICAgICBlbGlmIGl0ZW1faWQ6CiAgICAgICAgICAgIGFyZ3MgPSBpdGVtX2lkCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXJncyA9IE5vbmUKCiAgICAgICAgcmVzdWx0ID0gc2VsZi5fc3FsX3F1ZXJ5KHF1ZXJ5X3RleHQsIGFyZ3MpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBnZXRfYWxsX2dvb2RzX3R5cGVzX2RhdGEoc2VsZik6CiAgICAgICAgcXVlcnlfdGV4dCA9ICdTRUxFQ1QgaWQsbmFtZSBGUk9NIFJTX3R5cGVzX2dvb2RzJwogICAgICAgIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9ICdSU190eXBlc19nb29kcycKICAgICAgICByZXR1cm4gc2VsZi5fc3FsX3F1ZXJ5KHF1ZXJ5X3RleHQsICcnKQoKICAgIGRlZiBnZXRfdmFsdWVzX2Zyb21fYmFyY29kZShzZWxmLCBpZGVudGlmeV9maWVsZDogc3RyLCBpZGVudGlmeV92YWx1ZTogc3RyKSAtPiBsaXN0OgogICAgICAgIHF1ZXJ5X3RleHQgPSBmIiIiCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUCiAgICAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICBSU19iYXJjb2Rlcy5pZF9nb29kLAogICAgICAgICAgICAgICAgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgICAgICBpZm51bGwoUlNfc2VyaWVzLm5hbWUsICcnKSBhcyBzZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgaWZudWxsKFJTX3VuaXRzLm5hbWUsICcnKSBhcyB1bml0CiAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgIEZST00gUlNfYmFyY29kZXMKICAgICAgICAgICAgICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgICAgICAgICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPSBSU19iYXJjb2Rlcy5pZF9wcm9wZXJ0eQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU191bml0cwogICAgICAgICAgICAgICAgICAgIE9OIFJTX3VuaXRzLmlkID0gUlNfYmFyY29kZXMuaWRfdW5pdAogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19zZXJpZXMKICAgICAgICAgICAgICAgICAgICBPTiBSU19zZXJpZXMuaWQgPSBSU19iYXJjb2Rlcy5pZF9zZXJpZXMKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBXSEVSRSB7aWRlbnRpZnlfZmllbGR9ID0gJ3tpZGVudGlmeV92YWx1ZX0nCiAgICAgICAgICAgICAgICAgICAgIiIiCgogICAgICAgIHJldHVybiBzZWxmLl9zcWxfcXVlcnkocXVlcnlfdGV4dCwgJycpCgogICAgZGVmIGdldF92YWx1ZXNfYnlfZmllbGQoc2VsZiwgdGFibGVfbmFtZSwgZmllbGQsIGZpZWxkX3ZhbHVlKToKICAgICAgICBzZWxmLnByb3ZpZGVyLnRhYmxlX25hbWUgPSB0YWJsZV9uYW1lCiAgICAgICAgcmV0dXJuIHNlbGYucHJvdmlkZXIuc2VsZWN0KHtmaWVsZDogZmllbGRfdmFsdWV9KQoKICAgIGRlZiBnZXRfcXVlcnlfd2l0aF9hcmdfbGlzdChzZWxmLCB0YWJsZV9uYW1lLCB2YWx1ZSwgZmllbGQsIHRhYmxlX3N0cmluZ19pZCk6CiAgICAgICAgcXVlcnlfdGV4dCA9IGYiIiJTRUxFQ1QgaWZudWxsKHt2YWx1ZX0sICctJykgYXMge3ZhbHVlfSBGUk9NIHt0YWJsZV9uYW1lfSBXSEVSRSB7ZmllbGR9IGluICh7dGFibGVfc3RyaW5nX2lkfSkiIiIKICAgICAgICAjIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9IHRhYmxlX25hbWUKICAgICAgICAjIHJldHVybiBzZWxmLl9zcWxfcXVlcnkocXVlcnlfdGV4dCwgdGFibGVfbmFtZT10YWJsZV9uYW1lLCBwYXJhbXM9JycpCiAgICAgICAgcmV0dXJuIHF1ZXJ5X3RleHQKCiAgICBkZWYgZ2V0X3NlbGVjdF9kYXRhKHNlbGYsIHRhYmxlX25hbWUpOgogICAgICAgIHF1ZXJ5X3RleHQgPSBmJ1NFTEVDVCAqIEZST00ge3RhYmxlX25hbWV9JwogICAgICAgIHNlbGYucHJvdmlkZXIudGFibGVfbmFtZSA9IHRhYmxlX25hbWUKICAgICAgICByZXR1cm4gc2VsZi5fc3FsX3F1ZXJ5KHF1ZXJ5X3RleHQsICcnKQoKY2xhc3MgRGJDcmVhdG9yKERiU2VydmljZSk6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgZGVmIGNyZWF0ZV90YWJsZXMoc2VsZik6CiAgICAgICAgaW1wb3J0IGRhdGFiYXNlX2luaXRfcXVlcnllcwogICAgICAgICMg0KHQvtC30LTQsNC10Lwg0YLQsNCx0LvQuNGG0Ysg0LXRgdC70Lgg0LjRhSDQvdC10YIKICAgICAgICBzY2hlbWEgPSBkYXRhYmFzZV9pbml0X3F1ZXJ5ZXMuZGF0YWJhc2Vfc2hlbWEoKQogICAgICAgIGZvciBlbCBpbiBzY2hlbWE6CiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwpCgogICAgZGVmIGRyb3BfYWxsX3RhYmxlcyhzZWxmKToKICAgICAgICB0YWJsZXMgPSBzZWxmLmdldF9hbGxfdGFibGVzKCkKCiAgICAgICAgZm9yIHRhYmxlIGluIHRhYmxlczoKICAgICAgICAgICAgc2VsZi5fc3FsX3F1ZXJ5KGYnRFJPUCBUQUJMRSB7dGFibGV9JykKCgogICAgZGVmIGdldF9hbGxfdGFibGVzKHNlbGYpOgogICAgICAgIHEgPSAnJycKICAgICAgICAgICAgU0VMRUNUIAogICAgICAgICAgICAgICAgbmFtZSAKICAgICAgICAgICAgRlJPTSAKICAgICAgICAgICAgICAgIHNxbGl0ZV9tYXN0ZXIKICAgICAgICAgICAgV0hFUkUgCiAgICAgICAgICAgICAgICB0eXBlPSd0YWJsZScgQU5EIAogICAgICAgICAgICAgICAgbmFtZSBOT1QgTElLRSAnc3FsaXRlXyUnCiAgICAgICAgJycnCiAgICAgICAgdGFibGVzID0gc2VsZi5fc3FsX3F1ZXJ5KHEpCgogICAgICAgIHJldHVybiBbdGFibGVbJ25hbWUnXSBmb3IgdGFibGUgaW4gdGFibGVzXQoKCmNsYXNzIEVycm9yU2VydmljZToKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBnZXRfYWxsX2Vycm9ycyhkYXRlX3NvcnQpOgogICAgICAgIHNvcnQgPSAiREVTQyIgaWYgbm90IGRhdGVfc29ydCBvciBkYXRlX3NvcnQgPT0gItCd0L7QstGL0LUiIGVsc2UgIkFTQyIKICAgICAgICByZXR1cm4gZ2V0X3F1ZXJ5X3Jlc3VsdChmIlNFTEVDVCAqIEZST00gRXJyb3JfbG9nIE9SREVSIEJZIHRpbWVzdGFtcCB7c29ydH0iKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBjbGVhcigpOgogICAgICAgIHJldHVybiBnZXRfcXVlcnlfcmVzdWx0KCJERUxFVEUgRlJPTSBFcnJvcl9sb2ciKQoKCmNsYXNzIFNxbFF1ZXJ5UHJvdmlkZXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdGFibGVfbmFtZT0nJywgc3FsX2NsYXNzPXNxbENsYXNzKCksIGRlYnVnPUZhbHNlKToKICAgICAgICBzZWxmLnRhYmxlX25hbWUgPSB0YWJsZV9uYW1lCiAgICAgICAgIyBzZWxmLnNxbCA9IHNxbF9jbGFzcwogICAgICAgIHNlbGYuc3FsID0gc2VsZgogICAgICAgIHNlbGYuc3FsX3RleHQgPSAnJwogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IE5vbmUKICAgICAgICBzZWxmLmRlYnVnID0gZGVidWcKCiAgICBAcHJvcGVydHkKICAgIGRlZiB0YWJsZV9uYW1lKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX3RhYmxlX25hbWU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl90YWJsZV9uYW1lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigndGFibGVfbmFtZSBtdXN0IGJlIHNwZWNpZmllZCcpCgogICAgQHRhYmxlX25hbWUuc2V0dGVyCiAgICBkZWYgdGFibGVfbmFtZShzZWxmLCB2KToKICAgICAgICBzZWxmLl90YWJsZV9uYW1lID0gdgoKICAgIGRlZiBjcmVhdGUoc2VsZiwgZGF0YSk6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKGRhdGEpCgogICAgICAgIHJldHVybiBzZWxmLl9leGVjX2NyZWF0ZSgKICAgICAgICAgICAgY29sdW1ucz1xdWVyeV9kYXRhWydjb2x1bW5zJ10sCiAgICAgICAgICAgIHBhcmFtcz1xdWVyeV9kYXRhWydwYXJhbXMnXQogICAgICAgICkKCiAgICBkZWYgcmVwbGFjZShzZWxmLCBkYXRhKToKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHF1ZXJ5X2RhdGEgPSBzZWxmLl9jb252ZXJ0X3F1ZXJ5X2RhdGEoZGF0YSkKCiAgICAgICAgcmV0dXJuIHNlbGYuX2V4ZWNfcmVwbGFjZSgKICAgICAgICAgICAgY29sdW1ucz1xdWVyeV9kYXRhWydjb2x1bW5zJ10sCiAgICAgICAgICAgIHBhcmFtcz1xdWVyeV9kYXRhWydwYXJhbXMnXQogICAgICAgICkKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGEsIF9maWx0ZXI9Tm9uZSk6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB3aGVyZSA9IE5vbmUKICAgICAgICBmaWx0ZXJfZGF0YSA9IFtdCiAgICAgICAgaWYgX2ZpbHRlcjoKICAgICAgICAgICAgd2hlcmUgPSBsaXN0KF9maWx0ZXIpCiAgICAgICAgICAgIGZpbHRlcl9kYXRhID0gbGlzdChfZmlsdGVyLnZhbHVlcygpKQoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKGRhdGEsIGZpbHRlcl9kYXRhPWZpbHRlcl9kYXRhKQoKICAgICAgICByZXR1cm4gc2VsZi5fZXhlY191cGRhdGUoCiAgICAgICAgICAgIGNvbHVtbnM9cXVlcnlfZGF0YVsnY29sdW1ucyddLAogICAgICAgICAgICBwYXJhbXM9cXVlcnlfZGF0YVsncGFyYW1zJ10sCiAgICAgICAgICAgIHdoZXJlPXdoZXJlCiAgICAgICAgKQoKICAgIGRlZiBkZWxldGUoc2VsZiwgX2ZpbHRlcj1Ob25lKToKICAgICAgICB3aGVyZSA9IE5vbmUKICAgICAgICBmaWx0ZXJfZGF0YSA9IFtdCiAgICAgICAgaWYgX2ZpbHRlcjoKICAgICAgICAgICAgd2hlcmUgPSBsaXN0KF9maWx0ZXIpCiAgICAgICAgICAgIGZpbHRlcl9kYXRhID0gbGlzdChfZmlsdGVyLnZhbHVlcygpKQoKICAgICAgICBxdWVyeV9kYXRhID0gc2VsZi5fY29udmVydF9xdWVyeV9kYXRhKHt9LCBmaWx0ZXJfZGF0YT1maWx0ZXJfZGF0YSkKCiAgICAgICAgcmV0dXJuIHNlbGYuX2V4ZWNfZGVsZXRlKAogICAgICAgICAgICBwYXJhbXM9cXVlcnlfZGF0YVsncGFyYW1zJ10sCiAgICAgICAgICAgIHdoZXJlPXdoZXJlCiAgICAgICAgKQoKICAgIGRlZiBzZWxlY3Qoc2VsZiwgX2ZpbHRlcj1Ob25lKSAtPiBsaXN0OgogICAgICAgIHdoZXJlID0gTm9uZQogICAgICAgIHBhcmFtcyA9ICcnCiAgICAgICAgaWYgX2ZpbHRlcjoKICAgICAgICAgICAgd2hlcmUgPSBsaXN0KF9maWx0ZXIpCiAgICAgICAgICAgIHBhcmFtcyA9IFtzdHIodikgZm9yIHYgaW4gX2ZpbHRlci52YWx1ZXMoKV0KCiAgICAgICAgcmV0dXJuIHNlbGYuX2V4ZWNfc2VsZWN0KAogICAgICAgICAgICBwYXJhbXM9cGFyYW1zLAogICAgICAgICAgICB3aGVyZT13aGVyZSwKICAgICAgICApCgogICAgZGVmIF9leGVjX2NyZWF0ZShzZWxmLCBjb2x1bW5zLCBwYXJhbXMpOgogICAgICAgIHN0cl92YWx1ZXMgPSAnLCcuam9pbignPycgKiBsZW4oY29sdW1ucykpCiAgICAgICAgc3RyX2tleXMgPSAnLCAnLmpvaW4oW2Yne25hbWV9JyBmb3IgbmFtZSBpbiBjb2x1bW5zXSkKCiAgICAgICAgcSA9IGYnSU5TRVJUIElOVE8ge3NlbGYudGFibGVfbmFtZX0gKHtzdHJfa2V5c30pIFZBTFVFUyAoe3N0cl92YWx1ZXN9KScKCiAgICAgICAgcGFyYW1zID0ganNvbi5kdW1wcyhwYXJhbXMsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgICAgICByZXR1cm4gc2VsZi5zcWxfZXhlY19tYW55KHEsIHBhcmFtcykKCiAgICBkZWYgX2V4ZWNfcmVwbGFjZShzZWxmLCBjb2x1bW5zLCBwYXJhbXMpOgogICAgICAgIHN0cl9jb2x1bW5zID0gJywgJy5qb2luKGNvbHVtbnMpCiAgICAgICAgc3RyX3ZhbHVlcyA9ICcsJy5qb2luKCc/JyAqIGxlbihjb2x1bW5zKSkKCiAgICAgICAgcSA9IGYnUkVQTEFDRSBJTlRPIHtzZWxmLnRhYmxlX25hbWV9ICh7c3RyX2NvbHVtbnN9KSBWQUxVRVMgKHtzdHJfdmFsdWVzfSknCgogICAgICAgIHBhcmFtcyA9IGpzb24uZHVtcHMocGFyYW1zLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICAgICAgcmV0dXJuIHNlbGYuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9leGVjX3VwZGF0ZShzZWxmLCBjb2x1bW5zLCBwYXJhbXMsIHdoZXJlPU5vbmUpOgogICAgICAgIGlmIHdoZXJlOgogICAgICAgICAgICBzdHJfd2hlcmUgPSAnIGFuZCAnLmpvaW4oW2Yne2tleX09PycgZm9yIGtleSBpbiB3aGVyZV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RyX3doZXJlID0gJ3RydWUnCgogICAgICAgIHN0cl92YWx1ZXMgPSAnLCAnLmpvaW4oW2Yne25hbWV9PT8nIGZvciBuYW1lIGluIGNvbHVtbnNdKQoKICAgICAgICBxID0gZidVUERBVEUge3NlbGYudGFibGVfbmFtZX0gU0VUIHtzdHJfdmFsdWVzfSBXSEVSRSB7c3RyX3doZXJlfScKCiAgICAgICAgcGFyYW1zID0ganNvbi5kdW1wcyhwYXJhbXMsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgICAgICByZXR1cm4gc2VsZi5zcWxfZXhlY19tYW55KHEsIHBhcmFtcykKCiAgICBkZWYgX2V4ZWNfZGVsZXRlKHNlbGYsIHBhcmFtcywgd2hlcmU9Tm9uZSk6CiAgICAgICAgaWYgd2hlcmU6CiAgICAgICAgICAgIHN0cl93aGVyZSA9ICcgYW5kICcuam9pbihbZid7a2V5fT0/JyBmb3Iga2V5IGluIHdoZXJlXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdHJfd2hlcmUgPSAndHJ1ZScKCiAgICAgICAgcSA9IGYnREVMRVRFIEZST00ge3NlbGYudGFibGVfbmFtZX0gV0hFUkUge3N0cl93aGVyZX0nCgogICAgICAgIHBhcmFtcyA9IGpzb24uZHVtcHMocGFyYW1zLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICAgICAgcmV0dXJuIHNlbGYuc3FsX2V4ZWNfbWFueShxLCBwYXJhbXMpCgogICAgZGVmIF9leGVjX3NlbGVjdChzZWxmLCBwYXJhbXMsIHdoZXJlPU5vbmUpOgogICAgICAgIGlmIHdoZXJlOgogICAgICAgICAgICBzdHJfd2hlcmUgPSAnIGFuZCAnLmpvaW4oW2Yne2tleX09PycgZm9yIGtleSBpbiB3aGVyZV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3RyX3doZXJlID0gJ3RydWUnCgogICAgICAgIHEgPSBmJ1NFTEVDVCAqIEZST00ge3NlbGYudGFibGVfbmFtZX0gV0hFUkUge3N0cl93aGVyZX0nCgogICAgICAgIHBhcmFtcyA9ICcsICcuam9pbihwYXJhbXMpCiAgICAgICAgcmV0dXJuIHNlbGYuc3FsX3F1ZXJ5KHEsIHBhcmFtcykKCiAgICBkZWYgc3FsX2V4ZWNfbWFueShzZWxmLCBxLCBwYXJhbXMpOgogICAgICAgIHNlbGYuc3FsX3RleHQgPSBxCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gcGFyYW1zCgogICAgICAgIGlmIG5vdCBzZWxmLmRlYnVnOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zcWwuU1FMRXhlY01hbnkocSwgcGFyYW1zKQoKICAgIGRlZiBzcWxfZXhlYyhzZWxmLCBxLCBwYXJhbXMpOgogICAgICAgIHNlbGYuc3FsX3RleHQgPSBxCiAgICAgICAgc2VsZi5zcWxfcGFyYW1zID0gcGFyYW1zCgogICAgICAgIGlmIG5vdCBzZWxmLmRlYnVnOgogICAgICAgICAgICByZXR1cm4gc2VsZi5zcWwuU1FMRXhlYyhxLCBwYXJhbXM9cGFyYW1zKQoKICAgIGRlZiBzcWxfcXVlcnkoc2VsZiwgcSwgcGFyYW1zOiBzdHIgPSAnJykgLT4gTGlzdFtkaWN0XToKICAgICAgICBzZWxmLnNxbF90ZXh0ID0gcQogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHBhcmFtcwoKICAgICAgICBpZiBub3Qgc2VsZi5kZWJ1ZzoKICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5zcWwuU1FMUXVlcnkocSwgcGFyYW1zKQogICAgICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhyZXN1bHQpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9jb252ZXJ0X3F1ZXJ5X2RhdGEoZGF0YSwgZmlsdGVyX2RhdGE9Tm9uZSk6CiAgICAgICAgY29sdW1ucyA9IFtdCiAgICAgICAgcGFyYW1zID0gW10KICAgICAgICBpZiBub3QgZmlsdGVyX2RhdGE6CiAgICAgICAgICAgIGZpbHRlcl9kYXRhID0gW10KCiAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCBsaXN0KToKICAgICAgICAgICAgY29sdW1ucyA9IGxpc3QoZGF0YVswXSkKICAgICAgICAgICAgZm9yIHJvdyBpbiBkYXRhOgogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChbdiBmb3IgdiBpbiByb3cudmFsdWVzKCldICsgZmlsdGVyX2RhdGEpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGRhdGEsIGRpY3QpOgogICAgICAgICAgICBjb2x1bW5zID0gbGlzdChkYXRhKQogICAgICAgICAgICBwYXJhbXMgPSBbW3YgZm9yIHYgaW4gZGF0YS52YWx1ZXMoKV0gKyBmaWx0ZXJfZGF0YV0KICAgICAgICBlbHNlOgogICAgICAgICAgICBWYWx1ZUVycm9yKGYnZGF0YSBtdXN0IGJlIGxpc3Qgb3IgZGljdCwgbm90IHt0eXBlKGRhdGEpfScpCgogICAgICAgIHJldHVybiB7J2NvbHVtbnMnOiBjb2x1bW5zLCAncGFyYW1zJzogcGFyYW1zfQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBjb252ZXJ0X3NxbF9wYXJhbXMoc3FsX3F1ZXJ5LCBwYXJhbXNfZGljdCk6CiAgICAgICAgaW1wb3J0IHJlCiAgICAgICAgcGFyYW1fdmFsdWVzID0gW10KICAgICAgICBkZWYgcmVwbGFjZV9uYW1lZF9wYXJhbShtYXRjaCk6CiAgICAgICAgICAgIHBhcmFtX25hbWUgPSBtYXRjaC5ncm91cCgxKQoKICAgICAgICAgICAgcGFyYW1fdmFsdWVzLmFwcGVuZChwYXJhbXNfZGljdFtwYXJhbV9uYW1lXSkKCiAgICAgICAgICAgIHJldHVybiAiPyIKICAgICAgICBuZXdfcXVlcnkgPSByZS5zdWIocic6KFx3KyknICAgICwgcmVwbGFjZV9uYW1lZF9wYXJhbSwgc3FsX3F1ZXJ5KQoKICAgICAgICByZXR1cm4gbmV3X3F1ZXJ5LCBwYXJhbV92YWx1ZXMKCiAgICAjINC80LXRgtC+0LTRiyDQvdC40LbQtSDQtNC+0LHQsNCy0LvQtdC90Ysg0LTQu9GPINCy0YDQtdC80LXQvdC90L7Qs9C+INGA0LXRiNC10L3QuNGPINC/0YDQvtCx0LvQtdC80YsgU1FMUHJvdmlkZXIg0L3QsCA5INCw0L3QtNGA0L7QuNC00LUKICAgIGRlZiBTUUxFeGVjKHNlbGYsIHEsIHBhcmFtcyk6CiAgICAgICAgc2VsZi5zcWxfdGV4dCA9IHEKICAgICAgICBzZWxmLnNxbF9wYXJhbXMgPSBwYXJhbXMKCiAgICAgICAgaWYgcGFyYW1zOgogICAgICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhnZXRfcXVlcnlfcmVzdWx0KHEsIHR1cGxlKHBhcmFtcy5zcGxpdCgnLCcpKSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoZ2V0X3F1ZXJ5X3Jlc3VsdChxKSkKCiAgICBkZWYgU1FMRXhlY01hbnkoc2VsZiwgcSwgcGFyYW1zKToKICAgICAgICBzZWxmLnNxbF90ZXh0ID0gcQogICAgICAgIHNlbGYuc3FsX3BhcmFtcyA9IHBhcmFtcwoKICAgICAgICByZXR1cm4gYnVsa19xdWVyeShxLCBqc29uLmxvYWRzKHBhcmFtcykpCgogICAgZGVmIFNRTFF1ZXJ5KHNlbGYsIHEsIHBhcmFtcyk6CiAgICAgICAgc2VsZi5zcWxfdGV4dCA9IHEKICAgICAgICBzZWxmLnNxbF9wYXJhbXMgPSBwYXJhbXMKCiAgICAgICAgaWYgcGFyYW1zOgogICAgICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhnZXRfcXVlcnlfcmVzdWx0KHEsIHR1cGxlKHBhcmFtcy5zcGxpdCgnLCcpKSwgcmV0dXJuX2RpY3Q9VHJ1ZSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoZ2V0X3F1ZXJ5X3Jlc3VsdChxLCByZXR1cm5fZGljdD1UcnVlKSkKCg=="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\hs_services.py",
                "PyFileKey": "hs_services",
                "PyFileData": "ZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwoKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCmZyb20gcmVxdWVzdHMuYXV0aCBpbXBvcnQgSFRUUEJhc2ljQXV0aAoKCmNsYXNzIEhzU2VydmljZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBodHRwX3BhcmFtcyk6CiAgICAgICAgc2VsZi51cmwgPSBodHRwX3BhcmFtc1sndXJsJ10KICAgICAgICBzZWxmLnVzZXJuYW1lID0gaHR0cF9wYXJhbXNbJ3VzZXInXQogICAgICAgIHNlbGYucGFzc3dvcmQgPSBodHRwX3BhcmFtc1sncGFzcyddCiAgICAgICAgc2VsZi5hbmRyb2lkX2lkID0gaHR0cF9wYXJhbXNbJ2FuZHJvaWRfaWQnXQogICAgICAgIHNlbGYuZGV2aWNlX21vZGVsID0gaHR0cF9wYXJhbXNbJ2RldmljZV9tb2RlbCddCiAgICAgICAgc2VsZi51c2VyX25hbWUgPSBodHRwX3BhcmFtc1sndXNlcl9uYW1lJ10KICAgICAgICBzZWxmLnBhcmFtcyA9IHsndXNlcl9uYW1lJzogc2VsZi51c2VyX25hbWUsICdkZXZpY2VfbW9kZWwnOiBzZWxmLmRldmljZV9tb2RlbH0KICAgICAgICBzZWxmLl9ocyA9ICcnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMuZ2V0CiAgICAgICAgc2VsZi5hdXRoID0gSFRUUEJhc2ljQXV0aChzZWxmLnVzZXJuYW1lLCBzZWxmLnBhc3N3b3JkKQogICAgICAgIHNlbGYuaGVhZGVycyA9IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCd9CiAgICAgICAgc2VsZi5odHRwX2Fuc3dlcjogT3B0aW9uYWxbSHNTZXJ2aWNlLkh0dHBBbnN3ZXJdID0gTm9uZQoKICAgIGRlZiBnZXRfdGVtcGxhdGVzKHNlbGYsICoqa3dhcmdzKToKICAgICAgICBzZWxmLl9ocyA9ICdsYWJlbF90ZW1wbGF0ZXMnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMuZ2V0CiAgICAgICAgYW5zd2VyID0gc2VsZi5fc2VuZF9yZXF1ZXN0KGt3YXJncykKICAgICAgICBpZiBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgoKICAgICAgICAgICAgYW5zd2VyWydkYXRhJ10gPSBqc29uLmxvYWRzKGFuc3dlclsndGV4dCddKQogICAgICAgICAgICAjcmV0dXJuIGpzb25fZGF0YQogICAgICAgIGVsaWYgYW5zd2VyWydzdGF0dXNfY29kZSddID09IDQwMToKICAgICAgICAgICAgcHJpbnQoYW5zd2VyKQogICAgICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXSA9IGFuc3dlclsncmVhc29uJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXSA9IGFuc3dlci5nZXQoJ3RleHQnKQoKICAgICAgICByZXR1cm4gYW5zd2VyCgogICAgZGVmIGdldF9kYXRhKHNlbGYsICoqa3dhcmdzKSAtPiBkaWN0OgogICAgICAgIHNlbGYuX2hzID0gJ2RhdGEnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMuZ2V0CiAgICAgICAgYW5zd2VyID0gc2VsZi5fc2VuZF9yZXF1ZXN0KGt3YXJncykKCiAgICAgICAgaWYgYW5zd2VyWydzdGF0dXNfY29kZSddID09IDIwMDoKICAgICAgICAgICAganNvbl9kYXRhID0ganNvbi5sb2FkcyhhbnN3ZXJbJ3RleHQnXSkKICAgICAgICAgICAgZm9ybWF0X2RhdGEgPSBqc29uX2RhdGEuZ2V0KCdmb3JtYXQnKQoKICAgICAgICAgICAgaWYgZm9ybWF0X2RhdGE6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ2Zvcm1hdCddID0gZm9ybWF0X2RhdGEKICAgICAgICAgICAgICAgIGlmICdpc19vaycgPT0gZm9ybWF0X2RhdGEgYW5kIGpzb25fZGF0YS5nZXQoJ2JhdGNoJyk6CiAgICAgICAgICAgICAgICAgICAgIyDQndCw0Ygg0LfQsNC/0YDQvtGBINC/0YDQuNC90Y/Rgiwg0L3QviDQstC10YDQvdGD0YLRjCDQv9C+0LrQsCDQvdC10YfQtdCz0L4uINCU0LDQvdC90YvQtSDQuNC70Lgg0LPQvtGC0L7QstGP0YLRgdGPINC40LvQuCDQuNGFINC90LXRggogICAgICAgICAgICAgICAgICAgIGFuc3dlclsnYmF0Y2gnXSA9IGpzb25fZGF0YS5nZXQoJ2JhdGNoJykKCiAgICAgICAgICAgICAgICBlbGlmIGZvcm1hdF9kYXRhID09ICdpc19kYXRhJzoKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJbJ2RhdGEnXSA9IGpzb25fZGF0YVsnZGF0YSddCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ2Zvcm1hdCddID0gTm9uZQogICAgICAgIGVsaWYgYW5zd2VyWydzdGF0dXNfY29kZSddID09IDQwMToKICAgICAgICAgICAgcHJpbnQoYW5zd2VyKQogICAgICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXSA9IGFuc3dlclsncmVhc29uJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXSA9IGFuc3dlci5nZXQoJ3RleHQnKQoKICAgICAgICBzZWxmLmh0dHBfYW5zd2VyID0gc2VsZi5fY3JlYXRlX2h0dHBfYW5zd2VyKGFuc3dlcikKICAgICAgICByZXR1cm4gYW5zd2VyCgogICAgZGVmIGdldF9kb2N1bWVudF9saW5lcyhzZWxmLCBpZF9kb2M6IHN0ciwgKiprd2FyZ3MpIC0+ICdIdHRwQW5zd2VyJzoKICAgICAgICBzZWxmLl9ocyA9ICdkb2N1bWVudF9saW5lcycKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5nZXQKICAgICAgICBzZWxmLnBhcmFtc1snaWRfZG9jJ10gPSBpZF9kb2MKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQoKICAgICAgICBpZiBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgogICAgICAgICAgICBqc29uX2RhdGEgPSBqc29uLmxvYWRzKGFuc3dlci5nZXQoJ3RleHQnKSkKICAgICAgICAgICAgYW5zd2VyWydkYXRhJ10gPSBqc29uX2RhdGEKCiAgICAgICAgc2VsZi5odHRwX2Fuc3dlciA9IHNlbGYuX2NyZWF0ZV9odHRwX2Fuc3dlcihhbnN3ZXIpCiAgICAgICAgcmV0dXJuIHNlbGYuaHR0cF9hbnN3ZXIKCiAgICBkZWYgc2VuZF9kb2N1bWVudF9saW5lcyhzZWxmLCBpZF9kb2MsIGRhdGEsICoqa3dhcmdzKToKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuIHsnZW1wdHknOiBUcnVlfQoKICAgICAgICBrd2FyZ3NbJ2RhdGEnXSA9IGRhdGEgaWYgaXNpbnN0YW5jZShkYXRhLCBzdHIpIGVsc2UganNvbi5kdW1wcyhkYXRhKQoKICAgICAgICBzZWxmLl9ocyA9ICdkb2N1bWVudF9saW5lcycKICAgICAgICBzZWxmLl9tZXRob2QgPSByZXF1ZXN0cy5wb3N0CiAgICAgICAgc2VsZi5wYXJhbXNbJ2lkX2RvYyddID0gaWRfZG9jCgogICAgICAgIGFuc3dlciA9IHNlbGYuX3NlbmRfcmVxdWVzdChrd2FyZ3MpCiAgICAgICAgaWYgYW5zd2VyWydzdGF0dXNfY29kZSddID09IDIwMDoKICAgICAgICAgICAganNvbl9kYXRhID0ganNvbi5sb2FkcyhhbnN3ZXIuZ2V0KCd0ZXh0JykpCiAgICAgICAgICAgIGFuc3dlclsnZGF0YSddID0ganNvbl9kYXRhCgogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQoKICAgICAgICByZXR1cm4gc2VsZi5odHRwX2Fuc3dlcgoKICAgIGRlZiByZXNldF9leGNoYW5nZShzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5faHMgPSAncmVzZXRfZXhjaGFuZ2UnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMucG9zdAogICAgICAgIGFuc3dlciA9IHNlbGYuX3NlbmRfcmVxdWVzdChrd2FyZ3MpCiAgICAgICAgc2VsZi5odHRwX2Fuc3dlciA9IHNlbGYuX2NyZWF0ZV9odHRwX2Fuc3dlcihhbnN3ZXIpCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBjcmVhdGVfbWVzc2FnZXMoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBjb21tdW5pY2F0aW9uX3Rlc3Qoc2VsZiwgKiprd2FyZ3MpIC0+IGRpY3Q6CiAgICAgICAgc2VsZi5faHMgPSAnY29tbXVuaWNhdGlvbl90ZXN0JwogICAgICAgIHNlbGYuX21ldGhvZCA9IHJlcXVlc3RzLmdldAogICAgICAgIGFuc3dlciA9IHNlbGYuX3NlbmRfcmVxdWVzdChrd2FyZ3MpCiAgICAgICAgc2VsZi5odHRwX2Fuc3dlciA9IHNlbGYuX2NyZWF0ZV9odHRwX2Fuc3dlcihhbnN3ZXIpCiAgICAgICAgcmV0dXJuIGFuc3dlcgoKICAgIGRlZiBnZXRfYmFsYW5jZXNfZ29vZHMoc2VsZiwgaWRfd2FyZWhvdXNlPUZhbHNlLCBpZF9jZWxsPUZhbHNlLCBpZF9nb29kPUZhbHNlLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMuZ2V0CiAgICAgICAgcGFyYW1zID0ge30KICAgICAgICBpZiBpZF9nb29kOgogICAgICAgICAgICBwYXJhbXNbJ2lkX2dvb2QnXSA9IGlkX2dvb2QKICAgICAgICBpZiBpZF9jZWxsOgogICAgICAgICAgICBzZWxmLl9ocyA9ICdnb29kX2JhbGFuY2VzL2NlbGxzJwogICAgICAgICAgICBwYXJhbXNbJ2lkX2NlbGwnXSA9IGlkX2NlbGwKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9ocyA9ICdnb29kX2JhbGFuY2VzL3dhcmVob3VzZXMnCiAgICAgICAgICAgIGlmIGlkX3dhcmVob3VzZToKICAgICAgICAgICAgICAgIHBhcmFtc1snaWRfd2FyZWhvdXNlJ10gPSBpZF93YXJlaG91c2UKICAgICAgICBzZWxmLnBhcmFtcyA9IHBhcmFtcwogICAgICAgIGFuc3dlciA9IHNlbGYuX3NlbmRfcmVxdWVzdChrd2FyZ3MpCgogICAgICAgIGlmIGFuc3dlclsnc3RhdHVzX2NvZGUnXSA9PSAyMDA6CiAgICAgICAgICAgIGpzb25fZGF0YSA9IGpzb24ubG9hZHMoYW5zd2VyLmdldCgndGV4dCcpKQogICAgICAgICAgICBhbnN3ZXJbJ2RhdGEnXSA9IGpzb25fZGF0YQoKICAgICAgICBzZWxmLmh0dHBfYW5zd2VyID0gc2VsZi5fY3JlYXRlX2h0dHBfYW5zd2VyKGFuc3dlcikKICAgICAgICByZXR1cm4gc2VsZi5odHRwX2Fuc3dlcgoKICAgIGRlZiBnZXRfcHJpY2VzX2dvb2RzKHNlbGYsIGlkX2dvb2QsIGlkX3Byb3BlcnR5PUZhbHNlLCBpZF91bml0PUZhbHNlLCBpZF9wcmljZV90eXBlPUZhbHNlLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMuZ2V0CiAgICAgICAgc2VsZi5faHMgPSAnZ29vZF9wcmljZXMnCiAgICAgICAgcGFyYW1zID0geydpZF9nb29kJzogaWRfZ29vZH0KICAgICAgICBpZiBpZF9wcm9wZXJ0eToKICAgICAgICAgICAgcGFyYW1zWydpZF9wcm9wZXJ0eSddID0gaWRfcHJvcGVydHkKICAgICAgICBpZiBpZF91bml0OgogICAgICAgICAgICBwYXJhbXNbJ2lkX3VuaXQnXSA9IGlkX3VuaXQKICAgICAgICBpZiBpZF9wcmljZV90eXBlOgogICAgICAgICAgICBwYXJhbXNbJ2lkX3ByaWNlX3R5cGUnXSA9IGlkX3ByaWNlX3R5cGUKCiAgICAgICAgc2VsZi5wYXJhbXMgPSBwYXJhbXMKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQoKICAgICAgICBpZiBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPT0gMjAwOgogICAgICAgICAgICBqc29uX2RhdGEgPSBqc29uLmxvYWRzKGFuc3dlci5nZXQoJ3RleHQnKSkKICAgICAgICAgICAgYW5zd2VyWydkYXRhJ10gPSBqc29uX2RhdGEKCiAgICAgICAgc2VsZi5odHRwX2Fuc3dlciA9IHNlbGYuX2NyZWF0ZV9odHRwX2Fuc3dlcihhbnN3ZXIpCiAgICAgICAgcmV0dXJuIHNlbGYuaHR0cF9hbnN3ZXIKCiAgICBkZWYgc2VuZF9kb2N1bWVudHMoc2VsZiwgZGF0YSwgKiprd2FyZ3MpIC0+IGRpY3Q6CiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybiB7J2VtcHR5JzogVHJ1ZX0KCiAgICAgICAga3dhcmdzWydkYXRhJ10gPSBkYXRhIGlmIGlzaW5zdGFuY2UoZGF0YSwgc3RyKSBlbHNlIGpzb24uZHVtcHMoZGF0YSkKICAgICAgICBzZWxmLl9ocyA9ICdkb2N1bWVudHMnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMucG9zdAoKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQogICAgICAgIHJldHVybiBhbnN3ZXIKCiAgICBkZWYgc2VuZF9kYXRhKHNlbGYsIGRhdGEsICoqa3dhcmdzKSAtPiAnSHR0cEFuc3dlcic6CiAgICAgICAga3dhcmdzWydkYXRhJ10gPSBkYXRhIGlmIGlzaW5zdGFuY2UoZGF0YSwgc3RyKSBlbHNlIGpzb24uZHVtcHMoZGF0YSkKICAgICAgICBzZWxmLl9ocyA9ICdkb2N1bWVudHMnCiAgICAgICAgc2VsZi5fbWV0aG9kID0gcmVxdWVzdHMucG9zdAoKICAgICAgICBhbnN3ZXIgPSBzZWxmLl9zZW5kX3JlcXVlc3Qoa3dhcmdzKQogICAgICAgIHNlbGYuaHR0cF9hbnN3ZXIgPSBzZWxmLl9jcmVhdGVfaHR0cF9hbnN3ZXIoYW5zd2VyKQogICAgICAgIHJldHVybiBzZWxmLmh0dHBfYW5zd2VyCgogICAgZGVmIF9zZW5kX3JlcXVlc3Qoc2VsZiwga3dhcmdzKSAtPiBkaWN0OgogICAgICAgIGFuc3dlciA9IHsnZW1wdHknOiBUcnVlfQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHNlbGYuX21ldGhvZChmJ3tzZWxmLnVybH0vc2ltcGxlX2FjY291bnRpbmcve3NlbGYuX2hzfT9hbmRyb2lkX2lkPXtzZWxmLmFuZHJvaWRfaWR9JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoPXNlbGYuYXV0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXNlbGYuaGVhZGVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM9c2VsZi5wYXJhbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiprd2FyZ3MpCgogICAgICAgICAgICBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPSByLnN0YXR1c19jb2RlCiAgICAgICAgICAgIGFuc3dlclsndXJsJ10gPSByLnVybAogICAgICAgICAgICBhbnN3ZXJbJ3JlYXNvbiddID0gci5yZWFzb24KICAgICAgICAgICAgYW5zd2VyWyd0ZXh0J10gPSByLnRleHQuZW5jb2RlKCJ1dGYtOCIpCgogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGFuc3dlclsnZW1wdHknXSA9IEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ0Vycm9yJ10gPSByLnJlYXNvbgogICAgICAgICAgICAgICAgYW5zd2VyWydyZWFzb24nXSA9IHIucmVhc29uCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBlCiAgICAgICAgICAgICMgYW5zd2VyWydFcnJvciddID0gZS5hcmdzWzBdCgogICAgICAgIHJldHVybiBhbnN3ZXIKCiAgICBkZWYgX2NyZWF0ZV9odHRwX2Fuc3dlcihzZWxmLCBhbnN3ZXI6IGRpY3QpOgogICAgICAgIGFuc3dlcl9kYXRhID0gewogICAgICAgICAgICAnc3RhdHVzX2NvZGUnOiBhbnN3ZXIuZ2V0KCdzdGF0dXNfY29kZScpLAogICAgICAgICAgICAndXJsJzogYW5zd2VyLmdldCgndXJsJyksCiAgICAgICAgfQoKICAgICAgICBpZiBhbnN3ZXJfZGF0YVsnc3RhdHVzX2NvZGUnXSA9PSAyMDA6CiAgICAgICAgICAgIGFuc3dlcl9kYXRhWydkYXRhJ10gPSBhbnN3ZXIuZ2V0KCdkYXRhJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBhbnN3ZXJfZGF0YVsnZXJyb3InXSA9IFRydWUKICAgICAgICAgICAgYW5zd2VyX2RhdGFbJ2Vycm9yX3RleHQnXSA9IGFuc3dlci5nZXQoJ0Vycm9yJykgb3IgYW5zd2VyLmdldCgnZXJyb3InKQogICAgICAgICAgICBpZiBhbnN3ZXJfZGF0YVsnc3RhdHVzX2NvZGUnXSA9PSA0MDE6CiAgICAgICAgICAgICAgICBhbnN3ZXJfZGF0YVsndW5hdXRob3JpemVkJ10gPSBUcnVlCiAgICAgICAgICAgIGVsaWYgYW5zd2VyX2RhdGFbJ3N0YXR1c19jb2RlJ10gPT0gNDAzOgogICAgICAgICAgICAgICAgYW5zd2VyX2RhdGFbJ2ZvcmJpZGRlbiddID0gVHJ1ZQoKICAgICAgICAgICAgaWYgYW5zd2VyLmdldCgndGV4dCcpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGpzb25fcmVzdWx0ID0ganNvbi5sb2FkcyhhbnN3ZXJbJ3RleHQnXSkKICAgICAgICAgICAgICAgICAgICBlcnJvcl90ZXh0ID0ganNvbl9yZXN1bHQuZ2V0KCdlcnJvcicpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgZXJyb3JfdGV4dCA9IGFuc3dlclsndGV4dCddLmRlY29kZSgpCgogICAgICAgICAgICAgICAgYW5zd2VyX2RhdGFbJ2Vycm9yX3RleHQnXSA9IGVycm9yX3RleHQKCiAgICAgICAgcmV0dXJuIHNlbGYuSHR0cEFuc3dlcigqKmFuc3dlcl9kYXRhKQoKICAgIEBkYXRhY2xhc3MKICAgIGNsYXNzIEh0dHBBbnN3ZXI6CiAgICAgICAgdXJsOiBzdHIKICAgICAgICBzdGF0dXNfY29kZTogaW50CiAgICAgICAgZXJyb3JfdGV4dDogT3B0aW9uYWxbc3RyXSA9ICcnCiAgICAgICAgZGF0YTogT3B0aW9uYWwgPSBOb25lCiAgICAgICAgdW5hdXRob3JpemVkOiBib29sID0gRmFsc2UKICAgICAgICBmb3JiaWRkZW46IGJvb2wgPSBGYWxzZQogICAgICAgIGVycm9yOiBib29sID0gRmFsc2UKCgpjbGFzcyBEZWJ1Z1NlcnZpY2U6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaXBfaG9zdCwgcG9ydD0yNDQ0KToKICAgICAgICBzZWxmLmlwX2hvc3QgPSBpcF9ob3N0CiAgICAgICAgc2VsZi5wb3J0ID0gcG9ydAogICAgICAgIHNlbGYudXJsID0gZidodHRwOi8ve3NlbGYuaXBfaG9zdH06e3NlbGYucG9ydH0nCiAgICAgICAgc2VsZi5faHMgPSAnJwogICAgICAgIHNlbGYuX21ldGhvZCA9IHJlcXVlc3RzLnBvc3QKCiAgICBkZWYgZXhwb3J0X2RhdGFiYXNlKHNlbGYsIGZpbGUpOgogICAgICAgIHNlbGYuX2hzID0gJ3Bvc3QnCiAgICAgICAgcmV0dXJuIHNlbGYuX3NlbmRfcmVxdWVzdCh7J2ZpbGVzJzogeydSaWdodHNjYW4nOiBmaWxlfX0pCgogICAgZGVmIGV4cG9ydF9maWxlKHNlbGYsIGZpbGVfbmFtZSwgZmlsZSk6CiAgICAgICAgc2VsZi5faHMgPSAncG9zdCcKICAgICAgICByZXR1cm4gc2VsZi5fc2VuZF9yZXF1ZXN0KHsnZmlsZXMnOiB7ZmlsZV9uYW1lOiBmaWxlfX0pCgogICAgZGVmIGV4cG9ydF9sb2coc2VsZiwgZGF0YSk6CiAgICAgICAgc2VsZi5faHMgPSAndW5sb2FkX2xvZycKICAgICAgICByZXR1cm4gc2VsZi5fc2VuZF9yZXF1ZXN0KHsnanNvbic6IGpzb24uZHVtcHMoZGF0YSl9KQoKICAgIGRlZiBfc2VuZF9yZXF1ZXN0KHNlbGYsIGt3YXJncykgLT4gZGljdDoKICAgICAgICBhbnN3ZXIgPSB7J2VtcHR5JzogVHJ1ZX0KICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSBzZWxmLl9tZXRob2QoZid7c2VsZi51cmx9L3tzZWxmLl9oc30nLCAqKmt3YXJncykKCiAgICAgICAgICAgIGFuc3dlclsnc3RhdHVzX2NvZGUnXSA9IHIuc3RhdHVzX2NvZGUKICAgICAgICAgICAgaWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBhbnN3ZXJbJ2VtcHR5J10gPSBGYWxzZQogICAgICAgICAgICAgICAgYW5zd2VyWyd0ZXh0J10gPSByLnRleHQuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgICAgICAgICBhbnN3ZXJbJ3JlYXNvbiddID0gci5yZWFzb24KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFuc3dlclsnRXJyb3InXSA9IHIudGV4dAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgZQoKICAgICAgICByZXR1cm4gYW5zd2VyCg=="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\http_exchange.py",
                "PyFileKey": "http_exchange",
                "PyFileData": "aW1wb3J0IGlwYWRkcmVzcwppbXBvcnQganNvbgppbXBvcnQgcmVxdWVzdHMKZnJvbSByZXF1ZXN0cy5hdXRoIGltcG9ydCBIVFRQQmFzaWNBdXRoCiNpbXBvcnQgdGltZQppbXBvcnQgdWlfYmFyY29kZXMKCmltcG9ydCB1aV9nbG9iYWwKZnJvbSBoc19zZXJ2aWNlcyBpbXBvcnQgSHNTZXJ2aWNlCmZyb20gZGJfc2VydmljZXMgaW1wb3J0IERvY1NlcnZpY2UKZnJvbSB1aV9nbG9iYWwgaW1wb3J0IGdldF9xdWVyeV9yZXN1bHQKCmRlZiByZXBsYXNlX2dzX2luX3JlcyhzdHJ1Y3QpOgogICAgcmV0dXJuIFt7azogdi5yZXBsYWNlKGNocigyOSksICcnKS5yZXBsYWNlKGNocigyMzIpLCAnJykucmVwbGFjZShjaHIoMzIpLCcnKSBpZiBpc2luc3RhbmNlKHYsIHN0cikgZWxzZSB2IGZvciBrLCB2IGluIGQuaXRlbXMoKX0gZm9yIGQgaW4gc3RydWN0XQogICAgIyBmb3IgZWwgaW4gc3RydWN0OgogICAgIyAgICAgaWYgZWwuZ2V0KCdiYXJjb2RlX2Zyb21fc2Nhbm5lcicpOgogICAgIyAgICAgICAgIGVsWydiYXJjb2RlX2Zyb21fc2Nhbm5lciddID0gZWxbJ2JhcmNvZGVfZnJvbV9zY2FubmVyJ10ucmVwbGFjZShjaHIoMjkpLCcnKQogICAgIyAgICAgICAgIGVsWydiYXJjb2RlX2Zyb21fc2Nhbm5lciddID0gZWxbJ2JhcmNvZGVfZnJvbV9zY2FubmVyJ10ucmVwbGFjZShjaHIoMjMyKSwgJycpCgoKZGVmIHBhcnNlX2JhcmNvZGUodmFsKToKICAgIGlmIGxlbih2YWwpIDwgMjE6CiAgICAgICAgcmV0dXJuIHsnR1RJTic6ICcnLCAnU2VyaWVzJzogJyd9CgogICAgdmFsLnJlcGxhY2UoJygwMSknLCcwMScpCiAgICB2YWwucmVwbGFjZSgnKDIxKScsICcyMScpCiAgICBpZiB2YWxbOjJdPT0nMDEnOgogICAgICAgIEdUSU4gPSB2YWxbMjoxNl0KICAgICAgICBTZXJpZXMgPSB2YWxbMTg6XQoKICAgIGVsc2U6CiAgICAgICAgR1RJTiA9IHZhbFs6MTRdCiAgICAgICAgU2VyaWVzID0gdmFsWzE0Ol0KCiAgICByZXR1cm4geydHVElOJzpHVElOLCAnU2VyaWVzJzpTZXJpZXN9CgoKZGVmIHNlcnZlcl9sb2FkX2RhdGEoaHR0cCk6CiAgICB1c2VybmFtZSA9IGh0dHBbJ3VzZXInXQogICAgcGFzc3dvcmQgPWh0dHBbJ3Bhc3MnXQogICAgdXJsID0gaHR0cFsndXJsJ10KICAgIGFuZHJvaWRfaWQgPSBodHRwWydhbmRyb2lkX2lkJ10KCgogICAgI2FuZHJvaWRfaWQgPSc3YjFiYzkxMzM1OGI3MDQ5JwogICAgIyByID0gcmVxdWVzdHMuZ2V0KHVybCArICcvZ2V0X2RhdGE/YW5kcm9pZF9pZD0nICsgYW5kcm9pZF9pZCwgYXV0aD1IVFRQQmFzaWNBdXRoKHVzZXJuYW1lLCBwYXNzd29yZCwgKSwKICAgICMgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCd9LAogICAgIyAgICAgICAgICAgICAgICAgIHBhcmFtcz17J2NvZGUnOiBhbmRyb2lkX2lkLCAnZnVsbF9sb2FkJzogZnVsbF9sb2FkfSkKICAgIHIgPSByZXF1ZXN0cy5nZXQodXJsICsgJy9zaW1wbGVfYWNjb3VudGluZy9kYXRhP2FuZHJvaWRfaWQ9JyArIGFuZHJvaWRfaWQsIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9eydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PXV0Zi04J30sCiAgICAgICAgICAgICAgICAgICAgIHBhcmFtcz17J3VzZXJfbmFtZSc6IGh0dHBbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHR0cFsnZGV2aWNlX21vZGVsJ119KQogICAgIyBwcmludChyLnN0YXR1c19jb2RlKQogICAgIyBwcmludChyLnRleHQpCiAgICBhbnN3ZXIgPSB7J3N0YXR1c19jb2RlJzogci5zdGF0dXNfY29kZX0KICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgIHIuZW5jb2RpbmcgPSAndXRmLTgnCiAgICAgICAgamRhdGEgPSBqc29uLmxvYWRzKHIudGV4dC5lbmNvZGUoInV0Zi04IikpCgogICAgICAgIGlmICdmb3JtYXQnIGluIGpkYXRhLmtleXMoKToKICAgICAgICAgICAgYW5zd2VyWydmb3JtYXQnXSA9IGpkYXRhWydmb3JtYXQnXQogICAgICAgICAgICBpZiBqZGF0YVsnZm9ybWF0J10gPT0gJ2lzX2RhdGEnOgogICAgICAgICAgICAgICAgI9Cf0LDRgNGB0LjQvCwg0L/QsNGA0LDQvNC10YLRgCBkYXRhINGB0L7QtNC10YDQttC40YIg0YHQv9C40YHQvtC6INGB0LvQvtCy0LDRgNC10Lkg0YEg0LTQsNC90L3Ri9C80Lgg0LfQsNC/0YDQvtGB0LAKICAgICAgICAgICAgICAgIHJlc19mb3Jfc3FsID0ganNvbl90b19zcWxpdGVfcXVlcnkoamRhdGFbJ2RhdGEnXSkKICAgICAgICAgICAgICAgIGlmIHJlc19mb3Jfc3FsOgogICAgICAgICAgICAgICAgICAgIGFuc3dlclsncmVzX2Zvcl9zcWwnXSA9IHJlc19mb3Jfc3FsCgogICAgICAgICAgICBlbGlmIGpkYXRhWydmb3JtYXQnXSA9PSAnaXNfb2snOiAj0J3QsNGIINC30LDQv9GA0L7RgSDQv9GA0LjQvdGP0YIsINC90L4g0LLQtdGA0L3Rg9GC0Ywg0L/QvtC60LAg0L3QtdGH0LXQs9C+LiDQlNCw0L3QvdGL0LUg0LjQu9C4INCz0L7RgtC+0LLRj9GC0YHRjyDQuNC70Lgg0LjRhSDQvdC10YIKICAgICAgICAgICAgICAgIGlmIGpkYXRhLmdldCgnYmF0Y2gnKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJbJ2JhdGNoJ10gPSBqZGF0YS5nZXQoJ2JhdGNoJykKCiAgICAgICAgICAgIGVsaWYgamRhdGFbJ2Zvcm1hdCddID09ICdmaWxlX2xpc3QnOgogICAgICAgICAgICAgICAgY29sdW1uX25hbWVzID0gW10KICAgICAgICAgICAgICAgIGZvciBmaWxlcyBpbiBqZGF0YVsnZGF0YSddOgogICAgICAgICAgICAgICAgICAgIGNvbHVtbl9uYW1lcy5hcHBlbmQoZmlsZXMpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFuc3dlclsnZm9ybWF0J10gPSBOb25lCgoKICAgIGVsaWYgci5zdGF0dXNfY29kZSA9PSA0MDM6CgogICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddID1bci50ZXh0XQogICAgZWxpZiByLnN0YXR1c19jb2RlID09IDQwMToKICAgICAgICBhbnN3ZXJbJ2Vycm9yX3Bvb2wnXT1bci5yZWFzb25dCiAgICBlbHNlOgogICAgICAgIGFuc3dlclsnZXJyb3JfcG9vbCddPVtyLnRleHRdCgogICAgcmV0dXJuIGFuc3dlcgoKCgogICAgIyDQv9C+0LTRgtCy0LXRgNC20LTQsNC10Lwg0L/RgNC40L3Rj9GC0LjQtSDQv9Cw0LrQtdGC0LAg0LTQsNC90L3Ri9GFINCyIDHQoQogICAgIyByID0gcmVxdWVzdHMuZ2V0KHVybCArICcvZ2V0X2V4Y2hhbmdlX2NvbmZpcm1hdGlvbj9hbmRyb2lkX2lkPScgKyBhbmRyb2lkX2lkLAogICAgIyAgICAgICAgICAgICAgICAgIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAjICAgICAgICAgICAgICAgICAgaGVhZGVycz17J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnfSwKICAgICMgICAgICAgICAgICAgICAgICBwYXJhbXM9eydjb2RlJzogYW5kcm9pZF9pZCwgJ05ObWVzc2FnZSc6IE5ObWVzc2FnZX0pCgoKCmRlZiBqc29uX3RvX3NxbGl0ZV9xdWVyeShkYXRhKToKCiAgICBxbGlzdCA9IFtdCiAgICAj0KbQuNC60Lsg0L/QviDQuNC80LXQvdCw0Lwg0YLQsNCx0LvQuNGGCiAgICB0YWJsZV9saXN0ID0gKAogICAgJ1JTX2RvY190eXBlcycsICdSU19nb29kcycsICdSU19wcm9wZXJ0aWVzJywgJ1JTX3VuaXRzJywgJ1JTX3R5cGVzX2dvb2RzJywgJ1JTX3NlcmllcycsICdSU19jb3VudHJhZ2VudHMnLAogICAgJ1JTX3dhcmVob3VzZXMnLCAnUlNfcHJpY2VfdHlwZXMnLCAnUlNfY2VsbHMnLCAnUlNfYmFyY29kZXMnLCAnUlNfcHJpY2VzJywgJ1JTX2RvY190eXBlcycsICdSU19kb2NzJywKICAgICdSU19kb2NzX3RhYmxlJywgJ1JTX2RvY3NfYmFyY29kZXMnLCAnUlNfYWRyX2RvY3MnLCAnUlNfYWRyX2RvY3NfdGFibGUnKSAjLCwgJ1JTX2JhcmNfZmxvdycKICAgIHRhYmxlX2Zvcl9kZWxldGUgPSAoJ1JTX2RvY3NfdGFibGUnLCAnUlNfZG9jc19iYXJjb2RlcywgUlNfYWRyX2RvY3NfdGFibGUnKSAgIywgJ1JTX2JhcmNfZmxvdycKICAgIGRvY19pZF9saXN0ID0gW10KICAgIGZvciB0YWJsZV9uYW1lIGluIHRhYmxlX2xpc3Q6CiAgICAgICAgaWYgZGF0YS5nZXQodGFibGVfbmFtZSkgaXMgTm9uZToKICAgICAgICAgICAgY29udGludWUKCiAgICAjZm9yIHRhYmxlX25hbWUgaW4gZGF0YVsnZGF0YSddOgogICAgICAgIGlmIGRhdGFbdGFibGVfbmFtZV0gPT0gW106CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgI9CU0L7QsdCw0LLQuNC8INCyINC30LDQv9GA0L7RgdGLINGD0LTQsNC70LXQvdC40LUg0LjQtyDQsdCw0LfRiyDRgdGC0YDQvtC6INGC0LXRhSDQtNC+0LrRg9C80LXQvdGC0L7Qsiwg0YfRgtC+INC80Ysg0LfQsNCz0YDRg9C20LDQtdC8CiAgICAgICAgaWYgdGFibGVfbmFtZSBpbiB0YWJsZV9mb3JfZGVsZXRlOgogICAgICAgICAgICBxdWVyeSA9IGYiREVMRVRFIEZST00ge3RhYmxlX25hbWV9IFdIRVJFIGlkX2RvYyBpbiAoeycsICcuam9pbihkb2NfaWRfbGlzdCl9KSAiCiAgICAgICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCiAgICAgICAgY29sdW1uX25hbWVzID0gZGF0YVt0YWJsZV9uYW1lXVswXS5rZXlzKCkKICAgICAgICBpZiAnbWFya19jb2RlJyBpbiBjb2x1bW5fbmFtZXM6CiAgICAgICAgICAgIHF1ZXJ5X2NvbF9uYW1lcyA9IGxpc3QoY29sdW1uX25hbWVzKQogICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMuYXBwZW5kKCdHVElOJykKICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLmFwcGVuZCgnU2VyaWVzJykKICAgICAgICAgICAgcXVlcnlfY29sX25hbWVzLnJlbW92ZSgnbWFya19jb2RlJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBxdWVyeV9jb2xfbmFtZXMgPSBjb2x1bW5fbmFtZXMKCiAgICAgICAgcXVlcnkgPSBmIlJFUExBQ0UgSU5UTyB7dGFibGVfbmFtZX0gKHsnLCAnLmpvaW4ocXVlcnlfY29sX25hbWVzKX0pIFZBTFVFUyAiCiAgICAgICAgdmFsdWVzID0gW10KCiAgICAgICAgZm9yIHJvdyBpbiBkYXRhW3RhYmxlX25hbWVdOgoKICAgICAgICAgICAgcm93X3ZhbHVlcyA9IFtdCiAgICAgICAgICAgIGxpc3RfcXVvdGVkX2ZpZWxkcyA9ICgnbmFtZScsICdmdWxsX25hbWUnLCAibWFya19jb2RlIiwgImFydCIpCiAgICAgICAgICAgIGZvciBjb2wgaW4gY29sdW1uX25hbWVzOgogICAgICAgICAgICAgICAgaWYgY29sIGluIGxpc3RfcXVvdGVkX2ZpZWxkcyBhbmQgICJcIiIgaW4gcm93W2NvbF06CiAgICAgICAgICAgICAgICAgICAgcm93W2NvbF0gPSByb3dbY29sXS5yZXBsYWNlKCJcIiIsICJcIlwiIikKICAgICAgICAgICAgICAgIGlmIHJvd1tjb2xdIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcm93W2NvbF0gPSAnJwogICAgICAgICAgICAgICAgaWYgY29sID09ICdtYXJrX2NvZGUnOiAgICPQl9Cw0LzQtdC90Y/QtdC8INGN0YLQviDQv9C+0LvQtSDQvdCwINC/0L7Qu9GPIEdUSU4g0LggU2VyaWVzCiAgICAgICAgICAgICAgICAgICAgYmFyY19zdHJ1Y3QgPSBwYXJzZV9iYXJjb2RlKHJvd1tjb2xdKQogICAgICAgICAgICAgICAgICAgIHJvd192YWx1ZXMuYXBwZW5kKGJhcmNfc3RydWN0WydHVElOJ10pCiAgICAgICAgICAgICAgICAgICAgcm93X3ZhbHVlcy5hcHBlbmQoYmFyY19zdHJ1Y3RbJ1NlcmllcyddKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByb3dfdmFsdWVzLmFwcGVuZChyb3dbY29sXSkgICMoZicie3Jvd1tjb2xdfSInKQogICAgICAgICAgICAgICAgaWYgY29sID09ICdpZF9kb2MnIGFuZCB0YWJsZV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICAgICAgICAgICAgICBkb2NfaWRfbGlzdC5hcHBlbmQoJyInK3Jvd1tjb2xdKyciJykKICAgICAgICAgICAgZm9ybWF0dGVkX3ZhbCAgPSBbZicie3h9IicgaWYgaXNpbnN0YW5jZSh4LCBzdHIpIGVsc2Ugc3RyKHgpIGZvciB4IGluIHJvd192YWx1ZXNdCiAgICAgICAgICAgIHZhbHVlcy5hcHBlbmQoZiIoeycsICcuam9pbihmb3JtYXR0ZWRfdmFsKX0pIikKICAgICAgICBxdWVyeSArPSAiLCAiLmpvaW4odmFsdWVzKQogICAgICAgIHFsaXN0LmFwcGVuZChxdWVyeSkKCgogICAgcmV0dXJuIHFsaXN0CgoKZGVmIGdldF9hbGxfY2hhbmdlc19mcm9tX2RhdGFiYXNlKGRvY19saXN0OiBzdHIgPSAnJyk6CiAgICB0cnk6CiAgICAgICAgcXRleHQgPSBmJycnCiAgICAgICAgU0VMRUNUICogRlJPTSBSU19kb2NzIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCxOb25lLFRydWUpCiAgICAgICAgcXRleHQgPSBmJycnCiAgICAgICAgICAgIFNFTEVDVCAqIEZST00gUlNfZG9jc190YWJsZSBXSEVSRSBpZF9kb2MgaW4gKHtkb2NfbGlzdH0pJycnIyBpbiAoCiAgICAgICAgICAgICNTRUxFQ1QgaWRfZG9jIEZST00gUlNfZG9jcyBXSEVSRSB2ZXJpZmllZCBpcyBOdWxsKScnJwogICAgICAgIHJlc19kb2NzX3RhYmxlID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQogICAgICAgIHF0ZXh0ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2RvY3NfYmFyY29kZXMgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2xpc3R9KSBhbmQgYmFyY29kZV9mcm9tX3NjYW5uZXIgaXMgbm90IE51bGwnJycjIGluICgKICAgICAgICAgICAgI1NFTEVDVCBpZF9kb2MgRlJPTSBSU19kb2NzIFdIRVJFIHZlcmlmaWVkIGlzIE51bGwpJycnCiAgICAgICAgcmVzX2RvY3NfYmFyY29kZSA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LE5vbmUsVHJ1ZSkKICAgICAgICByZXNfZG9jc19iYXJjb2RlID0gcmVwbGFzZV9nc19pbl9yZXMocmVzX2RvY3NfYmFyY29kZSkKICAgICAgICBxdGV4dCA9IGYnJycKICAgICAgICAgICAgU0VMRUNUICogRlJPTSBSU19iYXJjX2Zsb3cgV0hFUkUgaWRfZG9jIGluICh7ZG9jX2xpc3R9KScnJyMgaW4gKAogICAgICAgICAgICAjU0VMRUNUIGlkX2RvYyBGUk9NIFJTX2RvY3MgV0hFUkUgdmVyaWZpZWQgaXMgTnVsbCknJycKICAgICAgICByZXNfZmxvdyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LE5vbmUsVHJ1ZSkKICAgICAgICByZXNfZmxvdyA9IHJlcGxhc2VfZ3NfaW5fcmVzKHJlc19mbG93KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzcWxfZXJyb3IgPSBUcnVlCiAgICAgICAgICAgICNlcnJvcl9wb29sLmFwcGVuZChlLmFyZ3NbMF0pCiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzplLmFyZ3NbMF19CiAgICAjIGlmIGxlbihyZXMpID09IDA6CiAgICAjICAgICByZXR1cm4gTm9uZQoKICAgIGZvciBpdGVtIGluIHJlczoKICAgICAgICBmaWx0ZXJlZF9saXN0ID0gW2QgZm9yIGQgaW4gcmVzX2RvY3NfdGFibGUgaWYgZFsnaWRfZG9jJ10gPT0gaXRlbVsnaWRfZG9jJ11dCiAgICAgICAgaXRlbVsnUlNfZG9jc190YWJsZSddID0gZmlsdGVyZWRfbGlzdAoKICAgICAgICBmaWx0ZXJlZF9saXN0ID0gW2QgZm9yIGQgaW4gcmVzX2RvY3NfYmFyY29kZSBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICBpdGVtWydSU19kb2NzX2JhcmNvZGVzJ10gPSBmaWx0ZXJlZF9saXN0CgogICAgICAgIGZpbHRlcmVkX2xpc3QgPSBbZCBmb3IgZCBpbiByZXNfZmxvdyBpZiBkWydpZF9kb2MnXSA9PSBpdGVtWydpZF9kb2MnXV0KICAgICAgICBpdGVtWydSU19iYXJjX2Zsb3cnXSA9IGZpbHRlcmVkX2xpc3QKICAgICPQkNC00YDQtdGB0L3QvtC1INGF0YDQsNC90LXQvdC40LUKICAgIHRyeToKICAgICAgICBxdGV4dCA9IGYnJycKICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2Fkcl9kb2NzIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycKICAgICAgICByZXNfYWRyID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQogICAgICAgIHF0ZXh0ID0gZicnJwogICAgICAgICAgICBTRUxFQ1QgKiBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkX2RvYyBpbiAoe2RvY19saXN0fSknJycjIGluICgKICAgICAgICAgICAgI1NFTEVDVCBpZF9kb2MgRlJPTSBSU19kb2NzIFdIRVJFIHZlcmlmaWVkIGlzIE51bGwpJycnCiAgICAgICAgcmVzX2Fkcl9kb2NzX3RhYmxlID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsTm9uZSxUcnVlKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc3FsX2Vycm9yID0gVHJ1ZQogICAgICAgICAgICAjZXJyb3JfcG9vbC5hcHBlbmQoZS5hcmdzWzBdKQogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ZS5hcmdzWzBdfQogICAgIyBpZiBsZW4ocmVzKSA9PSAwOgogICAgIyAgICAgcmV0dXJuIE5vbmUKCiAgICBmb3IgaXRlbSBpbiByZXNfYWRyOgogICAgICAgIGZpbHRlcmVkX2xpc3QgPSBbZCBmb3IgZCBpbiByZXNfYWRyX2RvY3NfdGFibGUgaWYgZFsnaWRfZG9jJ10gPT0gaXRlbVsnaWRfZG9jJ11dCiAgICAgICAgaXRlbVsnUlNfYWRyX2RvY3NfdGFibGUnXSA9IGZpbHRlcmVkX2xpc3QKCgoKICAgIGlmIGxlbihyZXMpICsgbGVuKHJlc19hZHIpID09IDA6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICByZXR1cm4ganNvbi5kdW1wcyhyZXMgKyByZXNfYWRyKQoKCmRlZiBwb3N0X2NoYW5nZXNfdG9fc2VydmVyKGRvY19saXN0OiBzdHIsIGh0cHBhcmFtcyk6CiAgICB1cmwgPSBodHBwYXJhbXNbJ3VybCddCiAgICB1c2VybmFtZSA9IGh0cHBhcmFtc1sndXNlciddCiAgICBwYXNzd29yZCA9IGh0cHBhcmFtc1sncGFzcyddCiAgICBhbmRyb2lkX2lkID0gaHRwcGFyYW1zWydhbmRyb2lkX2lkJ10KICAgIHJlcyA9IGdldF9hbGxfY2hhbmdlc19mcm9tX2RhdGFiYXNlKGRvY19saXN0KQogICAgaWYgdHlwZShyZXMpID09IHR5cGUoZGljdCkgYW5kIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWUsICdFcnJvcic6IHJlcy5nZXQoJ0Vycm9yJyl9CiAgICAgICAgcmV0dXJuIGFuc3dlcgogICAgYW5zd2VyID0geydlbXB0eSc6IFRydWV9CiAgICBpZiByZXMgaXMgbm90IE5vbmU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMucG9zdCh1cmwgKyAnL3NpbXBsZV9hY2NvdW50aW5nL2RvY3VtZW50cz9hbmRyb2lkX2lkPScgKyBhbmRyb2lkX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg9SFRUUEJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQsICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM9eyd1c2VyX25hbWUnOiBodHBwYXJhbXNbJ3VzZXJfbmFtZSddLCAnZGV2aWNlX21vZGVsJzogaHRwcGFyYW1zWydkZXZpY2VfbW9kZWwnXX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9cmVzKQogICAgICAgICAgICBhbnN3ZXJbJ3N0YXR1c19jb2RlJ10gPSByLnN0YXR1c19jb2RlCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgYW5zd2VyWydlbXB0eSddID0gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFuc3dlclsnZW1wdHknXSA9IFRydWUKICAgICAgICAgICAgICAgIGFuc3dlclsnRXJyb3InXSA9IHIudGV4dAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgYW5zd2VyWydlbXB0eSddID0gVHJ1ZQogICAgICAgICAgICBhbnN3ZXJbIkVycm9yIl0gPSBzdHIoZSkKICAgIHJldHVybiBhbnN3ZXIKCgpkZWYgcG9zdF9nb29kc190b19zZXJ2ZXIoZG9jX2lkLCBodHRwX3BhcmFtcyk6CiAgICBoc19zZXJ2aWNlID0gSHNTZXJ2aWNlKGh0dHBfcGFyYW1zKQogICAgZG9jX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKGRvY19pZCkKCiAgICByZXMgPSBkb2Nfc2VydmljZS5nZXRfbGFzdF9lZGl0ZWRfZ29vZHModG9fanNvbj1GYWxzZSkKCiAgICBpZiBpc2luc3RhbmNlKHJlcywgZGljdCkgYW5kIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgYW5zd2VyID0geydlbXB0eSc6IFRydWUsICdFcnJvcic6IHJlcy5nZXQoJ0Vycm9yJyl9CiAgICAgICAgcmV0dXJuIGFuc3dlcgogICAgZWxpZiByZXM6CiAgICAgICAgaHNfc2VydmljZS5zZW5kX2RvY3VtZW50cyhyZXMpCgogICAgICAgIGlmIG5vdCByZXMgb3IgKGlzaW5zdGFuY2UocmVzLCBkaWN0KSBhbmQgcmVzLmdldCgnRXJyb3InKSk6CiAgICAgICAgICAgIGFuc3dlciA9IHsnZW1wdHknOiBUcnVlLCAnRXJyb3InOiByZXMuZ2V0KCdFcnJvcicpfQogICAgICAgICAgICByZXR1cm4gYW5zd2VyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZG9jX3NlcnZpY2UudXBkYXRlX3NlbnRfZGF0YShyZXMpCgogICAgdGltZXJfc2VydmVyX2xvYWRfZGF0YShodHRwX3BhcmFtcykKCgpkZWYgdGltZXJfc2VydmVyX2xvYWRfZGF0YShodHRwX3BhcmFtcyk6CiAgICBoc19zZXJ2aWNlID0gSHNTZXJ2aWNlKGh0dHBfcGFyYW1zKQogICAgZG9jX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKCcnKQoKICAgIGRvY3NfZGF0YSA9IGhzX3NlcnZpY2UuZ2V0X2RhdGEoKQogICAgaWYgZG9jc19kYXRhLmdldCgnZGF0YScpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZG9jX3NlcnZpY2UudXBkYXRlX2RhdGFfZnJvbV9qc29uKGRvY3NfZGF0YVsnZGF0YSddKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgZQo="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_barcodes.py",
                "PyFileKey": "ui_barcodes",
                "PyFileData": "IyDQnNC+0LTRg9C70Ywg0L/QsNGA0YHQuNGCINGI0YLRgNC40YXQutC+0LQg0LjQu9C4INC00LDRgtCw0LzQsNGC0YDQuNC60YEg0L3QsCDRgdC+0YHRgtCw0LLQu9GP0Y7RidC40LUgMTEKCmltcG9ydCByZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQoKCmRlZiBwYXJzZV9iYXJjb2RlKGJhcmNvZGUpOgogICAgI9Ce0YLQu9Cw0LTQvtGH0L3QvtC1CiAgICAjIHJldHVybiB7J1NDSEVNRSc6ICdFQU4xMycsICdCQVJDT0RFJzogYmFyY29kZSwgJ0dUSU4nOiBiYXJjb2RlLCAnU0VSSUFMJzogJyd9CgogICAgaWYgYmFyY29kZToKICAgICAgICAjINCf0YDQvtGB0YLQvtC5IEVBTjEzCiAgICAgICAgaWYgbm90IHJlLmZ1bGxtYXRjaChyJ1xkezEzfScsIGJhcmNvZGUpIGlzIE5vbmUgYW5kIHJlLmZ1bGxtYXRjaChyJ1xkezEzfScsIGJhcmNvZGUpLnN0cmluZyA9PSBiYXJjb2RlOgoKICAgICAgICAgICAgcmVzID0geydTQ0hFTUUnOiAnRUFOMTMnLCAnQkFSQ09ERSc6IGJhcmNvZGUsICdHVElOJzogYmFyY29kZSwgJ1NFUklBTCc6ICcnfQoKICAgICAgICBlbGlmIGxlbihiYXJjb2RlKSA9PSAyOTogICMg0K3RgtC+INC00LDRgtCw0LzQsNGC0YDQuNC60YEg0KLQsNCx0LDQuiwg0J/QsNGH0LrQsAogICAgICAgICAgICAjIHJlcyA9IHBhcnNlX3RvYmFjY28oYmFyY29kZSkKICAgICAgICAgICAgcmVzID0geydTQ0hFTUUnOiAnR1MxJywgJ0dUSU4nOiBiYXJjb2RlWzE6MTRdLCAnU0VSSUFMJzogYmFyY29kZVsxNDoyMV0sICdNUkMnOiBiYXJjb2RlWzIxOjI1XSwKICAgICAgICAgICAgICAgICAgICdDSEVDSyc6IGJhcmNvZGVbMjU6MjldLCAnRnVsbENvZGUnOiBiYXJjb2RlfQoKICAgICAgICBlbGlmIGNocigyOSkgaW4gYmFyY29kZTogICMgRGF0YW1hdHJpeAoKICAgICAgICAgICAgcmVzID0gZGF0YW1hdHJpeChiYXJjb2RlKQogICAgICAgICAgICByZXNbJ0Z1bGxDb2RlJ10gPSBiYXJjb2RlCiAgICAgICAgZWxpZiAnPEdTPicgaW4gYmFyY29kZToKICAgICAgICAgICAgcmVzID0gZGF0YW1hdHJpeChiYXJjb2RlKQogICAgICAgICAgICByZXNbJ0Z1bGxDb2RlJ10gPSBiYXJjb2RlCiAgICAgICAgZWxzZTogICMg0J3QtdC40LfQstC10YHRgtC90YvQuSDRgtC40L8g0LrQvtC00LAKICAgICAgICAgICAgcmVzID0geydTQ0hFTUUnOiAnVU5LTk9XTicsICdCQVJDT0RFJzogYmFyY29kZSwgJ0dUSU4nOiBiYXJjb2RlLCAnU0VSSUFMJzogJyd9CgogICAgICAgIHJldHVybiByZXMKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHsnU0NIRU1FJzogJ1VOS05PV04nLCAnQkFSQ09ERSc6IGJhcmNvZGUsICdHVElOJzogJycsICdTRVJJQUwnOiAnJywgJ0VSUk9SJzogJ0VtcHR5IGJhcmNvZGUnfQoKCmRlZiBkYXRhbWF0cml4KGJhcmNvZGU6IHN0cikgLT4gZGljdDoKICAgICIiIgogICAgVGhlIGZ1bmN0aW9uIHRha2VzIGJhcmNvZGUgc3RyaW5nIGFuZCByZXR1cm4gcGFyc2VkIG9iamVjdHMgaW4gYSBgZGljdGAuCiAgICBPcHRpb25hbGx5IHVzZXIgY2FuIHBhc3MgYm9vbCB2YWx1ZSB0byB2YWxpZGF0ZSB0aGUgYmFyY29kZQogICAgUGFyYW1ldGVyczoKICAgICAgICBiYXJjb2RlOiBzdHJpbmcgdHlwZS4gVGhpcyBpcyB0aGUgYmFyY29kZSBzdHJpbmcgd2l0aCB0aGUgPEdTPiBzZXBlcmF0b3JzLgoKICAgIFJldHVybnM6CiAgICAgICAgZGljdDogUmV0dXJucyBkaWN0aW9uYXJ5IG9iamVjdCB3aXRoIFNDSEVNRSwgUFBOLCBHVElOLCBFWFBJUlksIEJBVENILCBTRVJJQUwgJiBOSFJOIGFzIGtleXMgZm9yIHZhbGlkIHJlcXVlc3RzCiAgICAgICAgb3IgcmVsZXZhbnQgZXJyb3Igc3RyaW5ncy4KICAgICIiIgoKICAgIGlmIGJhcmNvZGVbOjNdID09ICJdZDIiOiAgIyBNb3N0IGJhcmNvZGUgc2Nhbm5lcnMgcHJlcGVuZCAnXWQyJyBpZGVudGlmaWVyIGZvciB0aGUgR1MxIGRhdGFtYXRyaXguIFRoaXMgc2VjdGlvbiByZW1vdmVzIHRoZSBpZGVudGlmaWVyLgogICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzM6XQogICAgICAgIHJlc3VsdCA9IGdzMV9ndGluKGJhcmNvZGUpCgogICAgZWxpZiBiYXJjb2RlWzoyXSBpbiBbJzAxJywgJzIxJywgJzE3JywgJzEwJywgJzcxJ106CiAgICAgICAgcmVzdWx0ID0gZ3MxX2d0aW4oYmFyY29kZSkKCiAgICBlbGlmIGJhcmNvZGVbMF0gPT0gY2hyKDI5KTogICMgU2hvcnQgR1MxIGJhcmNvZGUKICAgICAgICByZXN1bHQgPSBnczFfZ3RpbihiYXJjb2RlKQoKICAgIGVsaWYgYmFyY29kZVs6Nl0gPT0gKCdbKT4nICsgY2hyKDMwKSArICcwNicpIG9yICgnWyk+JyArIGNocigzMCkgKyAnMDUnKTogICMgTUFDUk8gMDYgb3IgTUFDUk8gMDUKICAgICAgICBiYXJjb2RlID0gYmFyY29kZVs3Ol0gICMgUmVtb3ZlcyB0aGUgbGVhZGluZyBBU0NJSSBzZXBlcmF0b3IgYWZ0ZXIgdGhlIHNjaGVtZSBpZGVudGlmaWVyLgogICAgICAgIHJlc3VsdCA9IGlmYV9wcG4oYmFyY29kZSkKCiAgICBlbHNlOgogICAgICAgIHJlc3VsdCA9IHsnRVJST1InOiAnSU5WQUxJRCBGT1JNQVQnLCAnQkFSQ09ERSc6IGJhcmNvZGV9CgogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBndGluX2NoZWNrKGd0aW46IHN0cik6CiAgICByZXZlcnNlX2d0aW4gPSBndGluWy0yOjotMV0gICMgUmV2ZXJzaW5nIHRoZSBzdHJpbmcgd2l0aG91dCB0aGUgY2hlY2stZGlnaXQKICAgIGRpZ2l0X211bHRpcGxlcjMgPSBbXQogICAgZGlnaXRfbXVsdGlwbGVyMSA9IFtdCgogICAgZm9yIGksIGwgaW4gZW51bWVyYXRlKHJldmVyc2VfZ3Rpbik6CiAgICAgICAgaWYgaSAlIDIgPT0gMDoKICAgICAgICAgICAgZGlnaXRfbXVsdGlwbGVyMy5hcHBlbmQoaW50KGwpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRpZ2l0X211bHRpcGxlcjEuYXBwZW5kKGludChsKSkKCiAgICBkaWdpdF9zdW0gPSAoc3VtKGRpZ2l0X211bHRpcGxlcjMpICogMykgKyBzdW0oZGlnaXRfbXVsdGlwbGVyMSkKICAgIG5lYXJlc3RfdGVuID0gcm91bmQoZGlnaXRfc3VtIC8gMTApICogMTAKICAgIGNoZWNrX3N1bV9kaWdpdCA9IG5lYXJlc3RfdGVuIC0gZGlnaXRfc3VtCiAgICBpZiBjaGVja19zdW1fZGlnaXQgPCAwOgogICAgICAgIGNoZWNrX3N1bV9kaWdpdCA9IDEwICsgY2hlY2tfc3VtX2RpZ2l0CiAgICByZXR1cm4gY2hlY2tfc3VtX2RpZ2l0ID09IGludChndGluWy0xXSkKCgpzcmVzdWx0ID0geydTQ0hFTUUnOiAnR1MxJ30KCgpkZWYgZ3MxX2d0aW4oYmFyY29kZTogc3RyKSAtPiBkaWN0OgogICAgaWYgY2hyKDI5KSBpbiBiYXJjb2RlOgoKICAgICAgICB3aGlsZSBiYXJjb2RlOgogICAgICAgICAgICBpZiBiYXJjb2RlWzoyXSA9PSAnMDEnOgogICAgICAgICAgICAgICAgc3Jlc3VsdFsnR1RJTiddID0gYmFyY29kZVsyOjE2XQogICAgICAgICAgICAgICAgaWYgbGVuKGJhcmNvZGUpID4gMTY6CiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTY6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzozXSA9PSBjaHIoMjkpICsgJzAxJzoKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0dUSU4nXSA9IGJhcmNvZGVbMzoxN10KICAgICAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDE3OgogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzE3Ol0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnMTcnOgogICAgICAgICAgICAgICAgc3Jlc3VsdFsnRVhQSVJZJ10gPSBiYXJjb2RlWzI6OF0KICAgICAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDg6CiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbODpdCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgICAgICBlbGlmIGJhcmNvZGVbOjJdID09ICcxMCc6CiAgICAgICAgICAgICAgICBpZiBjaHIoMjkpIGluIGJhcmNvZGU6CiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBiYXJjb2RlLmluZGV4KGNocigyOSkpCiAgICAgICAgICAgICAgICAgICAgc3Jlc3VsdFsnQkFUQ0gnXSA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVtpbmRleCArIDE6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzcmVzdWx0WydCQVRDSCddID0gYmFyY29kZVsyOl0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnMjEnOgogICAgICAgICAgICAgICAgaWYgY2hyKDI5KSBpbiBiYXJjb2RlOgogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQogICAgICAgICAgICAgICAgICAgIHNyZXN1bHRbJ1NFUklBTCddID0gYmFyY29kZVsyOmluZGV4XQogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlW2luZGV4ICsgMTpdCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNyZXN1bHRbJ1NFUklBTCddID0gYmFyY29kZVsyOl0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnOTEnOgogICAgICAgICAgICAgICAgaWYgY2hyKDI5KSBpbiBiYXJjb2RlOgogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQogICAgICAgICAgICAgICAgICAgIHNyZXN1bHRbJ05IUk4nXSA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVtpbmRleCArIDE6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzcmVzdWx0WydOSFJOJ10gPSBiYXJjb2RlWzI6Nl0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnOTMnOiAgIyDQnNC+0LvQvtGH0LrQsCwg0LLQvtC00LAKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0NIRUNLJ10gPSBiYXJjb2RlWzI6Nl0KICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzc6XQoKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnOTInOiAgIyDQlNCw0LvQtdC1INGB0LvQtdC00YPQtdGCINC60L7QtCDQv9GA0L7QstC10YDQutC4LCA0NCDRgdC40LzQstC+0LvQsAogICAgICAgICAgICAgICAgIyBpZiBsZW4oYmFyY29kZVsyOl0pPT00NDoKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0NIRUNLJ10gPSBiYXJjb2RlWzI6XQogICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzo0XSA9PSAnODAwNSc6ICAjINCi0LDQsdCw0LosINCR0LvQvtC6CiAgICAgICAgICAgICAgICBzcmVzdWx0WydOSFJOJ10gPSBiYXJjb2RlWzU6MTFdCiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVsxMTpdCiAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6NF0gPT0gJzMxMDMnOiAgIyDQnNC+0LvQvtGH0LrQsCDRgSDQktC10YHQvtC8CgogICAgICAgICAgICAgICAgc3Jlc3VsdFsnV0VJR0hUJ10gPSBiYXJjb2RlWzQ6XQogICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIEJBUkNPREUnLCAnQkFSQ09ERSc6IHNyZXN1bHR9CiAgICBlbHNlOgogICAgICAgIHNyZXN1bHRbJ0VSUk9SJ10gPSAnTm8gR1MgU2VwYXJhdG9yJwogICAgICAgIHJldHVybiBzcmVzdWx0CgogICAgIyBpZiAoJ0dUSU4nICwgJ0JBVENIJyAsICdFWFBJUlknICwgJ1NFUklBTCcpIGluIHJlc3VsdC5rZXlzKCk6CiAgICAjICAgICBpZiBndGluX2NoZWNrKHJlc3VsdFsnR1RJTiddKSA9PSBGYWxzZSBhbmQgZXhwaXJ5X2RhdGVfY2hlY2socmVzdWx0WydFWFBJUlknXSkgPT0gRmFsc2U6CiAgICAjICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBHVElOICYgRVhQSVJZIERBVEUnLCAnQkFSQ09ERSc6IHJlc3VsdH0KICAgICMgICAgIGVsaWYgZXhwaXJ5X2RhdGVfY2hlY2socmVzdWx0WydFWFBJUlknXSkgPT0gRmFsc2U6CiAgICAjICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBFWFBJUlkgREFURScsICdCQVJDT0RFJzogcmVzdWx0fQogICAgIyAgICAgZWxpZiBndGluX2NoZWNrKHJlc3VsdFsnR1RJTiddKSA9PSBGYWxzZToKICAgICMgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIEdUSU4nLCAnQkFSQ09ERSc6IHJlc3VsdH0KICAgICMgICAgIGVsc2U6CiAgICAjICAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgIyBlbHNlOgogICAgIyAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5DT01QTEVURSBEQVRBJywgJ0JBUkNPREUnOiByZXN1bHR9CiAgICByZXR1cm4gc3Jlc3VsdAoKCmRlZiBleHBpcnlfZGF0ZV9jaGVjayhlOiBzdHIpOgogICAgbXlfeWVhciA9IGVbOjJdCiAgICBteV9tb250aCA9IGVbMjo0XQogICAgbXlfZGF0ZSA9IGVbNDpdCgogICAgaWYgaW50KG15X21vbnRoKSBub3QgaW4gcmFuZ2UoMSwgMTMpOgogICAgICAgIHJldHVybiBGYWxzZQogICAgZWxpZiBpbnQobXlfZGF0ZSkgbm90IGluIHJhbmdlKDMyKToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBpZiBteV9kYXRlID09ICcwMCc6CiAgICAgICAgaWYgbXlfbW9udGggPT0gJzAyJyBhbmQgaW50KG15X3llYXIpICUgNCA9PSAwOgogICAgICAgICAgICBteV9kYXRlID0gJzI5JwogICAgICAgIGVsaWYgbXlfbW9udGggPT0gJzAyJyBhbmQgaW50KG15X3llYXIpICUgNCAhPSAwOgogICAgICAgICAgICBteV9kYXRlID0gJzI4JwogICAgICAgIGVsaWYgbXlfbW9udGggaW4gWycwMScsICcwMycsICcwNScsICcwNycsICcwOCcsICcxMCcsICcxMiddOgogICAgICAgICAgICBteV9kYXRlID0gJzMxJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG15X2RhdGUgPSAnMzAnCgogICAgaWYgbXlfbW9udGggPT0gJzAyJyBhbmQgaW50KG15X3llYXIpICUgNCA9PSAwIGFuZCBteV9kYXRlIDw9ICcyOSc6CiAgICAgICAgcGFzcwogICAgZWxpZiBteV9tb250aCA9PSAnMDInIGFuZCBpbnQobXlfeWVhcikgJSA0ICE9IDAgYW5kIG15X2RhdGUgPD0gJzI4JzoKICAgICAgICBwYXNzCiAgICBlbGlmIG15X21vbnRoIGluIFsnMDEnLCAnMDMnLCAnMDUnLCAnMDcnLCAnMDgnLCAnMTAnLCAnMTInXSBhbmQgbXlfZGF0ZSA8PSAnMzEnOgogICAgICAgIHBhc3MKICAgIGVsaWYgbXlfbW9udGggaW4gWycwNCcsICcwNicsICcwOScsICcxMSddIGFuZCBteV9kYXRlIDw9ICczMCc6CiAgICAgICAgcGFzcwogICAgZWxzZToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBhY3R1YWxfZGF0ZSA9IG15X3llYXIgKyBteV9tb250aCArIG15X2RhdGUKICAgIGlmIGFjdHVhbF9kYXRlID4gZGF0ZXRpbWUudG9kYXkoKS5zdHJmdGltZSgnJXklbSVkJyk6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGlmYV9wcG4oYmFyY29kZTogc3RyKSAtPiBkaWN0OgogICAgc3Jlc3VsdCA9IHsnU0NIRU1FJzogJ0lGQSd9CiAgICB3aGlsZSBiYXJjb2RlOgoKICAgICAgICBpZiBiYXJjb2RlWzoyXSA9PSAnOU4nOgogICAgICAgICAgICBzcmVzdWx0WydQUE4nXSA9IGJhcmNvZGVbMjoxNF0KICAgICAgICAgICAgaWYgbGVuKGJhcmNvZGUpID4gMTQ6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVsxNTpdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICBlbGlmIGJhcmNvZGVbOjFdID09ICdEJzoKICAgICAgICAgICAgc3Jlc3VsdFsnRVhQSVJZJ10gPSBiYXJjb2RlWzE6N10KICAgICAgICAgICAgaWYgbGVuKGJhcmNvZGUpID4gNzoKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzg6XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnMVQnOgogICAgICAgICAgICBpZiBjaHIoMjkpIGluIGJhcmNvZGU6CiAgICAgICAgICAgICAgICBpbmRleCA9IGJhcmNvZGUuaW5kZXgoY2hyKDI5KSkKICAgICAgICAgICAgICAgIHNyZXN1bHRbJ0JBVENIJ10gPSBiYXJjb2RlWzI6aW5kZXhdCiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVtpbmRleCArIDE6XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaW5kZXggPSBiYXJjb2RlLmluZGV4KGNocigzMCkpCiAgICAgICAgICAgICAgICBzcmVzdWx0WydCQVRDSCddID0gYmFyY29kZVsyOmluZGV4XQogICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgZWxpZiBiYXJjb2RlWzoxXSA9PSAnUyc6CiAgICAgICAgICAgIGlmIGNocigyOSkgaW4gYmFyY29kZToKICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQogICAgICAgICAgICAgICAgc3Jlc3VsdFsnU0VSSUFMJ10gPSBiYXJjb2RlWzE6aW5kZXhdCiAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVtpbmRleCArIDE6XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaW5kZXggPSBiYXJjb2RlLmluZGV4KGNocigzMCkpCiAgICAgICAgICAgICAgICBzcmVzdWx0WydTRVJJQUwnXSA9IGJhcmNvZGVbMTppbmRleF0KICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzhQJzoKICAgICAgICAgICAgc3Jlc3VsdFsnR1RJTiddID0gYmFyY29kZVsyOjE2XQogICAgICAgICAgICBpZiBsZW4oYmFyY29kZSkgPiAxNjoKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzE3Ol0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgQkFSQ09ERScsICdCQVJDT0RFJzogc3Jlc3VsdH0KCiAgICBpZiAnUFBOJyBhbmQgJ0JBVENIJyBhbmQgJ0VYUElSWScgYW5kICdTRVJJQUwnIGluIHNyZXN1bHQua2V5cygpOgogICAgICAgIGlmIHBwbl9jaGVjayhzcmVzdWx0WydQUE4nXSkgaXMgRmFsc2UgYW5kIGV4cGlyeV9kYXRlX2NoZWNrKHNyZXN1bHRbJ0VYUElSWSddKSBpcyBGYWxzZToKICAgICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBQUE4gJiBFWFBJUlkgREFURScsICdCQVJDT0RFJzogc3Jlc3VsdH0KICAgICAgICBlbGlmIGV4cGlyeV9kYXRlX2NoZWNrKHNyZXN1bHRbJ0VYUElSWSddKSBpcyBGYWxzZToKICAgICAgICAgICAgcmV0dXJuIHsnRVJST1InOiAnSU5WQUxJRCBFWFBJUlkgREFURScsICdCQVJDT0RFJzogc3Jlc3VsdH0KICAgICAgICBlbGlmIG5vdCBwcG5fY2hlY2soc3Jlc3VsdFsnUFBOJ10pOgogICAgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIFBQTicsICdCQVJDT0RFJzogc3Jlc3VsdH0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc3Jlc3VsdAogICAgZWxzZToKICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTkNPTVBMRVRFIERBVEEnLCAnQkFSQ09ERSc6IHNyZXN1bHR9CgoKZGVmIHBwbl9jaGVjayhwcG46IHN0cikgLT4gYm9vbDoKICAgICMgaSA9IDAKICAgIHdlaWdodCA9IDIKICAgIGRpZ2l0X3N1bSA9IDAKICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICBkaWdpdF9zdW0gKz0gKG9yZChwcG5baV0pICogd2VpZ2h0KQogICAgICAgIHdlaWdodCArPSAxCiAgICBjaGVja19kaWdpdCA9IGRpZ2l0X3N1bSAlIDk3CiAgICByZXR1cm4gY2hlY2tfZGlnaXQgPT0gaW50KHBwblstMjpdKSAgIyBQUE4gbGFzdCB0d28gY2hhcnMgYXJlIGNvbnZlcnRlZCB0byBpbnQgdG8gcmVtb3ZlIGFueSBsZWFkaW5nIHplcm8uCgojIHBhcnNlX2JhcmNvZGUoJzAxMDMwNDEwOTQ3ODc0NDMyMTVRYmFnITxHUz45M1pqcXcnKQo="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_csv.py",
                "PyFileKey": "ui_csv",
                "PyFileData": "aW1wb3J0IGNzdgppbXBvcnQgb3MKaW1wb3J0IHJlCgppbXBvcnQgdWlfYmFyY29kZXMKaW1wb3J0IHVpX2dsb2JhbApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQoKCmRlZiBnZXRfcXVlcnlfdGV4dChxX25hbWU9JycpIC0+IHN0cjoKICAgIGlmIHFfbmFtZSA9PSAnUlNfZ29vZHMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX2dvb2RzICggIGlkLCBjb2RlLCBhcnQsIG5hbWUsIHVuaXQsIHR5cGVfZ29vZCwgZGVzY3JpcHRpb24pIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyknCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfcHJvcGVydGllcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfcHJvcGVydGllcyAoICBpZCAsIGlkX293bmVyLCBuYW1lKSBWQUxVRVMgJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX3VuaXRzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU191bml0cyAoICBpZCxpZF9vd25lciwgY29kZSwgbmFtZSwgbm9taW5hdG9yLCBkZW5vbWluYXRvciwgaW50X3JlZHVjdGlvbikgVkFMVUVTICg/LD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU190eXBlc19nb29kcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfdHlwZXNfZ29vZHMgKCAgaWQsIG5hbWUpIFZBTFVFUyAoPyw/KScgICMgKD8sPykKICAgIGVsaWYgcV9uYW1lID09ICdSU19zZXJpZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX3NlcmllcyAoICBpZCwgbmFtZSwgYmVzdF9iZWZvcmUsIHR5cGVfZ29vZHMsIG51bWJlciwgcHJvZHVjdGlvbl9kYXRlKSBWQUxVRVMnCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfY291bnRyYWdlbnRzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19jb3VudHJhZ2VudHMgKCAgaWQsIG5hbWUsIGZ1bGxfbmFtZSwgaW5uLCBrcHApIFZBTFVFUyAnCiAgICBlbGlmIHFfbmFtZSA9PSAnUlNfd2FyZWhvdXNlcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfd2FyZWhvdXNlcyAoICBpZCwgbmFtZSkgVkFMVUVTICg/LD8pJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX3ByaWNlX3R5cGVzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19wcmljZV90eXBlcyAoaWQsIG5hbWUpIFZBTFVFUyAoPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19iYXJjb2Rlcyc6CiAgICAgICAgcmV0dXJuICdSRVBMQUNFIElOVE8gUlNfYmFyY29kZXMgKGlkLCBiYXJjb2RlLCBpZF9nb29kLCBpZF9wcm9wZXJ0eSwgaWRfc2VyaWVzLCBpZF91bml0KSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19tYXJraW5nX2NvZGVzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19tYXJraW5nX2NvZGVzIChpZCwgbWFya19jb2RlLCBpZF9nb29kLCBpZF9wcm9wZXJ0eSwgaWRfc2VyaWVzLCBpZF91bml0KSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19wcmljZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX3ByaWNlcyAoaWRfcHJpY2VfdHlwZXMsIGlkX2dvb2RzLCBpZF9wcm9wZXJ0aWVzLCBwcmljZSwgaWRfdW5pdCkgVkFMVUVTICcKICAgIGVsaWYgcV9uYW1lID09ICdSU19kb2NzJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19kb2NzIChpZF9kb2MsIGRvY190eXBlLCBkb2NfbiwgZG9jX2RhdGUsIGlkX2NvdW50cmFnZW50cywgaWRfd2FyZWhvdXNlKSBWQUxVRVMgKD8sPyw/LD8sPyw/KScKICAgIGVsaWYgcV9uYW1lID09ICdSU19kb2NzX3RhYmxlJzoKICAgICAgICByZXR1cm4gJ1JFUExBQ0UgSU5UTyBSU19kb2NzX3RhYmxlIChpZF9kb2MsIGlkX2dvb2QsIGlkX3Byb3BlcnRpZXMsIGlkX3NlcmllcywgaWRfdW5pdCwgcXR0eSwgcXR0eV9wbGFuLCBwcmljZSwgaWRfcHJpY2UpIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyw/LD8pJwogICAgZWxpZiBxX25hbWUgPT0gJ1JTX2RvY3NfYmFyY29kZXMnOgogICAgICAgIHJldHVybiAnUkVQTEFDRSBJTlRPIFJTX2RvY3NfYmFyY29kZXMgKGlkX2RvYywgaWRfYmFyY29kZSwgaXNfcGxhbikgVkFMVUVTICg/LD8sPyknCgoKZGVmIGdldF9xdWVyeV90ZXh0X2V4cG9ydCgpOgogICAgcmV0dXJuICcnJwogICAgICAgICBTRUxFQ1QgCiAgICAgICAgJzAnIEFTIEdUSU4sCiAgICAgICAgUlNfbWFya2luZy5pZF9nb29kLAogICAgICAgIFJTX21hcmtpbmcubmFtZSwgCiAgICAgICAgMSBhcyBEZWNsYXJlZFF1YW50aXR5LAogICAgICAgIENBU0UgYXBwcm92ZWQKICAgICAgICAgICAgV0hFTiAnMScgVEhFTiAxCiAgICAgICAgICAgIEVMU0UgMAogICAgICAgIEVORCBBUyBDdXJyZW50UXVhbnRpdHksCiAgICAgICAgYmFyY29kZV9mcm9tX3NjYW5uZXIgYXMg0JzQsNGA0LrQsCwKICAgICAgICBSU19tYXJraW5nLm1hcmtfY29kZSBBUyDQnNCw0YDQutCw0JjQodCc0J8sCiAgICAgICAgUlNfbWFya2luZy5pZF9wcm9wZXJ0eSBhcyDQmNC90LLQvtC50YEsCiAgICAgICAgJ9Cn0YPQttC+0LknIGFzINCf0YDQuNC90LDQtNC70LXQttC90L7RgdGC0YwgCgogICAgICAgIEZST00gUlNfZG9jc19iYXJjb2RlcyAKCiAgICAgICAgTEVGVCBKT0lOIChTRUxFQ1QgCiAgICAgICAgICAgICAgICAgICAgaWQgQVMgaWRfYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICBtYXJrX2NvZGUgQVMgbWFya19jb2RlLAogICAgICAgICAgICAgICAgICAgIGlkX2dvb2QsCiAgICAgICAgICAgICAgICAgICAgaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgaWRfc2VyaWVzLAogICAgICAgICAgICAgICAgICAgIGlkX3VuaXQsCiAgICAgICAgICAgICAgICAgICAgUlNfZ29vZHMubmFtZSwKICAgICAgICAgICAgICAgICAgICBSU19nb29kcy5jb2RlCgogICAgICAgICAgICAgICAgICAgIEZST00gUlNfbWFya2luZ19jb2RlcwogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgICAgICAgICBPTiBSU19nb29kcy4gIGlkICA9IFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZAogICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX21hcmtpbmdfY29kZXMuaWQgSU4gCiAgICAgICAgICAgICAgICAgICAgICAgIChTRUxFQ1QgaWRfYmFyY29kZSBGUk9NIFJTX2RvY3NfYmFyY29kZXMgCiAgICAgICAgICAgICAgICAgICAgICAgIFdIRVJFIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jID0gOmlkX2RvYykpIEFTIFJTX21hcmtpbmcKICAgICAgICBPTiBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUgPSBSU19tYXJraW5nLmlkX2JhcmNvZGUgIAoKICAgICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MKJycnCgoKZGVmIG5vcm1hbGl6ZV9ndGluKGd0aW46IHN0cikgLT4gc3RyOgogICAgYSA9IGxlbihndGluKQogICAgaWYgYSA+IDE0OgogICAgICAgIHJldHVybiBndGluWzotMTRdCiAgICBlbHNlOgogICAgICAgIHJldHVybiAnMCcgKiAoMTQgLSBhKSArIGd0aW4KCgpkZWYgbG9hZF9mcm9tX2NzdihwYXRoPScnLCBmaWxlPScnKToKICAgICMgcmUuZnVsbG1hdGNoKHInXGR7MTN9JywgYmFyY29kZSkuc3RyaW5nID09IGJhcmNvZGU6CiAgICBjdXJyZW50X2RhdGUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJWQtJW0tJVkiKQogICAgIyBmaWxlID0gZmlsZSArICgiICIgKiAxNSkgI9GH0YLQvtCx0Ysg0L3QtSDQvdCw0YLRi9C60LDRgtGM0YHRjyDQvdCwIG91dCBvZiByYW5nZSDQsiDRgtC10LrRgdGC0L7QstC+0Lwg0LjQvNC10L3QuCAtINC00L7QsdCw0LLQuNC8IDE1INC/0YDQvtCx0LXQu9C+0LIKICAgIGlmIGZpbGVbOjZdID09ICdkb2NfaW4nOgogICAgICAgICMg0JfQsNCz0YDRg9C20LDQtdC8INC00L7QutGD0LzQtdC90YLRiwogICAgICAgIHdpdGggb3BlbihwYXRoLCAncicsIG5ld2xpbmU9JycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGNzdmZpbGU6CgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3YucmVhZGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKCiAgICAgICAgICAgIHJzX2RvY19kYXRhID0gW10KICAgICAgICAgICAgcnNfZG9jX3RhYmxlX2RhdGEgPSBbXQogICAgICAgICAgICByc19kb2NfYmFyY29kZSA9IFtdCiAgICAgICAgICAgIHJzX21hcmtpbmdfY29kZXMgPSBbXQogICAgICAgICAgICByc19wcm9wZXJ0aWVzID0gW10KICAgICAgICAgICAgdGVtcF9kb2NfbiA9ICcnCiAgICAgICAgICAgIHRlbXBfZ29vZCA9ICcnCiAgICAgICAgICAgIGRvY19udW0gPSB1aV9nbG9iYWwuUnNfZG9jLmdldF9uZXdfaWQoJycpCiAgICAgICAgICAgIGZvciByb3cgaW4gbXlfcmVhZGVyOgogICAgICAgICAgICAgICAgaWYgbXlfcmVhZGVyLmxpbmVfbnVtID4gNTogICMg0JfQsNCz0L7Qu9C+0LLQutC4INGC0LDQsdC70LjRhtGLCiAgICAgICAgICAgICAgICAgICAgIyBpZiB0ZW1wX2RvY19uICE9IHJvd1s4XToKICAgICAgICAgICAgICAgICAgICAjICAgICAjIFJTX2RvY3MgKGlkX2RvYywgZG9jX3R5cGUsIGRvY19uLCBkb2NfZGF0ZSwgaWRfY291bnRyYWdlbnRzLCBpZF93YXJlaG91c2UpCiAgICAgICAgICAgICAgICAgICAgIyAgICAgcnNfZG9jX2RhdGUuYXBwZW5kKChkb2NfbnVtLCAn0JjQvdCy0L7QudGBJywgZG9jX251bSwgY3VycmVudF9kYXRlLCAnMDAxJywgJzAwMScpKQogICAgICAgICAgICAgICAgICAgICMgICAgIHRlbXBfZG9jX24gPSByb3dbOF0KICAgICAgICAgICAgICAgICAgICAjIFJTX2RvY3NfdGFibGUoaWRfZG9jLCBpZF9nb29kLCBpZF9wcm9wZXJ0aWVzLCBpZF9zZXJpZXMsIGlkX3VuaXQsIHF0dHksIHF0dHlfcGxhbiwgcHJpY2UsIGlkX3ByaWNlKQogICAgICAgICAgICAgICAgICAgIGlmIHRlbXBfZ29vZCAhPSByb3dbMF06CiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY190YWJsZV9kYXRhLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkb2NfbnVtLCByb3dbMF0sIHJvd1s4XSwgJycsIHJvd1sxXSArIHJvd1swXSwgaW50KHJvd1s3XSksIGludChyb3dbNl0pLCAnJywgJycpKQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyX2NvdW50ID0gcnNfZG9jX3RhYmxlX2RhdGEuX19sZW5fXygpIC0gMQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2dvb2QgPSByb3dbMF0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjINC00L7QsdCw0LLQuNC8INC60L7Qu9C40YfQtdGB0YLQstC+INCyINGB0YLRgNC+0LrRgywg0LTQu9GPINGN0YLQvtCz0L4g0L/RgNC10L7QsdGA0LDQt9GD0LXQvCDQtdC1INCyINCb0LjRgdGCLCDQv9C+0LzQtdC90Y/QtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INC4INC30LDRgdGD0L3QtdC8INC+0LHRgNCw0YLQvdC+INCyINC60L7RgNGC0LXQtgogICAgICAgICAgICAgICAgICAgICAgICBsc3QgPSBsaXN0KHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdKQogICAgICAgICAgICAgICAgICAgICAgICBsc3RbNl0gPSBpbnQobHN0WzZdKSArIGludChyb3dbNl0pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdID0gdHVwbGUobHN0KQogICAgICAgICAgICAgICAgICAgICAgICAjIHJzX2RvY190YWJsZV9kYXRhW2N1cnJfY291bnRdWzZdPWludChyc19kb2NfdGFibGVfZGF0YVtjdXJyX2NvdW50XVs2XSkgKyBpbnQocm93WzZdKQogICAgICAgICAgICAgICAgICAgIGlmIHJvd1s1XToKICAgICAgICAgICAgICAgICAgICAgICAgIyBSU19kb2NzX2JhcmNvZGVzIChpZF9kb2MsIGlkX2JhcmNvZGUsIGlzX3BsYW4pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX2RvY19iYXJjb2RlLmFwcGVuZCgoZG9jX251bSwgcm93WzVdLCAnMScpKQogICAgICAgICAgICAgICAgICAgICAgICAjIFJTX21hcmtpbmdfY29kZXMoaWQsIG1hcmtfY29kZSwgaWRfZ29vZCwgaWRfcHJvcGVydHksIGlkX3NlcmllcywgaWRfdW5pdCkgVkFMVUVTKD8sID8sID8sID8sID8sID8pCiAgICAgICAgICAgICAgICAgICAgICAgIHJzX21hcmtpbmdfY29kZXMuYXBwZW5kKChyb3dbNV0sIHJvd1s1XSwgcm93WzBdLCByb3dbOF0sICcnLCByb3dbMV0gKyByb3dbMF0pKQoKICAgICAgICAgICAgICAgIGVsaWYgbXlfcmVhZGVyLmxpbmVfbnVtID09IDM6CiAgICAgICAgICAgICAgICAgICAgaWYgcm93WzBdOgogICAgICAgICAgICAgICAgICAgICAgICBkb2NfbnVtID0gcm93WzBdCiAgICAgICAgICAgICAgICAgICAgcnNfZG9jX2RhdGEuYXBwZW5kKChkb2NfbnVtLCAn0JjQvdCy0L7QudGBJywgZG9jX251bSwgY3VycmVudF9kYXRlLCAnMDAxJywgJzAwMScpKQogICAgICAgICAgICAgICAgZWxpZiBteV9yZWFkZXIubGluZV9udW0gPT0gNToKICAgICAgICAgICAgICAgICAgICBsaXN0X2hlYWRlcnMgPSByb3cuY29weSgpCgogICAgICAgICMg0JfQsNC/0L7Qu9C90Y/QtdC8INGC0LDQsdC70LjRhtGLCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfZG9jcycpLCByc19kb2NfZGF0YSkKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU19kb2NzX3RhYmxlJyksIHJzX2RvY190YWJsZV9kYXRhKQogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2RvY3NfYmFyY29kZXMnKSwgcnNfZG9jX2JhcmNvZGUpCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfbWFya2luZ19jb2RlcycpLCByc19tYXJraW5nX2NvZGVzKQoKICAgICAgICAjINCf0L4g0LTQvtC60YPQvNC10L3RgtCw0LwsINCz0LTQtSDQtdGB0YLRjCDQt9Cw0L/Qu9Cw0L3QuNGA0L7QstCw0L3QvdGL0LUg0LzQsNGA0LrQuCwg0LTQvtCx0LDQstC40Lwg0L/RgNC40LfQvdCw0LoKICAgICAgICBxdGV4dCA9ICdTRUxFQ1QgaWRfZG9jLCBDT1VOVChpc19wbGFuKSBhcyBpc19wbGFuIEZST00gUlNfZG9jc19iYXJjb2RlcyBXSEVSRSBpc19wbGFuID0gIjEiICcKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgJycsIFRydWUpCiAgICAgICAgcXRleHQgPSAnVVBEQVRFIFJTX2RvY3MgU0VUIGFkZF9tYXJrX3NlbGVjdGlvbiA9ID8gV0hFUkUgaWRfZG9jID0gPycKICAgICAgICAjIC0tLQogICAgICAgIGZvciBlbCBpbiByZXM6CiAgICAgICAgICAgIGlmIGVsWydpc19wbGFuJ10gPiAwOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgxLCBlbFsnaWRfZG9jJ10pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgwLCBlbFsnaWRfZG9jJ10pKQogICAgICAgIHJldHVybiAyMDAKCgoKCiAgICBlbGlmIGZpbGVbOjE0XSA9PSAnaW5pdGlhbF9kaWN0c18nOgogICAgICAgICMg0JTQvtCx0LDQstC40Lwg0YLQuNC/INGC0L7QstCw0YDQsCDQtNC70Y8g0LLRgdC10YUg0YLQsNCx0LvQuNGGCiAgICAgICAgcXRleHQgPSAnUkVQTEFDRSBJTlRPIFJTX3R5cGVzX2dvb2RzICggIGlkLCBuYW1lKSBWQUxVRVMgKD8sPyknCiAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsICgn0KLQvtCy0LDRgCcsICfQotC+0LLQsNGAJykpCgogICAgICAgIHdpdGggb3BlbihwYXRoLCAncicsIG5ld2xpbmU9JycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGNzdmZpbGU6CgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3YucmVhZGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKCiAgICAgICAgICAgIHJzX2dvb2RzX2RhdGEgPSBbXQogICAgICAgICAgICByc19iYXJjb2Rlc19kYXRhID0gW10KICAgICAgICAgICAgcnNfdW5pdHNfZGF0YSA9IFtdCiAgICAgICAgICAgICMgUlNfd2FyZWhvdXNlcyggIGlkLCBuYW1lKQogICAgICAgICAgICByc193YXJlaG91c2VzID0gW1snMDAxJywgJ9Ce0YHQvdC+0LLQvdC+0LknXV0KICAgICAgICAgICAgIyBSU190eXBlc19nb29kcyAoICBpZCwgbmFtZSkKICAgICAgICAgICAgcnNfdHlwZXNfZ29vZHNfZGF0YSA9IFtbJzAwMScsICfQotC+0LLQsNGAJ11dCiAgICAgICAgICAgIHBhcnRfY291bnQgPSAxMDAwCgogICAgICAgICAgICBmb3Igcm93IGluIG15X3JlYWRlcjoKICAgICAgICAgICAgICAgIGlmIG15X3JlYWRlci5saW5lX251bSA9PSAxOiAgIyDQl9Cw0LPQvtC70L7QstC60Lgg0YLQsNCx0LvQuNGG0YsKICAgICAgICAgICAgICAgICAgICBsaXN0X2hlYWRlcnMgPSByb3cuY29weSgpCiAgICAgICAgICAgICAgICBlbHNlOiAgIyDQt9Cw0L/QvtC70L3Rj9C10Lwg0YLQsNCx0LvQuNGG0Ysg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LfQsNC/0YDQvtGB0LAg0LogU1FMCiAgICAgICAgICAgICAgICAgICAgIyAgIGlkLCBjbyBkZSwgYXJ0LCBuYW1lLCB1bml0LCB0eXBlX2dvb2QsIGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICAgICAgcnNfZ29vZHNfZGF0YS5hcHBlbmQoKHJvd1syXSwgcm93WzNdLCByb3dbNV0sIHJvd1s0XSwgcm93WzFdLCAn0KLQvtCy0LDRgCcsIHJvd1sxNV0pKQogICAgICAgICAgICAgICAgICAgICMgICBpZCwgaWRfb3duZXIsIGNvZGUsIG5hbWUsIG5vbWluYXRvciwgZGVub21pbmF0b3IsIGludF9yZWR1Y3Rpb24KICAgICAgICAgICAgICAgICAgICByc191bml0c19kYXRhLmFwcGVuZCgocm93WzFdICsgcm93WzJdLCByb3dbMl0sIHJvd1sxXSwgcm93WzFdLCAxLCAxLCByb3dbMV0pKQogICAgICAgICAgICAgICAgICAgICMgYmFyY29kZSwgaWRfZ29vZCwgaWRfcHJvcGVydHksIGlkX3NlcmllcywgaWRfdW5pdAogICAgICAgICAgICAgICAgICAgIGd0aW4gPSBub3JtYWxpemVfZ3Rpbihyb3dbMF0pCiAgICAgICAgICAgICAgICAgICAgcnNfYmFyY29kZXNfZGF0YS5hcHBlbmQoKGd0aW4sIGd0aW4sIHJvd1syXSwgJycsICcnLCByb3dbMV0gKyByb3dbMl0pKQoKICAgICAgICAgICAgICAgICMg0JrQsNC20LTRi9C1IDEwMDAg0YHRgtGA0L7QuiDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQsiDQsdCw0LfRgwogICAgICAgICAgICAgICAgaWYgbXlfcmVhZGVyLmxpbmVfbnVtID09IHBhcnRfY291bnQ6CiAgICAgICAgICAgICAgICAgICAgcGFydF9jb3VudCArPSAxMDAwCiAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfZ29vZHMnKSwgcnNfZ29vZHNfZGF0YSkKICAgICAgICAgICAgICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU191bml0cycpLCByc191bml0c19kYXRhKQogICAgICAgICAgICAgICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2JhcmNvZGVzJyksIHJzX2JhcmNvZGVzX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgcnNfZ29vZHNfZGF0YSA9IFtdCiAgICAgICAgICAgICAgICAgICAgcnNfYmFyY29kZXNfZGF0YSA9IFtdCiAgICAgICAgICAgICAgICAgICAgcnNfdW5pdHNfZGF0YSA9IFtdCgogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX3dhcmVob3VzZXMnKSwgcnNfd2FyZWhvdXNlcykKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU190eXBlc19nb29kcycpLCByc190eXBlc19nb29kc19kYXRhKQogICAgICAgIHVpX2dsb2JhbC5idWxrX3F1ZXJ5X3JlcGxhY2UoZ2V0X3F1ZXJ5X3RleHQoJ1JTX2dvb2RzJyksIHJzX2dvb2RzX2RhdGEpCiAgICAgICAgdWlfZ2xvYmFsLmJ1bGtfcXVlcnlfcmVwbGFjZShnZXRfcXVlcnlfdGV4dCgnUlNfdW5pdHMnKSwgcnNfdW5pdHNfZGF0YSkKICAgICAgICB1aV9nbG9iYWwuYnVsa19xdWVyeV9yZXBsYWNlKGdldF9xdWVyeV90ZXh0KCdSU19iYXJjb2RlcycpLCByc19iYXJjb2Rlc19kYXRhKQoKICAgICAgICByZXR1cm4gMjAwCgoKZGVmIGxpc3RfZm9sZGVyKHBhdGg6IHN0ciwgZGVsZXRlX2ZpbGVzOiBib29sKToKICAgICMgdHJ5OgogICAgYWEgPSAwCiAgICB0b3RhbCA9IDAKICAgIGZvciBmaWxlIGluIG9zLmxpc3RkaXIocGF0aCk6CiAgICAgICAgdG90YWwgKz0gMQogICAgICAgIGlmIGZpbGUuZW5kc3dpdGgoIi5jc3YiKToKICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlICsgKCIgIiAqIDE1KSAgIyDRh9GC0L7QsdGLINC90LUg0L3QsNGC0YvQutCw0YLRjNGB0Y8g0L3QsCBvdXQgb2YgcmFuZ2Ug0LIg0YLQtdC60YHRgtC+0LLQvtC8INC40LzQtdC90LggLSDQtNC+0LHQsNCy0LjQvCAxNSDQv9GA0L7QsdC10LvQvtCyCiAgICAgICAgICAgIGlmIGZpbGVuYW1lWzo2XSA9PSAnZG9jX2luJyBvciBmaWxlbmFtZVs6MTRdID09ICdpbml0aWFsX2RpY3RzXyc6CiAgICAgICAgICAgICAgICBhYSArPSAxCiAgICAgICAgICAgICAgICBhbnMgPSBsb2FkX2Zyb21fY3N2KHBhdGggKyBmaWxlLCBmaWxlKQogICAgICAgICAgICAgICAgaWYgYW5zID09IDIwMCBhbmQgZGVsZXRlX2ZpbGVzID09ICd0cnVlJzoKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUocGF0aCArIGZpbGUpCgogICAgcmV0dXJuICfQl9Cw0LPRgNGD0LfQutCwINC30LDQstC10YDRiNC10L3QsCwg0LfQsNCz0YDRg9C20LXQvdC+ICcgKyBzdHIoYWEpICsgJyDRhNCw0LnQu9C+0LIg0LjQtyAnICsgc3RyKHRvdGFsKQogICAgIyBleGNlcHQ6CiAgICAjICAgcmV0dXJuICfQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0YTQsNC50LvQsCcKCgpkZWYgZXhwb3J0X2NzdihwYXRoLCBJUCwgQW5kcm9pZElEKToKICAgIGRvY3MgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnU0VMRUNUIGlkX2RvYywgZG9jX24gZnJvbSBSU19kb2NzIFdoZXJlIHZlcmlmaWVkID0gMScpCiAgICBjb3VudCA9IDAKICAgIGZvciBkb2NfaXRlbSBpbiBkb2NzOgogICAgICAgIHF0ZXh0ID0gZ2V0X3F1ZXJ5X3RleHRfZXhwb3J0KCkKCiAgICAgICAgcmVzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQsIChkb2NfaXRlbVswXSwpLCBUcnVlKQogICAgICAgIGNvdW50ICs9IDEKICAgICAgICB3aXRoIG9wZW4ocGF0aCArICdkb2Nfb3V0XycgKyBkb2NfaXRlbVsxXSArICcuY3N2JywgJ3cnLCBuZXdsaW5lPScnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBjc3ZmaWxlOgogICAgICAgICAgICBteV9yZWFkZXIgPSBjc3Yud3JpdGVyKGNzdmZpbGUsIGRpYWxlY3Q9J2V4Y2VsJywgZGVsaW1pdGVyPSc7JywgcXVvdGVjaGFyPSciJykKICAgICAgICAgICAgbXlfcmVhZGVyLndyaXRlcm93KCgnTmFtZScsICdVc2VyTmFtZScsICdEZXZpY2VJZCcsICdEZXZpY2VJUCcpKQogICAgICAgICAgICBteV9yZWFkZXIud3JpdGVyb3coKCfQn9GA0LjRhdC+0LQg0L3QsCDRgdC60LvQsNC0ICcgKyBkb2NfaXRlbVsxXSwgJ9Cc0L7RgdC60LLQsDEnLCBBbmRyb2lkSUQsIElQKSkKICAgICAgICAgICAgbXlfcmVhZGVyLndyaXRlcm93KCgnR1RJTicsICfQmtC+0LTQktCj0YfQtdGC0L3QvtC50KHQuNGB0YLQtdC80LUnLCAn0J3QsNC40LzQtdC90L7QstCw0L3QuNC1JywgJ0RlY2xhcmVkUXVhbnRpdHknLCAnQ3VycmVudFF1YW50aXR5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn0JrQvtGA0L7QsdC60LAnLCAn0JzQsNGA0LrQsCcsICfQnNCw0YDQutCw0JjQodCc0J8nLCAn0JjQvdCy0L7QudGBJywgJ9Cf0YDQuNC90LDQtNC70LXQttC90L7RgdGC0YwnKSkKICAgICAgICAgICAgZm9yIGVsIGluIHJlczoKICAgICAgICAgICAgICAgIGd0aW4gPSB1aV9iYXJjb2Rlcy5nZXRfZ3Rpbl9zZXJpYWxfZnJvbV9kYXRhbWF0cml4KGVsWyfQnNCw0YDQutCw0JjQodCc0J8nXSkKICAgICAgICAgICAgICAgIGVsWydHVElOJ10gPSBndGluWydHVElOJ10KICAgICAgICAgICAgICAgIG15X3JlYWRlci53cml0ZXJvdygoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxbJ0dUSU4nXSwgZWxbJ2lkX2dvb2QnXSwgZWxbJ25hbWUnXSwgZWxbJ0RlY2xhcmVkUXVhbnRpdHknXSwgZWxbJ0N1cnJlbnRRdWFudGl0eSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsWyfQnNCw0YDQutCwJ10sIGVsWyfQnNCw0YDQutCw0JjQodCc0J8nXSwgZWxbJ9CY0L3QstC+0LnRgSddLCBlbFsn0J/RgNC40L3QsNC00LvQtdC20L3QvtGB0YLRjCddKSkKCiAgICByZXR1cm4gc3RyKGNvdW50KSArICcg0LTQvtC60YPQvNC10L3RgtC+0LInCiMgZXhwb3J0X2Nzdign0J7QsdC80LXQvdCi0KHQlC/QndCQLycpICMnCgoKIyBvcGVuX2ZpbGVzX25ldCgnJywgJ0Q6L1B5dGhvblByb2plY3RzL1JpZ2h0U2Nhbi9TVUltYWluL9Ce0LHQvNC10L3QotCh0JQv0J3QkC9pbml0aWFsX2RpY3RzXzAxLmNzdicsICdpbml0aWFsX2RpY3RzXzAxLmNzdicpCiMgb3Blbl9maWxlc19uZXQoJycsICdEOi9QeXRob25Qcm9qZWN0cy9SaWdodFNjYW4vU1VJbWFpbi/QntCx0LzQtdC90KLQodCUL9Cd0JAvZG9jXzEuY3N2JywnZG9jXzEuY3N2JykK"
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_form_data.py",
                "PyFileKey": "ui_form_data",
                "PyFileData": "aW1wb3J0IGpzb24KaW1wb3J0IHdpZGdldHMKCmJhcmNvZGVfY2FyZHMgPSB7ImN1c3RvbWNhcmRzIjogewogICAgIm9wdGlvbnMiOiB7CiAgICAgICAgInNlYXJjaF9lbmFibGVkIjogVHJ1ZSwKICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgIH0sCgogICAgImxheW91dCI6IHsKICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgIlBhZGRpbmciOiAiMCIsCiAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRjBGOEZGIiwKICAgICAgICAgICAgICAgICJQYWRkaW5nIjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcHJvcGVydGllcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6ICIxNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiI0YwRjhGRiIsCiAgICAgICAgICAgICAgICAiUGFkZGluZyI6ICIwIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHVuaXQiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMTUiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0SXRhbGljIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6IDEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBiYXJjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogIjE1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRjBGOEZGIiwKICAgICAgICAgICAgICAgICJQYWRkaW5nIjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAc2VyaWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogIjE1IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgXQogICAgICAgIH0KICAgIH0KfQoKZGVmIGdldF9kb2NfY2FyZChzZXR0aW5nc19nbG9iYWwsIEFkZE1lbnU9JycpOgogICAgZG9jX2xpc3QgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiQ2hlY2tCb3giLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb21wbGV0ZWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIkNoZWNrQm94MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMzIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCJUaXRsZVRleHRTaXplIikgIyIxOCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiUG9wdXBNZW51QnV0dG9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogZiLQo9C00LDQu9C40YLRjDvQn9C+0LTRgtCy0LXRgNC00LjRgtGMO9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsHtBZGRNZW51fSIsICAjO9Ch0LrQsNC90LjRgNC+0LLQsNGC0Ywg0YjRgtGA0LjRhdC60L7QtNGLINC/0L7RgtC+0LrQvtC8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICJtZW51X2RlbGV0ZSIKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbnVtYmVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykgICMiMjAiCiAgICAgICAgICAgICAgICAgICAgICAgIH0jLAogICAgICAgICAgICAgICAgICAgICAgICAjIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICMgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiVmFsdWUiOiAiQGRhdGEiLAogICAgICAgICAgICAgICAgICAgICAgICAjICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIyAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICMgfQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb3VudHJhZ2VudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHdhcmVob3VzZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfX0KCiAgICByZXR1cm4gZG9jX2xpc3QKCgpkZWYgZ2V0X2RvY19jYXJkX25ldyhzZXR0aW5nc19nbG9iYWwsIHRhYmxlX2RhdGEpOgogICAgZG9jX2xpc3QgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTgsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0eXBlJywKICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J3JpZ2h0JywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1zZXR0aW5nc19nbG9iYWwuZ2V0KCJUaXRsZVRleHRTaXplIiksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTIsCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J9Cj0LTQsNC70LjRgtGMJywKICAgICAgICAgICAgICAgICAgICBWYXJpYWJsZT0ibWVudV9kZWxldGUiCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbnVtYmVyJywKICAgICAgICAgICAgICAgICAgICBUZXh0Qm9sZD1UcnVlLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAY291bnRyYWdlbnQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B3YXJlaG91c2UnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgICAgICksCiAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgIGNhcmRzZGF0YT10YWJsZV9kYXRhCiAgICApCgogICAgcmV0dXJuIGRvY19saXN0LnRvX2pzb24oKQoKCmRlZiBnZXRfZG9jX3F1ZXJ5KGFyZz0nJyk6CiAgICBxdWVyeV90ZXh0ID0gIiIiCiAgICBTRUxFQ1QgUlNfZG9jcy5pZF9kb2MsCiAgICBSU19kb2NzLmRvY190eXBlLAogICAgUlNfZG9jcy5kb2NfbiwKICAgIFJTX2RvY3MuZG9jX2RhdGUsCiAgICBSU19kb2NzLmlkX2NvdW50cmFnZW50cywKICAgIFJTX2RvY3MuaWRfd2FyZWhvdXNlLAogICAgaWZudWxsKFJTX2NvdW50cmFnZW50cy5mdWxsX25hbWUsJycpIGFzIFJTX2NvdW50cmFnZW50LAogICAgaWZudWxsKFJTX3dhcmVob3VzZXMubmFtZSwnJykgYXMgUlNfd2FyZWhvdXNlLAogICAgUlNfZG9jcy52ZXJpZmllZCwKICAgIFJTX2RvY3Muc2VudCwKICAgIFJTX2RvY3MuYWRkX21hcmtfc2VsZWN0aW9uCgogICAgIEZST00gUlNfZG9jcwogICAgIExFRlQgSk9JTiBSU19jb3VudHJhZ2VudHMgYXMgUlNfY291bnRyYWdlbnRzCiAgICAgT04gUlNfY291bnRyYWdlbnRzLmlkID0gUlNfZG9jcy5pZF9jb3VudHJhZ2VudHMKICAgICBMRUZUIEpPSU4gUlNfd2FyZWhvdXNlcyBhcyBSU193YXJlaG91c2VzCiAgICAgT04gUlNfd2FyZWhvdXNlcy5pZD1SU19kb2NzLmlkX3dhcmVob3VzZQogICAgICIiIgogICAgaWYgbm90IChhcmcgPT0gJycgb3IgYXJnID09ICfQktGB0LUnKToKICAgICAgICBxdWVyeV90ZXh0ID0gcXVlcnlfdGV4dCArICcnJwogICAgICAgIFdoZXJlIFJTX2RvY3MuZG9jX3R5cGU9PycnJwoKICAgIHF1ZXJ5X3RleHQgPSBxdWVyeV90ZXh0ICsgIiIiCiAgICBPUkRFUgogICAgQlkKICAgIFJTX2RvY3MuZG9jX2RhdGUiIiIKICAgIHJldHVybiBxdWVyeV90ZXh0CgpkZWYgZ2V0X2Fkcl9kb2NfcXVlcnkoYXJnPScnKToKICAgIHF1ZXJ5X3RleHQgPSAiIiIKICAgIFNFTEVDVCBSU19hZHJfZG9jcy5pZF9kb2MsCiAgICBSU19hZHJfZG9jcy5kb2NfdHlwZSwKICAgIFJTX2Fkcl9kb2NzLmRvY19uLAogICAgUlNfYWRyX2RvY3MuZG9jX2RhdGUsCiAgICBSU19hZHJfZG9jcy5pZF93YXJlaG91c2UsCiAgICBpZm51bGwoUlNfd2FyZWhvdXNlcy5uYW1lLCcnKSBhcyBSU193YXJlaG91c2UsCiAgICBSU19hZHJfZG9jcy52ZXJpZmllZCwKICAgIFJTX2Fkcl9kb2NzLnNlbnQsCiAgICBSU19hZHJfZG9jcy5hZGRfbWFya19zZWxlY3Rpb24KCiAgICAgRlJPTSBSU19hZHJfZG9jcwoKICAgICBMRUZUIEpPSU4gUlNfd2FyZWhvdXNlcyBhcyBSU193YXJlaG91c2VzCiAgICAgT04gUlNfd2FyZWhvdXNlcy5pZD1SU19hZHJfZG9jcy5pZF93YXJlaG91c2UKICAgICAiIiIKICAgIGlmIG5vdCAoYXJnID09ICcnIG9yIGFyZyA9PSAn0JLRgdC1Jyk6CiAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnJycKICAgICAgICBXaGVyZSBSU19hZHJfZG9jcy5kb2NfdHlwZT0/JycnCgogICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAiIiIKICAgIE9SREVSCiAgICBCWQogICAgUlNfYWRyX2RvY3MuZG9jX2RhdGUiIiIKICAgIHJldHVybiBxdWVyeV90ZXh0CgpkZWYgZ2V0X2RvY190eXBlX3F1ZXJ5KCk6CiAgICBscyA9ICdTRUxFQ1QgRElTVElOQ1QgZG9jX3R5cGUgZnJvbSBSU19kb2NzJwogICAgcmV0dXJuIGxzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLdCi0L7QstCw0YDRiwpkZWYgZ2V0X2dvb2RzX2NhcmQoc2V0dGluZ3NfZ2xvYmFsKToKICAgIGxpc3QgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBHVElOIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkB0eXBlX25hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdDYXJkVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHVuaXRfbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0NhcmRUZXh0U2l6ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQoKICAgIH0KICAgIH0KICAgIHJldHVybiBsaXN0CgpkZWYgZmllbGRzX2FsaWFzX2RpY3QoKToKICAgICMgKCJUaXRsZVRleHRTaXplIiwgIjE4IiwgVHJ1ZSkKICAgICMgKCJ0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoIkNhcmRUaXRsZVRleHRTaXplIiwgIjIwIiwgVHJ1ZSkKICAgICMgKCJDYXJkRGF0ZVRleHRTaXplIiwgIjEwIiwgVHJ1ZSkKICAgICMgKCJDYXJkVGV4dFNpemUiLCAiMTUiLCBUcnVlKQogICAgIyAoIkdvb2RzQ2FyZFRpdGxlVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoImdvb2RzVGV4dFNpemUiLCAiMTgiLCBUcnVlKQogICAgIyAoIlNlcmllc1Byb3BlcnRpZXNUZXh0U2l6ZSIsICIxNiIsIFRydWUpCiAgICAjICgiRG9jVHlwZUNhcmRUZXh0U2l6ZSIsICIxNSIsIFRydWUpCiAgICAKICAgIHJldHVybiB7CiAgICAgICAgJ2lkX2dvb2QnOnsnbmFtZSc6J9Cd0L7QvNC10L3QutC70LDRgtGD0YDQsCcsICd0ZXh0X3NpemUnOidUaXRsZVRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ3R5cGVfZ29vZCc6IHsnbmFtZSc6J9Ci0LjQvyDQvdC+0LzQtdC90LrQu9Cw0YLRg9GA0YsnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICd1bml0Jzp7J25hbWUnOiAn0JXQtNC40L3QuNGG0LAg0LjQt9C80LXRgNC10L3QuNGPJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWRfcHJvcGVydHknOnsnbmFtZSc6ICfQpdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutCwJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWRfc2VyaWVzJzogeyduYW1lJzon0KHQtdGA0LjRjycsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3VuaXQnOnsnbmFtZSc6ICfQldC00LjQvdC40YbQsCDQuNC30LzQtdGA0LXQvdC40Y8nLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdpZF9jb3VudHJhZ2VudHMnOnsnbmFtZSc6ICfQmtC+0L3RgtGA0LDQs9C10L3RgicsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3dhcmVob3VzZSc6eyduYW1lJzogJ9Ch0LrQu9Cw0LQnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdpZF9kb2MnOnsnbmFtZSc6ICfQndC+0LzQtdC90LrQu9Cw0YLRg9GA0LAnLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IFRydWV9LAogICAgICAgICdpZF9jZWxsJzp7J25hbWUnOiAn0K/Rh9C10LnQutCwJywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnaWQnOnsnbmFtZSc6ICdrZXknLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICduYW1lJzp7J25hbWUnOiAn0J3QsNC40LzQtdC90L7QstCw0L3QuNC1JywgJ3RleHRfc2l6ZSc6J1RpdGxlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAnY29kZSc6eyduYW1lJzogJ9Ca0L7QtCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2FydCc6eyduYW1lJzogJ9CQ0YDRgtC40LrRg9C7JywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnZGVzY3JpcHRpb24nOnsnbmFtZSc6ICfQntC/0LjRgdCw0L3QuNC1JywgJ3RleHRfc2l6ZSc6J0NhcmREYXRlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3F0dHknOnsnbmFtZSc6ICfQmtC+0LvQuNGH0LXRgdGC0LLQvicsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAncXR0eV9wbGFuJzp7J25hbWUnOiAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0nLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ2JhcmNvZGUnOnsnbmFtZSc6ICfQqNGC0YDQuNGF0LrQvtC0JywgJ3RleHRfc2l6ZSc6J0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnZnVsbF9uYW1lJzp7J25hbWUnOiAn0J/QvtC70L3QvtC1INC90LDQuNC80LXQvdC+0LLQsNC90LjQtScsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lubic6eyduYW1lJzogJ9CY0J3QnScsICd0ZXh0X3NpemUnOidUaXRsZVRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdrcHAnOnsnbmFtZSc6ICfQmtCf0J8nLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfSwKICAgICAgICAnbWFya19jb2RlJzp7J25hbWUnOiAn0KjRgtGA0LjRhdC60L7QtCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ2lkX3ByaWNlX3R5cGVzJzp7J25hbWUnOiAn0KLQuNC/INGG0LXQvdGLJywgJ3RleHRfc2l6ZSc6J1RpdGxlVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3ByaWNlJzp7J25hbWUnOiAn0KbQtdC90LAnLCAndGV4dF9zaXplJzonVGl0bGVUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IFRydWV9LAogICAgICAgICdpZF9vd25lcic6eyduYW1lJzogJ9CS0LvQsNC00LXQu9C10YYnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdiZXN0X2JlZm9yZSc6eyduYW1lJzogJ9CT0L7QtNC10L0g0LTQvjonLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdudW1iZXInOnsnbmFtZSc6J9Cd0L7QvNC10YAnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdwcm9kdWN0aW9uX2RhdGUnOnsnbmFtZSc6J9CU0LDRgtCwINC/0YDQvtC40LfQstC+0LTRgdGC0LLQsCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBGYWxzZX0sCiAgICAgICAgJ3VzZV9tYXJrJzp7J25hbWUnOifQmNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0LzQsNGA0LrQuNGA0L7QstC60YMnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogRmFsc2V9LAogICAgICAgICdub21pbmF0b3InOnsnbmFtZSc6J9Cd0L7QvNC40L3QsNGC0L7RgCcsICd0ZXh0X3NpemUnOidDYXJkVGV4dFNpemUnLCAiVGV4dEJvbGQiOiBUcnVlfSwKICAgICAgICAnZGVub21pbmF0b3InOnsnbmFtZSc6J9CU0LXQvdC+0LzQuNC90LDRgtC+0YAnLCAndGV4dF9zaXplJzonQ2FyZFRleHRTaXplJywgIlRleHRCb2xkIjogVHJ1ZX0sCiAgICAgICAgJ2xvZyc6IHsnbmFtZSc6ICfQntGI0LjQsdC60LAnLCAndGV4dF9zaXplJzogJ0NhcmRUZXh0U2l6ZScsICJUZXh0Qm9sZCI6IEZhbHNlfQogICAgICAgIH0KCgpkZWYgdGFibGVfbmFtZXNfZGljdCgpOgogICAgcmV0dXJuIHsKICAgICAgICAnaWRfZ29vZCc6J1JTX2dvb2RzJywKICAgICAgICAndHlwZV9nb29kJzogJ1JTX3R5cGVzX2dvb2RzJywKICAgICAgICAndW5pdCc6ICdSU191bml0cycsCiAgICAgICAgJ2lkX3Byb3BlcnR5JzogJ1JTX3Byb3BlcnRpZXMnLAogICAgICAgICdpZF9zZXJpZXMnOiAnUlNfc2VyaWVzJywKICAgICAgICAnaWRfdW5pdCc6ICdSU191bml0cycsCiAgICAgICAgJ2lkX2NvdW50cmFnZW50cyc6ICdSU19jb3VudHJhZ2VudHMnLAogICAgICAgICdpZF93YXJlaG91c2UnOiAnUlNfd2FyZWhvdXNlcycsCiAgICAgICAgJ2lkX2RvYyc6ICdSU19kb2NzJywKICAgICAgICAnaWRfY2VsbCc6ICdSU19jZWxscycsCiAgICAgICAgJ2lkX293bmVyJzogJ1JTX2dvb2RzJywKICAgICAgICAnaWRfcHJpY2VfdHlwZXMnOiAnUlNfcHJpY2VfdHlwZXMnCiAgICAgICAgICAgIH0KZGVmIGdldF9lbGVtX2RpY3QodGV4dF9zaXplKToKICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHRleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCmRlZiBnZXRfdW5pdmVyc2FsX2NhcmQoKSAtPiBvYmplY3Q6CgogICAgbGlzdCA9IHsiY3VzdG9tY2FyZHMiOiB7CiAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICJzZWFyY2hfZW5hYmxlZCI6IFRydWUsCiAgICAgICAgICAgICdvdmVycmlkZV9zZWFyY2gnOiBUcnVlLAogICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICB9LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCgogICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwoKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQoKICAgIH0KICAgIH0KCgogICAgcmV0dXJuIGxpc3QKCgpkZWYgZ2V0X2dvb2RzX3F1ZXJ5KCk6CiAgICBxdWVyeV90ZXh0ID0gIiIiCiAgICBTRUxFQ1QgUlNfZ29vZHMuaWQsCiAgICBSU19nb29kcy5jb2RlLAogICAgUlNfZ29vZHMuYXJ0LAogICAgUlNfZ29vZHMubmFtZSwKICAgIFJTX2dvb2RzLnR5cGVfZ29vZCwKICAgIFJTX3R5cGVzX2dvb2RzLm5hbWUgQVMgdHlwZXNfZ29vZHMsCiAgICBSU19nb29kcy51bml0LAogICAgUlNfdW5pdHMubmFtZQogICAgRlJPTSBSU19nb29kcwogICAgTEVGVCBKT0lOIFJTX3R5cGVzX2dvb2RzCiAgICBPTiBSU190eXBlc19nb29kcy5pZCA9IFJTX2dvb2RzLnR5cGVfZ29vZAogICAgTEVGVCBKT0lOIFJTX3VuaXRzCiAgICBPTiBSU191bml0cy5pZF9vd25lciA9IFJTX2dvb2RzLmlkIiIiCiAgICByZXR1cm4gcXVlcnlfdGV4dAoKCmRlZiBnZXRfcHJpY2VfY2FyZChzZXR0aW5nc19nbG9iYWwpOgogICAgdHh0ID0geyJjdXN0b21jYXJkcyI6IHsKICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgInNlYXJjaF9lbmFibGVkIjogRmFsc2UsCiAgICAgICAgICAgICJzYXZlX3Bvc2l0aW9uIjogVHJ1ZQogICAgICAgIH0sCiAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICJWYWx1ZSI6ICIiLAogICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHByaWNlX3R5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcHJpY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnQ2FyZFRleHRTaXplJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICBdCiAgICB9CiAgICB9CiAgICByZXR1cm4gdHh0CgoKZGVmIGdldF9kb2NfZGV0YWlsc19xdWVyeShpc0FkciA9IEZhbHNlLCBjdXJDZWxsID0gRmFsc2UpOgogICAgaWYgaXNBZHI6CiAgICAgICAgcXVlcnlfdGV4dCA9ICcnJwogICAgICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWQsCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLmlkX2RvYywKICAgICAgICAgICAgUlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZCwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLm5hbWUsIDpOdWxsVmFsdWUpIGFzIGdvb2RfbmFtZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmNvZGUsIDpFbXB0eVN0cmluZykgYXMgY29kZSwKICAgICAgICAgICAgaWZudWxsKFJTX2dvb2RzLmFydCwgOkVtcHR5U3RyaW5nKSBhcyBhcnQsCiAgICAgICAgICAgIGlmbnVsbChSU19hZHJfZG9jc190YWJsZS5pZF9wcm9wZXJ0aWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3Byb3BlcnRpZXMsCiAgICAgICAgICAgIGlmbnVsbChSU19wcm9wZXJ0aWVzLm5hbWUsIDpFbXB0eVN0cmluZykgYXMgcHJvcGVydGllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfc2VyaWVzLCA6RW1wdHlTdHJpbmcpIGFzIGlkX3NlcmllcywKICAgICAgICAgICAgaWZudWxsKFJTX3Nlcmllcy5uYW1lLCA6RW1wdHlTdHJpbmcpIGFzIHNlcmllc19uYW1lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdCwgOkVtcHR5U3RyaW5nKSBhcyBpZF91bml0LAogICAgICAgICAgICBpZm51bGwoUlNfdW5pdHMubmFtZSwgOkVtcHR5U3RyaW5nKSBhcyB1bml0c19uYW1lLAogICAgICAgICAgICBSU19hZHJfZG9jc190YWJsZS5xdHR5IGFzIHF0dHksCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiBhcyBxdHR5X3BsYW4sCiAgICAgICAgICAgIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHlfcGxhbiAtIFJTX2Fkcl9kb2NzX3RhYmxlLnF0dHkgYXMgSXNEb25lLAogICAgICAgICAgICBpZm51bGwoUlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbCwgOkVtcHR5U3RyaW5nKSBhcyBpZF9jZWxsLAogICAgICAgICAgICBpZm51bGwoUlNfY2VsbHMubmFtZSwgOk51bGxWYWx1ZSkgYXMgY2VsbF9uYW1lCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgRlJPTSBSU19hZHJfZG9jc190YWJsZSAKCiAgICAgICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICAgICAgT04gUlNfZ29vZHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfZ29vZAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgICAgICBPTiBSU19wcm9wZXJ0aWVzLmlkID0gUlNfYWRyX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgICAgIE9OIFJTX3Nlcmllcy5pZCA9IFJTX2Fkcl9kb2NzX3RhYmxlLmlkX3NlcmllcwogICAgICAgICAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgICAgICAgICAgT04gUlNfdW5pdHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfdW5pdAogICAgICAgICAgICBMRUZUIEpPSU4gUlNfY2VsbHMKICAgICAgICAgICAgT04gUlNfY2VsbHMuaWQ9UlNfYWRyX2RvY3NfdGFibGUuaWRfY2VsbAoKICAgICAgICAgICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyBhbmQgdGFibGVfdHlwZSA9IDp0YWJsZV90eXBlCiAgICAgICAgICAgIAogICAgICAgICAgICAnJycKCiAgICAgICAgaWYgY3VyQ2VsbDoKICAgICAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnJycKICAgICAgICAgICAgIGFuZCAoaWRfY2VsbD06Y3VycmVudF9jZWxsIE9SIGlkX2NlbGw9IiIgT1IgaWRfY2VsbCBpcyBOdWxsKQogICAgICAgICAgICAnJycKCiAgICAgICAgcXVlcnlfdGV4dCA9IHF1ZXJ5X3RleHQgKyAnIE9SREVSIEJZIFJTX2NlbGxzLm5hbWUsIFJTX2Fkcl9kb2NzX3RhYmxlLmxhc3RfdXBkYXRlZCBERVNDJwoKICAgIGVsc2U6CiAgICAgICAgcXVlcnlfdGV4dCA9ICIiIgogICAgICAgIFNFTEVDVAogICAgICAgIFJTX2RvY3NfdGFibGUuaWQsCiAgICAgICAgUlNfZG9jc190YWJsZS5pZF9kb2MsCiAgICAgICAgUlNfZG9jc190YWJsZS5pZF9nb29kLAogICAgICAgIFJTX2dvb2RzLm5hbWUgYXMgZ29vZF9uYW1lLAogICAgICAgIFJTX2dvb2RzLmNvZGUsCiAgICAgICAgUlNfZ29vZHMuYXJ0LAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfcHJvcGVydGllcywKICAgICAgICBSU19wcm9wZXJ0aWVzLm5hbWUgYXMgcHJvcGVydGllc19uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfc2VyaWVzLAogICAgICAgIFJTX3Nlcmllcy5uYW1lIGFzIHNlcmllc19uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUuaWRfdW5pdCwKICAgICAgICBSU191bml0cy5uYW1lIGFzIHVuaXRzX25hbWUsCiAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5LAogICAgICAgIFJTX2RvY3NfdGFibGUucXR0eV9wbGFuLAogICAgICAgIFJTX2RvY3NfdGFibGUucHJpY2UsCiAgICAgICAgUlNfcHJpY2VfdHlwZXMubmFtZSBhcyBwcmljZV9uYW1lLAogICAgICAgIFJTX2RvY3NfdGFibGUucXR0eV9wbGFuIC0gUlNfZG9jc190YWJsZS5xdHR5IGFzIElzRG9uZQogICAgICAgIEZST00gUlNfZG9jc190YWJsZSAKICAgIAogICAgICAgIExFRlQgSk9JTiBSU19nb29kcyAKICAgICAgICBPTiBSU19nb29kcy5pZD1SU19kb2NzX3RhYmxlLmlkX2dvb2QKICAgICAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgICAgIE9OIFJTX3Byb3BlcnRpZXMuaWQgPSBSU19kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXMKICAgICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiAgICAgICAgT04gUlNfc2VyaWVzLmlkID0gUlNfZG9jc190YWJsZS5pZF9zZXJpZXMKICAgICAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgICAgICBPTiBSU191bml0cy5pZD1SU19kb2NzX3RhYmxlLmlkX3VuaXQKICAgICAgICBMRUZUIEpPSU4gUlNfcHJpY2VfdHlwZXMKICAgICAgICBPTiBSU19wcmljZV90eXBlcy5pZCA9IFJTX2RvY3NfdGFibGUuaWRfcHJpY2UKICAgICAgICBXSEVSRSBpZF9kb2MgPSAkYXJnMQogICAgICAgIE9SREVSIEJZIFJTX2RvY3NfdGFibGUubGFzdF91cGRhdGVkIERFU0MgCiAgICAgICAgIiIiCgogICAgcmV0dXJuIHF1ZXJ5X3RleHQKCgoKCmRlZiBnZXRfZG9jX2RldGFpbF9jYXJkcyh1c2Vfc2VyaWVzLCB1c2VfcHJvcGVydGllcywgc2V0dGluZ3NfZ2xvYmFsLCBpc0FkciA9IEZhbHNlKToKICAgIGNlbGxNZW51Q29tbWFuZCA9ICc70JjQt9C80LXQvdC40YLRjCDRj9GH0LXQudC60YMnIGlmIGlzQWRyIGVsc2UgJycKICAgIGxpc3QgPSB7CiAgICAgICAgImN1c3RvbWNhcmRzIjogewogICAgICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICAgICAgICJzZWFyY2hfZW5hYmxlZCI6IFRydWUsCiAgICAgICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQGdvb2RfbmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHBpY3R1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMjUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiNGRkZGRkYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIjI1IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJQb3B1cE1lbnVCdXR0b24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogZiLQo9C00LDQu9C40YLRjCDRgdGC0YDQvtC60YN7Y2VsbE1lbnVDb21tYW5kfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIm1lbnVfZ29vZF9zdHJpbmciCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBjb2RlX2FydCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAdW5pdF9uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJnb3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogItCf0LvQsNC9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBxdHR5X3BsYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAi0KTQsNC60YIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHF0dHkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAi0KbQtdC90LAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHByaWNlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdnb29kc1RleHRTaXplJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGlmIHVzZV9zZXJpZXMgPT0gJ3RydWUnIG9yIHVzZV9zZXJpZXMgPT0gJzEnOgogICAgICAgIGxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmluc2VydCgxLCB7J3R5cGUnOiAnVGV4dFZpZXcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJyksICMxNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob3dfYnlfY29uZGl0aW9uJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVmFsdWUnOiAnQHNlcmllc19uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb1JlZnJlc2gnOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudF90eXBlJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFzayc6ICcnLCAnVmFyaWFibGUnOiAnJ30pCiAgICBpZiB1c2VfcHJvcGVydGllcyA9PSAndHJ1ZScgb3IgdXNlX3Byb3BlcnRpZXMgPT0gJzEnOgogICAgICAgIGxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2xheW91dCddWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddWzBdWydFbGVtZW50cyddLmluc2VydCgxLCB7J3R5cGUnOiAnVGV4dFZpZXcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnU2VyaWVzUHJvcGVydGllc1RleHRTaXplJyksICMnMTYnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Nob3dfYnlfY29uZGl0aW9uJzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVmFsdWUnOiAnQHByb3BlcnRpZXNfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm9SZWZyZXNoJzogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnRfdHlwZSc6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hc2snOiAnJywgJ1ZhcmlhYmxlJzogJyd9KQogICAgaWYgaXNBZHI6CiAgICAgICAgbGlzdFsnY3VzdG9tY2FyZHMnXVsnbGF5b3V0J11bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ11bMF1bJ0VsZW1lbnRzJ10uaW5zZXJ0KDEsIHsndHlwZSc6ICdUZXh0VmlldycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgJzE2JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG93X2J5X2NvbmRpdGlvbic6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1ZhbHVlJzogJ0BjZWxsX25hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vUmVmcmVzaCc6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50X3R5cGUnOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXNrJzogJycsICdWYXJpYWJsZSc6ICcnfSkKCiAgICAgICAgcGFzcwoKICAgIHJldHVybiBsaXN0CgoKZGVmIGdldF9kb2NfZGV0YWlsX2NhcmRzX25ldyhzZXR0aW5nc19nbG9iYWwsIGNhcmRzX2RhdGE6IGxpc3QsIGFkZF9sYWJlbHM6IGxpc3QgPSBOb25lKToKICAgIGdvb2RzX3RleHRfc2l6ZSA9IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKQogICAgaGVhZGVyID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICkKCiAgICAjIHNlcmllc19uYW1lLCBwcm9wZXJ0aWVzX25hbWUsIGNlbGxfbmFtZQogICAgYWRkX2xhYmVscyA9IGFkZF9sYWJlbHMgb3IgW10KICAgIGZvciBsYWJlbCBpbiBhZGRfbGFiZWxzOgogICAgICAgIGhlYWRlci5hcHBlbmQoCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9ZidAe2xhYmVsfScsIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ1Nlcmllc1Byb3BlcnRpZXNUZXh0U2l6ZScpKSwKICAgICAgICApCgogICAgaGVhZGVyLmFwcGVuZCgKICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICBWYWx1ZT0nQGdvb2RfbmFtZScsCiAgICAgICAgICAgIFRleHRCb2xkPVRydWUsCiAgICAgICAgICAgIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgd2VpZ2h0PScxJwogICAgICAgICksCiAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgVmFsdWU9J0BwaWN0dXJlJywKICAgICAgICAgICAgVGV4dFNpemU9JzI1JywKICAgICAgICAgICAgVGV4dENvbG9yPScjREI3MDkzJywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPSIjRkZGRkZGIiwKICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgIGhlaWdodD0yNSwKICAgICAgICApLAogICAgKQoKICAgIGNvZGVfYXJ0ID0gd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0nQGNvZGVfYXJ0JywgVGV4dFNpemU9c2V0dGluZ3NfZ2xvYmFsLmdldCgnZ29vZHNUZXh0U2l6ZScpKQogICAgdW5pdF9uYW1lID0gd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0nQHVuaXRfbmFtZScsIFRleHRTaXplPXNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSkKICAgIGZvb3RlciA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQn9C70LDQvScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5X3BsYW4nLCBUZXh0U2l6ZT1nb29kc190ZXh0X3NpemUpLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgKSwKICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldyhWYWx1ZT0n0KTQsNC60YInLCBUZXh0U2l6ZT1nb29kc190ZXh0X3NpemUpLAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSdAcXR0eScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICApLAogICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQptC10L3QsCcsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BwcmljZScsIFRleHRTaXplPWdvb2RzX3RleHRfc2l6ZSksCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICApLAogICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgd2VpZ2h0PTEsCiAgICApCgogICAgZGV0YWlsX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBoZWFkZXIsCiAgICAgICAgICAgICAgICAgICAgY29kZV9hcnQsCiAgICAgICAgICAgICAgICAgICAgdW5pdF9uYW1lLAogICAgICAgICAgICAgICAgICAgIGZvb3RlciwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9JzEnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcKICAgICAgICAgICAgKSwKICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICksCiAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgIGNhcmRzZGF0YT1jYXJkc19kYXRhCiAgICApCgogICAgcmV0dXJuIGRldGFpbF9jYXJkcy50b19qc29uKCkKCgpkZWYgZ2V0X2RvY19iYXJjX2Zsb3dfcXVlcnkoKToKICAgIHJldHVybiAnJycKICAgIFNlbGVjdCAqIGZyb20gUlNfYmFyY19mbG93IFdIZXJlIGlkX2RvYyA9PwogICAgJycnCgpkZWYgZG9jX2JhcmNfZmxvd19jYXJkKHNldHRpbmdzX2dsb2JhbCk6CiAgICBsaXN0ID0gewogICAgICAgICJjdXN0b21jYXJkcyI6IHsKICAgICAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBUcnVlLAogICAgICAgICAgICAgICAgInNhdmVfcG9zaXRpb24iOiBUcnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAYmFyY29kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnR29vZHNDYXJkVGl0bGVUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKCiAgICByZXR1cm4gbGlzdAoKZGVmIGdldF9wcmljZV9xdWVyeSgpOgogICAgdHh0ID0gIiIiCiAgICBTRUxFQ1QgKiwKICAgIFJTX3ByaWNlX3R5cGVzLm5hbWUKICAgICBmcm9tIFJTX3ByaWNlcyAKICAgICBMRUZUIEpPSU4gUlNfcHJpY2VfdHlwZXMgT04gUlNfcHJpY2VfdHlwZXMuaWQ9UlNfcHJpY2VzLmlkX3ByaWNlX3R5cGVzCiAgICAgd2hlcmUgaWRfZ29vZHM9PyIiIgogICAgcmV0dXJuIHR4dAoKCiMg0KHQvtCy0YDQtdC80LXQvdC90L7QtSDQv9C+0LvQtSDQstCy0L7QtNCwLCDQvdC1INC40YHQv9C+0LvRjNC30YPQtdGC0YHRjwpkZWYgZ2V0X251bV9maWVsZF9kZXNjcihxdHR5KToKICAgIGpzb25fZGVzY3IgPSB7CiAgICAgICAgImhpbnQiOiAn0LrQvtC70LjRh9C10YHRgtCy0L4nLAogICAgICAgICJkZWZhdWx0X3RleHQiOiBxdHR5LAogICAgICAgICdpbnB1dFR5cGUgJzogJ1RZUEVfQ0xBU1NfTlVNQkVSJwogICAgfQogICAgcmV0dXJuIGpzb25fZGVzY3IKCgojIGRlZiBnZXRfYmFyY29kZV9xdWVyeSgpOgojICAgICBxdWVyeV90ZXh0ID0gJ1NFTEVDVCAqIEZST00gUlNfZG9jc19iYXJjb2RlcyBXaGVyZSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9ID8nCiMgICAgIHJldHVybiBxdWVyeV90ZXh0CgoKIyDQl9Cw0L/RgNC+0YEg0L3QsNGF0L7QtNC40YIg0LLRgdC1INC30LDQv9C40YHQuCDRgtCw0LHQu9C40YbRiyDQtNC+0LrRg9C80LXQvdGC0LAgUlNfZG9jc19iYXJjb2RlcyDQv9C+INC/0L7Qu9C90L7QvNGDINGB0L7QstC/0LDQtNC10L3QuNGOINGI0YLRgNC40YXQutC+0LTQsCDQuNC70Lgg0YLQvtC70YzQutC+INC/0L4gR1RJTgpkZWYgZ2V0X3F1ZXJ5X21hcmtfZmluZF9pbl9kb2MoKToKICAgIHF1ZXJ5ID0gJycnCiAgICBTRUxFQ1QgCiAgICBpZCwKICAgIGlkX2RvYywKICAgIElGTlVMTChHVElOLCAnMCcpIEFTIEdUSU4sCiAgICBJRk5VTEwoU2VyaWVzLCAnMCcpIEFTIFNlcmllcywKICAgIElGTlVMTChpZF9nb29kLCAnJykgQVMgaWRfZ29vZCwKICAgIElGTlVMTChpZF9wcm9wZXJ0eSwgJycpIEFTIGlkX3Byb3BlcnR5ICwKICAgIElGTlVMTChpZF9zZXJpZXMsICcnKSBBUyBpZF9zZXJpZXMsCiAgICBJRk5VTEwoaWRfdW5pdCwgJycpICBBUyBpZF91bml0LAogICAgaXNfcGxhbiwKICAgIGFwcHJvdmVkCgogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCgogICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIEdUSU4gPSA6R1RJTiBBbmQgU2VyaWVzID0gOlNlcmllcycnJwoKICAgICMKICAgICMKICAgICMgICAgICcnJwogICAgIyBTRUxFQ1QgKiBGUk9NICgKICAgICMKICAgICMgU0VMRUNUCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaWQsCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jLAogICAgIwogICAgIyBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUsCiAgICAjCiAgICAjIElGTlVMTChSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSwgJzAnKSBBUyBtYXJrX2NvZGUsCiAgICAjIElGTlVMTChSU19tYXJraW5nX2NvZGVzLmlkX2dvb2QsICcnKSBBUyBpZF9nb29kLAogICAgIyBJRk5VTEwoUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSwgJycpIEFTIGlkX3Byb3BlcnR5ICwKICAgICMgSUZOVUxMKFJTX21hcmtpbmdfY29kZXMuaWRfc2VyaWVzLCAnJykgQVMgaWRfc2VyaWVzLAogICAgIyBJRk5VTEwoUlNfbWFya2luZ19jb2Rlcy5pZF91bml0LCAnJykgIEFTIGlkX3VuaXQsCiAgICAjCiAgICAjIFJTX2RvY3NfYmFyY29kZXMuaXNfcGxhbiwKICAgICMgUlNfZG9jc19iYXJjb2Rlcy5hcHByb3ZlZAogICAgIwogICAgIyBGUk9NIFJTX2RvY3NfYmFyY29kZXMKICAgICMKICAgICMgICAgIExFRlQgSk9JTiBSU19tYXJraW5nX2NvZGVzIEFzIFJTX21hcmtpbmdfY29kZXMKICAgICMgICAgIE9OIFJTX21hcmtpbmdfY29kZXMuaWQgPSBSU19kb2NzX2JhcmNvZGVzLmlkX2JhcmNvZGUKICAgICMKICAgICMgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIFJTX21hcmtpbmdfY29kZXMubWFya19jb2RlID0gOnNldF9iYXJjb2RlKQogICAgIyAnJycKICAgICMKICAgICMgU0VMRUNUICogRlJPTSAoCiAgICAjICAgICBTRUxFQ1QKICAgICMgICAgICdvbl9HVElOJyBhcyBUeXBlT2ZVbmlvbiwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWQsCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYywKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZSwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZSwKICAgICMgICAgIFJTX2JhcmNvZGVzLkdUSU4sCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF9nb29kLAogICAgIyAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF9zZXJpZXMsCiAgICAjICAgICBSU19iYXJjb2Rlcy5pZF91bml0LAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pc19wbGFuLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5hcHByb3ZlZAogICAgIyAgICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICAjICAgICAgICAgTEVGVCBKT0lOIChTZWxlY3QgUlNfYmFyY29kZXMuYmFyY29kZSBhcyBHVElOLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQgRlJPTSBSU19iYXJjb2RlcwogICAgIyAgICAgICAgIFdIRVJFIFJTX2JhcmNvZGVzLmJhcmNvZGU9Omd0aW4gTElNSVQgMSkgQVMgUlNfYmFyY29kZXMKICAgICMgICAgICAgICBPTiBUUlVFCiAgICAjICAgICAgICAgTEVGVCBKT0lOIFJTX2JhcmNvZGVzIGFzIEZ1bGxCYXJjb2RlCiAgICAjICAgICAgICAgT04gRnVsbEJhcmNvZGUuYmFyY29kZSA9IFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZQogICAgIwogICAgIyAgICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYyAgYW5kIFJTX2RvY3NfYmFyY29kZXMuYmFyY29kZSBMaWtlICclJys6Z3RpbiArICclJwogICAgIwogICAgIyAgICAgVU5JT04gQUxMCiAgICAjCiAgICAjICAgICBTRUxFQ1QKICAgICMgICAgICdGdWxsTWF0Y2gnLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pZCwKICAgICMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWRfZG9jLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlLAogICAgIyAgICAgUlNfZG9jc19iYXJjb2Rlcy5pZF9iYXJjb2RlLAogICAgIyAgICAgSUZOVUxMKFJTX2JhcmNvZGVzLmJhcmNvZGUsUlNfYmFyY29kZXNfaW5hY2N1cmF0ZS5HVElOKSwKICAgICMgICAgIElGTlVMTChSU19iYXJjb2Rlcy5pZF9nb29kLFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfZ29vZCksCiAgICAjICAgICBJRk5VTEwoUlNfYmFyY29kZXMuaWRfcHJvcGVydHksUlNfYmFyY29kZXNfaW5hY2N1cmF0ZS5pZF9wcm9wZXJ0eSksCiAgICAjICAgICBJRk5VTEwoUlNfYmFyY29kZXMuaWRfc2VyaWVzLFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfc2VyaWVzKSwKICAgICMgICAgIElGTlVMTChSU19iYXJjb2Rlcy5pZF91bml0LFJTX2JhcmNvZGVzX2luYWNjdXJhdGUuaWRfdW5pdCksCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4sCiAgICAjICAgICBSU19kb2NzX2JhcmNvZGVzLmFwcHJvdmVkCiAgICAjICAgICBGUk9NIFJTX2RvY3NfYmFyY29kZXMKICAgICMgICAgICAgICBMRUZUIEpPSU4gUlNfYmFyY29kZXMKICAgICMgICAgICAgICBPTiBSU19iYXJjb2Rlcy5iYXJjb2RlID0gUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlCiAgICAjICAgICAgICAgTEVGVCBKT0lOIChTZWxlY3QgUlNfYmFyY29kZXMuYmFyY29kZSBhcyBHVElOLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAjICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgIyAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQgRlJPTSBSU19iYXJjb2RlcwogICAgIyAgICAgICAgIFdIRVJFIFJTX2JhcmNvZGVzLmJhcmNvZGUgTGlrZSAnJScrOmd0aW4gKyAnJScgTElNSVQgMSkgQVMgUlNfYmFyY29kZXNfaW5hY2N1cmF0ZQogICAgIyAgICAgICAgIE9OIFRSVUUKICAgICMgICAgICAgICBMRUZUIEpPSU4gUlNfYmFyY29kZXMgYXMgRnVsbEJhcmNvZGUKICAgICMgICAgICAgICBPTiBGdWxsQmFyY29kZS5iYXJjb2RlID0gUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlCiAgICAjCiAgICAjICAgICBXSEVSRSBpZF9kb2MgPSA6aWRfZG9jICBhbmQgUlNfZG9jc19iYXJjb2Rlcy5iYXJjb2RlID0gOnNldF9iYXJjb2RlKQogICAgIwogICAgIyBPUkRFUiAgQlkgVHlwZU9mVW5pb24KICAgICMgJycnCiAgICByZXR1cm4gcXVlcnkKCgpkZWYgZ2V0X2JhcmNvZGVfY2FyZChzZXR0aW5nc19nbG9iYWwpOgogICAgbHMgPSB7ImN1c3RvbWNhcmRzIjogewogICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAic2VhcmNoX2VuYWJsZWQiOiBGYWxzZSwKICAgICAgICAgICAgInNhdmVfcG9zaXRpb24iOiBUcnVlCiAgICAgICAgfSwKICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7InR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBiYXJjb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcGljdHVyZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiNEQjcwOTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIjRkZGRkZGIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICJidG5fdHN0MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhcmRDb3JuZXJSYWRpdXMiOiAiMTVkcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9XX0KCiAgICAgICAgICAgIF0KICAgICAgICB9fQogICAgfQogICAgcmV0dXJuIGxzCgoKZGVmIGdldF9kb2NfYmFyY29kZV9xdWVyeSgpOgogICAgbHMgPSAnJycKICAgIFNFTEVDVAogICAgIigwMSkiIHx8IEdUSU4gfHwgIigyMSkiIHx8IFNlcmllcyBhcyBtYXJrX2NvZGUsCiAgICBhcHByb3ZlZAogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCiAgICBXaGVyZQogICAgaWRfZG9jID0gOmlkX2RvYyBBTkQKICAgIGlkX2dvb2QgPSA6aWRfZ29vZCBBTkQKICAgIGlkX3Byb3BlcnR5ID0gOmlkX3Byb3BlcnR5IEFORAogICAgaWRfc2VyaWVzID0gOmlkX3NlcmllcyAKICAgIC0tQU5EICBpZF91bml0ID0gOmlkX3VuaXQKICcnJwogICAgcmV0dXJuIGxzCgoKZGVmIGdldF9kb2NfYmFyY29kZV9xdWVyeV9ub19SU19tYXJrY29kZXMoKToKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCAKICAgIGlkX2JhcmNvZGUsCiAgICBSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSBhcyBtYXJrX2NvZGUsCiAgICBhcHByb3ZlZAogICAgRlJPTSBSU19kb2NzX2JhcmNvZGVzCgogICAgSk9JTiBSU19tYXJraW5nX2NvZGVzIAogICAgT04gUlNfbWFya2luZ19jb2Rlcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZSBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZCA9IDppZF9nb29kIEFORAogICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSA9IDppZF9wcm9wZXJ0eSBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfc2VyaWVzID0gOmlkX3NlcmllcyBBTkQKICAgIFJTX21hcmtpbmdfY29kZXMuaWRfdW5pdCA9IDppZF91bml0IAoKICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgJycnCgoKZGVmIGdldF9tYXJrY29kZV9xdWVyeSgpOgogICAgcmV0dXJuICcnJwogICAgU0VMRUNUIAogICAgUlNfZG9jc19iYXJjb2Rlcy5pZCBhcyBDdXJTdHIsCiAgICBSU19kb2NzX2JhcmNvZGVzLkdUSU4sCiAgICBSU19kb2NzX2JhcmNvZGVzLlNlcmllcywKICAgIFJTX2RvY3NfYmFyY29kZXMuYXBwcm92ZWQsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX2dvb2QsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX3Byb3BlcnR5IGFzIGlkX3Byb3BlcnR5LAogICAgUlNfZG9jc19iYXJjb2Rlcy5pZF9zZXJpZXMsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlkX3VuaXQsCiAgICBSU19nb29kcy5uYW1lIGFzIGdvb2RfbmFtZSwKICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0aWVzLAogICAgUlNfc2VyaWVzLm5hbWUgYXMgc2VyaWVzLAogICAgUlNfdW5pdHMubmFtZSBhcyB1bml0LAogICAgUlNfZ29vZHMuY29kZSBBUyBnb29kX2NvZGUsCiAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4KCiBGUk9NIFJTX2RvY3NfYmFyY29kZXMgCgogTEVGVCBKT0lOIFJTX2dvb2RzIAogICAgT04gUlNfZ29vZHMuaWQ9UlNfZG9jc19iYXJjb2Rlcy5pZF9nb29kCiAgICBMRUZUIEpPSU4gUlNfcHJvcGVydGllcwogICAgT04gUlNfcHJvcGVydGllcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfcHJvcGVydHkKICAgIExFRlQgSk9JTiBSU19zZXJpZXMKICAgIE9OIFJTX3Nlcmllcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfc2VyaWVzCiAgICBMRUZUIEpPSU4gUlNfdW5pdHMKICAgIE9OIFJTX3VuaXRzLmlkPVJTX2RvY3NfYmFyY29kZXMuaWRfdW5pdAoKICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgQU5EIEdUSU4gPSA6R1RJTiBBbmQgU2VyaWVzID0gOlNlcmllcycnJwoKCiMgICAgICcnJwojICAgICBTRUxFQ1QKIyAgICAgVGVtcF9xdWVyeS5DdXJTdHIgYXMgQ3VyU3RyLAojICAgICBUZW1wX3F1ZXJ5LmlkX2JhcmNvZGUsCiMgICAgIFRlbXBfcXVlcnkubWFya19jb2RlLAojICAgICBUZW1wX3F1ZXJ5LmFwcHJvdmVkLAojICAgICBUZW1wX3F1ZXJ5LmlkX2dvb2QsCiMgICAgIFRlbXBfcXVlcnkuaWRfcHJvcGVydGllcyBhcyBpZF9wcm9wZXJ0eSwKIyAgICAgVGVtcF9xdWVyeS5pZF9zZXJpZXMsCiMgICAgIFRlbXBfcXVlcnkuaWRfdW5pdCwKIyAgICAgUlNfZ29vZHMubmFtZSBhcyBnb29kX25hbWUsCiMgICAgIFJTX3Byb3BlcnRpZXMubmFtZSBhcyBwcm9wZXJ0aWVzLAojICAgICBSU19zZXJpZXMubmFtZSBhcyBzZXJpZXMsCiMgICAgIFJTX3VuaXRzLm5hbWUgYXMgdW5pdCwKIyAgICAgUlNfZ29vZHMuY29kZSBBUyBnb29kX2NvZGUsCiMgICAgIFRlbXBfcXVlcnkuaXNfcGxhbgojCiMKIyAgRlJPTSAoCiMgU0VMRUNUCiMgICAgIFJTX2RvY3NfYmFyY29kZXMuaWQgYXMgQ3VyU3RyLAojICAgICBpZF9iYXJjb2RlLAojICAgICBSU19tYXJraW5nX2NvZGVzLm1hcmtfY29kZSwKIyAgICAgYXBwcm92ZWQsCiMgICAgIFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZCwKIyAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSBhcyBpZF9wcm9wZXJ0aWVzLAojICAgICBSU19tYXJraW5nX2NvZGVzLmlkX3NlcmllcywKIyAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF91bml0LAojICAgICBSU19kb2NzX2JhcmNvZGVzLmlzX3BsYW4KIwojICAgICBGUk9NIFJTX2RvY3NfYmFyY29kZXMKIwojICAgICBKT0lOIFJTX21hcmtpbmdfY29kZXMKIyAgICAgT04gUlNfbWFya2luZ19jb2Rlcy5pZCA9IFJTX2RvY3NfYmFyY29kZXMuaWRfYmFyY29kZQojCiMgICAgICBXSEVSRSBSU19kb2NzX2JhcmNvZGVzLmlkX2RvYyA9IDppZF9kb2MgQU5EIGlkX2JhcmNvZGUgPSA6aWRfYmFyY29kZSkgQVMgVGVtcF9xdWVyeQojCiMgIExFRlQgSk9JTiBSU19nb29kcwojICAgICBPTiBSU19nb29kcy5pZD1UZW1wX3F1ZXJ5LmlkX2dvb2QKIyAgICAgTEVGVCBKT0lOIFJTX3Byb3BlcnRpZXMKIyAgICAgT04gUlNfcHJvcGVydGllcy5pZCA9IFRlbXBfcXVlcnkuaWRfcHJvcGVydGllcwojICAgICBMRUZUIEpPSU4gUlNfc2VyaWVzCiMgICAgIE9OIFJTX3Nlcmllcy5pZCA9IFRlbXBfcXVlcnkuaWRfc2VyaWVzCiMgICAgIExFRlQgSk9JTiBSU191bml0cwojICAgICBPTiBSU191bml0cy5pZD1UZW1wX3F1ZXJ5LmlkX3VuaXQKIyAgICAgJycnCgoKZGVmIGdldF9iYXJjb2RlX3F1ZXJ5KCkgLT4gc3RyOgogICAgcmV0dXJuICcnJwogICAgV2l0aCBiYXJjIGFzICgKU0VMRUNUIApiYXJjb2RlLAppZF9nb29kLApSU19nb29kcy50eXBlX2dvb2QsCmlkX3Byb3BlcnR5LAppZF9zZXJpZXMsCmlkX3VuaXQsCnJhdGlvCiBGUk9NIFJTX2JhcmNvZGVzIAogTGVmdCBKb2luIFJTX2dvb2RzCiBPTiBSU19iYXJjb2Rlcy5pZF9nb29kID0gUlNfZ29vZHMuaWQKV0hFUkUgYmFyY29kZSA9ID8pCgpTZWxlY3QgKiBGcm9tIGJhcmMKTGVmdCBKT0lOIFJTX3R5cGVzX2dvb2RzCk9OIFJTX3R5cGVzX2dvb2RzLmlkID0gYmFyYy50eXBlX2dvb2QKCicnJwoKCmRlZiBnZXRfbWFya19xdHR5X2NvbmZvcm1pdHkoKToKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCBpZm51bGwoZG9jX3RhYmxlLnF0dHlfcGxhbiwwKSAtIGlmbnVsbCh0bXAucXR0eV9vZl9tYXJrLDApICBGUk9NIAoKICAgIChTRUxFQ1QgcXR0eV9wbGFuCiAgICBGUk9NIFJTX2RvY3NfdGFibGUKICAgIFdIRVJFIAogICAgaWRfZG9jID0gOmlkRG9jIAogICAgQU5EIGlkX2dvb2QgPSA6aWRfZ29vZAogICAgQU5EIGlkX3Byb3BlcnRpZXMgPSA6aWRfcHJvcGVydGllcwogICAgQU5EIGlkX3NlcmllcyA9IDppZF9zZXJpZXMKICAgICkgQXMgZG9jX3RhYmxlICAtLUFORCBpZF91bml0ID0gOmlkX3VuaXQKICAgICAgIExFRlQgSk9JTiAoU0VMRUNUIENvdW50KGlkX2JhcmNvZGUpIEFzIHF0dHlfb2ZfbWFyawogICAgICAgIEZST00gUlNfZG9jc19iYXJjb2RlcyAKICAgICAgICBXSEVSRSBpZF9kb2M9OmlkRG9jIAogICAgICAgIEFORCBpZF9iYXJjb2RlIExJa2UgOmJhcmNvZGUgQU5EIGFwcHJvdmVkID0gOmFwcHJvdmVkKSBBcyB0bXAKICAgICAgICBPTiBUUlVFCiAgICAnJycKCgpkZWYgZ2V0X3BsYW5fZ29vZF9mcm9tX2RvYygpOgogICAgcmV0dXJuICcnJwoKICAgIFNFTEVDVCBpZm51bGwocXR0eV9wbGFuLDApIGFzIHF0dHlfcGxhbiwKICAgIGlmbnVsbChxdHR5LDApIGFzIHF0dHksIGlkX2dvb2QKICAgIEZST00gUlNfZG9jc190YWJsZQogICAgV0hFUkUgCiAgICBpZF9kb2MgPSA6aWREb2MgCiAgICBBTkQgaWRfZ29vZCA9IDppZF9nb29kCiAgICBBTkQgaWRfcHJvcGVydGllcyA9IDppZF9wcm9wZXJ0aWVzCiAgICBBTkQgaWRfc2VyaWVzID0gOmlkX3NlcmllcwogICAgLS1BTkQgaWRfdW5pdCA9IDppZF91bml0CiAgICAnJycKCgojICAgICAgcyA9ICAgICcnJwojICAgIHdpdGggdG1wIGFzICgKIyAgICAgU0VMRUNUIGlmbnVsbChxdHR5X3BsYW4sMCkgYXMgcXR0eV9wbGFuLAojICAgICBpZm51bGwocXR0eSwwKSBhcyBxdHR5LCBpZF9nb29kCiMgICAgIEZST00gUlNfZG9jc190YWJsZQojICAgICBXSEVSRQojICAgICBpZF9kb2MgPSA6aWREb2MKIyAgICAgQU5EIGlkX2dvb2QgPSA6aWRfZ29vZAojICAgICBBTkQgaWRfcHJvcGVydGllcyA9IDppZF9wcm9wZXJ0aWVzCiMgIC0tICAgQU5EIGlkX3NlcmllcyA9IDppZF9zZXJpZXMKIyAgLS0gICBBTkQgaWRfdW5pdCA9IDppZF91bml0CiMgICAgICkKIwojIFNlbGVjdCBzdW0ocXR0eV9wbGFuLXF0dHkpIGFzIGNvbmZvcm1pdHkgZnJvbSB0bXAKIwojCiMgICAgICcnJwoKZGVmIGdldF9xdHR5X2FkZF9tYXJrX3RleHQoKToKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCBSU19kb2NzLmFkZF9tYXJrX3NlbGVjdGlvbiBBcyBNYXJrZWQsCiAgICBUbXAuUXR0eSAKICAgIGZyb20gUlNfZG9jcyAKICAgIExlZnQgSm9pbiAoU2VsZWN0IFN1bShSU19kb2NzX3RhYmxlLnF0dHlfcGxhbikgYXMgUXR0eSBGcm9tIFJTX2RvY3NfdGFibGUgV2hlcmUgUlNfZG9jc190YWJsZS5pZF9kb2M9IDppZF9kb2MpIEFzIFRtcAogICAgT04gVHJ1ZQogICAgV0hFUkUgaWRfZG9jID0gOmlkX2RvYycnJwoKCmRlZiBnZXRfcXR0eV9zdHJpbmdfY291bnRfcXVlcnkoKToKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCBkaXN0aW5jdCBjb3VudChpZCkgYXMgY29sX3N0ciwKICAgIHN1bShpZm51bGwocXR0eV9wbGFuLDApKSBhcyBxdHR5X3BsYW4KICAgIGZyb20gUlNfZG9jc190YWJsZSBXaGVyZSBpZF9kb2MgPSA6aWRfZG9jJycnCgoKZGVmIGdldF9oYXZlX21hcmtfY29kZXNfcXVlcnkoKTogICMg0JfQsNC/0YDQvtGBINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC60L7Qu9C40YfQtdGB0YLQstC+INC60L7QtNC+0LIg0LzQsNGA0LrQuNGA0L7QstC60LggItCf0LvQsNC9IiAo0YIu0LUuINC30LDQs9GA0YPQttC10L3QvdGL0YUg0LjQtyDRg9GH0LXRgtC90L7QuQogICAgIyDRgdC40YHRgtC10LzRiykKICAgIHJldHVybiAnJycKICAgIFNFTEVDVCBkaXN0aW5jdCBjb3VudChpZCkgYXMgY29sX3N0cgogICAgZnJvbSBSU19kb2NzX2JhcmNvZGVzIFdoZXJlIGlkX2RvYyA9IDppZF9kb2MgQU5EIGlzX3BsYW4gPSA6aXNfcGxhbicnJwoKCmRlZiBnZXRfZG9jc19zdGF0X3F1ZXJ5KCk6CiAgICByZXR1cm4gJycnCiAgIHdpdGggdG1wIGFzICgKICAgIFNlbGVjdCAKICAgIGRvY190eXBlLAogICAgUlNfZG9jcy5pZF9kb2MsCiAgICAxIGFzIGRvY19Db3VudCwKICAgIGlmbnVsbChSU19kb2NzLnNlbnQsMCkgYXMgc2VudCwKICAgIGlmbnVsbCh2ZXJpZmllZCwwKSBhcyB2ZXJpZmllZCwgCiAgICBDQVNFCiAgICBXSEVOIGlmbnVsbCh2ZXJpZmllZCwwKT0wIFRIRU4gY291bnQoUlNfZG9jc190YWJsZS5pZCkKICAgIGVsc2UgMCBFTkQgYXMgY291bnRfdmVyaWZpZWQsCiAgICBDQVNFCiAgICBXSEVOIGlmbnVsbCh2ZXJpZmllZCwwKT0xIFRIRU4gY291bnQoUlNfZG9jc190YWJsZS5pZCkKICAgIGVsc2UgMCBFTkQgYXMgY291bnRfdW52ZXJpZmllZCwKICAgIENBU0UKICAgICAgICBXSEVOIGlmbnVsbCh2ZXJpZmllZCwwKT0wIFRIRU4gc3VtKFJTX2RvY3NfdGFibGUucXR0eV9wbGFuKQogICAgZWxzZSAwIEVORCBhcyBxdHR5X3BsYW5fdmVyaWZpZWQsCiAgICBDQVNFCiAgICAgICAgV0hFTiBpZm51bGwodmVyaWZpZWQsMCk9MSBUSEVOIHN1bShSU19kb2NzX3RhYmxlLnF0dHlfcGxhbikKICAgIGVsc2UgMCBFTkQgYXMgcXR0eV9wbGFuX3VudmVyaWZpZWQKICAgICBmcm9tIFJTX2RvY3MKICAgIExlZnQgSm9pbiBSU19kb2NzX3RhYmxlIAogICAgT04gUlNfZG9jc190YWJsZS5pZF9kb2MgPSBSU19kb2NzLmlkX2RvYwogICAgR3JvdXAgYnkgUlNfZG9jcy5pZF9kb2MKICAgICkKICAgU2VsZWN0IGRvY190eXBlIGFzIGRvY1R5cGUsIAogICBjb3VudChpZF9kb2MpLAogICBzdW0oZG9jX0NvdW50KSBhcyBjb3VudCwgCiAgIHN1bShzZW50KSBhcyBzZW50LCAKICAgc3VtKHZlcmlmaWVkKSBhcyB2ZXJpZmllZCwKICAgc3VtKGNvdW50X3ZlcmlmaWVkKSBhcyBjb3VudF92ZXJpZmllZCwKICAgc3VtKGNvdW50X3VudmVyaWZpZWQpIGFzIGNvdW50X3VudmVyaWZpZWQsCiAgIHN1bShxdHR5X3BsYW5fdmVyaWZpZWQpIGFzIHF0dHlfcGxhbl92ZXJpZmllZCwKICAgc3VtKHF0dHlfcGxhbl91bnZlcmlmaWVkKSBhcyBxdHR5X3BsYW5fdW52ZXJpZmllZAogICAgZnJvbSB0bXAKICAgIGdyb3VwIGJ5IGRvY190eXBlCiAgICcnJwoKCmRlZiBnZXRfZG9jX3RpbGVzKHNldHRpbmdzX2dsb2JhbCk6CgogICAgc21hbGxfdGlsZSA9IHsKICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICJvcmllbnRhdGlvbiI6ICJ2ZXJ0aWNhbCIsCiAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICJhdXRvU2l6ZVRleHRUeXBlIiA6ICJ1bmlmb3JtIiwKICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQGRvY05hbWUiLAogICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ3RpdGxlRG9jVHlwZUNhcmRUZXh0U2l6ZScpLCAjICIyNSIsCiAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMwMDAwMDAiLAogICAgICAgICAgICAgICAgIlRleHRCb2xkIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogMCwKICAgICAgICAgICAgICAgICJncmF2aXR5X2hvcml6b250YWwiOiAiY2VudGVyIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBRdHR5T2ZEb2NzIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMzMzMzMzMiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICJGRkNDOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICLQodGC0YDQvtC6OiAiLAogICAgICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiBzZXR0aW5nc19nbG9iYWwuZ2V0KCdEb2NUeXBlQ2FyZFRleHRTaXplJyksICMiMTUiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMzMzMzMzMiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICJGRkNDOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQGNvdW50X3ZlcmlmaWVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMzMzMzMzMiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICJGRkNDOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICJvcmllbnRhdGlvbiI6ICJob3Jpem9udGFsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICLQotC+0LLQsNGA0L7QsjogIiwKICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2V0dGluZ3NfZ2xvYmFsLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiMzMzMzMzMiLAogICAgICAgICAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICJGRkNDOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogMAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHF0dHlfcGxhbl92ZXJpZmllZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6IHNldHRpbmdzX2dsb2JhbC5nZXQoJ0RvY1R5cGVDYXJkVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIjMzMzMzMzIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRCb2xkIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJUZXh0SXRhbGljIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiRkZDQzk5IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KCiAgICAgICAgXQogICAgfQoKICAgIHJldHVybiBzbWFsbF90aWxlCgpjbGFzcyBNb2Rlcm5GaWVsZDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoaW50PU5vbmUsIGRlZmF1bHRfdGV4dD1Ob25lLCBwYXNzd29yZD1GYWxzZSk6ICAjIGNvdW50ZXI9RmFsc2UsIGNvdW50ZXJfbWF4PU5vbmUsIGlucHV0X3R5cGU9IDEgLAogICAgICAgIHNlbGYuaGludCA9IGhpbnQKICAgICAgICBzZWxmLmRlZmF1bHRfdGV4dCA9IGRlZmF1bHRfdGV4dAogICAgICAgICNzZWxmLmNvdW50ZXIgPSBjb3VudGVyCiAgICAgICAgI3NlbGYuY291bnRlcl9tYXggPSBjb3VudGVyX21heAogICAgICAgICNzZWxmLmlucHV0X3R5cGUgPSBpbnB1dF90eXBlCiAgICAgICAgc2VsZi5wYXNzd29yZCA9IHBhc3N3b3JkCgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0ID0gewogICAgICAgICAgICAiaGludCI6IHNlbGYuaGludCwKICAgICAgICAgICAgImRlZmF1bHRfdGV4dCI6IHNlbGYuZGVmYXVsdF90ZXh0fQogICAgICAgICMgImNvdW50ZXIiOiBzZWxmLmNvdW50ZXIsCiAgICAgICAgIyAiY291bnRlcl9tYXgiOiBzZWxmLmNvdW50ZXJfbWF4LAogICAgICAgICMgImlucHV0X3R5cGUiOiBzZWxmLmlucHV0X3R5cGUsCiAgICAgICAgaWYgc2VsZi5wYXNzd29yZDoKICAgICAgICAgICAgcmV0WyJwYXNzd29yZCJdID0gc2VsZi5wYXNzd29yZAoKICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhyZXQpCgoKIyBodHRwX3NldHRpbmdzID0geyd1cmwnOicxOTInLCAndXNlcic6J0FNRCcsICdwYXNzJzonMTIzJ30KIyBwcmludChNb2Rlcm5GaWVsZChoaW50PSd1cmwnLCBkZWZhdWx0X3RleHQ9aHR0cF9zZXR0aW5nc1sndXJsJ10sIHBhc3N3b3JkPUZhbHNlKS50b19qc29uKCkpCiMgcHJpbnQoTW9kZXJuRmllbGQoaGludD0ndXNlcicsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWyd1c2VyJ10sIHBhc3N3b3JkPUZhbHNlKS50b19qc29uKCkpCiMgcHJpbnQoTW9kZXJuRmllbGQoaGludD0ncGFzcycsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWydwYXNzJ10sIHBhc3N3b3JkPVRydWUpLnRvX2pzb24oKSk="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_global.py",
                "PyFileKey": "ui_global",
                "PyFileData": "ZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IGNvbGxlY3Rpb25zCmltcG9ydCBzcWxpdGUzCmZyb20gc3FsaXRlMyBpbXBvcnQgRXJyb3IKaW1wb3J0IHVpX2JhcmNvZGVzCmltcG9ydCBvcwppbXBvcnQgdWlfZm9ybV9kYXRhCmltcG9ydCBxdWV1ZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCgoKcXVlcnlfbGlzdCA9IHF1ZXVlLlF1ZXVlKCkKIyDQktC+0YIg0YLQsNC60LjQvCDQvdC10LfQsNGC0LXQudC70LjQstGL0Lwg0LzQtdGC0L7QtNC+0Lwg0L7Qv9GA0LXQtNC10LvRj9C10LwsINC80Ysg0LfQsNC/0YPRgdGC0LjQu9C40YHRjCDQvdCwINC60L7QvNC/0LUg0LjQu9C4INC90LAg0KLQodCUICoqCiMg0J3RgyDQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIsINC40YHQv9C+0LvRjNC30YPQtdC8INCx0LDQt9GDICoqKioKaWYgb3MucGF0aC5leGlzdHMoJy8vZGF0YS9kYXRhL3J1LnRyYXZlbGZvb2Quc2ltcGxlX3VpL2RhdGFiYXNlcy8nKTogI9C70L7QutCw0LvRjNC90L4KICAgIGRiX3BhdGggPSAnLy9kYXRhL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvZGF0YWJhc2VzL1NpbXBsZUtlZXAnICAjIHJpZ2h0c2NhbicKZWxzZToKICAgIGRiX3BhdGggPSAncmlnaHRzY2FuNS5kYicgICMgRDpcUHl0aG9uUHJvamVjdHNcUmlnaHRTY2FuXFNVSV9ub1BvbnlcCgpjb25uID0gTm9uZQoKCgpkZWYgZmluZF9iYXJjb2RlX2luX21hcmtpbmdfY29kZXNfdGFibGUoc2VsZiwgc3RydWN0X2JhcmNvZGU6IGxpc3QpOgogICAgIiIi0KTRg9C90LrRhtC40Y8g0L/QvtC70YPRh9Cw0LXRgiDRgdGC0YDQvtC60Lgg0LzQsNGA0LrQuNGA0L7QstC60Lgg0LTQvtC60YPQvNC10L3RgtCwINC/0L4g0LfQvdCw0YfQtdC90LjRjiDQvNCw0YDQutC40YDQvtCy0LrQuCIiIgoKICAgIHF1ZXJ5X3RleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X3F1ZXJ5X21hcmtfZmluZF9pbl9kb2MoKQogICAgYXJnc19kaWN0ID0ge30KICAgIGFyZ3NfZGljdFsnR1RJTiddID0gc3RydWN0X2JhcmNvZGVbJ0dUSU4nXQogICAgYXJnc19kaWN0WydTZXJpZXMnXSA9IHN0cnVjdF9iYXJjb2RlWydTRVJJQUwnXQogICAgYXJnc19kaWN0WydpZF9kb2MnXSA9IHNlbGYuaWRfZG9jCgogICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCBhcmdzX2RpY3QsIFRydWUpCiAgICByZXR1cm4gcmVzCgoKZGVmIGZpbmRfYmFyY29kZV9pbl9iYXJjb2RlX3RhYmxlKGJhcmNvZGU6IHN0cik6CiAgICBxdWVyeV90ZXh0ID0gdWlfZm9ybV9kYXRhLmdldF9iYXJjb2RlX3F1ZXJ5KCkKICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKGJhcmNvZGUsKSwgVHJ1ZSkKICAgIHJldHVybiByZXMKCgpkZWYgY2hlY2tfYmFyY29kZV9jb21wbGlhbmNlKGVsX2RpY3Q6IGRpY3QsIGlkX2RvYyk6CiAgICAiIiIgMSDQotCw0LrQvtC5INGC0L7QstCw0YAg0LIg0L/RgNC40L3RhtC40L/QtSDQtdGB0YLRjCDQsiDQtNC+0LrRg9C80LXQvdGC0LUgIiIiCgogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfcGxhbl9nb29kX2Zyb21fZG9jKCkKICAgIGFyZ3NfZGljdCA9IHt9CiAgICBhcmdzX2RpY3RbJ2lkRG9jJ10gPSBpZF9kb2MKICAgIGFyZ3NfZGljdFsnaWRfZ29vZCddID0gZWxfZGljdFsnaWRfZ29vZCddCiAgICBhcmdzX2RpY3RbJ2lkX3Byb3BlcnRpZXMnXSA9IGVsX2RpY3RbJ2lkX3Byb3BlcnR5J10KICAgIGFyZ3NfZGljdFsnaWRfc2VyaWVzJ10gPSBlbF9kaWN0WydpZF9zZXJpZXMnXQogICAgI2FyZ3NfZGljdFsnaWRfdW5pdCddID0gZWxfZGljdFsnaWRfdW5pdCddCgogICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCBhcmdzX2RpY3QsIFRydWUpCgogICAgcmV0dXJuIHJlcwoKCmRlZiBjaGVja19hZHJfYmFyY29kZV9jb21wbGlhbmNlKGVsX2RpY3Q6IGRpY3QsIGlkX2RvYyk6CiAgICAiIiIgMSDQotCw0LrQvtC5INGC0L7QstCw0YAg0LIg0L/RgNC40L3RhtC40L/QtSDQtdGB0YLRjCDQsiDQtNC+0LrRg9C80LXQvdGC0LUgIiIiCgogICAgcXVlcnlfdGV4dCA9ICAnJycKICAgIFNFTEVDVCBpZm51bGwocXR0eV9wbGFuLDApIGFzIHF0dHlfcGxhbiwKICAgIGlmbnVsbChxdHR5LDApIGFzIHF0dHksIGlkX2dvb2QKICAgIEZST00gUlNfYWRyX2RvY3NfdGFibGUKICAgIFdIRVJFIAogICAgaWRfZG9jID0gOmlkRG9jIAogICAgQU5EIGlkX2dvb2QgPSA6aWRfZ29vZAogICAgQU5EIGlkX3Byb3BlcnRpZXMgPSA6aWRfcHJvcGVydGllcwogICAgQU5EIGlkX3NlcmllcyA9IDppZF9zZXJpZXMKICAgIEFORCBpZF9jZWxsID0gOmlkX2NlbGwgb3IgaWRfY2VsbCA9ICIiIE9SIGlkX2NlbGwgaXMgTnVsbAogICAgJycnCiAgICBhcmdzX2RpY3QgPSB7fQogICAgYXJnc19kaWN0WydpZERvYyddID0gaWRfZG9jCiAgICBhcmdzX2RpY3RbJ2lkX2dvb2QnXSA9IGVsX2RpY3RbJ2lkX2dvb2QnXQogICAgYXJnc19kaWN0WydpZF9wcm9wZXJ0aWVzJ10gPSBlbF9kaWN0WydpZF9wcm9wZXJ0eSddCiAgICBhcmdzX2RpY3RbJ2lkX3NlcmllcyddID0gZWxfZGljdFsnaWRfc2VyaWVzJ10KICAgIGFyZ3NfZGljdFsnaWRfY2VsbCddID0gZWxfZGljdFsnaWRfY2VsbCddCiAgICAjYXJnc19kaWN0WydpZF91bml0J10gPSBlbF9kaWN0WydpZF91bml0J10KCiAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsIGFyZ3NfZGljdCwgVHJ1ZSkKCiAgICByZXR1cm4gcmVzCiMKCgpkZWYgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0OiBzdHIsIGFyZ3MgPSAiIiwgcmV0dXJuX2RpY3Q9RmFsc2UpIC0+IGxpc3Q6CiAgICAjICoqKioqKioqKioqKioqKioqKioqKioKCiAgICAjIGdsb2JhbCBjb25uCiAgICAjIGdldF9kYXRhYmFzZV9jb25uZWN0aW9uKCkKICAgIHRyeToKICAgICAgICBjb25uID0gc3FsaXRlMy5jb25uZWN0KGRiX3BhdGgpCgogICAgZXhjZXB0IEVycm9yOgoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdObyBjb25uZWN0aW9uIHdpdGggZGF0YWJhc2UnKQoKICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkKICAgIHRyeToKICAgICAgICBpZiBhcmdzOgogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZShxdWVyeV90ZXh0LCBhcmdzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5X3RleHQpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2UgZQoKICAgICMg0JXRgdC70Lgg0L3QsNC00L4gLSDQstC+0LfQstGA0LDRidCw0LXQvCDQvdC1INGA0LXQt9GD0LvRjNGC0LDRgiDQt9Cw0L/RgNC+0YHQsCwg0LAg0YHQu9C+0LLQsNGA0Ywg0YEg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNC90L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtC+0LwKICAgIGlmIHJldHVybl9kaWN0OgogICAgICAgIHJlcyA9IFtkaWN0KGxpbmUpIGZvciBsaW5lIGluCiAgICAgICAgICAgICAgIFt6aXAoW2NvbHVtblswXSBmb3IgY29sdW1uIGluIGN1cnNvci5kZXNjcmlwdGlvbl0sIHJvdykgZm9yIHJvdyBpbiBjdXJzb3IuZmV0Y2hhbGwoKV1dCiAgICBlbHNlOgogICAgICAgIHJlcyA9IGN1cnNvci5mZXRjaGFsbCgpCiAgICBjb25uLmNvbW1pdCgpCiAgICBjb25uLmNsb3NlKCkKICAgIHJldHVybiByZXMKCgpkZWYgZXhlY3V0ZV9zY3JpcHQocXVlcnlfdGV4dCk6CiAgICAjIGdsb2JhbCBjb25uICAjID0gTm9uZQogICAgIyBnZXRfZGF0YWJhc2VfY29ubmVjdGlvbigpCiAgICB0cnk6CiAgICAgICAgY29ubiA9IHNxbGl0ZTMuY29ubmVjdChkYl9wYXRoKQoKICAgIGV4Y2VwdCBFcnJvcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdObyBjb25uZWN0aW9uIHdpdGggZGF0YWJhc2UnKQoKICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkKICAgIHRyeToKICAgICAgICBjdXJzb3IuZXhlY3V0ZXNjcmlwdChxdWVyeV90ZXh0KQogICAgICAgIGNvbm4uY29tbWl0KCkKICAgIGV4Y2VwdCBzcWxpdGUzLkVycm9yIGFzIGVyOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZXIpCiAgICBjb25uLmNsb3NlKCkKCgpkZWYgYnVsa19xdWVyeV9yZXBsYWNlKHF1ZXJ5X3RleHQ6IHN0ciwgYXJnczogb2JqZWN0ID0gIiIpIC0+IG9iamVjdDoKICAgICMgKioqKioqKioqKioqKioqKioqKioqKgogICAgIyBnbG9iYWwgY29ubgogICAgIyBnZXRfZGF0YWJhc2VfY29ubmVjdGlvbigpCiAgICBjb25uID0gTm9uZQogICAgdHJ5OgogICAgICAgIGNvbm4gPSBzcWxpdGUzLmNvbm5lY3QoZGJfcGF0aCkKCiAgICBleGNlcHQgRXJyb3I6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcignTm8gY29ubmVjdGlvbiB3aXRoIGRhdGFiYXNlJykKCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpCiAgICB0cnk6CiAgICAgICAgaWYgYXJnczoKICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGVtYW55KHF1ZXJ5X3RleHQsIGFyZ3MpCgogICAgICAgIGNvbm4uY29tbWl0KCkKICAgIGV4Y2VwdCBzcWxpdGUzLkVycm9yIGFzIGVyOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZXIpCgogICAgcmVzID0gY3Vyc29yLmZldGNoYWxsKCkKCiAgICBjb25uLmNsb3NlKCkKICAgIHJldHVybiByZXMKCgpkZWYgYnVsa19xdWVyeShxOiBzdHIsIGFyZ3M6IExpc3RbdHVwbGVdKToKICAgIHRyeToKICAgICAgICBjb25uID0gc3FsaXRlMy5jb25uZWN0KGRiX3BhdGgpCiAgICBleGNlcHQgc3FsaXRlMy5FcnJvcjoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCdObyBjb25uZWN0aW9uIHdpdGggZGF0YWJhc2UnKQoKICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkKCiAgICB0cnk6CiAgICAgICAgY3Vyc29yLmV4ZWN1dGVtYW55KHEsIGFyZ3MpCiAgICAgICAgY29ubi5jb21taXQoKQogICAgZXhjZXB0IHNxbGl0ZTMuRXJyb3IgYXMgZXI6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihlcikKCiAgICBjb25uLmNsb3NlKCkKCmRlZiBnZXRfbmFtZV9saXN0KHN0cl9lbnR0eSk6CiAgICBxdWVyeSA9ICJTRUxFQ1QgbmFtZSBGUk9NICIgKyBzdHJfZW50dHkKICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnkpCiAgICBsaXN0X2VsID0gW10KICAgICMgbGlzdF9lbC5hcHBlbmQobmFtZSBmb3IgbmFtZSBpbiByZXMpCiAgICBmb3IgZWwgaW4gcmVzOgogICAgICAgIGxpc3RfZWwuYXBwZW5kKGVsWzBdKQogICAgcmV0dXJuICI7Ii5qb2luKGxpc3RfZWwpCgoKZGVmIGdldF9ieV9uYW1lKGZsZCwgdGFibGUpOgogICAgcXVlcnkgPSAiU0VMRUNUIGlkIEZST00gIiArIHRhYmxlICsgJyBXSEVSRSBuYW1lID0gPycKICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChmbGQsKSkKCiAgICBpZiBsZW4ocmVzKSA9PSAwOgogICAgICAgIHJldHVybiAiIgogICAgZWxzZToKICAgICAgICByZXR1cm4gcmVzWzBdWzBdCgoKZGVmIElkX3RvX0hFWChndWlkKToKICAgIHgxID0gZ3VpZFsxOToyM10KICAgIHgyID0gZ3VpZFsyNDogMzZdCiAgICB4MyA9IGd1aWRbMTQ6IDE4XQogICAgeDQgPSBndWlkWzk6MTNdCiAgICB4NSA9IGd1aWRbMDogOF0KCiAgICBzdHJfZ3VpZCA9IHgxICsgeDIgKyB4MyArIHg0ICsgeDUKICAgIHJldHVybiBpbnQoc3RyX2d1aWQsIDE2KQoKIwpjbGFzcyBSc19kb2MoKToKICAgIGlkX2RvYyA9ICcnICAjIHN0cikKICAgIGlkX3N0ciA9ICcnICAjIHN0cikKICAgIHF0dHkgPSAnJyAgIyBzdHIpCgogICAgZGVmIHVwZGF0ZV9kb2Nfc3RyKHNlbGYsIHByaWNlPTApOgogICAgICAgIHF1ZXJ5ID0gIiIiCiAgICAgICAgVVBEQVRFIFJTX2RvY3NfdGFibGUKICAgICAgICBTRVQgcXR0eT0/LCBwcmljZT0/CiAgICAgICAgV2hlcmUgaWQ9PyAiIiIKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoc2VsZi5xdHR5LCBwcmljZSwgc2VsZi5pZF9zdHIpKQogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmKToKICAgICAgICBxdWVyeV9kb2NfdGFibGUgPSAnREVMRVRFIEZST00gUlNfZG9jc190YWJsZSBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jX3RhYmxlLCAoc2VsZi5pZF9kb2MsKSkKICAgICAgICBxdWVyeV9kb2NfdGFibGUgPSAnREVMRVRFIEZST00gUlNfZG9jc19iYXJjb2RlcyBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jX3RhYmxlLCAoc2VsZi5pZF9kb2MsKSkKICAgICAgICBxdWVyeV9kb2MgPSAnREVMRVRFIEZST00gUlNfZG9jcyBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jLCAoc2VsZi5pZF9kb2MsKSkKCiAgICAgICAgcmV0dXJuIHJlcwogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmKToKICAgICAgICBxdWVyeV90ZXh0ID0gKCdVcGRhdGUgUlNfZG9jc19iYXJjb2RlcyBTZXQgYXBwcm92ZWQgPSAwIFdoZXJlIGlkX2RvYz06aWRfZG9jJywKICAgICAgICAnRGVsZXRlIEZyb20gUlNfZG9jc19iYXJjb2RlcyBXaGVyZSAgaWRfZG9jPTppZF9kb2MgQW5kIGlzX3BsYW4gPSAwJywKICAgICAgICAnVXBkYXRlIFJTX2RvY3NfdGFibGUgU2V0IHF0dHkgPSAwIFdoZXJlIGlkX2RvYz06aWRfZG9jJywKICAgICAgICAnRGVsZXRlIEZyb20gUlNfZG9jc190YWJsZSBXaGVyZSBpZF9kb2M9OmlkX2RvYyBhbmQgaXNfcGxhbiA9ICJGYWxzZSInKQogICAgICAgIGZvciBlbCBpbiBxdWVyeV90ZXh0OgogICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KGVsLCAoeydpZF9kb2MnOnNlbGYuaWRfZG9jfSkpCgogICAgZGVmIG1hcmtfZm9yX3VwbG9hZChzZWxmKToKICAgICAgICBxdWVyeSA9ICIiIgogICAgICAgIFVQREFURSBSU19kb2NzX3RhYmxlCiAgICAgICAgU0VUIHNlbnQ9MQogICAgICAgIFdoZXJlIGlkPT8gIiIiCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYuaWRfZG9jKSkKCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBtYXJrX3ZlcmlmaWVkKHNlbGYsIGtleSk6CiAgICAgICAgcXVlcnkgPSAiIiIKICAgICAgICAgICAgICAgIFVQREFURSBSU19kb2NzCiAgICAgICAgICAgICAgICBTRVQgdmVyaWZpZWQ9PwogICAgICAgICAgICAgICAgV2hlcmUgaWRfZG9jPT8gIiIiCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKGludChrZXkpLCBzZWxmLmlkX2RvYykpCgogICAgZGVmIGZpbmRfYmFyY29kZV9pbl90YWJsZShzZWxmLCBzZWFyY2hfdmFsdWU6IHN0ciwgZnVuY19jb21wYXJlZD0nPT8nKSAtPiBsaXN0OgoKICAgICAgICBxdWVyeSA9ICcnJwogICAgICAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQsCiAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZCwKICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLnF0dHkgICAgICAgIAogICAgICAgICAgICAgICAgIEZST00gUlNfYmFyY29kZXMKICAgICAgICAgICAgICAgICBMZWZ0IGpvaW4gUlNfZG9jc190YWJsZSBPTgogICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZ29vZD0gUlNfYmFyY29kZXMuaWRfZ29vZCBhbmQKICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXM9IFJTX2JhcmNvZGVzLmlkX3Byb3BlcnR5IGFuZAogICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfdW5pdD0gUlNfYmFyY29kZXMuaWRfdW5pdCBBbmQKICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX2RvYz0/CiAgICAgICAgICAgICAgICAgd2hlcmUgYmFyY29kZSAnJycgKyBmdW5jX2NvbXBhcmVkCiAgICAgICAgIyBxdWVyeSA9IHF1ZXJ5ICsgZnVuY19jb21wYXJlZAoKICAgICAgICByZXR1cm4gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYuaWRfZG9jLCBzZWFyY2hfdmFsdWUpLCBUcnVlKQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fbWFya190YWJsZShzZWxmLCBzZWFyY2hfdmFsdWU6IHN0ciwgZnVuY19jb21wYXJlZD0nPT8nKSAtPiBvYmplY3Q6CiAgICAgICAgcXVlcnkgPSAnJycKICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX21hcmtpbmdfY29kZXMuaWRfZ29vZCwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9wcm9wZXJ0eSwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfbWFya2luZ19jb2Rlcy5pZF9zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX21hcmtpbmdfY29kZXMuaWRfdW5pdCwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgUlNfZG9jc190YWJsZS5xdHR5ICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBSU19tYXJraW5nX2NvZGVzCiAgICAgICAgICAgICAgICAgICAgICAgIExlZnQgam9pbiBSU19kb2NzX3RhYmxlIE9OCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfZ29vZD0gUlNfbWFya2luZ19jb2Rlcy5pZF9nb29kIGFuZAogICAgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX3Byb3BlcnRpZXM9IFJTX21hcmtpbmdfY29kZXMuaWRfcHJvcGVydHkgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgIFJTX2RvY3NfdGFibGUuaWRfdW5pdD0gUlNfbWFya2luZ19jb2Rlcy5pZF91bml0IEFuZAogICAgICAgICAgICAgICAgICAgICAgICBSU19kb2NzX3RhYmxlLmlkX2RvYz0/CiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlIG1hcmtfY29kZSAgJycnICsgZnVuY19jb21wYXJlZAogICAgICAgICMgcXVlcnkgPSBxdWVyeSArIGZ1bmNfY29tcGFyZWQKCiAgICAgICAgcmV0dXJuIGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChzZWxmLmlkX2RvYywgc2VhcmNoX3ZhbHVlKSwgVHJ1ZSkKCiAgICBkZWYgdXBkYXRlX2RvY190YWJsZV9kYXRhKHNlbGYsIGVsZW1fZm9yX2FkZDogZGljdCwgcXR0eT0xLCB1c2VyX3Rtej0wKToKCiAgICAgICAgIyDQodC90LDRh9Cw0LvQsCDQvtC/0YDQtdC00LXQu9C40LwsINC10YHRgtGMINC70Lgg0LIg0YHQv9C40YHQutC1INGC0L7QstCw0YDQvtCyINC00L7QutGD0LzQtdC90YLQsCDQvdCw0Ygg0YLQvtCy0LDRgDoKICAgICAgICBxdGV4dCA9ICdTZWxlY3QgKiBmcm9tIFJTX2RvY3NfdGFibGUgV2hlcmUgaWRfZG9jPT8gYW5kIGlkX2dvb2QgPSA/IGFuZCBpZF9wcm9wZXJ0aWVzID0gPyBhbmQgaWRfc2VyaWVzID0gPyAnICNhbmQgaWRfdW5pdCA9ID8KICAgICAgICBhcmdzID0gKHNlbGYuaWRfZG9jLCBlbGVtX2Zvcl9hZGRbJ2lkX2dvb2QnXSwgZWxlbV9mb3JfYWRkWydpZF9wcm9wZXJ0eSddLCBlbGVtX2Zvcl9hZGRbJ2lkX3NlcmllcyddKSAjLGVsZW1fZm9yX2FkZFsnaWRfdW5pdCddCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgYXJncywgVHJ1ZSkKICAgICAgICBpZiByZXM6ICAjINCd0LDRiNC70Lgg0YHRgtGA0L7QutC4INC00L7QutGD0LzQtdC90YLQsCwg0LTQvtCx0LDQstC70Y/QtdC8INC60L7Qu9C40YfQtdGB0YLQstC+CgogICAgICAgICAgICBlbCA9IHJlc1swXQogICAgICAgICAgICAjIGlmIGVsWydxdHR5J10rcXR0eSA9PSAwOgogICAgICAgICAgICAjICAgICBxdGV4dCA9ICdERUxFVEUgRlJPTSBSU19kb2NzX3RhYmxlICBXSEVSRSBpZCA9ID8nCiAgICAgICAgICAgICMgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChlbFsnaWQnXSwpKQogICAgICAgICAgICAjIGVsc2U6CiAgICAgICAgICAgIHF0ZXh0ID0gJ1VQREFURSBSU19kb2NzX3RhYmxlIFNFVCBxdHR5PXF0dHkrPywgbGFzdF91cGRhdGVkID0gPywgc2VudCA9IDAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICBjdXJyZW50X3RpbWVfdXRjXzAgPSAoZGF0ZXRpbWUubm93KCkgLSB0aW1lZGVsdGEoaG91cnM9dXNlcl90bXopKS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKQogICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAocXR0eSwgY3VycmVudF90aW1lX3V0Y18wLCBlbFsnaWQnXSkpCiAgICAgICAgZWxzZTogICMg0KLQsNC60L7QuSDRgdGC0YDQvtC60Lgg0L3QtdGCLCDQvdCw0LTQviDQtNC+0LHQsNCy0LjRgtGMCiAgICAgICAgICAgIHF0ZXh0ID0gJ1JFUExBQ0UgSU5UTyBSU19kb2NzX3RhYmxlKGlkX2RvYywgaWRfZ29vZCwgaWRfcHJvcGVydGllcyxpZF9zZXJpZXMsIGlkX3VuaXQsIHF0dHksIHByaWNlLCBpZF9wcmljZSwgaXNfcGxhbiwgc2VudCkgVkFMVUVTICg/LD8sPyw/LD8sPyw/LD8sPyw/KScKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKAogICAgICAgICAgICAgICAgc2VsZi5pZF9kb2MsIGVsZW1fZm9yX2FkZFsnaWRfZ29vZCddLCBlbGVtX2Zvcl9hZGRbJ2lkX3Byb3BlcnR5J10sIGVsZW1fZm9yX2FkZFsnaWRfc2VyaWVzJ10sCiAgICAgICAgICAgICAgICBlbGVtX2Zvcl9hZGQuZ2V0KCdpZF91bml0JyksIHF0dHksIDAsICcnLCAnRmFsc2UnLCAwKSkKCiAgICAgICAgcmV0dXJuIHJlcwoKICAgICMg0KTRg9C90LrRhtC40Y8g0LTQvtCx0LDQstC70Y/QtdGCINGB0YLRgNC+0LrRgyDQsiDQvNCw0YDQutC40YDQvtCy0LrRgyDQtNC+0LrRg9C80LXQvdGC0LAg0L3QsCDQvtGB0L3QvtCy0LDQvdC40Lgg0LHQsNGA0LrQvtC00LAgKGRhdGFNYXRyaXgpCiAgICBkZWYgYWRkX21hcmtlZF9jb2Rlc19pbl9kb2Moc2VsZiwgYmFyY29kZV9pbmZvKToKICAgICAgICBxdGV4dCA9ICdTRUxFQ1QgKiBGUk9NIFJTX21hcmtpbmdfY29kZXMgV2hlcmUgbWFya19jb2RlID0/JwogICAgICAgIHFfZG9jX3RleHQgPSAnUkVQTEFDRSBJTlRPIFJTX2RvY3NfYmFyY29kZXMgKGlkX2RvYywgaWRfYmFyY29kZSwgYmFyY29kZV9mcm9tX3NjYW5uZXIsIGlzX3BsYW4sIGFwcHJvdmVkKSBWQUxVRVMgKD8sPyw/LD8sPyknCiAgICAgICAgIyDQmNGJ0LXQvCDQutC+0LQg0LzQsNGA0LrQuNGA0L7QstC60Lgg0LIg0YLQsNCx0LvQuNGG0LUgUlNfbWFya2luZ19jb2RlcyDQv9C+IEdUSU4g0LggU0VSSUFMCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKCcwMScgKyBiYXJjb2RlX2luZm9bJ0dUSU4nXSArICcyMScgKyBiYXJjb2RlX2luZm9bJ1NFUklBTCddLCksIFRydWUpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgICAjINCd0LDRiNC70Lgg0YLQsNC60L7QuSDQsdCw0YDQutC+0LQg0LIg0YHQv9C40YHQutC1INC80LDRgNC60LjRgNC+0LLQutC4LCDQt9Cw0L/QvtC70L3Rj9C10Lwg0YHRgtGA0L7QutGDINC80LDRgNC60LjRgNC+0LLQutC4INC00L7QutGD0LzQtdC90YLQsAoKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxX2RvY190ZXh0LCAoc2VsZi5pZF9kb2MsIHJlc1swXVsnaWQnXSwgYmFyY29kZV9pbmZvWydGdWxsQmFyY29kZSddLCAnMCcsICcxJyksIFRydWUpCiAgICAgICAgICAgIHJldHVybiByZXNbMF0KICAgICAgICBlbHNlOiAgIyDQndC1INC90LDRiNC70LggLSDQv9GA0L7QsdGD0LXQvCDQuNGB0LrQsNGC0Ywg0L/QviBHVElOINCyINGC0LDQsdC70LjRhtC1INCx0LDRgNC60L7QtNC+0LIKICAgICAgICAgICAgcmVzID0gc2VsZi5maW5kX2JhcmNvZGVfaW5fbWFya190YWJsZShzZWxmLCAnMDEnICsgYmFyY29kZV9pbmZvWydHVElOJ10gKyAnJScsICdMaWtlID8nKQogICAgICAgICAgICBpZiByZXM6ICAjINCd0LDRiNC70Lgg0L/QviBHVElOLCDQt9Cw0L/QvtC70L3Rj9C10Lwg0LTQvtC60YPQvNC10L3RggogICAgICAgICAgICAgICAgZWwgPSByZXNbMF0KICAgICAgICAgICAgICAgICMg0KHQvdCw0YfQsNC70LAg0LfQsNC/0L7Qu9C90LjQvCDRgtCw0LHQu9C40YbRgyBSU19tYXJraW5nX2NvZGVzCiAgICAgICAgICAgICAgICBxdGV4dCA9ICdSRVBMQUNFIElOVE8gUlNfbWFya2luZ19jb2RlcyAoaWQsIG1hcmtfY29kZSwgaWRfZ29vZCwgaWRfcHJvcGVydHksIGlkX3NlcmllcywgaWRfdW5pdCkgVkFMVUVTICg/LD8sPyw/LD8sPyknCiAgICAgICAgICAgICAgICBtYXJrX2NvZGUgPSAnMDEnICsgYmFyY29kZV9pbmZvWydHVElOJ10gKyAnMjEnICsgYmFyY29kZV9pbmZvWydTRVJJQUwnXQogICAgICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKAogICAgICAgICAgICAgICAgICAgIG1hcmtfY29kZSwgbWFya19jb2RlLCBlbFsnaWRfZ29vZCddLCBlbFsnaWRfcHJvcGVydHknXSwgZWxbJ2lkX3NlcmllcyddLCBlbFsnaWRfdW5pdCddKSkKICAgICAgICAgICAgICAgICMg0Jgg0YLQtdC/0LXRgNGMINGC0LDQsdC70LjRhtGDINC00L7QutGD0LzQtdC90YLQsCDRgdC+INGB0YHRi9C70LrQvtC5INC90LAgUlNfbWFya2luZ19jb2RlcwogICAgICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxX2RvY190ZXh0LCAoc2VsZi5pZF9kb2MsIG1hcmtfY29kZSwgYmFyY29kZV9pbmZvWydGdWxsQmFyY29kZSddLCAnMCcsICcxJykpCiAgICAgICAgICAgICAgICBlbFsnbWFya19jb2RlJ10gPSBtYXJrX2NvZGUKICAgICAgICAgICAgICAgIHJldHVybiBlbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCgogICAgZGVmIGFkZF9uZXdfYmFyY29kZV9pbl9kb2NfYmFyY29kZXNfdGFibGUoc2VsZiwgZWwsIGJhcmNvZGVfaW5mbyk6CiAgICAgICAgcXVlcnlfdGV4dCA9ICcnJwogICAgICAgIEluc2VydCBJbnRvIFJTX2RvY3NfYmFyY29kZXMgKAogICAgICAgIGlkX2RvYywKICAgICAgICBpZF9nb29kLAogICAgICAgIGlkX3Byb3BlcnR5LAogICAgICAgIGlkX3NlcmllcywKICAgICAgICBpZF91bml0LAogICAgICAgIGJhcmNvZGVfZnJvbV9zY2FubmVyLAogICAgICAgIGFwcHJvdmVkICwKICAgICAgICBHVElOLAogICAgICAgIFNlcmllcykgVkFMVUVTICg/LD8sPyw/LD8sPyw/LD8sPyknJycKICAgICAgICBhcmdzID0gKHNlbGYuaWRfZG9jLCBlbFsnaWRfZ29vZCddLGVsWydpZF9wcm9wZXJ0eSddLGVsWydpZF9zZXJpZXMnXSxlbFsnaWRfdW5pdCddLGJhcmNvZGVfaW5mb1snRnVsbENvZGUnXSwnMScsIGJhcmNvZGVfaW5mb1snR1RJTiddLCBiYXJjb2RlX2luZm9bJ1NFUklBTCddKQogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgYXJncykKCgoKICAgICMg0JXRgdGC0Ywg0L/Qu9Cw0L0g0L/QviDQutC+0LvQuNGH0LXRgdGC0LLRgyAgLSBoYXZlX3F0dHlfcGxhbgogICAgIyDQldGB0YLRjCDQv9C70LDQvSDQv9C+INGB0L/QuNGB0LrRgyDRgtC+0LLQsNGA0L7QsiBoYXZlX3plcm9fcGxhbgogICAgIyDQmtCe0L3RgtGA0L7Qu9GMINC/0LvQsNC90L7QsiDQsiDQtNC+0LrRg9C80LXQvdGC0LUgLSBjb250cm9sCiAgICAjINCV0YHRgtGMINC/0LvQsNC9INC/0L4g0LzQsNGA0LrQuNGA0YPQtdC80L7QuSDQv9GA0L7QtNGD0LrRhtC40LggaGF2ZV9tYXJrX3BsYW4KICAgIGRlZiBwcm9jZXNzX3RoZV9iYXJjb2RlKHNlbGYsIGJhcmNvZGUsIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UsIGhhdmVfemVyb19wbGFuID0gRmFsc2UsIGNvbnRyb2wgPSBGYWxzZSwgaGF2ZV9tYXJrX3BsYW4gPSBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSBOb25lLCB1c2VfbWFya19zZXR0aW5nID0gJ2ZhbHNlJywgdXNlcl90bXo9MCk6ICMgYWRkX2lmX25vdF9mb3VuZD1GYWxzZSwgYWRkX2lmX25vdF9pbl9wbGFuPUZhbHNlKToKICAgICAgICAjINCf0L7Qu9GD0YfQuNC8INGB0YLRgNGD0LrRgtGD0YDRgyDQsdCw0YDQutC+0LTQsAogICAgICAgIGlmIGJhcmNvZGVbMF0gPT0gY2hyKDI5KSBhbmQgbGVuKGJhcmNvZGUpID4gMzE6ICAjIFJlbW92ZSBmaXJzdCBHUzEgY2hhciBmcm9tIGJhcmNvZGUKICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTpdCiAgICAgICAgYmFyY29kZV9pbmZvID0gdWlfYmFyY29kZXMucGFyc2VfYmFyY29kZShiYXJjb2RlKQogICAgICAgIGlmIGJhcmNvZGVfaW5mby5fX2NvbnRhaW5zX18oJ0VSUk9SJyk6CiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ0ludmFsaWQgQmFyY29kZScsICdEZXNjcic6ICfQndC10LLQtdGA0L3Ri9C5INGI0YLRgNC40YXQutC+0LQnLAogICAgICAgICAgICAgICAgICAgICdCYXJjb2RlJzogYmFyY29kZV9pbmZvLCAnZG9jX2luZm8nOiBzZWxmLmlkX2RvY30KICAgICAgICAjIC4uLiDQuCDQvdCw0LnQtNC10Lwg0L/QviDQvdC10LzRgyDQstGB0LUg0YfRgtC+INC10YHRgtGMINCyINCx0LDQt9C1CiAgICAgICAgc2hlbWEgPSBiYXJjb2RlX2luZm9bJ1NDSEVNRSddCiAgICAgICAgaWYgc2hlbWEgaW4gWydFQU4xMycsICdVTktOT1dOJ106CiAgICAgICAgICAgIHNlYXJjaF92YWx1ZSA9IGJhcmNvZGVfaW5mb1snQkFSQ09ERSddCiAgICAgICAgZWxpZiBzaGVtYSA9PSAnR1MxJzoKICAgICAgICAgICAgc2VhcmNoX3ZhbHVlID0gYmFyY29kZV9pbmZvWydHVElOJ10KICAgICAgICBlbHNlOiAgIyAqKioqKioqKioqKioqKioqKirQodGO0LTQsCDQvNC+0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQtSDQstC40LTRiyDRiNGC0YDQuNGF0LrQvtC00L7QsiAqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICBzZWFyY2hfdmFsdWUgPSBiYXJjb2RlX2luZm9bJ0JBUkNPREUnXQoKICAgICAgICByZXMgPSBmaW5kX2JhcmNvZGVfaW5fYmFyY29kZV90YWJsZShzZWFyY2hfdmFsdWUpICAjINCY0YnQtdGCINCx0LDRgNC60L7QtCDQuNC70Lgg0JPQotCY0JjQnSDQv9C+INC+0LHRidC10Lkg0YLQsNCx0LvQuNGG0LUg0YjRgtGA0LjRhdC60L7QtNC+0LIuINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGC0L7QstCw0YAsINC10LPQviDQstC40LQsINGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60YMg0YHQtdGA0LjRjiDQuNGC0L8uCiAgICAgICAgaWYgbm90IGxlbihyZXMpID09IDA6CiAgICAgICAgICAgIGVsZW0gPSByZXNbMF0gI9CR0LXRgNC10Lwg0L/QtdGA0LLRi9C5INGA0LXQt9GD0LvRjNGC0LDRgi4g0JIg0L/RgNCw0LLQuNC70YzQvdC+0Lwg0YHQv9C40YHQutC1INGI0YLRgNC40YXQutC+0LTQvtCyINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9C+0LLRgtC+0YDQtdC90LjQuQogICAgICAgICAgICByYXRpbyA9IGVsZW1bJ3JhdGlvJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdOb3RGb3VuZCcsICdEZXNjcic6ICfQqNGC0YDQuNGF0LrQvtC0INC90LUg0L3QsNC50LTQtdC9INCyINCx0LDQt9C1JywgJ0JhcmNvZGUnOiBiYXJjb2RlfQoKICAgICAgICB1c2VfbWFyayA9IHVzZV9tYXJrX3NldHRpbmcgID09ICd0cnVlJyBhbmQgZWxlbVsndXNlX21hcmsnXSA9PSAxICNnZXRfY29uc3RhbnRzKCd1c2VfbWFyaycpCgogICAgICAgICMg0J/RgNC+0LLQtdGA0Y/QtdC8INC80LDRgNC60LjRgNC+0LLQutGDCiAgICAgICAgaWYgdXNlX21hcms6CiAgICAgICAgICAgIGlmIHNoZW1hID09ICdHUzEnOgogICAgICAgICAgICAgICAgZWxfbWFya2VkID0gTm9uZQogICAgICAgICAgICAgICAgIyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQvNCw0YDQutC40YDQvtCy0LrRgyDQuCDRgtC+0LLQsNGAINC80LDRgNC60LjRgNGD0LXRgtGB0Y8KICAgICAgICAgICAgICAgICMg0J3QsNGI0LvQuCDQsiDQtNC+0LrRg9C80LXQvdGC0LUgR1RJTiArINGB0LXRgNC40Y8KICAgICAgICAgICAgICAgIHJlcyA9IGZpbmRfYmFyY29kZV9pbl9tYXJraW5nX2NvZGVzX3RhYmxlKHNlbGYsIGJhcmNvZGVfaW5mbykKCiAgICAgICAgICAgICAgICBpZiByZXM6CiAgICAgICAgICAgICAgICAgICAgZWxfbWFya2VkID0gcmVzWzBdICPQktGL0LHQuNGA0LDQtdC8INC/0LXRgNCy0YPRjiDRgdGC0YDQvtC60YMg0LjQtyDRgdC/0LjRgdC60LAgKNC10YHQu9C4INCyINGC0LDQsdC70LjRhtC1INGI0YLRgNC40YXQutC+0LTQvtCyINC/0L7RgNGP0LTQvtC6LCDQsiDRgNC10YEg0LLRgdC10LPQtNCwINGC0L7Qu9GM0LrQviDQvtC00L3QsCDRgdGC0YDQvtC60LApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMg0J3QtSDQvdCw0YjQu9C4LCDQv9GA0L7QstC10YDRj9C10Lwg0LXRgdGC0Ywg0LvQuCDQsiDQtNC+0LrRg9C80LXQvdGC0LUg0L/Qu9Cw0L0g0Lgg0LrQvtC90YLRgNC+0LvRjAogICAgICAgICAgICAgICAgICAgIGlmIGhhdmVfbWFya19wbGFuIGFuZCBjb250cm9sOiAj0JXRgdGC0YzQn9C70LDQvdCa0J7QtNC+0LLQnNCw0YDQutC40YDQvtCy0LrQuCDQuCDQutC+0L3RgtGA0L7Qu9GMCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ05vdEZvdW5kJywgJ0Rlc2NyJzogJ9Cc0LDRgNC60LAg0L3QtSDQvdCw0LnQtNC10L3QsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdCYXJjb2RlJzogYmFyY29kZV9pbmZvLCAnZG9jX2luZm8nOiBzZWxmLmlkX2RvY30KCiAgICAgICAgICAgICAgICAjICoqKioqKioqKioqKgoKICAgICAgICAgICAgICAgIGlmIGVsX21hcmtlZCBhbmQgZWxfbWFya2VkWydpZF9nb29kJ106ICAjINC90LDRiNC70Lgg0YHRgtGA0L7QutGDINC/0L4g0L/QvtC70L3QvtC80YMg0YHQvtCy0L/QsNC00LXQvdC40Y4gR1RJTiDQuCDRgdC10YDQuNGPLCDRgdGB0YvQu9C60LAg0L3QsCDRgtC+0LLQsNGACgogICAgICAgICAgICAgICAgICAgIGlmIGVsX21hcmtlZFsnYXBwcm92ZWQnXSA9PSAnMSc6ICAjINCi0LDQutCw0Y8g0LzQsNGA0LrQsCDRg9C20LUg0LHRi9C70LAg0L7RgtGB0LrQsNC90LjRgNC+0LLQsNC90LAKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsnRXJyb3InOiAnQWxyZWFkeVNjYW5uZWQnLCAnRGVzY3InOiAn0KLQsNC60LDRjyDQvNCw0YDQutCwINGD0LbQtSDQsdGL0LvQsCDQvtGC0YHQutCw0L3QuNGA0L7QstCw0L3QsCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0JhcmNvZGUnOiBiYXJjb2RlX2luZm8sICdkb2NfaW5mbyc6IGVsX21hcmtlZH0KCiAgICAgICAgICAgICAgICAjICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdOb3RWYWxpZEJhcmNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAnRGVzY3InOiAn0KLQvtCy0LDRgCDQv9C+0LTQu9C10LbQuNGCINC80LDRgNC60LjRgNC+0LLQutC1LCDQsCDQv9C+INC90LXQvNGDINC+0YLRgdC60LDQvdC40YDQvtCy0LDQvSDQvtCx0YvRh9C90YvQuSDRiNGC0YDQuNGF0LrQvtC0JywKICAgICAgICAgICAgICAgICAgICAgICAgJ0JhcmNvZGUnOiBiYXJjb2RlfQoKICAgICAgICAj0KLQvtCy0LDRgCDQsiDRgtCw0LHQu9C40YbQtSDQtNC+0LrRg9C80LXQvdGC0LAgKNCi0L7QstCw0YAg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtSkKICAgICAgICByZXMgPSBjaGVja19iYXJjb2RlX2NvbXBsaWFuY2UoZWxlbSwgc2VsZi5pZF9kb2MpICAj0J/QvtC70YPRh9Cw0LXQvCDRgdGC0YDQvtC60YMg0YLQsNCx0LvQuNGG0Ysg0YLQvtCy0LDRgNGLINC00L7QutGD0LzQtdC90YLQsAogICAgICAgIGlmIHJlczogI9Ci0L7QstCw0YAg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtQogICAgICAgICAgICBpZiBoYXZlX3F0dHlfcGxhbjogI9CV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMKICAgICAgICAgICAgICAgIGlmIHJlc1swXVsncXR0eV9wbGFuJ10gPCByZXNbMF1bJ3F0dHknXSArIHJhdGlvOiAj0JrQvtC70LjRh9C10YHRgtCy0L4g0YLQvtCy0LDRgNCwINCyINC00L7QutGD0LzQtdC90YLQtSDRg9C20LUg0L3QsNCx0YDQsNC90L4sINC4INC80Ysg0L/RgNC10LLRi9GI0LDQtdC8INC/0LvQsNC9CiAgICAgICAgICAgICAgICAgICAgaWYgY29udHJvbDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsnUmVzdWx0JzogZifQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C70LDQvSDQsdGD0LTQtdGCINC/0YDQtdCy0YvRiNC10L3QviDQv9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgge3N0cihyYXRpbyl9INC10LTQuNC90LjRhiDRgtC+0LLQsNGA0LAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFcnJvcic6ICdRdWFudGl0eVBsYW5SZWFjaGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFyY29kZSc6IGJhcmNvZGUsICdEZXNjcic6IGYn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LHRg9C00LXRgiDQv9GA0LXQstGL0YjQtdC90L4g0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4IHtzdHIocmF0aW8pfSDQtdC00LjQvdC40YYg0YLQvtCy0LDRgNCwJ30KCiAgICAgICAgZWxzZTogI9Ci0L7QstCw0YAg0L3QtSDQvdCw0LnQtNC10L0g0LIg0LTQvtC60YPQvNC10L3RgtC1CiAgICAgICAgICAgIGlmIGhhdmVfemVyb19wbGFuIGFuZCBjb250cm9sOgogICAgICAgICAgICAgICAgcmV0dXJuIHsnUmVzdWx0JzogJ9CSINC00LDQvdC90YvQuSDQtNC+0LrRg9C80LXQvdGCINC90LXQu9GM0LfRjyDQtNC+0LHQsNCy0LjRgtGMINGC0L7QstCw0YAg0L3QtSDQuNC3INGB0L/QuNGB0LrQsCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdFcnJvcic6ICdaZXJvX3BsYW5fZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAnYmFyY29kZSc6IGJhcmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICdEZXNjcic6ICfQkiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQvdC10LvRjNC30Y8g0LTQvtCx0LDQstC40YLRjCDRgtC+0LLQsNGAINC90LUg0LjQtyDRgdC/0LjRgdC60LAnfQoKCiAgICAgICAgIyDQkdC70L7QuiDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgtC+0LLQsNGA0LAg0LIg0LTQvtC60YPQvNC10L3RggogICAgICAgIGlmIHVzZV9tYXJrOgogICAgICAgICAgICAjINCU0L7QsdCw0LLQu9GP0LXQvCDRgtC+0LLQsNGAINCyINGC0LDQsdC70LjRhtGDINC80LDRgNC60LjRgNC+0LLQutC4CiAgICAgICAgICAgIGlmIGVsX21hcmtlZCBhbmQgZWxfbWFya2VkWydpZF9nb29kJ106ICPQotC+0LLQsNGAINCx0YvQuyDQvdCw0LnQtNC10L0sINGC0L7Qu9GM0LrQviDQvtCx0L3QvtCy0LvRj9C10Lwg0YPQttC1INC90LDQudC00LXQvdC90YPRjiDRgdGC0YDQvtC60YMKICAgICAgICAgICAgICAgIHF1ZXJ5X3RleHQgPSAnVXBkYXRlICBSU19kb2NzX2JhcmNvZGVzIFNFVCBhcHByb3ZlZD0/LCBiYXJjb2RlX2Zyb21fc2Nhbm5lcj0/IFdoZXJlIGlkPT8nCiAgICAgICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X3RleHQsICgnMScsIGJhcmNvZGUsIGludChlbF9tYXJrZWRbJ2lkJ10pKSkKICAgICAgICAgICAgZWxzZTogI9CU0L7QsdCw0LLQu9GP0LXQvCDQvdC+0LLRg9GOINGB0YLRgNC+0LrRgyDQsiDRgtCw0LHQu9C40YbRgyDQsdCw0YDQutC+0LTQvtCyINC00L7QutGD0LzQtdC90YLQsAogICAgICAgICAgICAgICAgc2VsZi5hZGRfbmV3X2JhcmNvZGVfaW5fZG9jX2JhcmNvZGVzX3RhYmxlKHNlbGYsIGVsZW0gLCBiYXJjb2RlX2luZm8pCgoKICAgICAgICAjINCe0LHQvdC+0LLQu9GP0LXQvCDRgtCw0LHQu9C40YbRgyDRgtC+0LLQsNGA0YsKICAgICAgICBzZWxmLnVwZGF0ZV9kb2NfdGFibGVfZGF0YShzZWxmLCBlbGVtLCByYXRpbywgdXNlcl90bXopCgogICAgICAgIHJldHVybiB7J1Jlc3VsdCc6ICfQnNCw0YDQutCwINC00L7QsdCw0LLQu9C10L3QsCDQsiDQtNC+0LrRg9C80LXQvdGCJywgJ0Vycm9yJzogTm9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBiYXJjb2RlX2luZm9bJ0dUSU4nXSArIGJhcmNvZGVfaW5mb1snU0VSSUFMJ119CgoKICAgIGRlZiBhZGQoc2VsZiwgYXJncyk6CiAgICAgICAgcXVlcnkgPSAnSU5TRVJUIElOVE8gUlNfZG9jcyhpZF9kb2MsIGRvY190eXBlLCBkb2NfbiwgZG9jX2RhdGUsIGlkX2NvdW50cmFnZW50cywgaWRfd2FyZWhvdXNlLCB2ZXJpZmllZCwgc2VudCkgVkFMVUVTICg/LD8sPyw/LD8sPywwLDApJwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIGFyZ3MpCgogICAgZGVmIGdldF9uZXdfaWQoc2VsZik6CiAgICAgICAgcXVlcnkgPSAnc2VsZWN0IG1heF9pZF9kb2MgZnJvbSBSU19jb25zdGFudHMnCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSkKICAgICAgICBpZiBsZW4ocmVzKSA9PSAwOgogICAgICAgICAgICByZXR1cm4gJzEnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdmFsID0gcmVzWzBdWzBdCiAgICAgICAgICAgIGlmIHZhbCBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuICcxJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcXVlcnkgPSAnVVBEQVRFIFJTX2NvbnN0YW50cyBTRVQgbWF4X2lkX2RvYyA9ID8nCiAgICAgICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5LCAoaW50KHZhbCkgKyAxLCkpCiAgICAgICAgICAgICAgICByZXR1cm4gc3RyKGludCh2YWwpICsgMSkKCmNsYXNzIFJzX2Fkcl9kb2MoKToKICAgIGlkX2RvYyA9ICcnICAjIHN0cikKICAgIGlkX3N0ciA9ICcnICAjIHN0cikKICAgIHF0dHkgPSAnJyAgIyBzdHIpCgogICAgZGVmIHVwZGF0ZV9kb2Nfc3RyKHNlbGYpOgogICAgICAgIHF1ZXJ5ID0gIiIiCiAgICAgICAgVVBEQVRFIFJTX2Fkcl9kb2NzX3RhYmxlCiAgICAgICAgU0VUIHF0dHk9PwogICAgICAgIFdoZXJlIGlkPT8gIiIiCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYucXR0eSwgc2VsZi5pZF9zdHIpKQogICAgICAgIHJldHVybiByZXMKCgogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmKToKICAgICAgICBxdWVyeV90ZXh0ID0gKCdVcGRhdGUgUlNfYWRyX2RvY3NfdGFibGUgU2V0IHF0dHkgPSAwIFdoZXJlIGlkX2RvYz06aWRfZG9jJywKICAgICAgICAnRGVsZXRlIEZyb20gUlNfYWRyX2RvY3NfdGFibGUgV2hlcmUgaWRfZG9jPTppZF9kb2MgYW5kIGlzX3BsYW4gPSAiRmFsc2UiJykKICAgICAgICBmb3IgZWwgaW4gcXVlcnlfdGV4dDoKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChlbCwgKHsnaWRfZG9jJzpzZWxmLmlkX2RvY30pKQoKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmKToKICAgICAgICBxdWVyeV9kb2NfdGFibGUgPSAnREVMRVRFIEZST00gUlNfYWRyX2RvY3NfdGFibGUgV0hFUkUgaWRfZG9jID0gPycKICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5X2RvY190YWJsZSwgKHNlbGYuaWRfZG9jLCkpCiAgICAgICAgIyBxdWVyeV9kb2NfdGFibGUgPSAnREVMRVRFIEZST00gUlNfZG9jc19iYXJjb2RlcyBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgICMgZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV9kb2NfdGFibGUsIChzZWxmLmlkX2RvYywpKQogICAgICAgIHF1ZXJ5X2RvYyA9ICdERUxFVEUgRlJPTSBSU19hZHJfZG9jcyBXSEVSRSBpZF9kb2MgPSA/JwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnlfZG9jLCAoc2VsZi5pZF9kb2MsKSkKCiAgICAgICAgcmV0dXJuIHJlcwogICAgIyBkZWYgY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYpOgogICAgIyAgICAgcXVlcnlfdGV4dCA9ICgnVXBkYXRlIFJTX2RvY3NfYmFyY29kZXMgU2V0IGFwcHJvdmVkID0gMCBXaGVyZSBpZF9kb2M9OmlkX2RvYycsCiAgICAjICAgICAnRGVsZXRlIEZyb20gUlNfZG9jc19iYXJjb2RlcyBXaGVyZSAgaWRfZG9jPTppZF9kb2MgQW5kIGlzX3BsYW4gPSAwJywKICAgICMgICAgICdVcGRhdGUgUlNfZG9jc190YWJsZSBTZXQgcXR0eSA9IDAgV2hlcmUgaWRfZG9jPTppZF9kb2MnLAogICAgIyAgICAgJ0RlbGV0ZSBGcm9tIFJTX2RvY3NfdGFibGUgV2hlcmUgaWRfZG9jPTppZF9kb2MgYW5kIGlzX3BsYW4gPSAiRmFsc2UiJykKICAgICMgICAgIGZvciBlbCBpbiBxdWVyeV90ZXh0OgogICAgIyAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQoZWwsICh7J2lkX2RvYyc6c2VsZi5pZF9kb2N9KSkKCiAgICBkZWYgbWFya19mb3JfdXBsb2FkKHNlbGYpOgogICAgICAgIHF1ZXJ5ID0gIiIiCiAgICAgICAgVVBEQVRFIFJTX2Fkcl9kb2NzX3RhYmxlCiAgICAgICAgU0VUIHNlbnQ9MQogICAgICAgIFdoZXJlIGlkPT8gIiIiCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgKHNlbGYuaWRfZG9jKSkKCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBtYXJrX3ZlcmlmaWVkKHNlbGYsIGtleSk6CiAgICAgICAgcXVlcnkgPSAiIiIKICAgICAgICAgICAgICAgIFVQREFURSBSU19hZHJfZG9jcwogICAgICAgICAgICAgICAgU0VUIHZlcmlmaWVkPT8KICAgICAgICAgICAgICAgIFdoZXJlIGlkX2RvYz0/ICIiIgogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChpbnQoa2V5KSwgc2VsZi5pZF9kb2MpKQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fdGFibGUoc2VsZiwgc2VhcmNoX3ZhbHVlOiBzdHIsIGZ1bmNfY29tcGFyZWQ9Jz0/JykgLT4gb2JqZWN0OgoKICAgICAgICBxdWVyeSA9ICcnJwogICAgICAgICAgICAgICAgIFNFTEVDVAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX2dvb2QsCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfcHJvcGVydHksCiAgICAgICAgICAgICAgICAgUlNfYmFyY29kZXMuaWRfc2VyaWVzLAogICAgICAgICAgICAgICAgIFJTX2JhcmNvZGVzLmlkX3VuaXQsCiAgICAgICAgICAgICAgICAgUlNfZG9jc19hZHJfdGFibGUuaWQsCiAgICAgICAgICAgICAgICAgUlNfZG9jc19hZHJfdGFibGUucXR0eSAgICAgICAgCiAgICAgICAgICAgICAgICAgRlJPTSBSU19iYXJjb2RlcwogICAgICAgICAgICAgICAgIExlZnQgam9pbiBSU19kb2NzX2Fkcl90YWJsZSBPTgogICAgICAgICAgICAgICAgIFJTX2RvY3NfYWRyX3RhYmxlLmlkX2dvb2Q9IFJTX2JhcmNvZGVzLmlkX2dvb2QgYW5kCiAgICAgICAgICAgICAgICAgUlNfZG9jc19hZHJfdGFibGUuaWRfcHJvcGVydGllcz0gUlNfYmFyY29kZXMuaWRfcHJvcGVydHkgYW5kCiAgICAgICAgICAgICAgICAgUlNfZG9jc19hZHJfdGFibGUuaWRfdW5pdD0gUlNfYmFyY29kZXMuaWRfdW5pdCBBbmQKICAgICAgICAgICAgICAgICBSU19kb2NzX2Fkcl90YWJsZS5pZF9kb2M9PwogICAgICAgICAgICAgICAgIHdoZXJlIGJhcmNvZGUgJycnICsgZnVuY19jb21wYXJlZAogICAgICAgICMgcXVlcnkgPSBxdWVyeSArIGZ1bmNfY29tcGFyZWQKCiAgICAgICAgcmV0dXJuIGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChzZWxmLmlkX2RvYywgc2VhcmNoX3ZhbHVlKSwgVHJ1ZSkKCiAgICBkZWYgdXBkYXRlX2RvY190YWJsZV9kYXRhKHNlbGYsIGVsZW1fZm9yX2FkZDogZGljdCwgcXR0eT0xLCBjZWxsX2lkID0gTm9uZSwgdGFibGVfdHlwZSA9ICdvdXQnLCB1c2VyX3Rtej0wKToKICAgICAgICAj0JjRidC10Lwg0Y/Rh9C10LnQutGDINC/0L4g0LjQvNC10L3QuCwg0L3QsNC8INC90YPQttC10L0gSUQKICAgICAgICAjIHJlcyAgPSBnZXRfcXVlcnlfcmVzdWx0KCdTZWxlY3QgaWQgRnJvbSBSU19jZWxscyBXaGVyZSBuYW1lID0gPycsKGNlbGxfbmFtZSwpKQogICAgICAgICMKICAgICAgICAjIGNlbGxfaWQgPSByZXNbMF1bMF0gaWYgcmVzIGVsc2UgTm9uZQogICAgICAgICPQldGB0LvQuCBlbGVtX2Zvcl9hZGQg0YHQvtC00LXRgNC20LjRgiDRgNCw0YLQuNC+IC0g0YPQvNC90L7QttC40Lwg0LXQs9C+INC90LAgcXR0eQogICAgICAgICNxdHR5ID0gZWxlbV9mb3JfYWRkLmdldCgncmF0aW8nKSpxdHR5IGlmIGVsZW1fZm9yX2FkZC5nZXQoJ3JhdGlvJykgaXMgbm90IE5vbmUgZWxzZSBxdHR5CgogICAgICAgICMg0KHQvdCw0YfQsNC70LAg0L7Qv9GA0LXQtNC10LvQuNC8LCDQtdGB0YLRjCDQu9C4INCyINGB0L/QuNGB0LrQtSDRgtC+0LLQsNGA0L7QsiDQtNC+0LrRg9C80LXQvdGC0LAg0L3QsNGIINGC0L7QstCw0YA6CiAgICAgICAgcXRleHQgPSAnU2VsZWN0ICogZnJvbSBSU19hZHJfZG9jc190YWJsZSBXaGVyZSBpZF9kb2M9PyBhbmQgaWRfZ29vZCA9ID8gYW5kIGlkX3Byb3BlcnRpZXMgPSA/IGFuZCBpZF9zZXJpZXMgPSA/ICBhbmQgKGlkX2NlbGw9PyAgT1IgaWRfY2VsbD0gIiIgT1IgaWRfY2VsbCBpcyBOdWxsKSBhbmQgdGFibGVfdHlwZSA9ID8nICAjYW5kIGlkX3VuaXQgPSA/CiAgICAgICAgYXJncyA9IChzZWxmLmlkX2RvYywgZWxlbV9mb3JfYWRkWydpZF9nb29kJ10sIGVsZW1fZm9yX2FkZFsnaWRfcHJvcGVydHknXSwgZWxlbV9mb3JfYWRkWydpZF9zZXJpZXMnXSwgY2VsbF9pZCwgdGFibGVfdHlwZSkgIyxlbGVtX2Zvcl9hZGRbJ2lkX3VuaXQnXQogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXRleHQsIGFyZ3MsIFRydWUpCiAgICAgICAgaWYgcmVzOiAgIyDQndCw0YjQu9C4INGB0YLRgNC+0LrQuCDQtNC+0LrRg9C80LXQvdGC0LAsINC00L7QsdCw0LLQu9GP0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQvgoKICAgICAgICAgICAgZWwgPSByZXNbMF0KICAgICAgICAgICAgIyBpZiBlbFsncXR0eSddK3F0dHkgPT0gMDoKICAgICAgICAgICAgIyAgICAgcXRleHQgPSAnREVMRVRFIEZST00gUlNfZG9jc190YWJsZSAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICAjICAgICBnZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoZWxbJ2lkJ10sKSkKICAgICAgICAgICAgIyBlbHNlOgogICAgICAgICAgICBxdGV4dCA9ICdVUERBVEUgUlNfYWRyX2RvY3NfdGFibGUgU0VUIHF0dHk9cXR0eSs/LCBsYXN0X3VwZGF0ZWQgPSA/LCBpZF9jZWxsID0gPyAgV0hFUkUgaWQgPSA/JwogICAgICAgICAgICBjdXJyZW50X3RpbWVfdXRjXzAgPSAoZGF0ZXRpbWUubm93KCkgLSB0aW1lZGVsdGEoaG91cnM9aW50KHVzZXJfdG16KSkpLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChxdHR5LCAgY3VycmVudF90aW1lX3V0Y18wLCBjZWxsX2lkLCBlbFsnaWQnXSkpCiAgICAgICAgZWxzZTogICMg0KLQsNC60L7QuSDRgdGC0YDQvtC60Lgg0L3QtdGCLCDQvdCw0LTQviDQtNC+0LHQsNCy0LjRgtGMCiAgICAgICAgICAgIHF0ZXh0ID0gJ1JFUExBQ0UgSU5UTyBSU19hZHJfZG9jc190YWJsZShpZF9kb2MsIGlkX2dvb2QsIGlkX3Byb3BlcnRpZXMsaWRfc2VyaWVzLCBpZF91bml0LCBxdHR5LCBpc19wbGFuLCBpZF9jZWxsLCB0YWJsZV90eXBlKSBWQUxVRVMgKD8sPyw/LD8sPyw/LD8sPyw/KScKICAgICAgICAgICAgZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgKAogICAgICAgICAgICAgICAgc2VsZi5pZF9kb2MsIGVsZW1fZm9yX2FkZFsnaWRfZ29vZCddLCBlbGVtX2Zvcl9hZGRbJ2lkX3Byb3BlcnR5J10sIGVsZW1fZm9yX2FkZFsnaWRfc2VyaWVzJ10sCiAgICAgICAgICAgICAgICBlbGVtX2Zvcl9hZGRbJ2lkX3VuaXQnXSwgcXR0eSwgJ0ZhbHNlJyxjZWxsX2lkLCB0YWJsZV90eXBlKSkKCiAgICAgICAgcmV0dXJuIHJlcwoKCiAgICAjINCV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMgIC0gaGF2ZV9xdHR5X3BsYW4KICAgICMg0JXRgdGC0Ywg0L/Qu9Cw0L0g0L/QviDRgdC/0LjRgdC60YMg0YLQvtCy0LDRgNC+0LIgaGF2ZV96ZXJvX3BsYW4KICAgICMg0JrQntC90YLRgNC+0LvRjCDQv9C70LDQvdC+0LIg0LIg0LTQvtC60YPQvNC10L3RgtC1IC0gY29udHJvbAogICAgIyDQldGB0YLRjCDQv9C70LDQvSDQv9C+INC80LDRgNC60LjRgNGD0LXQvNC+0Lkg0L/RgNC+0LTRg9C60YbQuNC4IGhhdmVfbWFya19wbGFuCiAgICBkZWYgcHJvY2Vzc190aGVfYmFyY29kZShzZWxmLCBiYXJjb2RlLCBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlLCBoYXZlX3plcm9fcGxhbiA9IEZhbHNlLCBjb250cm9sID0gRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsX2lkID0gTm9uZSwgdGFibGVfdHlwZSA9ICdvdXQnLCB1c2VyX3Rtej0wKTogIyBhZGRfaWZfbm90X2ZvdW5kPUZhbHNlLCBhZGRfaWZfbm90X2luX3BsYW49RmFsc2UpOgoKICAgICAgICAjINCf0L7Qu9GD0YfQuNC8INGB0YLRgNGD0LrRgtGD0YDRgyDQsdCw0YDQutC+0LTQsAogICAgICAgIGlmIGJhcmNvZGVbMF0gPT0gY2hyKDI5KSBhbmQgbGVuKGJhcmNvZGUpID4gMzE6ICAjIFJlbW92ZSBmaXJzdCBHUzEgY2hhciBmcm9tIGJhcmNvZGUKICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTpdCiAgICAgICAgYmFyY29kZV9pbmZvID0gdWlfYmFyY29kZXMucGFyc2VfYmFyY29kZShiYXJjb2RlKQogICAgICAgIGlmIGJhcmNvZGVfaW5mby5fX2NvbnRhaW5zX18oJ0VSUk9SJyk6CiAgICAgICAgICAgIHJldHVybiB7J0Vycm9yJzogJ0ludmFsaWQgQmFyY29kZScsICdEZXNjcic6ICfQndC10LLQtdGA0L3Ri9C5INGI0YLRgNC40YXQutC+0LQnLAogICAgICAgICAgICAgICAgICAgICdCYXJjb2RlJzogYmFyY29kZV9pbmZvLCAnZG9jX2luZm8nOiBzZWxmLmlkX2RvY30KICAgICAgICAjIC4uLiDQuCDQvdCw0LnQtNC10Lwg0L/QviDQvdC10LzRgyDQstGB0LUg0YfRgtC+INC10YHRgtGMINCyINCx0LDQt9C1CiAgICAgICAgc2hlbWEgPSBiYXJjb2RlX2luZm9bJ1NDSEVNRSddCiAgICAgICAgaWYgc2hlbWEgaW4gWydFQU4xMycsICdVTktOT1dOJ106CiAgICAgICAgICAgIHNlYXJjaF92YWx1ZSA9IGJhcmNvZGVfaW5mb1snQkFSQ09ERSddCiAgICAgICAgZWxpZiBzaGVtYSA9PSAnR1MxJzoKICAgICAgICAgICAgc2VhcmNoX3ZhbHVlID0gYmFyY29kZV9pbmZvWydHVElOJ10KICAgICAgICBlbHNlOiAgIyAqKioqKioqKioqKioqKioqKirQodGO0LTQsCDQvNC+0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQtSDQstC40LTRiyDRiNGC0YDQuNGF0LrQvtC00L7QsiAqKioqKioqKioqKioqKioqKioqKgogICAgICAgICAgICBzZWFyY2hfdmFsdWUgPSBiYXJjb2RlX2luZm9bJ0JBUkNPREUnXQoKICAgICAgICByZXMgPSBmaW5kX2JhcmNvZGVfaW5fYmFyY29kZV90YWJsZShzZWFyY2hfdmFsdWUpICAjINCY0YnQtdGCINCx0LDRgNC60L7QtCDQuNC70Lgg0JPQotCY0JjQnSDQv9C+INC+0LHRidC10Lkg0YLQsNCx0LvQuNGG0LUg0YjRgtGA0LjRhdC60L7QtNC+0LIuINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGC0L7QstCw0YAsINC10LPQviDQstC40LQsINGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60YMg0YHQtdGA0LjRjiDQuNGC0L8uCiAgICAgICAgaWYgbm90IGxlbihyZXMpID09IDA6CiAgICAgICAgICAgIGVsZW0gPSByZXNbMF0gI9CR0LXRgNC10Lwg0L/QtdGA0LLRi9C5INGA0LXQt9GD0LvRjNGC0LDRgi4g0JIg0L/RgNCw0LLQuNC70YzQvdC+0Lwg0YHQv9C40YHQutC1INGI0YLRgNC40YXQutC+0LTQvtCyINC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9C+0LLRgtC+0YDQtdC90LjQuQogICAgICAgICAgICByYXRpbyA9IGVsZW1bJ3JhdGlvJ10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4geydFcnJvcic6ICdOb3RGb3VuZCcsICdEZXNjcic6ICfQqNGC0YDQuNGF0LrQvtC0INC90LUg0L3QsNC50LTQtdC9INCyINCx0LDQt9C1JywgJ0JhcmNvZGUnOiBiYXJjb2RlfQoKICAgICAgICBlbGVtWydpZF9jZWxsJ10gPSBjZWxsX2lkCgogICAgICAgICPQotC+0LLQsNGAINCyINGC0LDQsdC70LjRhtC1INC00L7QutGD0LzQtdC90YLQsCAo0KLQvtCy0LDRgCDQvdCw0LnQtNC10L0g0LIg0LTQvtC60YPQvNC10L3RgtC1KQogICAgICAgIHJlcyA9IGNoZWNrX2Fkcl9iYXJjb2RlX2NvbXBsaWFuY2UoZWxlbSwgc2VsZi5pZF9kb2MpICAj0J/QvtC70YPRh9Cw0LXQvCDRgdGC0YDQvtC60YMg0YLQsNCx0LvQuNGG0Ysg0YLQvtCy0LDRgNGLINC00L7QutGD0LzQtdC90YLQsAogICAgICAgIGlmIHJlczogI9Ci0L7QstCw0YAg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtQogICAgICAgICAgICBpZiBoYXZlX3F0dHlfcGxhbjogI9CV0YHRgtGMINC/0LvQsNC9INC/0L4g0LrQvtC70LjRh9C10YHRgtCy0YMKICAgICAgICAgICAgICAgIGlmIHJlc1swXVsncXR0eV9wbGFuJ10gPCByZXNbMF1bJ3F0dHknXSArIHJhdGlvOiAj0JrQvtC70LjRh9C10YHRgtCy0L4g0YLQvtCy0LDRgNCwINCyINC00L7QutGD0LzQtdC90YLQtSDRg9C20LUg0L3QsNCx0YDQsNC90L4sINC4INC80Ysg0L/RgNC10LLRi9GI0LDQtdC8INC/0LvQsNC9CiAgICAgICAgICAgICAgICAgICAgaWYgY29udHJvbDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsnUmVzdWx0JzogIGYn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LHRg9C00LXRgiDQv9GA0LXQstGL0YjQtdC90L4g0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4IHtzdHIocmF0aW8pfSDQtdC00LjQvdC40YYg0YLQvtCy0LDRgNCwJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRXJyb3InOiAnUXVhbnRpdHlQbGFuUmVhY2hlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBiYXJjb2RlLCAnRGVzY3InOiBmJ9Ca0L7Qu9C40YfQtdGB0YLQstC+INC/0LvQsNC9INCx0YPQtNC10YIg0L/RgNC10LLRi9GI0LXQvdC+INC/0YDQuCDQtNC+0LHQsNCy0LvQtdC90LjQuCB7c3RyKHJhdGlvKX0g0LXQtNC40L3QuNGGINGC0L7QstCw0YDQsCd9CgogICAgICAgIGVsc2U6ICPQotC+0LLQsNGAINC90LUg0L3QsNC50LTQtdC9INCyINC00L7QutGD0LzQtdC90YLQtQogICAgICAgICAgICBpZiBoYXZlX3plcm9fcGxhbiBhbmQgY29udHJvbDoKICAgICAgICAgICAgICAgIHJldHVybiB7J1Jlc3VsdCc6ICfQkiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQvdC10LvRjNC30Y8g0LTQvtCx0LDQstC40YLRjCDRgtC+0LLQsNGAINC90LUg0LjQtyDRgdC/0LjRgdC60LAnLAogICAgICAgICAgICAgICAgICAgICAgICAnRXJyb3InOiAnWmVyb19wbGFuX2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGUnOiBiYXJjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAnRGVzY3InOiAn0JIg0LTQsNC90L3Ri9C5INC00L7QutGD0LzQtdC90YIg0L3QtdC70YzQt9GPINC00L7QsdCw0LLQuNGC0Ywg0YLQvtCy0LDRgCDQvdC1INC40Lcg0YHQv9C40YHQutCwJ30KCgogICAgICAgICMg0J7QsdC90L7QstC70Y/QtdC8INGC0LDQsdC70LjRhtGDINGC0L7QstCw0YDRiwogICAgICAgIHNlbGYudXBkYXRlX2RvY190YWJsZV9kYXRhKHNlbGYsIGVsZW0sIHJhdGlvLCBjZWxsX2lkLCB0YWJsZV90eXBlLCB1c2VyX3RteikKCiAgICAgICAgcmV0dXJuIHsnUmVzdWx0JzogJ9Cc0LDRgNC60LAg0LTQvtCx0LDQstC70LXQvdCwINCyINC00L7QutGD0LzQtdC90YInLCAnRXJyb3InOiBOb25lLAogICAgICAgICAgICAgICAgICAgICAgICAnYmFyY29kZSc6IGJhcmNvZGVfaW5mb1snR1RJTiddICsgYmFyY29kZV9pbmZvWydTRVJJQUwnXX0KCgogICAgZGVmIGFkZChzZWxmLCBhcmdzKToKICAgICAgICBxdWVyeSA9ICdJTlNFUlQgSU5UTyBSU19hZHJfZG9jcyhpZF9kb2MsIGRvY190eXBlLCBkb2NfbiwgZG9jX2RhdGUsIGlkX3dhcmVob3VzZSwgdmVyaWZpZWQsIHNlbnQpIFZBTFVFUyAoPyw/LD8sPyw/LDAsMCknCiAgICAgICAgcmVzID0gZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeSwgYXJncykKCiAgICBkZWYgZ2V0X25ld19pZChzZWxmKToKICAgICAgICBxdWVyeSA9ICdzZWxlY3QgbWF4X2lkX2RvYyBmcm9tIFJTX2NvbnN0YW50cycKICAgICAgICByZXMgPSBnZXRfcXVlcnlfcmVzdWx0KHF1ZXJ5KQogICAgICAgIGlmIGxlbihyZXMpID09IDA6CiAgICAgICAgICAgIHJldHVybiAnMScKICAgICAgICBlbHNlOgogICAgICAgICAgICB2YWwgPSByZXNbMF1bMF0KICAgICAgICAgICAgaWYgdmFsIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gJzEnCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBxdWVyeSA9ICdVUERBVEUgUlNfY29uc3RhbnRzIFNFVCBtYXhfaWRfZG9jID0gPycKICAgICAgICAgICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXVlcnksIChpbnQodmFsKSArIDEsKSkKICAgICAgICAgICAgICAgIHJldHVybiBzdHIoaW50KHZhbCkgKyAxKQoKCiAgICBkZWYgZmluZF9jZWxsKHNlbGYsIGJhcmNvZGUpOgogICAgICAgIHF0ZXh0ID0gJycnU2VsZWN0ICogZnJvbSBSU19jZWxscyBXSGVyZSBSU19jZWxscy5iYXJjb2RlID0gPycnJwogICAgICAgIHJlcyA9IGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChiYXJjb2RlLCApLCBUcnVlKQogICAgICAgIHJlc3VsdCA9IE5vbmUKICAgICAgICBpZiByZXM6CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc1swXQoKICAgICAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGV4ZWN1dGVfcXVlcnkocV9pbmRleCwgcV90ZXh0LCBhcmdzLCBpbl9kaWN0KToKICAgIGlmIHF1ZXJ5X2xpc3QuZW1wdHkoKToKICAgICAgICBzdGFydF9xdWV1ZSA9VHJ1ZQogICAgcXVlcnlfbGlzdC5wdXQoeydxX2luZGV4JzpxX2luZGV4LCAncV90ZXh0JzpxX3RleHQsICdhcmdzJzphcmdzLCAnaW5fZGljdCc6aW5fZGljdH0pCiAgICB3aGlsZSBUcnVlOgogICAgICAgIGlmIHN0YXJ0X3F1ZXVlOgogICAgICAgICAgICBnZXRfcXVlcnlfcmVzdWx0KCkKCgpkZWYgd3JpdGVfZXJyb3Jfb25fbG9nKEVycl92YWx1ZSk6CiAgICBpZiBFcnJfdmFsdWU6CiAgICAgICAgcXRleHQgPSAnSW5zZXJ0IGludG8gRXJyb3JfbG9nKGxvZykgVmFsdWVzKD8pJwogICAgICAgIGdldF9xdWVyeV9yZXN1bHQocXRleHQsIChFcnJfdmFsdWUsKSkKCgoKCgo="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_models.py",
                "PyFileKey": "ui_models",
                "PyFileData": "ZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QKaW1wb3J0IGpzb24KZnJvbSBqc29uLmRlY29kZXIgaW1wb3J0IEpTT05EZWNvZGVFcnJvcgppbXBvcnQgb3MKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCB0aW1lCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmltcG9ydCBkYl9zZXJ2aWNlcwppbXBvcnQgaHNfc2VydmljZXMKaW1wb3J0IHByaW50aW5nX2ZhY3RvcnkKZnJvbSB1aV91dGlscyBpbXBvcnQgSGFzaE1hcCwgUnNEb2MsIEJhcmNvZGVXb3JrZXIsIGdldF9pcF9hZGRyZXNzCmZyb20gZGJfc2VydmljZXMgaW1wb3J0IERvY1NlcnZpY2UsIEVycm9yU2VydmljZSwgR29vZHNTZXJ2aWNlLCBBZHJEb2NTZXJ2aWNlLCBUaW1lclNlcnZpY2UKZnJvbSB0aW55X2RiX3NlcnZpY2VzIGltcG9ydCBTY2FubmluZ1F1ZXVlU2VydmljZSwgVGlueU5vU1FMUHJvdmlkZXIKZnJvbSBoc19zZXJ2aWNlcyBpbXBvcnQgSHNTZXJ2aWNlCmZyb20gcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkgaW1wb3J0IFNpbXBsZVV0aWxpdGVzIGFzIHN1Q2xhc3MKCiNpbXBvcnQgaHR0cF9leGNoYW5nZQpmcm9tIGh0dHBfZXhjaGFuZ2UgaW1wb3J0IHBvc3RfY2hhbmdlc190b19zZXJ2ZXIKI2Zyb20gUElMIGltcG9ydCBJbWFnZQppbXBvcnQgd2lkZ2V0cwppbXBvcnQgdWlfZ2xvYmFsCmltcG9ydCBiYXNlNjQKCgpjbGFzcyBTY3JlZW4oQUJDKToKICAgIHNjcmVlbl9uYW1lOiBzdHIKICAgIHByb2Nlc3NfbmFtZTogc3RyCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc2VsZi5oYXNoX21hcDogSGFzaE1hcCA9IGhhc2hfbWFwCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0ge30KICAgICAgICBzZWxmLnJzX3NldHRpbmdzID0gcnNfc2V0dGluZ3MKICAgICAgICBzZWxmLmxpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIHNlbGYuZXZlbnQ6IHN0ciA9IHNlbGYuaGFzaF9tYXBbJ2V2ZW50J10KCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIHRvYXN0KHNlbGYsIHRleHQpOgogICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QodGV4dCkKCiAgICBkZWYgX2lzX3Jlc3VsdF9wb3NpdGl2ZShzZWxmLCBsaXN0ZW5lcikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gc2VsZi5saXN0ZW5lciA9PSBsaXN0ZW5lciBhbmQgc2VsZi5ldmVudCA9PSAnb25SZXN1bHRQb3NpdGl2ZScKCiAgICBkZWYgX2lzX3Jlc3VsdF9uZWdhdGl2ZShzZWxmLCBsaXN0ZW5lcikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gc2VsZi5saXN0ZW5lciA9PSBsaXN0ZW5lciBhbmQgc2VsZi5ldmVudCA9PSAnb25SZXN1bHROZWdhdGl2ZScKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZid7c2VsZi5wcm9jZXNzX25hbWV9IC8ge3NlbGYuc2NyZWVuX25hbWV9JwoKICAgIGRlZiBfdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcyhzZWxmKToKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBzZWxmLnNjcmVlbl92YWx1ZXMuaXRlbXMoKToKICAgICAgICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZidQcm9jZXNzOiB7c2VsZi5wcm9jZXNzX25hbWV9LCBzY3JlZW46IHtzZWxmLnNjcmVlbl9uYW1lfS4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYnRm9yIGtleSB7a2V5fSBtdXN0IGJlIHNldCB2YWx1ZSBub3QgTm9uZScpCgogICAgZGVmIGdldF9odHRwX3NldHRpbmdzKHNlbGYpOgogICAgICAgIGh0dHBfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICd1cmwnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgiVVJMIiksCiAgICAgICAgICAgICd1c2VyJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1VTRVInKSwKICAgICAgICAgICAgJ3Bhc3MnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnUEFTUycpLAogICAgICAgICAgICAnZGV2aWNlX21vZGVsJzogc2VsZi5oYXNoX21hcFsnREVWSUNFX01PREVMJ10sCiAgICAgICAgICAgICdhbmRyb2lkX2lkJzogc2VsZi5oYXNoX21hcFsnQU5EUk9JRF9JRCddLAogICAgICAgICAgICAndXNlcl9uYW1lJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3VzZXJfbmFtZScpfQogICAgICAgIHJldHVybiBodHRwX3NldHRpbmdzCgogICAgZGVmIHB1dF9ub3RpZmljYXRpb24oc2VsZiwgdGV4dCwgdGl0bGU9Tm9uZSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5ub3RpZmljYXRpb24odGV4dCwgdGl0bGUpCgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBkZWxldGVfdGVtcGxhdGVfc2V0dGluZ3MocnNfc2V0dGluZ3MpOgogICAgICAgIGZvciBpdGVtIGluIFNjcmVlbnNGYWN0b3J5LnNjcmVlbnM6CiAgICAgICAgICAgIHBhcmFtX25hbWUgPSAgZ2V0YXR0cihpdGVtLCAncHJvY2Vzc19uYW1lJykgKyBnZXRhdHRyKGl0ZW0sICdzY3JlZW5fbmFtZScpCiAgICAgICAgICAgIGlmIHJzX3NldHRpbmdzLmdldChwYXJhbV9uYW1lKToKICAgICAgICAgICAgICAgIHJzX3NldHRpbmdzLmRlbGV0ZShwYXJhbV9uYW1lKQoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSwgcnNfc2V0dGluZ3MpOgogICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKICAgICAgICAgICAgc2VsZi5UZXh0U2l6ZSA9IHJzX3NldHRpbmdzLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpCiAgICAgICAgICAgIHNlbGYuVGV4dENvbG9yID0gJyMzMzMzMzMnCiAgICAgICAgICAgIHNlbGYuQmFja2dyb3VuZENvbG9yID0gJ0ZGQ0M5OScKICAgICAgICAgICAgc2VsZi53ZWlnaHQgPSAwCiAgICAgICAgICAgIHNlbGYuVmFsdWUgPSB2YWx1ZQoKICAgIGNsYXNzIExpbmVhckxheW91dCh3aWRnZXRzLkxpbmVhckxheW91dCk6CiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKmFyZ3MsICoqa3dhcmdzKQogICAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uID0gJ2hvcml6b250YWwnCiAgICAgICAgICAgIHNlbGYuaGVpZ2h0ID0gIm1hdGNoX3BhcmVudCIKICAgICAgICAgICAgc2VsZi53aWR0aCA9ICJtYXRjaF9wYXJlbnQiCiAgICAgICAgICAgIHNlbGYuU3Ryb2tlV2lkdGggPSAxCgoKIyA9PT09PT09PT09PT09PT09PT09PSBQcml0bnRpbmcgc2NyZWVucyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpjbGFzcyBIdG1sVmlldyhTY3JlZW4pOgoKICAgIHNjcmVlbl9uYW1lID0gJ9Cg0LXQt9GD0LvRjNGC0LDRgicKICAgIHByb2Nlc3NfbmFtZSA9ICfQn9C10YfQsNGC0YwnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5wYXJhbXMgPSBqc29uLmxvYWRzKHNlbGYuaGFzaF9tYXAuZ2V0KCdwcmludF9wYXJhbWV0ZXJzJykpCiAgICAgICAgc2VsZi5wYXJhbV9uYW1lX2Zvcl9zZXR0aW5ncyA9IHNlbGYuaGFzaF9tYXBbJ3RlbXBsYXRlX3NldHRpbmdzX25hbWUnXSAjc2VsZi5oYXNoX21hcFsnY3VycmVudF9vcGVyYXRpb25fbmFtZSddICsgJy8nICsgc2VsZi5oYXNoX21hcFsnY3VycmVudF9zY3JlZW5fbmFtZSddCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ25vUmVmcmVzaCcsJycpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYsICk6CiAgICAgICAgI9Cd0LUg0L/QtdGA0LXRgNC40YHQvtCy0YvQstCw0LXQvCDRjdC60YDQsNC9INC10YHQu9C4INGD0LbQtSDRgdC00LXQu9Cw0L0KICAgICAgICAjIGpzb25fdGFibGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnbWF0Y2hpbmdfdGFibGUnKQogICAgICAgICMgaWYganNvbl90YWJsZSBpcyBub3QgTm9uZToKICAgICAgICAjICAgICByZXR1cm4KICAgICAgICAjIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdydW5fc2NyZWVuJykgPT0gJzInOgogICAgICAgICMgICAgIHJldHVybgogICAgICAgICMgZWxzZToKICAgICAgICAjICAgICBzZWxmLmhhc2hfbWFwWydydW5fc2NyZWVuJ10gPSAnMScKCgogICAgICAgICMg0JXRgdC70Lgg0YPRgdGC0LDQvdC+0LLQu9C10L0g0YjQsNCx0LvQvtC9INCyINC90LDRgdGC0YDQvtC50LrQsNGFINC/0LXRh9Cw0YLQuCwg0LjRidC10Lwg0LXQs9C+INCyINC70L7QutCw0LvRjNC90YvRhSDRhNCw0LnQu9Cw0YUKICAgICAgICAjIGlmIHNlbGYucGFyYW1zLmdldCgndGVtcGxhdGUnKToKICAgICAgICAjICAgICBwYXNzCiAgICAgICAgaWYgc2VsZi5wYXJhbXMuZ2V0KCdmaWxlX25hbWUnKSBhbmQgc2VsZi5wYXJhbXMuZ2V0KCdmdWxsX3BhdGgnKToKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsc2U6ICPQpNCw0LnQuyDRiNCw0LHQu9C+0L3QsCDQvdC1INC90LDQudC00LXQvSwg0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPINC+0LHRgNCw0YLQvdC+CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Cd0LUg0L3QsNC50LTQtdC9INGE0LDQudC7INGI0LDQsdC70L7QvdCwJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5maW5pc2hfcHJvY2Vzc19yZXN1bHQoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbm90IChzZWxmLnBhcmFtcy5nZXQoJ3BpY3R1cmVfd2l0aCcpIGFuZCBzZWxmLnBhcmFtcy5nZXQoJ3BpY3R1cmVfaGlnaHRoJykpOgogICAgICAgICAgICBzZWxmLnBhcmFtc1sncGljdHVyZV9oaWdodGgnXSA9ICcyMCcKICAgICAgICAgICAgc2VsZi5wYXJhbXNbJ3BpY3R1cmVfd2l0aCddID0gJzIwJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydwaWN0dXJlX2hpZ2h0aCddID0gJzIwJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydwaWN0dXJlX3dpdGgnXSA9ICcyMCcKCiAgICAgICAgICAgICNzZWxmLnBhcmFtc1sndGVtcGxhdGVfZm9sZGVyJ10sIHNlbGYucGFyYW1zWyd0ZW1wbGF0ZSddID0gc2VsZi5nZXRfdGVtcGxhdGVfYnlfZGVmYXVsdChyc19zZXR0aW5ncz0gc2VsZi5yc19zZXR0aW5ncykKICAgICAgICB0ZW1wbGF0ZV9kaXIsIHRlbXBsYXRlX2ZpbGUgPSBzZWxmLmdldF90ZW1wbGF0ZV9ieV9kZWZhdWx0KHNlbGYucGFyYW1zKQogICAgICAgIGh0bWxfZG9jID0gcHJpbnRpbmdfZmFjdG9yeS5IVE1MRG9jdW1lbnQodGVtcGxhdGVfZGlyLCB0ZW1wbGF0ZV9maWxlKS5nZXRfdGVtcGxhdGUoKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdodG1sJywgaHRtbF9kb2MpCiAgICAgICAgIwogICAgICAgIGRvY19kZXRhaWxzID0gc2VsZi5nZXRfZGV0YWlsc19kYXRhKCkKICAgICAgICBwcmludF9wYXJhbWV0ZXJzID0gc2VsZi5oYXNoX21hcC5nZXQoJ3ByaW50X3BhcmFtZXRlcnMnKQogICAgICAgIGlmIHByaW50X3BhcmFtZXRlcnM6CiAgICAgICAgICAgIHByaW50X3BhcmFtZXRlcnMgPSBqc29uLmxvYWRzKHByaW50X3BhcmFtZXRlcnMpCiAgICAgICAgICAgIHNlbGYuZmlsbF9rbm93aW5nX3ZhbHVlcyhkb2NfZGV0YWlscywgcHJpbnRfcGFyYW1ldGVycykKICAgICAgICB0YWJsZV9kYXRhID0gc2VsZi5fcHJlcGFyZV90YWJsZV9kYXRhKGRvY19kZXRhaWxzKQogICAgICAgIHRhYmxlX3ZpZXcgPSBzZWxmLl9nZXRfZG9jX3RhYmxlX3ZpZXcodGFibGVfZGF0YT10YWJsZV9kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ21hdGNoaW5nX3RhYmxlJ10gPSB0YWJsZV92aWV3LnRvX2pzb24oKQoKCiAgICAgICAgI9Ch0L7Qt9C00LDQtdC8INGB0L/QuNGB0L7QuiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQsiDQstC40LTQtSDQu9C40YHRgtCwLCDQtNC70Y8g0L/QvtGB0LvQtdC00YPRjtGJ0LXQuSDQv9C10YDQtdC00LDRh9C4INCyINGE0L7RgNC80YMg0LLRi9Cx0L7RgNCwCgogICAgICAgIGxpc3RfZXhjbHVkZXMgPSAoJ2ZpbGVfbmFtZScsICdmdWxsX3BhdGgnLCAncGljdHVyZV93aXRoJywgJ3BpY3R1cmVfaGlnaHRoJykKICAgICAgICBsaXN0X2ZjID0gW3ggZm9yIHggaW4gbGlzdChzZWxmLnBhcmFtcy5rZXlzKCkpIGlmIHggbm90IGluIGxpc3RfZXhjbHVkZXNdCiAgICAgICAgbGlzdF9mYy5pbnNlcnQoMCwnLdC/0YPRgdGC0L7QtSDQt9C90LDRh9C10L3QuNC1LScpCgogICAgICAgIGxpc3RfZm9yX2Nob29zZSA9ICc7Jy5qb2luKGxpc3RfZmMpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3N0cl9maWVsZCcsIGxpc3RfZm9yX2Nob29zZSkKCiAgICAgICAgI3NlbGYuaGFzaF9tYXAuZmluaXNoX3Byb2Nlc3NfcmVzdWx0KCkKCgogICAgZGVmIGdldF9kZXRhaWxzX2RhdGEoc2VsZiwgbWF0Y2hpbmdfdGFibGU9Tm9uZSk6CiAgICAgICAgI9Cg0LDRgdC/0LDRgNGB0LjQvCDRiNCw0LHQu9C+0L0g0Lgg0LLRi9GC0LDRidC40Lwg0L/QtdGA0LXQvNC10L3QvdGL0LUKICAgICAgICBpZiBtYXRjaGluZ190YWJsZToKICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nX3RhYmxlCiAgICAgICAgdGVtcGxhdGVfZGlyLCB0ZW1wbGF0ZV9maWxlID0gc2VsZi5nZXRfdGVtcGxhdGVfYnlfZGVmYXVsdChzZWxmLnBhcmFtcykKICAgICAgICBodG1sX2RvY19wYXJhbXMgPSBwcmludGluZ19mYWN0b3J5LkhUTUxEb2N1bWVudCh0ZW1wbGF0ZV9kaXIsIHRlbXBsYXRlX2ZpbGUpLmZpbmRfdGVtcGxhdGVfdmFyaWFibGVzKCkKCiAgICAgICAgI9CX0LDQs9GA0YPQt9C40LwsINC90LDRgdGC0YDQvtC50LrQuCDRgdC+0L7RgtCy0LXRgtGB0YLQstC40Y8g0Lgg0LXRgdC70Lgg0LjRhSDQvdC10YIg0YLQviDQv9C+0LTRgdGC0LDQstC40Lwg0L/Rg9GB0YLRi9C1INC30L3QsNGH0LXQvdC40Y8KICAgICAgICBqc29uX3RleHQgPSBzZWxmLnJzX3NldHRpbmdzLmdldChzZWxmLnBhcmFtX25hbWVfZm9yX3NldHRpbmdzKQogICAgICAgIGlmIGpzb25fdGV4dDoKICAgICAgICAgICAgc2F2ZWRfdGVtcGxhdGVfcGFyYW1zID0ganNvbi5sb2Fkcyhqc29uX3RleHQpCiAgICAgICAgICAgIGRpY3RfbG9va3VwID0ge2RbJ2tleSddOiBkWyd2YWx1ZSddIGZvciBkIGluIHNhdmVkX3RlbXBsYXRlX3BhcmFtc30KICAgICAgICBlbHNlOgogICAgICAgICAgICBkaWN0X2xvb2t1cCA9IHt9CiAgICAgICAgcmV0dXJuX2xpc3QgPSBbXQogICAgICAgIGZvciBlbGVtIGluIGh0bWxfZG9jX3BhcmFtczoKICAgICAgICAgICAgdmFsdWUgPSBkaWN0X2xvb2t1cC5nZXQoZWxlbSwgJy3Qv9GD0YHRgtC+0LUg0LfQvdCw0YfQtdC90LjQtS0nKQogICAgICAgICAgICByZXR1cm5fbGlzdC5hcHBlbmQoeydrZXknOmVsZW0sICd2YWx1ZSc6dmFsdWV9KQoKICAgICAgICByZXR1cm4gcmV0dXJuX2xpc3QKCiAgICBkZWYgZmlsbF9rbm93aW5nX3ZhbHVlcyhzZWxmLCBkb2NfZGV0YWlscywgcGFyYW1ldGVycyk6CiAgICAgICAgZm9yIGQgaW4gZG9jX2RldGFpbHM6CiAgICAgICAgICAgIGlmIGRbJ2tleSddIGluIHBhcmFtZXRlcnMua2V5cygpOgogICAgICAgICAgICAgICAgZFsndmFsdWUnXSA9ICBkWydrZXknXQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICAjc2VsZi5oYXNoX21hcC5yZW1vdmUoJ21hdGNoaW5nX3RhYmxlJykKICAgICAgICAgICAgI3NlbGYuaGFzaF9tYXAucHV0KCdydW5fc2NyZWVuJywgJzInKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzX3Jlc3VsdCgpCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAgJ2J0bl9jYW5jZWwnOgogICAgICAgICAgICAjc2VsZi5oYXNoX21hcC5yZW1vdmUoJ21hdGNoaW5nX3RhYmxlJykKICAgICAgICAgICAgI3NlbGYuaGFzaF9tYXAucHV0KCdydW5fc2NyZWVuJywnMicpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZmluaXNoX3Byb2Nlc3NfcmVzdWx0KCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdidG5fc2F2ZSc6CgogICAgICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoc2VsZi5oYXNoX21hcC5nZXQoIm1hdGNoaW5nX3RhYmxlIikpCiAgICAgICAgICAgIGN1cnJlbnRfdGFibGUgPSBqbGlzdFsnY3VzdG9tdGFibGUnXVsndGFibGVkYXRhJ10KICAgICAgICAgICAgY3VycmVudF90YWJsZS5fX2RlbGl0ZW1fXygwKQogICAgICAgICAgICBmb3IgZWwgaW4gY3VycmVudF90YWJsZToKICAgICAgICAgICAgICAgIGlmIGVsLmdldCgna2V5Jyk6CiAgICAgICAgICAgICAgICAgICAgZWwuX19kZWxpdGVtX18oJ19sYXlvdXQnKQoKICAgICAgICAgICAgc2V0dGluZ3NfZm9yX3dyb3RlID0geydmdWxsX3BhdGgnIDogc2VsZi5wYXJhbXMuZ2V0KCdmdWxsX3BhdGgnKSwKICAgICAgICAgICAgJ2ZpbGVfbmFtZScgOiBzZWxmLnBhcmFtcy5nZXQoJ2ZpbGVfbmFtZScpLAogICAgICAgICAgICAncGljdHVyZV93aXRoJzpzZWxmLmhhc2hfbWFwLmdldCgncGljdHVyZV93aXRoJyksCiAgICAgICAgICAgICdwaWN0dXJlX2hpZ2h0aCc6IHNlbGYuaGFzaF9tYXAuZ2V0KCdwaWN0dXJlX2hpZ2h0aCcpLAogICAgICAgICAgICAncHJpbnRfcGFyYW1zJyA6IGN1cnJlbnRfdGFibGUgfQoKICAgICAgICAgICAgY3VycmVudF90YWJsZV9qc29uID0ganNvbi5kdW1wcyhzZXR0aW5nc19mb3Jfd3JvdGUpCgogICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dChzZWxmLnBhcmFtX25hbWVfZm9yX3NldHRpbmdzLCBjdXJyZW50X3RhYmxlX2pzb24sIEZhbHNlKSAgI2N1cnJlbnRfdGFibGVfanNvbgogICAgICAgICAgICAjc2VsZi5oYXNoX21hcC5yZW1vdmUoJ21hdGNoaW5nX3RhYmxlJykKICAgICAgICAgICAgI3NlbGYuaGFzaF9tYXAucHV0KCdydW5fc2NyZWVuJywnMicpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZmluaXNoX3Byb2Nlc3NfcmVzdWx0KCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICJUYWJsZUNsaWNrIiBvciBzZWxmLmxpc3RlbmVyID09J0NhcmRzQ2xpY2snOgogICAgICAgICAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoc2VsZi5oYXNoX21hcC5nZXQoIm1hdGNoaW5nX3RhYmxlIikpCiAgICAgICAgICAgICAgICBjdXJyZW50X2VsZW0gPSBqbGlzdFsnY3VzdG9tdGFibGUnXVsndGFibGVkYXRhJ11baW50KGN1cnJlbnRfc3RyKV0KICAgICAgICAgICAgICAgIG5hbWUgPSBzdHIoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJmaWVsZCIsIG5hbWUpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnbGlzdF9maWVsZCcsIHN0cihzZWxmLmhhc2hfbWFwLmdldCgnc3RyX2ZpZWxkJykpKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1Nob3dEaWFsb2cnLCAn0J3QsNGB0YLRgNC+0LnQutCw0KHQvtC+0YLQstC10YLRgdGC0LLQuNGP0JTQuNCw0LvQvtCzJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93RGlhbG9nU3R5bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5kdW1wcyh7InRpdGxlIjogbmFtZSwgInllcyI6ICLQlNCwIiwgIm5vIjogItCd0LXRgiJ9KSkKCiAgICAgICAgZWxpZiBzZWxmLmhhc2hfbWFwLmdldCgiZXZlbnQiKSA9PSAnb25SZXN1bHRQb3NpdGl2ZSc6CiAgICAgICAgICAgIGtleV9jYXJkID0gaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uJykpCgogICAgICAgICAgICBqcmVjb3JkID0ganNvbi5sb2FkcyhzZWxmLmhhc2hfbWFwLmdldCgibWF0Y2hpbmdfdGFibGUiKSkKICAgICAgICAgICAgcmVjID0ganJlY29yZFsnY3VzdG9tdGFibGUnXVsndGFibGVkYXRhJ11ba2V5X2NhcmRdCiAgICAgICAgICAgICMgZm9yIGVsZW0gaW4gcmVjOgogICAgICAgICAgICAjICAgICBpZiBlbGVtLmdldCgna2V5JykgPT0ga2V5X2NhcmQ6CiAgICAgICAgICAgIHJlY1sndmFsdWUnXSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RfZmllbGQnKQogICAgICAgICAgICAjc2VsZi5fc2V0X2JhY2tncm91bmRfcm93X2NvbG9yKHJlYykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIm1hdGNoaW5nX3RhYmxlIiwganNvbi5kdW1wcyhqcmVjb3JkLCBlbnN1cmVfYXNjaWk9RmFsc2UpLmVuY29kZSgndXRmOCcpLmRlY29kZSgpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGdldF90ZW1wbGF0ZV9ieV9kZWZhdWx0KHByaW50X3BhcmFtczogZGljdCk6CgogICAgICAgIGZpbGVfbmFtZSA9ICcnCiAgICAgICAgaWYgJ2Z1bGxfcGF0aCcgbm90IGluIHByaW50X3BhcmFtczoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigi0JrQu9GO0YfQsCAnZnVsbF9wYXRoJyDQvdC1INC90LDQudC00LXQvdC+INCyINC90LDRgdGC0YDQvtC50LrQsNGFLiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmlsZV9uYW1lID0gcHJpbnRfcGFyYW1zWydmdWxsX3BhdGgnXQoKICAgICAgICBpZiBmaWxlX25hbWUgYW5kIG9zLnBhdGguZXhpc3RzKGZpbGVfbmFtZSk6CiAgICAgICAgICAgIHJldHVybiBvcy5wYXRoLnNwbGl0KGZpbGVfbmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gb3MucGF0aC5zcGxpdChmaWxlX25hbWUpICNERUJVRywgbXVzdCBkZWxldGUKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmJ9Ck0LDQudC7INGI0LDQsdC70L7QvdCwIHtmaWxlX25hbWV9INC90LUg0L3QsNC50LTQtdC9JykKCgoKICAgIGRlZiBfcHJlcGFyZV90YWJsZV9kYXRhKHNlbGYsIGRldGFpbHMpOgogICAgICAgIHRhYmxlX2RhdGEgPSBbe31dCiAgICAgICAgZm9yIHJlY29yZCBpbiBkZXRhaWxzOgogICAgICAgICAgICBwcm9kdWN0X3JvdyA9IHsna2V5Jzogc3RyKHJlY29yZFsna2V5J10pLCAndmFsdWUnOiBzdHIocmVjb3JkWyd2YWx1ZSddKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgJ19sYXlvdXQnOiBzZWxmLl9nZXRfZG9jX3RhYmxlX3Jvd192aWV3KCl9CgogICAgICAgICAgICBzZWxmLl9zZXRfYmFja2dyb3VuZF9yb3dfY29sb3IocHJvZHVjdF9yb3cpCgogICAgICAgICAgICAjIGlmIHNlbGYuX2FkZGVkX2dvb2RzX2hhc19rZXkocHJvZHVjdF9yb3dbJ2tleSddKToKICAgICAgICAgICAgIyAgICAgdGFibGVfZGF0YS5pbnNlcnQoMSwgcHJvZHVjdF9yb3cpCiAgICAgICAgICAgICMgZWxzZToKICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3ZpZXcoc2VsZiwgdGFibGVfZGF0YSk6CiAgICAgICAgdGFibGVfdmlldyA9IHdpZGdldHMuQ3VzdG9tVGFibGUoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0JrQu9GO0YcnLCBzZWxmLnJzX3NldHRpbmdzKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9CX0L3QsNGH0LXQvdC40LUnLCBzZWxmLnJzX3NldHRpbmdzKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0ZGRkZGRicKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICB0YWJsZWRhdGE9dGFibGVfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHRhYmxlX3ZpZXcKCiAgICBkZWYgX2dldF9kb2NfdGFibGVfcm93X3ZpZXcoc2VsZik6CiAgICAgICAgcm93X3ZpZXcgPSB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQGtleScsIHNlbGYucnNfc2V0dGluZ3MpLAoKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTMsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHZhbHVlJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcm93X3ZpZXcKCgogICAgZGVmIF9zZXRfYmFja2dyb3VuZF9yb3dfY29sb3Ioc2VsZiwgcHJvZHVjdF9yb3cpOgogICAgICAgIGJhY2tncm91bmRfY29sb3IgPSAnI0ZCRTlFNycgI0ZCRTlFNyAgIiNGRkY5QzQiCiAgICAgICAgdmFsdWUgPSBwcm9kdWN0X3Jvd1sndmFsdWUnXQoKICAgICAgICBpZiB2YWx1ZToKICAgICAgICAgICAgYmFja2dyb3VuZF9jb2xvciA9ICIjRkZGRkZGIgoKICAgICAgICBwcm9kdWN0X3Jvd1snX2xheW91dCddLkJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRfY29sb3IKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgc2hvd19zY3JlZW4oaGFzaF9tYXAsIGRhdGFfZm9yX3ByaW50aW5nKToKICAgICAgICBpZiBkYXRhX2Zvcl9wcmludGluZzoKICAgICAgICAgICAgaGFzaF9tYXAucHV0KCdwcmludF9wYXJhbWV0ZXJzJywganNvbi5kdW1wcyhkYXRhX2Zvcl9wcmludGluZykpCiAgICAgICAgICAgICMgaWYgc2VsZi5wYXJhbXM6CiAgICAgICAgICAgIGhhc2hfbWFwLnNob3dfcHJvY2Vzc19yZXN1bHQoJ9Cf0LXRh9Cw0YLRjCcsICfQoNC10LfRg9C70YzRgtCw0YInKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBwcmludF9mcm9tX2FueV9zY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzLCBkYXRhX2Zvcl9wcmludGluZyk6CiAgICAgICAgaWYgbm90IGRhdGFfZm9yX3ByaW50aW5nOgogICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgI2hhc2hfbWFwLnB1dCgncHJpbnRfcGFyYW1ldGVycycsIGpzb24uZHVtcHMoZGF0YV9mb3JfcHJpbnRpbmcpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhcmFtX25hbWVfZm9yX3NldHRpbmdzID0gaGFzaF9tYXBbJ2N1cnJlbnRfb3BlcmF0aW9uX25hbWUnXSAgKyBoYXNoX21hcFsKICAgICAgICAgICAgICAgICdjdXJyZW50X3NjcmVlbl9uYW1lJ10KCiAgICAgICAgICAgIHN0cl90YWJsZV92aWV3ID0gcnNfc2V0dGluZ3MuZ2V0KHBhcmFtX25hbWVfZm9yX3NldHRpbmdzKQogICAgICAgICAgICBpZiBzdHJfdGFibGVfdmlldzogICPQndCw0YjQu9C4INC90LDRgdGC0YDQvtC50LrQuCDQtNC70Y8g0LLRi9C30LLQsNCy0YjQtdCz0L4g0Y3QutGA0LDQvdCwCiAgICAgICAgICAgICAgICBwYXJhbXNfbWF0Y2ggPSBqc29uLmxvYWRzKHN0cl90YWJsZV92aWV3KQogICAgICAgICAgICAgICAgZGF0YV9mb3JfcHJpbnRpbmcgPSBIdG1sVmlldy5yZXBsYXNlX3BhcmFtc19uYW1lcyhkYXRhX2Zvcl9wcmludGluZywgcGFyYW1zX21hdGNoLmdldCgncHJpbnRfcGFyYW1zJykpCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9kaXJlY3RvcnksIHRlbXBsYXRlX2ZpbGUgID0gSHRtbFZpZXcuZ2V0X3RlbXBsYXRlX2J5X2RlZmF1bHQocGFyYW1zX21hdGNoKQogICAgICAgICAgICAgICAgI2hhc2hfbWFwLnRvYXN0KGYn0J/Rg9GC0Yw6e3RlbXBsYXRlX2RpcmVjdG9yeX0gINCk0LDQudC7Ont0ZW1wbGF0ZV9maWxlfScpCiAgICAgICAgICAgICAgICBodG1scmVzdWx0ID0gcHJpbnRpbmdfZmFjdG9yeS5IVE1MRG9jdW1lbnQodGVtcGxhdGVfZGlyZWN0b3J5LCB0ZW1wbGF0ZV9maWxlKS5jcmVhdGVfaHRtbChkYXRhX2Zvcl9wcmludGluZykKICAgICAgICAgICAgICAgIGh0bWxyZXN1bHQgPSBwcmludGluZ19mYWN0b3J5LkhUTUxEb2N1bWVudC5pbmplY3RfY3NzX3N0eWxlKGh0bWxyZXN1bHQsIHBhcmFtc19tYXRjaCkKICAgICAgICAgICAgICAgICMgd2l0aCBvcGVuKHN1Q2xhc3MuZ2V0X3RlbXBfZGlyKCkgKyAnLy90ZW1wbGF0ZS5odG1sJywgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgIyAgICAgZmlsZS53cml0ZShodG1scmVzdWx0KQogICAgICAgICAgICAgICAgIyBzZWxmLnBhcmFtc1sndGVtcGxhdGUnXSxzZWxmLnBhcmFtc1sndGVtcGxhdGVfZm9sZGVyJ10KCiAgICAgICAgICAgICAgICBoYXNoX21hcC5wdXQoIlByaW50UHJldmlldyIsIGh0bWxyZXN1bHQpCgogICAgICAgICAgICBlbHNlOiAgI9CS0YvQt9GL0LLQsNC10Lwg0Y3RgtC+0YIg0Y3QutCw0L0g0YHRgNC10LTRgdGC0LLQsNC80Lgg0YHQuNC80L/Qu9CwLCDQtNC70Y8g0L3QsNGB0YLRgNC+0LnQutC4INC/0LDRgNCw0LzQtdGC0YDQvtCyCiAgICAgICAgICAgICAgICBoYXNoX21hcC5wdXQoJ3ByaW50X3BhcmFtZXRlcnMnLCBqc29uLmR1bXBzKGRhdGFfZm9yX3ByaW50aW5nKSkKICAgICAgICAgICAgICAgIGhhc2hfbWFwWyd0ZW1wbGF0ZV9zZXR0aW5nc19uYW1lJ10gPSBwYXJhbV9uYW1lX2Zvcl9zZXR0aW5ncwogICAgICAgICAgICAgICAgI2hhc2hfbWFwLnNob3dfcHJvY2Vzc19yZXN1bHQoJ9Cf0LXRh9Cw0YLRjCcsICfQoNC10LfRg9C70YzRgtCw0YInKQogICAgICAgICAgICAgICAgaGFzaF9tYXAuc2hvd19wcm9jZXNzX3Jlc3VsdCgn0J/QtdGH0LDRgtGMJywgJ9Ch0L/QuNGB0L7QuiDRiNCw0LHQu9C+0L3QvtCyJykKCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIHJlcGxhc2VfcGFyYW1zX25hbWVzKGRhdGFfZm9yX3ByaW50aW5nLCBwYXJhbXNfbWF0Y2gpOgogICAgICAgIG5ld19kYXRhID0ge30KCiAgICAgICAgZm9yIG1hdGNoIGluIHBhcmFtc19tYXRjaDoKICAgICAgICAgICAgaWYgbWF0Y2hbJ3ZhbHVlJ10gaW4gZGF0YV9mb3JfcHJpbnRpbmcua2V5cygpOgogICAgICAgICAgICAgICAgbmV3X2tleSA9IG1hdGNoWydrZXknXQogICAgICAgICAgICAgICAgbmV3X3ZhbHVlID0gZGF0YV9mb3JfcHJpbnRpbmdbbWF0Y2hbJ3ZhbHVlJ11dCiAgICAgICAgICAgICAgICBuZXdfZGF0YVtuZXdfa2V5XSA9IG5ld192YWx1ZQogICAgICAgIHJldHVybiBuZXdfZGF0YQoKCmNsYXNzIFRlbXBsYXRlc0xpc3QoU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Ch0L/QuNGB0L7QuiDRiNCw0LHQu9C+0L3QvtCyJwogICAgcHJvY2Vzc19uYW1lID0gJ9Cf0LXRh9Cw0YLRjCcKCiAgICBkZWYgX19pbml0X18oc2VsZixoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQoKICAgICAgICBzZWxmLmhzX3NlcnZpY2UgPSBIc1NlcnZpY2Uoc2VsZi5nZXRfaHR0cF9zZXR0aW5ncygpKQogICAgICAgIHNlbGYucHJpbnRfcGFyYW1ldGVycyA9IGpzb24ubG9hZHMoc2VsZi5oYXNoX21hcC5nZXQoJ3ByaW50X3BhcmFtZXRlcnMnKSkKCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIGN1cnJlbnRfdGVtcGxhdGVfanMgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnY3VycmVudF90ZW1wbGF0ZScpCiAgICAgICAgaWYgY3VycmVudF90ZW1wbGF0ZV9qczoKICAgICAgICAgICAgY3VycmVudF90ZW1wbGF0ZSA9IGpzb24ubG9hZHMoY3VycmVudF90ZW1wbGF0ZV9qcykgaWYgY3VycmVudF90ZW1wbGF0ZV9qcyBlbHNlIE5vbmUKICAgICAgICAgICAgaWYgY3VycmVudF90ZW1wbGF0ZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X3RlbXBsYXRlJywgY3VycmVudF90ZW1wbGF0ZS5nZXQoJ25hbWUnKSBvciAnJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X3RlbXBsYXRlJywnLdC90LUg0L7Qv9GA0LXQtNC10LvQtdC90L4tJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF90ZW1wbGF0ZScsICct0L3QtSDQvtC/0YDQtdC00LXQu9C10L3Qvi0nKQoKICAgICAgICB0YXJnZXRfZGlyID0gc3VDbGFzcy5nZXRfdGVtcF9kaXIoKQogICAgICAgIGxpc3RfZGF0YSA9IHNlbGYuZ2V0X2FsbF9maWxlc19mcm9tX3BhdGNoKHRhcmdldF9kaXIpCgogICAgICAgIGRvY19jYXJkcyA9IHNlbGYuX2dldF9kb2NfY2FyZHNfdmlldyhsaXN0X2RhdGEpCiAgICAgICAgc2VsZi5oYXNoX21hcFsndGVtcGxhdGVzX2NhcmRzJ10gPSBkb2NfY2FyZHMudG9fanNvbigpCgoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzX3Jlc3VsdCgpCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdidG5fZ2V0X2h0dHBfdGVtcGxhdGVzJzoKICAgICAgICAgICAgc2VsZi5nZXRfZnJvbV9zZXJ2ZXJfd3JpdGVfb25fZGlzYygpCiAgICAgICAgZWxpZiBzZWxmLmhhc2hfbWFwLmdldCgnb25DbGljaycpPT0gJ2J0bl9nZXRfaHR0cF90ZW1wbGF0ZXMnOgogICAgICAgICAgICBzZWxmLmdldF9mcm9tX3NlcnZlcl93cml0ZV9vbl9kaXNjKCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ29uQ2xpY2snLCcnKQogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnTGF5b3V0QWN0aW9uJzoKICAgICAgICAgICAgc2VsZi5fbGF5b3V0X2FjdGlvbigpCgoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCgogICAgZGVmIHNob3coc2VsZik6CiAgICAgICAgcGFzcwoKCiAgICBkZWYgX2dldF9kb2NfY2FyZHNfdmlldyhzZWxmLCB0YWJsZV9kYXRhKToKCiAgICAgICAgY2FyZF90aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgIGNhcmRfZGF0ZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpCgogICAgICAgIGRvY19jYXJkcyA9IHdpZGdldHMuQ3VzdG9tQ2FyZHMoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAoKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAZmlsZV9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90aXRsZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuUG9wdXBNZW51QnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0n0JfQsNC00LDRgtGMINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOJywKICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGU9InNldF9ieV9kZWZhdWx0IiwKICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSJob3Jpem9udGFsIgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAZmlsZV9zaXplJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF9kYXRlX3RleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BjcmVhdGlvbl90aW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF9kYXRlX3RleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIKCgogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT10YWJsZV9kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gZG9jX2NhcmRzCgogICAgZGVmIGdldF9mcm9tX3NlcnZlcl93cml0ZV9vbl9kaXNjKHNlbGYpOgogICAgICAgIGFuc3dlciA9IHNlbGYuaHNfc2VydmljZS5nZXRfdGVtcGxhdGVzKCkKICAgICAgICBvdXRwdXRfZm9sZGVyID0gc3VDbGFzcy5nZXRfdGVtcF9kaXIoKQogICAgICAgICNzZWxmLmhhc2hfbWFwLm5vdGlmaWNhdGlvbihvdXRwdXRfZm9sZGVyLCfQn9GD0YLRjCcsVHJ1ZSkKICAgICAgICAjIENyZWF0ZSB0aGUgb3V0cHV0IGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0CiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKG91dHB1dF9mb2xkZXIpOgogICAgICAgICAgICBvcy5tYWtlZGlycyhvdXRwdXRfZm9sZGVyKQogICAgICAgIGlmIGFuc3dlclsnc3RhdHVzX2NvZGUnXSA9PSAyMDA6CiAgICAgICAgICAgIGRhdGFfbGlzdCA9IGFuc3dlclsnZGF0YSddCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVhc29uID0gYW5zd2VyWydlcnJvcl9wb29sJ10KICAgICAgICAgICAgcmFpc2UgZifQntGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8g0YEg0YHQtdGA0LLQtdGA0L7QvDoge3JlYXNvbn0nCgogICAgICAgIGZvciBkYXRhX2RpY3QgaW4gZGF0YV9saXN0OgogICAgICAgICAgICBmaWxlX25hbWUgPSBkYXRhX2RpY3RbJ25hbWUnXSArICcuaHRtJwogICAgICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2ZvbGRlciwgZmlsZV9uYW1lKQoKICAgICAgICAgICAgIyBEZWNvZGUgdGhlIEJBU0U2NCBlbmNvZGVkIEhUTUwgZGF0YQogICAgICAgICAgICBodG1sX2RhdGEgPSBwcmludGluZ19mYWN0b3J5LkhUTUxEb2N1bWVudChmaWxlX25hbWUsIGZpbGVfcGF0aCkuaW5qZWN0X2Nzc19zdHlsZShiYXNlNjQuYjY0ZGVjb2RlKGRhdGFfZGljdFsnaHRtbCddKS5kZWNvZGUoJ3V0Zi04JykpCgogICAgICAgICAgICAjIFdyaXRlIHRoZSBIVE1MIGRhdGEgdG8gdGhlIGZpbGUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoaHRtbF9kYXRhKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZSBmJ9Ce0YjQuNCx0LrQsCDRgdC+0YXRgNCw0L3QtdC90LjRjyDRhNCw0LnQu9CwIHtmaWxlX3BhdGh9JwogICAgICAgICMgICAgIHByaW50KGYnU2F2ZWQge2ZpbGVfbmFtZX0nKQogICAgICAgICMKICAgICAgICAjIHByaW50KCdBbGwgZmlsZXMgc2F2ZWQuJykKCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGdldF9hbGxfZmlsZXNfZnJvbV9wYXRjaChmb2xkZXJfcGF0aCwgbWFzaz0nJyk6CgogICAgICAgIGh0bWxfZmlsZXNfaW5mbyA9IFtdCgogICAgICAgICMgV2FsayB0aHJvdWdoIHRoZSBmb2xkZXIgYW5kIGl0cyBzdWJkaXJlY3RvcmllcwogICAgICAgIGZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKGZvbGRlcl9wYXRoKToKICAgICAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICBpZiBmaWxlLmxvd2VyKCkuZW5kc3dpdGgoJy5odG0nKTogI2FuZCBtYXNrIGluIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHJvb3QsIGZpbGUpCiAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplX2J5dGVzID0gb3MucGF0aC5nZXRzaXplKGZpbGVfcGF0aCkKICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemVfa2IgPSBmaWxlX3NpemVfYnl0ZXMgLyAxMDI0ICAjIENvbnZlcnQgYnl0ZXMgdG8ga2lsb2J5dGVzCiAgICAgICAgICAgICAgICAgICAgY3JlYXRpb25fdGltZSA9IGRhdGV0aW1lLmZyb210aW1lc3RhbXAob3MucGF0aC5nZXRjdGltZShmaWxlX3BhdGgpKQogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZF9jcmVhdGlvbl90aW1lID0gY3JlYXRpb25fdGltZS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSAgI0Zvcm1hdCBkYXRldGltZSBmb3IgdXNlciBleWVzICkpCgogICAgICAgICAgICAgICAgICAgIGZpbGVfaW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bGxfcGF0aCc6IGZpbGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpbGVfbmFtZSc6IGZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICdmaWxlX3NpemUnOiBmJ3tmaWxlX3NpemVfa2I6LjJmfSBLQicsICAjIEZvcm1hdCBmaWxlIHNpemUgd2l0aCAyIGRlY2ltYWwgcGxhY2VzCiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGlvbl90aW1lJzogZm9ybWF0dGVkX2NyZWF0aW9uX3RpbWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbF9maWxlc19pbmZvLmFwcGVuZChmaWxlX2luZm8pCgogICAgICAgICNwcmludChodG1sX2ZpbGVzX2luZm8pCiAgICAgICAgcmV0dXJuIGh0bWxfZmlsZXNfaW5mbwoKCiAgICBkZWYgX2xheW91dF9hY3Rpb24oc2VsZik6CiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2xheW91dF9saXN0ZW5lcicpID09ICfQl9Cw0LTQsNGC0Ywg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4nOgogICAgICAgICAgICBzZWxlY3RlZF9jYXJkID0ganNvbi5sb2FkcyhzZWxmLmhhc2hfbWFwLmdldCgnY2FyZF9kYXRhJykpCiAgICAgICAgICAgIGlmIHNlbGVjdGVkX2NhcmQgYW5kIGlzaW5zdGFuY2Uoc2VsZWN0ZWRfY2FyZCwgZGljdCk6CiAgICAgICAgICAgICAgICBzZWxmLnByaW50X3BhcmFtZXRlcnMgWydmaWxlX25hbWUnXSA9IHNlbGVjdGVkX2NhcmQuZ2V0KCdmaWxlX25hbWUnKQogICAgICAgICAgICAgICAgc2VsZi5wcmludF9wYXJhbWV0ZXJzWydmdWxsX3BhdGgnXSA9IHNlbGVjdGVkX2NhcmQuZ2V0KCdmdWxsX3BhdGgnKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3ByaW50X3BhcmFtZXRlcnMnLCBqc29uLmR1bXBzKHNlbGYucHJpbnRfcGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAjc2VsZi5yc19zZXR0aW5ncy5wdXQoJ2N1cnJlbnRfdGVtcGxhdGUnLGpzb24uZHVtcHMoZmlsZV9wYXJhbWV0ZXJzKSxGYWxzZSkKCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF90ZW1wbGF0ZScsIHNlbGVjdGVkX2NhcmQuZ2V0KCdmaWxlX25hbWUnKSkKCiAgICAgICAgICAgICAgICAjc2VsZi5kZWxldGVfdGVtcGxhdGVfc2V0dGluZ3Moc2VsZi5yc19zZXR0aW5ncykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cg0LXQt9GD0LvRjNGC0LDRgicpICMuc2hvd19wcm9jZXNzX3Jlc3VsdCgn0J/QtdGH0LDRgtGMJywgJ9Cg0LXQt9GD0LvRjNGC0LDRgicpCgoKY2xhc3MgU2ltcGxlRmlsZUJyb3dzZXIoU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Ch0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LInCiAgICBwcm9jZXNzX25hbWUgPSAn0J/RgNC+0LLQvtC00L3QuNC6JwogICAgZGVmIF9faW5pdF9fKHNlbGYsaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLmhzX3NlcnZpY2UgPSBoc19zZXJ2aWNlcy5EZWJ1Z1NlcnZpY2UoaXBfaG9zdCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpcF9ob3N0JykgKSAgIycxOTIuMTY4LjEuNzcnCgoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfZGlyJyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ2N1cnJlbnRfZGlyJ10gPSBzdUNsYXNzLmdldF90ZW1wX2RpcigpCiAgICAgICAgdGFyZ2V0X2RpciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2RpcicpCiAgICAgICAgbGlzdF9kYXRhID0gc2VsZi5nZXRfYWxsX2ZpbGVzX2Zyb21fcGF0Y2godGFyZ2V0X2RpcikKCiAgICAgICAgZG9jX2NhcmRzID0gc2VsZi5fZ2V0X2RvY19jYXJkc192aWV3KGxpc3RfZGF0YSkKICAgICAgICBzZWxmLmhhc2hfbWFwWyd0ZW1wbGF0ZXNfY2FyZHMnXSA9IGRvY19jYXJkcy50b19qc29uKCkKCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGN1cnJlbnRfZGlyZWN0b3J5ID0gUGF0aChzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9kaXInKSkKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzKCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdidG5fZ2V0X3VwJzoKICAgICAgICAgICAgY3VycmVudF9kaXJlY3RvcnkgPSBjdXJyZW50X2RpcmVjdG9yeS5wYXJlbnQKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnY3VycmVudF9kaXInXSA9IGN1cnJlbnRfZGlyZWN0b3J5CiAgICAgICAgICAgIHNlbGYub25fc3RhcnQoKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0nQ2FyZHNDbGljayc6CiAgICAgICAgICAgIGN1cnJlbnRfc3RyID0gc2VsZi5oYXNoX21hcC5nZXQoInNlbGVjdGVkX2NhcmRfcG9zaXRpb24iKQogICAgICAgICAgICBqbGlzdCA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oInRlbXBsYXRlc19jYXJkcyIpCiAgICAgICAgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgICAgICBpZiBjdXJyZW50X2VsZW1bJ2l0ZW1fdHlwZSddID09ICdGb2xkZXInOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnY3VycmVudF9kaXInXSA9IGN1cnJlbnRfZGlyZWN0b3J5IC8gY3VycmVudF9lbGVtWydmaWxlX25hbWUnXQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgICAgIHNlbGYuX2xheW91dF9hY3Rpb24oKQoKCgoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCgogICAgZGVmIHNob3coc2VsZik6CiAgICAgICAgcGFzcwoKCiAgICBkZWYgX2dldF9kb2NfY2FyZHNfdmlldyhzZWxmLCB0YWJsZV9kYXRhKToKCiAgICAgICAgY2FyZF90aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgIGNhcmRfZGF0ZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZERhdGVUZXh0U2l6ZScpCgogICAgICAgIGRvY19jYXJkcyA9IHdpZGdldHMuQ3VzdG9tQ2FyZHMoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAoKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcGljdHVyZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2xkPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RpdGxlX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAZmlsZV9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90aXRsZV90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodD0zCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlBvcHVwTWVudUJ1dHRvbigKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J9Cf0LXRgNC10LTQsNGC0Ywg0L3QsCDQkdCRJywKICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGU9InNlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J3JpZ2h0JywKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0iaG9yaXpvbnRhbCIKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGZpbGVfc2l6ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfZGF0ZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAY3JlYXRpb25fdGltZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfZGF0ZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgIHdpZHRoPSJtYXRjaF9wYXJlbnQiCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPXRhYmxlX2RhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiBkb2NfY2FyZHMKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgZ2V0X2FsbF9maWxlc19mcm9tX3BhdGNoKGRpcmVjdG9yeSk6CgogICAgICAgIGZpbGVzX2luZm8gPSBbXQogICAgICAgICMgV2FsayB0aHJvdWdoIHRoZSBmb2xkZXIgYW5kIGl0cyBzdWJkaXJlY3RvcmllcwogICAgICAgIGRpcmVjdG9yeV9wYXRoID0gUGF0aChkaXJlY3RvcnkpCiAgICAgICAgaXRlbXMgPSAgW2l0ZW0gZm9yIGl0ZW0gaW4gZGlyZWN0b3J5X3BhdGguaXRlcmRpcigpXQoKICAgICAgICBmb3IgaXRlbSBpbiBpdGVtczoKICAgICAgICAgICAgZmlsZV9wYXRoID0gaXRlbS5uYW1lCiAgICAgICAgICAgIGl0ZW1fdHlwZSA9ICJGaWxlIiBpZiBpdGVtLmlzX2ZpbGUoKSBlbHNlICJGb2xkZXIiCgogICAgICAgICAgICBmaWxlX3NpemVfa2IgPSBpdGVtLnN0YXQoKS5zdF9zaXplIC8gMTAyNCAgIyBDb252ZXJ0IGJ5dGVzIHRvIGtpbG9ieXRlcwogICAgICAgICAgICBjcmVhdGlvbl90aW1lID0gaXRlbS5zdGF0KCkuc3RfY3RpbWUKICAgICAgICAgICAgZm9ybWF0dGVkX2NyZWF0aW9uX3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycsIHRpbWUubG9jYWx0aW1lKGludChjcmVhdGlvbl90aW1lKSkpICNGb3JtYXQgZGF0ZXRpbWUgZm9yIHVzZXIgZXllcyApKQogICAgICAgICAgICBwaWMgPSAnI2YxNWInIGlmIGl0ZW0uaXNfZmlsZSgpICBlbHNlICcjZjA3YicKICAgICAgICAgICAgaWYgaXRlbS5pc19zeW1saW5rKCk6CiAgICAgICAgICAgICAgICBwaWMgPSAnI2YwYzEnCgogICAgICAgICAgICBmaWxlX2luZm8gPSB7CiAgICAgICAgICAgICAgICAncGljdHVyZSc6cGljLAogICAgICAgICAgICAgICAgJ2l0ZW1fdHlwZSc6aXRlbV90eXBlLAogICAgICAgICAgICAgICAgJ2Z1bGxfcGF0aCc6IHN0cihkaXJlY3RvcnlfcGF0aC5qb2lucGF0aChmaWxlX3BhdGgpKSwKICAgICAgICAgICAgICAgICdmaWxlX25hbWUnOiBmaWxlX3BhdGgsCiAgICAgICAgICAgICAgICAnZmlsZV9zaXplJzogZid7ZmlsZV9zaXplX2tiOi4yZn0gS0InLCAgIyBGb3JtYXQgZmlsZSBzaXplIHdpdGggMiBkZWNpbWFsIHBsYWNlcwogICAgICAgICAgICAgICAgJ2NyZWF0aW9uX3RpbWUnOiBmb3JtYXR0ZWRfY3JlYXRpb25fdGltZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbGVzX2luZm8uYXBwZW5kKGZpbGVfaW5mbykKCiAgICAgICAgI3ByaW50KGh0bWxfZmlsZXNfaW5mbykKICAgICAgICByZXR1cm4gZmlsZXNfaW5mbwoKCiAgICBkZWYgX2xheW91dF9hY3Rpb24oc2VsZik6CiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2xheW91dF9saXN0ZW5lcicpID09ICfQn9C10YDQtdC00LDRgtGMINC90LAg0JHQkSc6CgogICAgICAgICAgICBzZWxlY3RlZF9jYXJkID0ganNvbi5sb2FkcyhzZWxmLmhhc2hfbWFwLmdldCgnY2FyZF9kYXRhJykpCiAgICAgICAgICAgIGlmIHNlbGVjdGVkX2NhcmQgYW5kIGlzaW5zdGFuY2Uoc2VsZWN0ZWRfY2FyZCwgZGljdCk6CiAgICAgICAgICAgICAgICBmaWxlID0gUGF0aChzZWxlY3RlZF9jYXJkWydmdWxsX3BhdGgnXSkKICAgICAgICAgICAgICAgIGlmIGZpbGUuaXNfZmlsZSgpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvcHlfZmlsZShmaWxlKQoKICAgIGRlZiBfY29weV9maWxlKHNlbGYsIGZpbGUpOgogICAgICAgIGlwX2hvc3QgPSAgc2VsZi5oYXNoX21hcC5nZXQoJ2lwX2hvc3QnKSAjJzE5Mi4xNjguMS43NycKCgoKICAgICAgICB3aXRoIG9wZW4oZmlsZSwgJ3JiJykgYXMgZjoKICAgICAgICAgICAgI3NlbmRfc2VydmljZSA9IHNlbGYuaHNfc2VydmljZShpcF9ob3N0KQogICAgICAgICAgICByZXMgPSBzZWxmLmhzX3NlcnZpY2UuZXhwb3J0X2ZpbGUoZmlsZS5uYW1lLCBmKQoKICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNfY29kZSddID09IDIwMDoKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoZifQpNCw0LnQuyB7ZmlsZS5uYW1lfSDRg9GB0L/QtdGI0L3QviDQstGL0LPRgNGD0LbQtdC9JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjycpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gUHJpdG50aW5nIHNjcmVlbnMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT09PT09PSBUaWxlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKY2xhc3MgVGlsZXMoU2NyZWVuKToKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF9nZXRfdGlsZV9yb3coc2VsZiwgbGF5b3V0LCB0aWxlX2VsZW1lbnQsIHN0YXJ0X3NjcmVlbj0n0JTQvtC60YPQvNC10L3RgtGLJyk6CiAgICAgICAgdGlsZSA9IHsKICAgICAgICAgICAgImxheW91dCI6IGxheW91dCwKICAgICAgICAgICAgImRhdGEiOiBzZWxmLl9nZXRfdGlsZV9kYXRhKHRpbGVfZWxlbWVudCksCiAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgImNvbG9yIjogJyNGRkZGRkYnLAogICAgICAgICAgICAic3RhcnRfc2NyZWVuIjogZiJ7c3RhcnRfc2NyZWVufSIsCiAgICAgICAgICAgICJzdGFydF9wcm9jZXNzIjogIiIsCiAgICAgICAgICAgICdrZXknOiB0aWxlX2VsZW1lbnRbJ2RvY1R5cGUnXQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGlsZQoKCiAgICBkZWYgX2dldF9tZXNzYWdlX3RpbGUoc2VsZiwgbWVzc2FnZSwgdGV4dF9jb2xvcj0nIzAwMDAwMCcpOgogICAgICAgIHRpbGVfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgVmFsdWU9J0Bub19kYXRhJywKICAgICAgICAgICAgICAgIFRleHRTaXplPXNlbGYucnNfc2V0dGluZ3MuZ2V0KCd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgIFRleHRDb2xvcj10ZXh0X2NvbG9yLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MCwKICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0iY2VudGVyIiwKICAgICAgICAgICAgICAgIGdyYXZpdHlfdmVydGljYWw9ImNlbnRlciIsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0wLAogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPSIjZmZmZmZmIiwKICAgICAgICAgICAgICAgIFBhZGRpbmc9MAoKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgIGF1dG9TaXplVGV4dFR5cGU9J3VuaWZvcm0nLAogICAgICAgICAgICB3ZWlnaHQ9MCwKICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9ImNlbnRlciIsCiAgICAgICAgICAgIGdyYXZpdHlfdmVydGljYWw9ImNlbnRlciIsCiAgICAgICAgICAgIFN0cm9rZVdpZHRoPTMsCiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0iI2ZmZmZmZiIsCiAgICAgICAgICAgIFBhZGRpbmc9MAogICAgICAgICkKCiAgICAgICAgbGF5b3V0ID0ganNvbi5sb2Fkcyh0aWxlX3ZpZXcudG9fanNvbigpKQoKICAgICAgICB0aWxlc19saXN0ID0gW3sKICAgICAgICAgICAgImxheW91dCI6IGxheW91dCwKICAgICAgICAgICAgImRhdGEiOiB7Im5vX2RhdGEiOiBtZXNzYWdlfSwKICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAiY29sb3IiOiAnI2ZmZmZmZicsCiAgICAgICAgICAgICJzdGFydF9zY3JlZW4iOiAiIiwKICAgICAgICAgICAgInN0YXJ0X3Byb2Nlc3MiOiAiIiwKICAgICAgICAgICAgJ1N0cm9rZVdpZHRoJzogJycsCiAgICAgICAgfV0KCiAgICAgICAgY291bnRfcm93X2VsZW1lbnRzID0gMQogICAgICAgIHRpbGVzID0gewogICAgICAgICAgICAndGlsZXMnOiBbdGlsZXNfbGlzdF0sCiAgICAgICAgICAgICdiYWNrZ3JvdW5kX2NvbG9yJzogJyNmZmZmZmYnLAogICAgICAgICAgICAnU3Ryb2tlV2lkdGgnOiAnJywKICAgICAgICAgICAgJ2hlaWdodCc6ICcnCgogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRpbGVzCgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZ2V0X3RpbGVfZGF0YSh0aWxlX2VsZW1lbnQpOgogICAgICAgIGNvdW50X3ZlcmlmaWVkID0gdGlsZV9lbGVtZW50Wydjb3VudF92ZXJpZmllZCddIG9yIDAKICAgICAgICBjb3VudF91bnZlcmlmaWVkID0gdGlsZV9lbGVtZW50Wydjb3VudF91bnZlcmlmaWVkJ10gb3IgMAogICAgICAgIHF0dHlfcGxhbl92ZXJpZmllZCA9IHRpbGVfZWxlbWVudFsncXR0eV9wbGFuX3ZlcmlmaWVkJ10gb3IgMAogICAgICAgIHF0dHlfcGxhbl91bnZlcmlmaWVkID0gdGlsZV9lbGVtZW50WydxdHR5X3BsYW5fdW52ZXJpZmllZCddIG9yIDAKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImRvY05hbWUiOiB0aWxlX2VsZW1lbnRbJ2RvY1R5cGUnXSwKICAgICAgICAgICAgJ1F0dHlPZkRvY3MnOiAne30ve30nLmZvcm1hdCh0aWxlX2VsZW1lbnRbJ2NvdW50J10sIHRpbGVfZWxlbWVudFsndmVyaWZpZWQnXSksCiAgICAgICAgICAgICdjb3VudF92ZXJpZmllZCc6ICd7fS97fScuZm9ybWF0KAogICAgICAgICAgICAgICAgY291bnRfdmVyaWZpZWQgKyBjb3VudF91bnZlcmlmaWVkLAogICAgICAgICAgICAgICAgY291bnRfdW52ZXJpZmllZCksCiAgICAgICAgICAgICdxdHR5X3BsYW5fdmVyaWZpZWQnOiAne30ve30nLmZvcm1hdCgKICAgICAgICAgICAgICAgIHF0dHlfcGxhbl92ZXJpZmllZCArIHF0dHlfcGxhbl91bnZlcmlmaWVkLAogICAgICAgICAgICAgICAgcXR0eV9wbGFuX3VudmVyaWZpZWQpCiAgICAgICAgfQoKICAgIGRlZiBfZ2V0X3RpbGVfdmlldyhzZWxmKSAtPiB3aWRnZXRzLkxpbmVhckxheW91dDoKICAgICAgICB0aWxlc192aWV3ID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICBWYWx1ZT0nQGRvY05hbWUnLAogICAgICAgICAgICAgICAgVGV4dFNpemU9c2VsZi5yc19zZXR0aW5ncy5nZXQoJ3RpdGxlRG9jVHlwZUNhcmRUZXh0U2l6ZScpLAogICAgICAgICAgICAgICAgVGV4dENvbG9yPScjMDAwMDAwJywKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTAKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCdAUXR0eU9mRG9jcycsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ch0YLRgNC+0Lo6ICcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQGNvdW50X3ZlcmlmaWVkJywgc2VsZi5yc19zZXR0aW5ncyksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0KLQvtCy0LDRgNC+0LI6ICcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQHF0dHlfcGxhbl92ZXJpZmllZCcsIHNlbGYucnNfc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgYXV0b1NpemVUZXh0VHlwZT0ndW5pZm9ybScsCiAgICAgICAgICAgIHdlaWdodD0wCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGlsZXNfdmlldwoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSwgcnNfc2V0dGluZ3MpOgogICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKICAgICAgICAgICAgc2VsZi5UZXh0U2l6ZSA9IHJzX3NldHRpbmdzLmdldCgnRG9jVHlwZUNhcmRUZXh0U2l6ZScpCiAgICAgICAgICAgIHNlbGYuVGV4dENvbG9yID0gJyMzMzMzMzMnCiAgICAgICAgICAgIHNlbGYuQmFja2dyb3VuZENvbG9yID0gJ0ZGQ0M5OScKICAgICAgICAgICAgc2VsZi53ZWlnaHQgPSAwCiAgICAgICAgICAgIHNlbGYuVmFsdWUgPSB2YWx1ZQoKCmNsYXNzIEZsb3dUaWxlc1NjcmVlbihUaWxlcyk6CiAgICBzY3JlZW5fbmFtZSA9ICfQn9C70LjRgtC60LgnCiAgICBwcm9jZXNzX25hbWUgPSAn0KHQsdC+0YAg0KjQmicKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLmRiX3NlcnZpY2UgPSBEb2NTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKCiAgICAgICAgZGF0YSA9IHNlbGYuZGJfc2VydmljZS5nZXRfZG9jX2Zsb3dfc3RhdCgpCiAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgI2xheW91dCA9IHNlbGYuX2dldF90aWxlX3ZpZXcoKQogICAgICAgICAgICBsYXlvdXQgPSBqc29uLmxvYWRzKHNlbGYuX2dldF90aWxlX3ZpZXcoKS50b19qc29uKCkpCgogICAgICAgICAgICB0aWxlc19saXN0ID0gW3NlbGYuX2dldF90aWxlX3JvdyhsYXlvdXQsIGl0ZW0pIGZvciBpdGVtIGluIGRhdGFdCgogICAgICAgICAgICAjIHNwbGl0IGxpc3QgYnkgdHdvIGVsZW1lbnQgaW4gcm93CiAgICAgICAgICAgIGNvdW50X3Jvd19lbGVtZW50cyA9IDIKICAgICAgICAgICAgdGlsZXMgPSB7CiAgICAgICAgICAgICAgICAndGlsZXMnOiBbCiAgICAgICAgICAgICAgICAgICAgdGlsZXNfbGlzdFtpOmkgKyBjb3VudF9yb3dfZWxlbWVudHNdCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHRpbGVzX2xpc3QpLCBjb3VudF9yb3dfZWxlbWVudHMpCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgJ2JhY2tncm91bmRfY29sb3InOiAnI2Y1ZjVmNScKCiAgICAgICAgICAgIH0KICAgICAgICBlbHNlOgogICAgICAgICAgICB0aWxlcyA9IHNlbGYuX2dldF9tZXNzYWdlX3RpbGUoItCd0LXRgiDQt9Cw0LPRgNGD0LbQtdC90L3Ri9GFINC00L7QutGD0LzQtdC90YLQvtCyIikKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RpbGVzJywgdGlsZXMsIHRvX2pzb249VHJ1ZSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0ZpbmlzaFByb2Nlc3MnLCAnJykKICAgICAgICAjIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnQ2FyZHNDbGljayc6CiAgICAgICAgIyAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0JTQvtC60YPQvNC10L3RgtGLJykKCiAgICBkZWYgX2dldF90aWxlX3ZpZXcoc2VsZikgLT4gd2lkZ2V0cy5MaW5lYXJMYXlvdXQ6CiAgICAgICAgdGlsZXNfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgVmFsdWU9J0Bkb2NOYW1lJywKICAgICAgICAgICAgICAgIFRleHRTaXplPXNlbGYucnNfc2V0dGluZ3MuZ2V0KCd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgIFRleHRDb2xvcj0nIzAwMDAwMCcsCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0wCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5UZXh0VmlldygnQFF0dHlPZkRvY3MnLCBzZWxmLnJzX3NldHRpbmdzKSwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgIHdpZHRoPSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQodGC0YDQvtC6OiAnLCBzZWxmLnJzX3NldHRpbmdzKSwKICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ0BiYXJjX2NvdW50Jywgc2VsZi5yc19zZXR0aW5ncyksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICksCgogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgYXV0b1NpemVUZXh0VHlwZT0ndW5pZm9ybScsCiAgICAgICAgICAgIHdlaWdodD0wCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGlsZXNfdmlldwoKICAgIGRlZiBfZ2V0X3RpbGVfcm93KHNlbGYsIGxheW91dCwgdGlsZV9lbGVtZW50LCBzdGFydF9zY3JlZW49J9CU0L7QutGD0LzQtdC90YLRiycpOgogICAgICAgIHRpbGUgPSB7CiAgICAgICAgICAgICJsYXlvdXQiOiBsYXlvdXQsCiAgICAgICAgICAgICJkYXRhIjogc2VsZi5fZ2V0X3RpbGVfZGF0YSh0aWxlX2VsZW1lbnQpLAogICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICJjb2xvciI6ICcjRkZGRkZGJywKICAgICAgICAgICAgInN0YXJ0X3NjcmVlbiI6IGYie3N0YXJ0X3NjcmVlbn0iLAogICAgICAgICAgICAic3RhcnRfcHJvY2VzcyI6ICIiLAogICAgICAgICAgICAna2V5JzogdGlsZV9lbGVtZW50Wydkb2NUeXBlJ10KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRpbGUKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2dldF90aWxlX2RhdGEodGlsZV9lbGVtZW50KToKICAgICAgICBjb3VudF92ZXJpZmllZCA9IHRpbGVfZWxlbWVudFsndmVyaWZpZWQnXSBvciAwCiAgICAgICAgI2NvdW50X3VudmVyaWZpZWQgPSB0aWxlX2VsZW1lbnRbJ2NvdW50X3VudmVyaWZpZWQnXSBvciAwCiAgICAgICAgYmFyY19jb3VudCA9IHRpbGVfZWxlbWVudFsnYmFyY19jb3VudCddIG9yIDAKCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJkb2NOYW1lIjogdGlsZV9lbGVtZW50Wydkb2NUeXBlJ10sCiAgICAgICAgICAgICdRdHR5T2ZEb2NzJzogJ3t9L3t9Jy5mb3JtYXQodGlsZV9lbGVtZW50Wydjb3VudCddLCB0aWxlX2VsZW1lbnRbJ3ZlcmlmaWVkJ10pLAogICAgICAgICAgICAnY291bnRfdmVyaWZpZWQnOiBzdHIoY291bnRfdmVyaWZpZWQpLAogICAgICAgICAgICAnYmFyY19jb3VudCc6IHN0cihiYXJjX2NvdW50KQogICAgICAgIH0KCmNsYXNzIEdyb3VwU2NhblRpbGVzKFRpbGVzKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cf0LvQuNGC0LrQuCcKICAgIHByb2Nlc3NfbmFtZSA9ICfQk9GA0YPQv9C/0L7QstCw0Y8g0L7QsdGA0LDQsdC+0YLQutCwJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IERvY1NlcnZpY2UoKQogICAgICAgIHNlbGYuc2NyZWVuX25hbWUgPSBzZWxmLmhhc2hfbWFwLmdldF9jdXJyZW50X3NjcmVlbigpCiAgICAgICAgc2VsZi5wcm9jZXNzX25hbWUgPSBzZWxmLmhhc2hfbWFwLmdldF9jdXJyZW50X3Byb2Nlc3MoKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIG5vdCBzZWxmLmhhc2hfbWFwLmNvbnRhaW5zS2V5KCdjaGVja19jb25uZWN0aW9uJykgYW5kIG5vdCBzZWxmLl9jaGVja19jb25uZWN0aW9uKCk6CiAgICAgICAgICAgIHRpbGVzID0gc2VsZi5fZ2V0X21lc3NhZ2VfdGlsZSgi0J7RgtGB0YPRgtGB0YLQstGD0LXRgiDRgdC+0LXQtNC40L3QtdC90LjQtSDRgSDRgdC10YDQstC10YDQvtC8IiwgdGV4dF9jb2xvcj0iI2ZmMDAwMCIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0aWxlcycsIHRpbGVzLCB0b19qc29uPVRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydjaGVja19jb25uZWN0aW9uJ10gPSBGYWxzZQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5oYXNoX21hcFsnY2hlY2tfY29ubmVjdGlvbiddID0gVHJ1ZQoKICAgICAgICBkYXRhID0gc2VsZi5kYl9zZXJ2aWNlLmdldF9kb2NzX3N0YXQoKQogICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgIGxheW91dCA9IGpzb24ubG9hZHMoc2VsZi5fZ2V0X3RpbGVfdmlldygpLnRvX2pzb24oKSkKCiAgICAgICAgICAgIHRpbGVzX2xpc3QgPSBbc2VsZi5fZ2V0X3RpbGVfcm93KGxheW91dCwgaXRlbSkgZm9yIGl0ZW0gaW4gZGF0YV0KCiAgICAgICAgICAgICMgc3BsaXQgbGlzdCBieSB0d28gZWxlbWVudCBpbiByb3cKICAgICAgICAgICAgY291bnRfcm93X2VsZW1lbnRzID0gMgogICAgICAgICAgICB0aWxlcyA9IHsKICAgICAgICAgICAgICAgICd0aWxlcyc6IFsKICAgICAgICAgICAgICAgICAgICB0aWxlc19saXN0W2k6aSArIGNvdW50X3Jvd19lbGVtZW50c10KICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4odGlsZXNfbGlzdCksIGNvdW50X3Jvd19lbGVtZW50cykKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZF9jb2xvcic6ICcjZjVmNWY1JwoKICAgICAgICAgICAgfQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRpbGVzID0gc2VsZi5fZ2V0X21lc3NhZ2VfdGlsZSgi0J3QtdGCINC30LDQs9GA0YPQttC10L3QvdGL0YUg0LTQvtC60YPQvNC10L3RgtC+0LIiKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndGlsZXMnLCB0aWxlcywgdG9fanNvbj1UcnVlKQogICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdGaW5pc2hQcm9jZXNzJywgJycpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQoKICAgIGRlZiBfY2hlY2tfY29ubmVjdGlvbihzZWxmKToKICAgICAgICBoc19zZXJ2aWNlID0gaHNfc2VydmljZXMuSHNTZXJ2aWNlKHNlbGYuZ2V0X2h0dHBfc2V0dGluZ3MoKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGhzX3NlcnZpY2UuY29tbXVuaWNhdGlvbl90ZXN0KHRpbWVvdXQ9MSkKICAgICAgICAgICAgYW5zd2VyID0gaHNfc2VydmljZS5odHRwX2Fuc3dlcgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgYW5zd2VyID0gaHNfc2VydmljZS5IdHRwQW5zd2VyKAogICAgICAgICAgICAgICAgZXJyb3I9VHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yX3RleHQ9c3RyKGUuYXJnc1swXSksCiAgICAgICAgICAgICAgICBzdGF0dXNfY29kZT00MDQsCiAgICAgICAgICAgICAgICB1cmw9aHNfc2VydmljZS51cmwpCiAgICAgICAgcmV0dXJuIG5vdCBhbnN3ZXIuZXJyb3IKCmNsYXNzIERvY3VtZW50c1RpbGVzKEdyb3VwU2NhblRpbGVzKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cf0LvQuNGC0LrQuCcKICAgIHByb2Nlc3NfbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHN1cGVyKCkub25fc3RhcnQoKQoKICAgIGRlZiBfY2hlY2tfY29ubmVjdGlvbihzZWxmKToKICAgICAgICByZXR1cm4gVHJ1ZQoKCiMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eIFRpbGVzIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl4KCiMgPT09PT09PT09PT09PT09PT09PT0gRG9jc0xpc3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgpjbGFzcyBEb2NzTGlzdFNjcmVlbihTY3JlZW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0ge30KICAgICAgICBzZWxmLnBvcHVwX21lbnVfZGF0YSA9ICcnCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgZG9jX3R5cGVzID0gc2VsZi5zZXJ2aWNlLmdldF9kb2NfdHlwZXMoKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX3NlbGVjdCddID0gJzsnLmpvaW4oWyfQktGB0LUnXSArIGRvY190eXBlcykKICAgICAgICBzZWxmLmhhc2hfbWFwWydkb2Nfc3RhdHVzX3NlbGVjdCddID0gJ9CS0YHQtTvQmiDQstGL0L/QvtC70L3QtdC90LjRjjvQktGL0LPRgNGD0LbQtdC9O9CaINCy0YvQs9GA0YPQt9C60LUnCgogICAgICAgIGRvY190eXBlID0gc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfdGlsZV9rZXknXSBvciBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9jbGljayddCiAgICAgICAgZG9jX3N0YXR1cyA9IHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2RvY19zdGF0dXMnXQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX2NsaWNrJ10gPSBkb2NfdHlwZQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX3RpbGVfa2V5J10gPSAnJwoKICAgICAgICBsaXN0X2RhdGEgPSBzZWxmLl9nZXRfZG9jX2xpc3RfZGF0YShkb2NfdHlwZSwgZG9jX3N0YXR1cykKCiAgICAgICAgZG9jX2NhcmRzID0gc2VsZi5fZ2V0X2RvY19jYXJkc192aWV3KGxpc3RfZGF0YSwgc2VsZi5wb3B1cF9tZW51X2RhdGEpCiAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jQ2FyZHMnXSA9IGRvY19jYXJkcy50b19qc29uKCkKCiAgICBkZWYgb25faW5wdXQoc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICJkb2Nfc3RhdHVzX2NsaWNrIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfZG9jX3N0YXR1cyddID0gc2VsZi5oYXNoX21hcFsiZG9jX3N0YXR1c19jbGljayJdCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnTGF5b3V0QWN0aW9uJzoKICAgICAgICAgICAgc2VsZi5fbGF5b3V0X2FjdGlvbigpCgogICAgICAgIGVsaWYgc2VsZi5faXNfcmVzdWx0X3Bvc2l0aXZlKCdjb25maXJtX2RlbGV0ZScpOgogICAgICAgICAgICBzZWxmLmNvbmZpcm1fZGVsZXRlX2RvY19saXN0ZW5lcigpCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J/Qu9C40YLQutC4JykKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBzZWxmLl92YWxpZGF0ZV9zY3JlZW5fdmFsdWVzKCkKICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKHNlbGYuc2NyZWVuX25hbWUsIGFyZ3MpCgogICAgZGVmIF9sYXlvdXRfYWN0aW9uKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgbGF5b3V0X2xpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGF5b3V0X2xpc3RlbmVyJ10KCiAgICAgICAgaWYgbGF5b3V0X2xpc3RlbmVyID09ICfQo9C00LDQu9C40YLRjCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coCiAgICAgICAgICAgICAgICBsaXN0ZW5lcj0nY29uZmlybV9kZWxldGUnLAogICAgICAgICAgICAgICAgdGl0bGU9J9Cj0LTQsNC70LjRgtGMINC00L7QutGD0LzQtdC90YIg0YEg0YPRgdGC0YDQvtC50YHRgtCy0LA/JwogICAgICAgICAgICApCiAgICAgICAgZWxpZiBsYXlvdXRfbGlzdGVuZXIgPT0gJ9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coCiAgICAgICAgICAgICAgICBsaXN0ZW5lcj0nY29uZmlybV9jbGVhcl9iYXJjb2RlX2RhdGEnLAogICAgICAgICAgICAgICAgdGl0bGU9J9Ce0YfQuNGB0YLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsD8nCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0J7RgtC/0YDQsNCy0LjRgtGMINC/0L7QstGC0L7RgNC90L4nOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKAogICAgICAgICAgICAgICAgbGlzdGVuZXI9J2NvbmZpcm1fcmVzZW5kX2RvYycsCiAgICAgICAgICAgICAgICB0aXRsZT0n0J7RgtC/0YDQsNCy0LjRgtGMINC00L7QutGD0LzQtdC90YIg0L/QvtCy0YLQvtGA0L3Qvj8nCiAgICAgICAgICAgICkKCiAgICBkZWYgX2dldF9kb2NfbGlzdF9kYXRhKHNlbGYsIGRvY190eXBlPScnLCBkb2Nfc3RhdHVzPScnKSAtPiBsaXN0OgogICAgICAgIHJlc3VsdHMgPSBzZWxmLnNlcnZpY2UuZ2V0X2RvY192aWV3X2RhdGEoZG9jX3R5cGUsIGRvY19zdGF0dXMpCiAgICAgICAgdGFibGVfZGF0YSA9IFtdCgogICAgICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICcnCgogICAgICAgICAgICBpZiByZWNvcmRbJ3ZlcmlmaWVkJ10gYW5kIHJlY29yZFsnc2VudCddOgogICAgICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQktGL0LPRgNGD0LbQtdC9JwogICAgICAgICAgICBlbGlmIHJlY29yZFsndmVyaWZpZWQnXToKICAgICAgICAgICAgICAgIGRvY19zdGF0dXMgPSAn0Jog0LLRi9Cz0YDRg9C30LrQtScKICAgICAgICAgICAgZWxpZiBub3QgKHJlY29yZFsndmVyaWZpZWQnXSBhbmQgcmVjb3JkWydzZW50J10pOgogICAgICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQmiDQstGL0L/QvtC70L3QtdC90LjRjicKCiAgICAgICAgICAgIHRhYmxlX2RhdGEuYXBwZW5kKHsKICAgICAgICAgICAgICAgICdrZXknOiByZWNvcmRbJ2lkX2RvYyddLAogICAgICAgICAgICAgICAgJ3R5cGUnOiByZWNvcmRbJ2RvY190eXBlJ10sCiAgICAgICAgICAgICAgICAnbnVtYmVyJzogcmVjb3JkWydkb2NfbiddLAogICAgICAgICAgICAgICAgJ2RhdGEnOiByZWNvcmRbJ2RvY19kYXRlJ10sCiAgICAgICAgICAgICAgICAnd2FyZWhvdXNlJzogcmVjb3JkWydSU193YXJlaG91c2UnXSwKICAgICAgICAgICAgICAgICdjb3VudHJhZ2VudCc6IHJlY29yZFsnUlNfY291bnRyYWdlbnQnXSwKICAgICAgICAgICAgICAgICdhZGRfbWFya19zZWxlY3Rpb24nOiByZWNvcmRbJ2FkZF9tYXJrX3NlbGVjdGlvbiddLAogICAgICAgICAgICAgICAgJ3N0YXR1cyc6IGRvY19zdGF0dXMKICAgICAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIHRhYmxlX2RhdGEKCiAgICBkZWYgX2dldF9kb2NfY2FyZHNfdmlldyhzZWxmLCB0YWJsZV9kYXRhLCBwb3B1cF9tZW51X2RhdGEpOgogICAgICAgIHRpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJUaXRsZVRleHRTaXplIikKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF9kYXRlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkRGF0ZVRleHRTaXplJykKCiAgICAgICAgZG9jX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHN0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2xlZnQnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B0eXBlJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9dGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPXBvcHVwX21lbnVfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGU9Im1lbnVfZGVsZXRlIiwKICAgICAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbnVtYmVyJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90aXRsZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0Bjb3VudHJhZ2VudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfZGF0ZV90ZXh0X3NpemUKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAd2FyZWhvdXNlJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF9kYXRlX3RleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT10YWJsZV9kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gZG9jX2NhcmRzCgogICAgZGVmIF9nZXRfc2VsZWN0ZWRfY2FyZChzZWxmKToKICAgICAgICBjdXJyZW50X3N0ciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImRvY0NhcmRzIikKICAgICAgICBzZWxlY3RlZF9jYXJkID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCgogICAgICAgIHJldHVybiBzZWxlY3RlZF9jYXJkCgogICAgZGVmIF9nZXRfc2VsZWN0ZWRfY2FyZF9wdXRfZGF0YShzZWxmLCBwdXRfZGF0YT1Ob25lKToKICAgICAgICBjYXJkX2RhdGEgPSBzZWxmLl9nZXRfc2VsZWN0ZWRfY2FyZCgpCgogICAgICAgIHB1dF9kYXRhID0gcHV0X2RhdGEgb3Ige30KICAgICAgICBwdXRfZGF0YVsnaWRfZG9jJ10gPSBjYXJkX2RhdGFbJ2tleSddCiAgICAgICAgcHV0X2RhdGFbJ2RvY190eXBlJ10gPSBjYXJkX2RhdGFbJ3R5cGUnXQogICAgICAgIHB1dF9kYXRhWydkb2NfbiddID0gY2FyZF9kYXRhWydudW1iZXInXQogICAgICAgIHB1dF9kYXRhWydkb2NfZGF0ZSddID0gY2FyZF9kYXRhWydkYXRhJ10KICAgICAgICBwdXRfZGF0YVsnd2FyZWhvdXNlJ10gPSBjYXJkX2RhdGFbJ3dhcmVob3VzZSddCiAgICAgICAgcHV0X2RhdGFbJ2NvdW50cmFnZW50J10gPSBjYXJkX2RhdGFbJ2NvdW50cmFnZW50J10KCiAgICAgICAgcmV0dXJuIHB1dF9kYXRhCgogICAgZGVmIF9zZXRfZG9jX3ZlcmlmaWVkKHNlbGYsIGlkX2RvYywgdmFsdWU9VHJ1ZSk6CiAgICAgICAgIyBzZXJ2aWNlID0gRG9jU2VydmljZShpZF9kb2MpCiAgICAgICAgdmFsdWUgPSBzdHIoaW50KHZhbHVlKSkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY192YWx1ZSgndmVyaWZpZWQnLCB2YWx1ZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZXJyb3JfbG9nKGUuYXJnc1swXSkKCiAgICBkZWYgZG9jX2RlbGV0ZShzZWxmLCBpZF9kb2MpOgoKICAgICAgICByZXN1bHQgPSBUcnVlCgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRlbGV0ZV9kb2MoaWRfZG9jKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5lcnJvcl9sb2coZS5hcmdzWzBdKQogICAgICAgICAgICByZXN1bHQgPSBGYWxzZQoKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIGdldF9kb2NzX2NvdW50KHNlbGYsIGRvY190eXBlPScnKToKICAgICAgICBkb2NfdHlwZSA9ICcnIGlmIG5vdCBkb2NfdHlwZSBvciBkb2NfdHlwZSA9PSAn0JLRgdC1JyBlbHNlIGRvY190eXBlCiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5nZXRfZG9jc19jb3VudChkb2NfdHlwZSkKCiAgICBkZWYgX2NsZWFyX2JhcmNvZGVfZGF0YShzZWxmLCBpZF9kb2MpOgogICAgICAgIHJldHVybiBzZWxmLnNlcnZpY2UuY2xlYXJfYmFyY29kZV9kYXRhKGlkX2RvYykKCiAgICBkZWYgY29uZmlybV9kZWxldGVfZG9jX2xpc3RlbmVyKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpCiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgIGRvY190eXBlID0gc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXQoKICAgICAgICBpZiBzZWxmLmRvY19kZWxldGUoaWRfZG9jKToKICAgICAgICAgICAgZG9jc19jb3VudCA9IHNlbGYuZ2V0X2RvY3NfY291bnQoZG9jX3R5cGU9ZG9jX3R5cGUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9CU0L7QutGD0LzQtdC90YIg0YPRgdC/0LXRiNC90L4g0YPQtNCw0LvRkdC9JykKICAgICAgICAgICAgaWYgZG9jc19jb3VudDoKICAgICAgICAgICAgICAgIHNlbGYub25fc3RhcnQoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J/Qu9C40YLQutC4JykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQntGI0LjQsdC60LAg0YPQtNCw0LvQtdC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAnKQoKICAgIGRlZiBnZXRfaWRfZG9jKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpIG9yIHt9CiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhLmdldCgna2V5Jykgb3Igc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgIHJldHVybiBpZF9kb2MKCgpjbGFzcyBHcm91cFNjYW5Eb2NzTGlzdFNjcmVlbihEb2NzTGlzdFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCiAgICBwcm9jZXNzX25hbWUgPSAn0JPRgNGD0L/Qv9C+0LLQsNGPINC+0LHRgNCw0LHQvtGC0LrQsCcKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnBvcHVwX21lbnVfZGF0YSA9ICfQo9C00LDQu9C40YLRjCcKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5vbl9zdGFydCgpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKCfQn9C+0LTRgtCy0LXRgNC00LjRgtC1INC00LXQudGB0YLQstC40LUnKQogICAgICAgICAgICBzZWxlY3RlZF9jYXJkX2tleSA9IHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2NhcmRfa2V5J10KICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnaWRfZG9jJ10gPSBzZWxlY3RlZF9jYXJkX2tleQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgn0J/QvtC00YLQstC10YDQtNC40YLQtSDQtNC10LnRgdGC0LLQuNC1Jyk6CiAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuaGFzaF9tYXBbJ2lkX2RvYyddCiAgICAgICAgICAgIHNlbGYuc2VydmljZS5kb2NfaWQgPSBpZF9kb2MKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2NfdmFsdWUoJ3ZlcmlmaWVkJywgMSkKCiAgICAgICAgICAgIHNjcmVlbl9uYW1lID0gJ9CU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLJwogICAgICAgICAgICBzY3JlZW4gPSBTY3JlZW5zRmFjdG9yeS5jcmVhdGVfc2NyZWVuKAogICAgICAgICAgICAgICAgc2NyZWVuX25hbWU9c2NyZWVuX25hbWUsCiAgICAgICAgICAgICAgICBwcm9jZXNzPXNlbGYucHJvY2Vzc19uYW1lLAogICAgICAgICAgICAgICAgaGFzaF9tYXA9c2VsZi5oYXNoX21hcCwKICAgICAgICAgICAgICAgIHJzX3NldHRpbmdzPXNlbGYucnNfc2V0dGluZ3MpCgogICAgICAgICAgICBzY3JlZW4uc2hvdyhhcmdzPXNlbGYuX2dldF9zZWxlY3RlZF9jYXJkX3B1dF9kYXRhKCkpCgoKY2xhc3MgRG9jdW1lbnRzRG9jc0xpc3RTY3JlZW4oRG9jc0xpc3RTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgtGLJwogICAgcHJvY2Vzc19uYW1lID0gJ9CU0L7QutGD0LzQtdC90YLRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UuZG9jc190YWJsZV9uYW1lID0gJ1JTX2RvY3MnCiAgICAgICAgc2VsZi5wb3B1cF9tZW51X2RhdGEgPSAnOycuam9pbigKICAgICAgICAgICAgWyfQo9C00LDQu9C40YLRjCcsICfQntGH0LjRgdGC0LjRgtGMINC00LDQvdC90YvQtSDQv9C10YDQtdGB0YfQtdGC0LAnLCAn0J7RgtC/0YDQsNCy0LjRgtGMINC/0L7QstGC0L7RgNC90L4nXSkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5vbl9zdGFydCgpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQoKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgaWRfZG9jID0gc2VsZi5nZXRfaWRfZG9jKCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnaWRfZG9jJ10gPSBpZF9kb2MKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRvY19pZCA9IGlkX2RvYwoKICAgICAgICAgICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsnCiAgICAgICAgICAgIHNjcmVlbiA9IFNjcmVlbnNGYWN0b3J5LmNyZWF0ZV9zY3JlZW4oCiAgICAgICAgICAgICAgICBzY3JlZW5fbmFtZT1zY3JlZW5fbmFtZSwKICAgICAgICAgICAgICAgIHByb2Nlc3M9c2VsZi5wcm9jZXNzX25hbWUsCiAgICAgICAgICAgICAgICBoYXNoX21hcD1zZWxmLmhhc2hfbWFwLAogICAgICAgICAgICAgICAgcnNfc2V0dGluZ3M9c2VsZi5yc19zZXR0aW5ncykKCiAgICAgICAgICAgIHNjcmVlbi5zaG93KGFyZ3M9c2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoKSkKCiAgICAgICAgZWxpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ2NvbmZpcm1fY2xlYXJfYmFyY29kZV9kYXRhJyk6CiAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuZ2V0X2lkX2RvYygpCiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2NsZWFyX2JhcmNvZGVfZGF0YShpZF9kb2MpCiAgICAgICAgICAgIGlmIHJlcy5nZXQoJ3Jlc3VsdCcpOgogICAgICAgICAgICAgICAgc2VsZi50b2FzdCgn0JTQsNC90L3Ri9C1INC/0LXRgNC10YHRh9C10YLQsCDQuCDQvNCw0YDQutC40YDQvtCy0LrQuCDQvtGH0LjRidC10L3RiycpCiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY19zdGF0dXNfdG9fdXBsb2FkKGlkX2RvYykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoJ9Cf0YDQuCDQvtGH0LjRgdGC0LrQtSDQtNCw0L3QvdGL0YUg0L/QtdGA0LXRgdGH0LXRgtCwINCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwLicpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmVycm9yX2xvZyhyZXMuZ2V0KCdlcnJvcicpKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9yZXNlbmRfZG9jJyk6CiAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuZ2V0X2lkX2RvYygpCiAgICAgICAgICAgIGh0dHBfcGFyYW1zID0gc2VsZi5nZXRfaHR0cF9zZXR0aW5ncygpCiAgICAgICAgICAgIGFuc3dlciA9IHBvc3RfY2hhbmdlc190b19zZXJ2ZXIoZiIne2lkX2RvY30nIiwgaHR0cF9wYXJhbXMpCiAgICAgICAgICAgIGlmIGFuc3dlci5nZXQoJ0Vycm9yJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICB1aV9nbG9iYWwud3JpdGVfZXJyb3Jfb25fbG9nKGYn0J7RiNC40LHQutCwINC/0L7QstGC0L7RgNC90L7QuSDQvtGC0L/RgNCw0LLQutC4INC00L7QutGD0LzQtdC90YLQsCB7c2VsZi5nZXRfZG9jX251bWJlcigpfTogJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmJ3tzdHIoYW5zd2VyLmdldCgiRXJyb3IiKSl9JykKICAgICAgICAgICAgICAgIHNlbGYucHV0X25vdGlmaWNhdGlvbih0ZXh0PWYn0J7RiNC40LHQutCwINC/0YDQuCDQvtGC0L/RgNCw0LLQutC1INC00L7QutGD0LzQtdC90YLQsCB7c2VsZi5nZXRfZG9jX251bWJlcigpfSwgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZifQv9C+0LTRgNC+0LHQvdC10LUg0LIg0LvQvtCz0LUg0L7RiNC40LHQvtC6LicpCiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQndC1INGD0LTQsNC70L7RgdGMINC+0YLQv9GA0LDQstC40YLRjCDQtNC+0LrRg9C80LXQvdGCINC/0L7QstGC0L7RgNC90L4nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRvY19pZCA9IGlkX2RvYwogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2NfdmFsdWUoJ3NlbnQnLCAxKQogICAgICAgICAgICAgICAgc2VsZi50b2FzdCgn0JTQvtC60YPQvNC10L3RgiDQvtGC0L/RgNCw0LLQu9C10L0g0L/QvtCy0YLQvtGA0L3QvicpCgogICAgZGVmIGdldF9pZF9kb2Moc2VsZik6CiAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbigiY2FyZF9kYXRhIikgb3Ige30KICAgICAgICBpZF9kb2MgPSBjYXJkX2RhdGEuZ2V0KCdrZXknKSBvciBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9jYXJkX2tleSddCiAgICAgICAgcmV0dXJuIGlkX2RvYwoKICAgIGRlZiBnZXRfZG9jX251bWJlcihzZWxmKToKICAgICAgICBjYXJkX2RhdGEgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCJjYXJkX2RhdGEiKSBvciB7fQogICAgICAgIGRvY19udW1iZXIgPSBjYXJkX2RhdGEuZ2V0KCdudW1iZXInKQogICAgICAgIHJldHVybiBkb2NfbnVtYmVyCgoKY2xhc3MgQWRyRG9jc0xpc3RTY3JlZW4oRG9jc0xpc3RTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgtGLJwogICAgcHJvY2Vzc19uYW1lID0gJ9CQ0LTRgNC10YHQvdC+0LUg0YXRgNCw0L3QtdC90LjQtScKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBBZHJEb2NTZXJ2aWNlKCkKICAgICAgICBzZWxmLnNlcnZpY2UuZG9jc190YWJsZV9uYW1lID0gJ1JTX2Fkcl9kb2NzJwogICAgICAgIHNlbGYuc2VydmljZS5kZXRhaWxzX3RhYmxlX25hbWUgPSAnUlNfYWRyX2RvY3NfdGFibGUnCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0ge30KICAgICAgICBzZWxmLmxpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIHNlbGYuZXZlbnQgPSBzZWxmLmhhc2hfbWFwWydldmVudCddCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgZG9jX3R5cGVzID0gc2VsZi5zZXJ2aWNlLmdldF9kb2NfdHlwZXMoKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY19hZHJfdHlwZV9zZWxlY3QnXSA9ICc7Jy5qb2luKFsn0JLRgdC1JywgJ9Ce0YLQsdC+0YAnLCAn0KDQsNC30LzQtdGJ0LXQvdC40LUnLCAn0J/QtdGA0LXQvNC10YnQtdC90LjQtSddKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY19zdGF0dXNfc2VsZWN0J10gPSAn0JLRgdC1O9CaINCy0YvQv9C+0LvQvdC10L3QuNGOO9CS0YvQs9GA0YPQttC10L070Jog0LLRi9Cz0YDRg9C30LrQtScKCiAgICAgICAgZG9jX3R5cGUgPSBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9jbGljayddCiAgICAgICAgaWYgbm90IGRvY190eXBlOgogICAgICAgICAgICBkb2NfdHlwZSA9ICfQktGB0LUnCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX2NsaWNrJ10gPSBkb2NfdHlwZQogICAgICAgIGRvY19zdGF0dXMgPSBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9kb2Nfc3RhdHVzJ10KICAgICAgICBpZiBub3QgZG9jX3N0YXR1czoKICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQktGB0LUnCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX2RvY19zdGF0dXMnXSA9IGRvY19zdGF0dXMKICAgICAgICAjIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlX2NsaWNrJ10gPSBkb2NfdHlwZQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX3RpbGVfa2V5J10gPSAnJwogICAgICAgIGxpc3RfZGF0YSA9IHNlbGYuX2dldF9kb2NfbGlzdF9kYXRhKGRvY190eXBlLCBkb2Nfc3RhdHVzKQogICAgICAgIGRvY19jYXJkcyA9IHNlbGYuX2dldF9kb2NfY2FyZHNfdmlldyhsaXN0X2RhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwX21lbnVfZGF0YT0n0KPQtNCw0LvQuNGC0Yw70J7Rh9C40YHRgtC40YLRjCDQtNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwO9Ce0YLQv9GA0LDQstC40YLRjCDQv9C+0LLRgtC+0YDQvdC+JykKICAgICAgICBzZWxmLmhhc2hfbWFwWydkb2NBZHJDYXJkcyddID0gZG9jX2NhcmRzLnRvX2pzb24oKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gImRvY19zdGF0dXNfY2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9kb2Nfc3RhdHVzJ10gPSBzZWxmLmhhc2hfbWFwWyJkb2Nfc3RhdHVzX2NsaWNrIl0KCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdMYXlvdXRBY3Rpb24nOgogICAgICAgICAgICBzZWxmLl9sYXlvdXRfYWN0aW9uKCkKCiAgICAgICAgZWxpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ2NvbmZpcm1fZGVsZXRlJyk6CiAgICAgICAgICAgIHNlbGYuY29uZmlybV9kZWxldGVfZG9jX2xpc3RlbmVyKCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgYXJncyA9IHNlbGYuX2dldF9zZWxlY3RlZF9jYXJkX3B1dF9kYXRhKCkKCiAgICAgICAgICAgIHNjcmVlbiA9IEFkckRvY0RldGFpbHNTY3JlZW4oc2VsZi5oYXNoX21hcCwgc2VsZi5yc19zZXR0aW5ncykKICAgICAgICAgICAgc2NyZWVuLnNob3coYXJncz1hcmdzKQoKICAgICAgICAgICAgIyBhZHJfbGlzdF9zY3JlZW4uc2NyZWVuX3ZhbHVlcyA9IHNlbGYuX2dldF9zZWxlY3RlZF9jYXJkX3B1dF9kYXRhKHNlbGYpICMgeydkb2Nfbic6ICcnLCAnZG9jX2RhdGUnOiAnJywgJ3dhcmVob3VzZSc6ICcnfQogICAgICAgICAgICAjIGFkcl9saXN0X3NjcmVlbi5zaG93KHsnaWRfZG9jJzogc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXX0pCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAiZG9jX2Fkcl90eXBlX2NsaWNrIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnZG9jX3R5cGVfY2xpY2snXSA9IHNlbGYuaGFzaF9tYXBbJ2RvY19hZHJfdHlwZV9jbGljayddCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAiYnRuX2FkZF9kb2MiOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQndC+0LLRi9C5INC00L7QutGD0LzQtdC90YInKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ09OX0JBQ0tfUFJFU1NFRCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZmluaXNoX3Byb2Nlc3MoKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ2NvbmZpcm1fY2xlYXJfYmFyY29kZV9kYXRhJzoKCiAgICAgICAgICAgIHNlbGYuX2NsZWFyX2JhcmNvZGVfZGF0YShzZWxmLmdldF9pZF9kb2MoKSkKCiAgICBkZWYgX2xheW91dF9hY3Rpb24oc2VsZikgLT4gTm9uZToKICAgICAgICBsYXlvdXRfbGlzdGVuZXIgPSBzZWxmLmhhc2hfbWFwWydsYXlvdXRfbGlzdGVuZXInXQoKICAgICAgICBpZiBsYXlvdXRfbGlzdGVuZXIgPT0gJ9Cj0LTQsNC70LjRgtGMJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X2RpYWxvZygKICAgICAgICAgICAgICAgIGxpc3RlbmVyPSdjb25maXJtX2RlbGV0ZScsCiAgICAgICAgICAgICAgICB0aXRsZT0n0KPQtNCw0LvQuNGC0Ywg0LTQvtC60YPQvNC10L3RgiDRgSDRg9GB0YLRgNC+0LnRgdGC0LLQsD8nCiAgICAgICAgICAgICkKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0J7Rh9C40YHRgtC40YLRjCDQtNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X2RpYWxvZygKICAgICAgICAgICAgICAgIGxpc3RlbmVyPSdjb25maXJtX2NsZWFyX2JhcmNvZGVfZGF0YScsCiAgICAgICAgICAgICAgICB0aXRsZT0n0J7Rh9C40YHRgtC40YLRjCDQtNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwPycKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgbGF5b3V0X2xpc3RlbmVyID09ICfQntGC0L/RgNCw0LLQuNGC0Ywg0L/QvtCy0YLQvtGA0L3Qvic6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coCiAgICAgICAgICAgICAgICBsaXN0ZW5lcj0nY29uZmlybV9yZXNlbmRfZG9jJywKICAgICAgICAgICAgICAgIHRpdGxlPSfQntGC0L/RgNCw0LLQuNGC0Ywg0LTQvtC60YPQvNC10L3RgiDQv9C+0LLRgtC+0YDQvdC+PycKICAgICAgICAgICAgKQoKICAgIGRlZiBfZ2V0X2RvY19saXN0X2RhdGEoc2VsZiwgZG9jX3R5cGU9JycsIGRvY19zdGF0dXM9JycpIC0+IGxpc3Q6CiAgICAgICAgcmVzdWx0cyA9IHNlbGYuc2VydmljZS5nZXRfZG9jX3ZpZXdfZGF0YShkb2NfdHlwZSwgZG9jX3N0YXR1cykKICAgICAgICB0YWJsZV9kYXRhID0gW10KCiAgICAgICAgZm9yIHJlY29yZCBpbiByZXN1bHRzOgogICAgICAgICAgICBkb2Nfc3RhdHVzID0gJycKCiAgICAgICAgICAgIGlmIHJlY29yZFsndmVyaWZpZWQnXSBhbmQgcmVjb3JkWydzZW50J106CiAgICAgICAgICAgICAgICBkb2Nfc3RhdHVzID0gJ9CS0YvQs9GA0YPQttC10L0nCiAgICAgICAgICAgIGVsaWYgcmVjb3JkWyd2ZXJpZmllZCddOgogICAgICAgICAgICAgICAgZG9jX3N0YXR1cyA9ICfQmiDQstGL0LPRgNGD0LfQutC1JwogICAgICAgICAgICBlbGlmIG5vdCAocmVjb3JkWyd2ZXJpZmllZCddIGFuZCByZWNvcmRbJ3NlbnQnXSk6CiAgICAgICAgICAgICAgICBkb2Nfc3RhdHVzID0gJ9CaINCy0YvQv9C+0LvQvdC10L3QuNGOJwoKICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQoewogICAgICAgICAgICAgICAgJ2tleSc6IHJlY29yZFsnaWRfZG9jJ10sCiAgICAgICAgICAgICAgICAndHlwZSc6IHJlY29yZFsnZG9jX3R5cGUnXSwKICAgICAgICAgICAgICAgICdudW1iZXInOiByZWNvcmRbJ2RvY19uJ10sCiAgICAgICAgICAgICAgICAnZGF0YSc6IHJlY29yZFsnZG9jX2RhdGUnXSwKICAgICAgICAgICAgICAgICd3YXJlaG91c2UnOiByZWNvcmRbJ1JTX3dhcmVob3VzZSddLAogICAgICAgICAgICAgICAgJ2FkZF9tYXJrX3NlbGVjdGlvbic6IHJlY29yZFsnYWRkX21hcmtfc2VsZWN0aW9uJ10sCiAgICAgICAgICAgICAgICAnc3RhdHVzJzogZG9jX3N0YXR1cwogICAgICAgICAgICB9KQoKICAgICAgICByZXR1cm4gdGFibGVfZGF0YQoKICAgIGRlZiBfZ2V0X2RvY19jYXJkc192aWV3KHNlbGYsIHRhYmxlX2RhdGEsIHBvcHVwX21lbnVfZGF0YSk6CiAgICAgICAgdGl0bGVfdGV4dF9zaXplID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoIlRpdGxlVGV4dFNpemUiKQogICAgICAgIGNhcmRfdGl0bGVfdGV4dF9zaXplID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICBjYXJkX2RhdGVfdGV4dF9zaXplID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ0NhcmREYXRlVGV4dFNpemUnKQoKICAgICAgICBkb2NfY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAc3RhdHVzJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodD0yCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHR5cGUnLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT10aXRsZV90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlBvcHVwTWVudUJ1dHRvbigKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9cG9wdXBfbWVudV9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICBWYXJpYWJsZT0ibWVudV9kZWxldGUiLAogICAgICAgICAgICAgICAgICAgICksCgogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BudW1iZXInLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Qm9sZD1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RpdGxlX3RleHRfc2l6ZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B3YXJlaG91c2UnLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX2RhdGVfdGV4dF9zaXplCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT10YWJsZV9kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gZG9jX2NhcmRzCgogICAgZGVmIF9kb2NfZGVsZXRlKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcmVzdWx0ID0gVHJ1ZQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmRlbGV0ZV9kb2MoaWRfZG9jKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5lcnJvcl9sb2coZS5hcmdzWzBdKQogICAgICAgICAgICByZXN1bHQgPSBGYWxzZQoKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgZGVmIF9nZXRfc2VsZWN0ZWRfY2FyZF9wdXRfZGF0YShzZWxmLCBwdXRfZGF0YT1Ob25lKToKICAgICAgICBjYXJkX2RhdGEgPSBzZWxmLl9nZXRfc2VsZWN0ZWRfY2FyZCgpCgogICAgICAgIHB1dF9kYXRhID0gcHV0X2RhdGEgb3Ige30KICAgICAgICBwdXRfZGF0YVsnaWRfZG9jJ10gPSBjYXJkX2RhdGFbJ2tleSddCiAgICAgICAgcHV0X2RhdGFbJ2RvY190eXBlJ10gPSBjYXJkX2RhdGFbJ3R5cGUnXQogICAgICAgIHB1dF9kYXRhWydkb2NfbiddID0gY2FyZF9kYXRhWydudW1iZXInXQogICAgICAgIHB1dF9kYXRhWydkb2NfZGF0ZSddID0gY2FyZF9kYXRhWydkYXRhJ10KICAgICAgICBwdXRfZGF0YVsnd2FyZWhvdXNlJ10gPSBjYXJkX2RhdGFbJ3dhcmVob3VzZSddCgogICAgICAgIHJldHVybiBwdXRfZGF0YQoKICAgIGRlZiBfZ2V0X2RvY3NfY291bnQoc2VsZiwgZG9jX3R5cGU9JycpOgogICAgICAgIGRvY190eXBlID0gJycgaWYgbm90IGRvY190eXBlIG9yIGRvY190eXBlID09ICfQktGB0LUnIGVsc2UgZG9jX3R5cGUKICAgICAgICByZXR1cm4gc2VsZi5zZXJ2aWNlLmdldF9kb2NzX2NvdW50KGRvY190eXBlKQoKICAgIGRlZiBjb25maXJtX2RlbGV0ZV9kb2NfbGlzdGVuZXIoc2VsZik6CiAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbigiY2FyZF9kYXRhIikKICAgICAgICBpZF9kb2MgPSBjYXJkX2RhdGFbJ2tleSddCiAgICAgICAgZG9jX3R5cGUgPSBzZWxmLmhhc2hfbWFwWydkb2NfdHlwZV9jbGljayddCgogICAgICAgIGlmIHNlbGYuZG9jX2RlbGV0ZShpZF9kb2MpOgogICAgICAgICAgICBkb2NzX2NvdW50ID0gc2VsZi5nZXRfZG9jc19jb3VudChkb2NfdHlwZT1kb2NfdHlwZSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0JTQvtC60YPQvNC10L3RgiDRg9GB0L/QtdGI0L3QviDRg9C00LDQu9GR0L0nKQogICAgICAgICAgICBpZiBkb2NzX2NvdW50OgogICAgICAgICAgICAgICAgc2VsZi5vbl9zdGFydCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQntGI0LjQsdC60LAg0YPQtNCw0LvQtdC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAnKQoKICAgIGRlZiBfZ2V0X3NlbGVjdGVkX2NhcmQoc2VsZik6CiAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgamxpc3QgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCJkb2NBZHJDYXJkcyIpCiAgICAgICAgc2VsZWN0ZWRfY2FyZCA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQoKICAgICAgICByZXR1cm4gc2VsZWN0ZWRfY2FyZAoKICAgIGRlZiBfY2xlYXJfYmFyY29kZV9kYXRhKHNlbGYsIGlkX2RvYyk6CiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5jbGVhcl9iYXJjb2RlX2RhdGEoaWRfZG9jKQoKICAgIGRlZiBnZXRfaWRfZG9jKHNlbGYpOgogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpIG9yIHt9CiAgICAgICAgaWRfZG9jID0gY2FyZF9kYXRhLmdldCgna2V5Jykgb3Igc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgIHJldHVybiBpZF9kb2MKCgpjbGFzcyBEb2NzT2ZmbGluZUxpc3RTY3JlZW4oRG9jc0xpc3RTY3JlZW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5wb3B1cF9tZW51X2RhdGEgPSAnOycuam9pbigKICAgICAgICAgICAgWyfQo9C00LDQu9C40YLRjCcsICfQntGH0LjRgdGC0LjRgtGMINC00LDQvdC90YvQtSDQv9C10YDQtdGB0YfQtdGC0LAnXSkKCgpjbGFzcyBGbG93RG9jU2NyZWVuKERvY3NMaXN0U2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9CU0L7QutGD0LzQtdC90YLRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQodCx0L7RgCDQqNCaJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuc2VydmljZSA9IGRiX3NlcnZpY2VzLkZsb3dEb2NTZXJ2aWNlKCkKICAgICAgICBzZWxmLnNlcnZpY2UuZG9jc190YWJsZV9uYW1lID0gJ1JTX2RvY3MnCiAgICAgICAgc2VsZi5wb3B1cF9tZW51X2RhdGEgPSAn0KPQtNCw0LvQuNGC0Yw70J7Rh9C40YHRgtC40YLRjCDQtNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwJwoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBzdXBlcigpLm9uX3N0YXJ0KCkKCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBhcmdzID0gc2VsZi5fZ2V0X3NlbGVjdGVkX2NhcmRfcHV0X2RhdGEoKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQn9C+0YLQvtC60KjRgtGA0LjRhdC60L7QtNC+0LLQlNC+0LrRg9C80LXQvdGC0LAnLCBhcmdzKQogICAgICAgICAgICAjIHNjcmVlbjogRmxvd0RvY0RldGFpbHNTY3JlZW4gPSBGbG93RG9jRGV0YWlsc1NjcmVlbihzZWxmLmhhc2hfbWFwLCBzZWxmLnJzX3NldHRpbmdzKQogICAgICAgICAgICAjIHNjcmVlbi5zaG93KGFyZ3M9YXJncykKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gIk9OX0JBQ0tfUFJFU1NFRCI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cf0LvQuNGC0LrQuCcpICAjZmluaXNoX3Byb2Nlc3MoKQogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnZG9jX3R5cGVfY2xpY2snOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV9jbGVhcl9iYXJjb2RlX2RhdGEnKToKICAgICAgICAgICAgaWRfZG9jID0gc2VsZi5nZXRfaWRfZG9jKCkKICAgICAgICAgICAgcmVzID0gc2VsZi5fY2xlYXJfYmFyY29kZV9kYXRhKGlkX2RvYykKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2Nfc3RhdHVzX3RvX3VwbG9hZChpZF9kb2MpCiAgICAgICAgICAgIGlmIHJlcy5nZXQoJ3Jlc3VsdCcpOgogICAgICAgICAgICAgICAgc2VsZi50b2FzdCgn0JLRgdC1INGI0YLRgNC40YXQutC+0LTRiyDRg9C00LDQu9C10L3RiyDQuNC3INC00L7QutGD0LzQtdC90YLQsCcpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQn9GA0Lgg0L7Rh9C40YHRgtC60LUg0LTQsNC90L3Ri9GFINCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwLicpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmVycm9yX2xvZyhyZXMuZ2V0KCdlcnJvcicpKQoKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBEb2NzTGlzdCBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgojID09PT09PT09PT09PT09PT09PT09IERvY0RldGFpbHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgpjbGFzcyBEb2NEZXRhaWxzU2NyZWVuKFNjcmVlbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnJzX3NldHRpbmdzID0gcnNfc2V0dGluZ3MKICAgICAgICBzZWxmLmlkX2RvYyA9IHNlbGYuaGFzaF9tYXBbJ2lkX2RvYyddCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gRG9jU2VydmljZShzZWxmLmlkX2RvYykKICAgICAgICBzZWxmLml0ZW1zX29uX3BhZ2UgPSAyMAogICAgICAgIHNlbGYucXVldWVfc2VydmljZSA9IFNjYW5uaW5nUXVldWVTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZikgLT4gTm9uZToKICAgICAgICBwYXNzCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CgogICAgICAgIGxpc3RlbmVyID0gc2VsZi5saXN0ZW5lcgoKICAgICAgICBpZiBsaXN0ZW5lciA9PSAibmV4dF9wYWdlIjoKICAgICAgICAgICAgc2VsZi5fbmV4dF9wYWdlKCkKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdwcmV2aW91c19wYWdlJzoKICAgICAgICAgICAgc2VsZi5fcHJldmlvdXNfcGFnZSgpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2l0ZW1zX29uX3BhZ2VfY2xpY2snOgogICAgICAgICAgICBzZWxmLl9zZXRfaXRlbXNfb25fcGFnZSgpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9yb3dzX2ZpbHRlcl9vbic6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X2ZpcnN0X2VsZW1lbnRfbnVtYmVyJywgJzAnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9wYWdlJywgJzEnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncm93c19maWx0ZXInLCAnMScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fcm93c19maWx0ZXJfb2ZmJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ3Jvd3NfZmlsdGVyJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1NlYXJjaFN0cmluZycsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiU2VhcmNoIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInLCAnMCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X3BhZ2UnLCAnMScpCiAgICAgICAgICAgICMgZG9jX2RldGFpbHMgPSBzZWxmLl9nZXRfZG9jX2RldGFpbHNfZGF0YSgpCiAgICAgICAgICAgICMgdGFibGVfZGF0YSA9IHNlbGYuX3ByZXBhcmVfdGFibGVfZGF0YShkb2NfZGV0YWlscykKICAgICAgICAgICAgIyB0YWJsZV92aWV3ID0gc2VsZi5fZ2V0X2RvY190YWJsZV92aWV3KHRhYmxlX2RhdGE9dGFibGVfZGF0YSkKICAgICAgICAgICAgIyBzZWxmLmhhc2hfbWFwLnB1dCgiZG9jX2dvb2RzX3RhYmxlIiwgdGFibGVfdmlldy50b19qc29uKCkpCiAgICAgICAgICAgIHNlbGYuX29uX3N0YXJ0KCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQogICAgICAgIHNlbGYuX3ZhbGlkYXRlX3NjcmVlbl92YWx1ZXMoKQoKICAgIGRlZiBfb25fc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5fc2V0X3Zpc2liaWxpdHlfb25fc3RhcnQoKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTZXRUaXRsZScsIHNlbGYuaGFzaF9tYXBbImRvY190eXBlIl0pCgogICAgICAgIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UKICAgICAgICBoYXZlX3plcm9fcGxhbiA9IEZhbHNlCiAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBGYWxzZQoKICAgICAgICBsYXN0X3NjYW5uZWRfZGV0YWlscyA9IHNlbGYuX2dldF9kb2NfZGV0YWlsc19kYXRhKGxhc3Rfc2Nhbm5lZD1UcnVlKQogICAgICAgIGxhc3Rfc2Nhbm5lZF9kYXRhID0gc2VsZi5fcHJlcGFyZV90YWJsZV9kYXRhKGxhc3Rfc2Nhbm5lZF9kZXRhaWxzKVsxXQogICAgICAgIGRvY19kZXRhaWxzID0gc2VsZi5fZ2V0X2RvY19kZXRhaWxzX2RhdGEoKQogICAgICAgIHRhYmxlX2RhdGEgPSBzZWxmLl9wcmVwYXJlX3RhYmxlX2RhdGEoZG9jX2RldGFpbHMpCiAgICAgICAgaWYgbGFzdF9zY2FubmVkX2RhdGE6CiAgICAgICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X3BhZ2UnKSA9PSAnMSc6CiAgICAgICAgICAgICAgICB0YWJsZV9kYXRhLnBvcCgxKQogICAgICAgICAgICB0YWJsZV9kYXRhLmluc2VydCgxLCBsYXN0X3NjYW5uZWRfZGF0YSkKICAgICAgICB0YWJsZV92aWV3ID0gc2VsZi5fZ2V0X2RvY190YWJsZV92aWV3KHRhYmxlX2RhdGE9dGFibGVfZGF0YSkKCiAgICAgICAgc2VsZi5oYXNoX21hcFsnaXRlbXNfb25fcGFnZV9zZWxlY3QnXSA9ICcyMDs0MDs2MCcKICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoaWdobGlnaHQnKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2hpZ2hsaWdodCcsIEZhbHNlKQogICAgICAgICAgICAjIHNlbGYuZW5hYmxlX2hpZ2hsaWdodCh0YWJsZV92aWV3LmN1c3RvbXRhYmxlKQogICAgICAgICAgICAjIHNlbGYuaGFzaF9tYXAucnVuX2V2ZW50X2FzeW5jKCdoaWdobGlnaHRfc2Nhbm5lZF9pdGVtJykKCiAgICAgICAgaWYgZG9jX2RldGFpbHM6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3RhYmxlX2xpbmVzX3F0dHknXSA9IGxlbihkb2NfZGV0YWlscykKICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSBzdW0oCiAgICAgICAgICAgICAgICBbc2VsZi5fZm9ybWF0X3RvX2Zsb2F0KHN0cihpdGVtWydxdHR5X3BsYW4nXSkpIGZvciBpdGVtIGluIGRvY19kZXRhaWxzIGlmIGl0ZW1bJ3F0dHlfcGxhbiddXSkgPiAwCiAgICAgICAgICAgIGhhdmVfemVyb19wbGFuID0gbm90IGhhdmVfcXR0eV9wbGFuCiAgICAgICAgICAgIGhhdmVfbWFya19wbGFuID0gc2VsZi5fZ2V0X2hhdmVfbWFya19wbGFuKCkKCiAgICAgICAgc2VsZi5oYXNoX21hcFsnaGF2ZV9xdHR5X3BsYW4nXSA9IGhhdmVfcXR0eV9wbGFuCiAgICAgICAgc2VsZi5oYXNoX21hcFsnaGF2ZV96ZXJvX3BsYW4nXSA9IGhhdmVfemVyb19wbGFuCiAgICAgICAgc2VsZi5oYXNoX21hcFsnaGF2ZV9tYXJrX3BsYW4nXSA9IGhhdmVfbWFya19wbGFuCgogICAgICAgIGNvbnRyb2wgPSBzZWxmLnNlcnZpY2UuZ2V0X2RvY192YWx1ZSgnY29udHJvbCcsIHNlbGYuaWRfZG9jKSBub3QgaW4gKDAsICcwJywgJ2ZhbHNlJywgJ0ZhbHNlJywgTm9uZSkKICAgICAgICBzZWxmLmhhc2hfbWFwWydjb250cm9sJ10gPSBjb250cm9sCgogICAgICAgIHNlbGYuaGFzaF9tYXBbJ3JldHVybl9zZWxlY3RlZF9kYXRhJ10gPSAnJwogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJkb2NfZ29vZHNfdGFibGUiLCB0YWJsZV92aWV3LnRvX2pzb24oKSkKCiAgICBkZWYgX2JhcmNvZGVfc2Nhbm5lZChzZWxmKToKICAgICAgICBpZF9kb2MgPSBzZWxmLmhhc2hfbWFwLmdldCgnaWRfZG9jJykKICAgICAgICBkb2MgPSBSc0RvYyhpZF9kb2MpCiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoImV2ZW50IikgPT0gIm9uUmVzdWx0UG9zaXRpdmUiOgogICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2ZsZF9iYXJjb2RlJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhJykKCiAgICAgICAgaWYgbm90IGJhcmNvZGU6CiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfcXR0eV9wbGFuJykKICAgICAgICBoYXZlX3plcm9fcGxhbiA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfemVyb19wbGFuJykKICAgICAgICBoYXZlX21hcmtfcGxhbiA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfbWFya19wbGFuJykKICAgICAgICBjb250cm9sID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnY29udHJvbCcpCgogICAgICAgIHJlcyA9IGRvYy5wcm9jZXNzX3RoZV9iYXJjb2RlKAogICAgICAgICAgICBiYXJjb2RlLAogICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiwKICAgICAgICAgICAgaGF2ZV96ZXJvX3BsYW4sCiAgICAgICAgICAgIGNvbnRyb2wsCiAgICAgICAgICAgIGhhdmVfbWFya19wbGFuLAogICAgICAgICAgICB1c2VfbWFya19zZXR0aW5nPXNlbGYucnNfc2V0dGluZ3MuZ2V0KCd1c2VfbWFyaycpKQoKICAgICAgICBpZiByZXMgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NjYW5uZWRfYmFyY29kZScsIGJhcmNvZGUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Ce0YjQuNCx0LrQsCDRgdC60LDQvdC10YDQsCcpCiAgICAgICAgICAgIHJlcyA9IHsnRXJyb3InOiAnQmFyY29kZUVycm9yJ30KICAgICAgICBlbGlmIHJlc1snRXJyb3InXToKICAgICAgICAgICAgaWYgcmVzWydFcnJvciddID09ICdBbHJlYWR5U2Nhbm5lZCc6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZScsIGpzb24uZHVtcHMoeydiYXJjb2RlJzogcmVzWydCYXJjb2RlJ10sICdkb2NfaW5mbyc6IHJlc1snZG9jX2luZm8nXX0pKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0KPQtNCw0LvQtdC90LjQtSDRiNGC0YDQuNGF0LrQvtC00LAnKQogICAgICAgICAgICBlbGlmIHJlc1snRXJyb3InXSA9PSAnUXVhbnRpdHlQbGFuUmVhY2hlZCc6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnRXJyb3JfZGVzY3JpcHRpb24nLCAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LIg0LTQvtC60YPQvNC10L3RgtC1INC/0YDQtdCy0YvRiNC10L3QvicpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKAogICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyPSfQntGI0LjQsdC60LAg0L/RgNC10LLRi9GI0LXQvdC40Y8g0L/Qu9Cw0L3QsCcsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU9J9Ca0L7Qu9C40YfQtdGB0YLQstC+INC/0LvQsNC9INCyINC00L7QutGD0LzQtdC90YLQtSDQv9GA0LXQstGL0YjQtdC90L4nKQoKICAgICAgICAgICAgZWxpZiByZXNbJ0Vycm9yJ10gPT0gJ1plcm9fcGxhbl9lcnJvcic6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KHJlc1snRGVzY3InXSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QocmVzWydEZXNjciddKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC50b2FzdCgn0KLQvtCy0LDRgCDQtNC+0LHQsNCy0LvQtdC9INCyINC00L7QutGD0LzQtdC90YInKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaGlnaGxpZ2h0JywgVHJ1ZSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2JhcmNvZGVfc2Nhbm5lZCcsIFRydWUpCgogICAgICAgIGlmIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzY2FuX2Vycm9yJywgcmVzWydFcnJvciddKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzY2FuX2Vycm9yJywgJycpCgogICAgICAgIHJldHVybiByZXMKCiAgICBkZWYgX3NldF92aXNpYmlsaXR5X29uX3N0YXJ0KHNlbGYpOgogICAgICAgIF92YXJzID0gWyd3YXJlaG91c2UnLCAnY291bnRyYWdlbnQnXQoKICAgICAgICBmb3IgdiBpbiBfdmFyczoKICAgICAgICAgICAgbmFtZSA9IGYnU2hvd197dn0nCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbbmFtZV0gPSAnMScgaWYgc2VsZi5oYXNoX21hcFt2XSBlbHNlICctMScKCiAgICAgICAgYWxsb3dfZmFjdF9pbnB1dCA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdhbGxvd19mYWN0X2lucHV0Jykgb3IgRmFsc2UKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19mYWN0X3F0dHlfaW5wdXQiLCAnMScgaWYgYWxsb3dfZmFjdF9pbnB1dCBlbHNlICctMScpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfZmFjdF9xdHR5X25vdGUiLCAnLTEnIGlmIGFsbG93X2ZhY3RfaW5wdXQgZWxzZSAnMScpCgogICAgZGVmIF9nZXRfZG9jX2RldGFpbHNfZGF0YShzZWxmLCBsYXN0X3NjYW5uZWQ9RmFsc2UpOgogICAgICAgIHNlbGYuX2NoZWNrX3ByZXZpb3VzX3BhZ2UoKQogICAgICAgIGZpcnN0X2VsZW1lbnQgPSBpbnQoc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInKSkKICAgICAgICByb3dfZmlsdGVycyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdyb3dzX2ZpbHRlcicpCiAgICAgICAgc2VhcmNoX3N0cmluZyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdTZWFyY2hTdHJpbmcnKSBpZiBzZWxmLmhhc2hfbWFwLmdldCgnU2VhcmNoU3RyaW5nJykgZWxzZSBOb25lCgogICAgICAgIGRhdGEgPSBzZWxmLnNlcnZpY2UuZ2V0X2RvY19kZXRhaWxzX2RhdGEoc2VsZi5pZF9kb2MsIDAgaWYgbGFzdF9zY2FubmVkIGVsc2UgZmlyc3RfZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgaWYgbGFzdF9zY2FubmVkIGVsc2Ugc2VsZi5pdGVtc19vbl9wYWdlLCByb3dfZmlsdGVycywgc2VhcmNoX3N0cmluZykKICAgICAgICBpZiBub3QgbGFzdF9zY2FubmVkOgogICAgICAgICAgICBzZWxmLl9jaGVja19uZXh0X3BhZ2UobGVuKGRhdGEpKQogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIF9uZXh0X3BhZ2Uoc2VsZik6CiAgICAgICAgZmlyc3RfZWxlbWVudCA9IGludChzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9maXJzdF9lbGVtZW50X251bWJlcicpKSArIHNlbGYuaXRlbXNfb25fcGFnZQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X2ZpcnN0X2VsZW1lbnRfbnVtYmVyJywgc3RyKGZpcnN0X2VsZW1lbnQpKQogICAgICAgIGN1cnJlbnRfcGFnZSA9IGludChzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9wYWdlJykpICsgMSBvciAxCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfcGFnZScsIHN0cihjdXJyZW50X3BhZ2UpKQoKICAgIGRlZiBfcHJldmlvdXNfcGFnZShzZWxmKToKICAgICAgICBmaXJzdF9lbGVtZW50ID0gaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2ZpcnN0X2VsZW1lbnRfbnVtYmVyJykpIC0gc2VsZi5pdGVtc19vbl9wYWdlCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInLCBzdHIoZmlyc3RfZWxlbWVudCkpCiAgICAgICAgY3VycmVudF9wYWdlID0gaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X3BhZ2UnKSkgLSAxIG9yIDEKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9wYWdlJywgc3RyKGN1cnJlbnRfcGFnZSkpCgogICAgZGVmIF9jaGVja19wcmV2aW91c19wYWdlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2ZpcnN0X2VsZW1lbnRfbnVtYmVyJyk6CiAgICAgICAgICAgIGZpcnN0X2VsZW1lbnQgPSBpbnQoc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInKSkKICAgICAgICAgICAgaWYgZmlyc3RfZWxlbWVudCA+IDA6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19wcmV2aW91c19wYWdlIiwgIjEiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInLCAnMCcpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfcGFnZScsICcxJykKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19wcmV2aW91c19wYWdlIiwgIjAiKQoKICAgIGRlZiBfY2hlY2tfbmV4dF9wYWdlKHNlbGYsIGVsZW1zX2NvdW50KToKICAgICAgICBpZiBlbGVtc19jb3VudCA8IHNlbGYuaXRlbXNfb25fcGFnZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfZmlyc3RfZWxlbWVudF9udW1iZXInLCAnMCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X25leHRfcGFnZSIsICIwIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19uZXh0X3BhZ2UiLCAiMSIpCgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdTaG93X3ByZXZpb3VzX3BhZ2UnKSA9PSAnMCcgYW5kIHNlbGYuaGFzaF9tYXAuZ2V0KCdTaG93X25leHRfcGFnZScpID09ICcwJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfcGFnaW5hdGlvbl9jb250cm9scyIsICItMSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfcGFnaW5hdGlvbl9jb250cm9scyIsICIxIikKCiAgICBkZWYgX3NldF9pdGVtc19vbl9wYWdlKHNlbGYpOgogICAgICAgIHZhbHVlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2l0ZW1zX29uX3BhZ2VfY2xpY2snKQogICAgICAgIHNlbGYuaXRlbXNfb25fcGFnZSA9IGludCh2YWx1ZSkKCiAgICBkZWYgX3ByZXBhcmVfdGFibGVfZGF0YShzZWxmLCBkb2NfZGV0YWlscyk6CiAgICAgICAgdGFibGVfZGF0YSA9IFt7fV0KICAgICAgICByb3dfZmlsdGVyID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgncm93c19maWx0ZXInKQoKICAgICAgICBmb3IgcmVjb3JkIGluIGRvY19kZXRhaWxzOgogICAgICAgICAgICBpZiByb3dfZmlsdGVyIGFuZCByZWNvcmRbJ3F0dHknXSA9PSByZWNvcmRbJ3F0dHlfcGxhbiddOgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIHBpYyA9ICcjZjAyYScgaWYgcmVjb3JkWydJc0RvbmUnXSAhPSAwIGVsc2UgJyNmMDBjJwogICAgICAgICAgICBpZiByZWNvcmRbJ3F0dHknXSA9PSAwIGFuZCByZWNvcmRbJ3F0dHlfcGxhbiddID09IDA6CiAgICAgICAgICAgICAgICBwaWMgPSAnJwoKICAgICAgICAgICAgcHJvZHVjdF9yb3cgPSB7CiAgICAgICAgICAgICAgICAna2V5Jzogc3RyKHJlY29yZFsnaWQnXSksCiAgICAgICAgICAgICAgICAnZ29vZF9uYW1lJzogc3RyKHJlY29yZFsnZ29vZF9uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2lkX2dvb2QnOiBzdHIocmVjb3JkWydpZF9nb29kJ10pLAogICAgICAgICAgICAgICAgJ2lkX3Byb3BlcnRpZXMnOiBzdHIocmVjb3JkWydpZF9wcm9wZXJ0aWVzJ10pLAogICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Byb3BlcnRpZXNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdpZF9zZXJpZXMnOiBzdHIocmVjb3JkWydpZF9zZXJpZXMnXSksCiAgICAgICAgICAgICAgICAnc2VyaWVzX25hbWUnOiBzdHIocmVjb3JkWydzZXJpZXNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdpZF91bml0Jzogc3RyKHJlY29yZFsnaWRfdW5pdCddKSwKICAgICAgICAgICAgICAgICd1bml0c19uYW1lJzogc3RyKHJlY29yZFsndW5pdHNfbmFtZSddIG9yICcnKSwKICAgICAgICAgICAgICAgICdjb2RlX2FydCc6ICfQmtC+0LQ6ICcgKyBzdHIocmVjb3JkWydjb2RlJ10pLAogICAgICAgICAgICAgICAgJ2FydCc6IHN0cihyZWNvcmRbJ2FydCddKSwKICAgICAgICAgICAgICAgICdwcmljZSc6IHN0cihyZWNvcmRbJ3ByaWNlJ10gaWYgcmVjb3JkWydwcmljZSddIGlzIG5vdCBOb25lIGVsc2UgMCksCiAgICAgICAgICAgICAgICAncHJpY2VfbmFtZSc6IHN0cihyZWNvcmRbJ3ByaWNlX25hbWUnXSBvciAnJyksCiAgICAgICAgICAgICAgICAncGljdHVyZSc6IHBpYywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvcHMgPSBbCiAgICAgICAgICAgICAgICAne30gJy5mb3JtYXQocHJvZHVjdF9yb3dbJ2FydCddKSBpZiBwcm9kdWN0X3Jvd1snYXJ0J10gZWxzZSAnJywKICAgICAgICAgICAgICAgICcoe30pICcuZm9ybWF0KHByb2R1Y3Rfcm93Wydwcm9wZXJ0aWVzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3Byb3BlcnRpZXNfbmFtZSddIGVsc2UgJycsCiAgICAgICAgICAgICAgICAne30nLmZvcm1hdChwcm9kdWN0X3Jvd1snc2VyaWVzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3Nlcmllc19uYW1lJ10gZWxzZSAnJywKICAgICAgICAgICAgICAgICcsIHt9Jy5mb3JtYXQocHJvZHVjdF9yb3dbJ3VuaXRzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3VuaXRzX25hbWUnXSBlbHNlICcnLAogICAgICAgICAgICBdCiAgICAgICAgICAgIHByb2R1Y3Rfcm93Wydnb29kX2luZm8nXSA9ICcnLmpvaW4ocHJvcHMpCgogICAgICAgICAgICBmb3Iga2V5IGluIFsncXR0eScsICdkX3F0dHknLCAncXR0eV9wbGFuJ106CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGYuX2Zvcm1hdF90b19mbG9hdChzdHIocmVjb3JkLmdldChrZXksIDAuMCkgb3IgMC4wKSkKICAgICAgICAgICAgICAgIHByb2R1Y3Rfcm93W2tleV0gPSBzdHIoaW50KHZhbHVlKSkgaWYgdmFsdWUuaXNfaW50ZWdlcigpIGVsc2UgdmFsdWUKCiAgICAgICAgICAgIHByb2R1Y3Rfcm93WydfbGF5b3V0J10gPSBzZWxmLl9nZXRfZG9jX3RhYmxlX3Jvd192aWV3KCkKICAgICAgICAgICAgc2VsZi5fc2V0X2JhY2tncm91bmRfcm93X2NvbG9yKHByb2R1Y3Rfcm93KQoKICAgICAgICAgICAgaWYgc2VsZi5fYWRkZWRfZ29vZHNfaGFzX2tleShwcm9kdWN0X3Jvd1sna2V5J10pOgogICAgICAgICAgICAgICAgdGFibGVfZGF0YS5pbnNlcnQoMSwgcHJvZHVjdF9yb3cpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0YWJsZV9kYXRhLmFwcGVuZChwcm9kdWN0X3JvdykKCiAgICAgICAgcmV0dXJuIHRhYmxlX2RhdGEKCiAgICBkZWYgX2dldF9kb2NfdGFibGVfdmlldyhzZWxmLCB0YWJsZV9kYXRhKToKICAgICAgICB0YWJsZV92aWV3ID0gd2lkZ2V0cy5DdXN0b21UYWJsZSgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQndCw0LfQstCw0L3QuNC1JyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTMKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQn9C70LDQvScpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0KTQsNC60YInKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgIGhlaWdodD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdpZHRoPSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRkZGRkZGJwogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucyhvdmVycmlkZV9zZWFyY2g9VHJ1ZSkub3B0aW9ucywKICAgICAgICAgICAgdGFibGVkYXRhPXRhYmxlX2RhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiB0YWJsZV92aWV3CgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3Jvd192aWV3KHNlbGYpOgogICAgICAgIHJvd192aWV3ID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ0Bnb29kX25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAZ29vZF9pbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTMsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHF0dHlfcGxhbicsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcXR0eScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcm93X3ZpZXcKCiAgICBkZWYgX3NldF9iYWNrZ3JvdW5kX3Jvd19jb2xvcihzZWxmLCBwcm9kdWN0X3Jvdyk6CiAgICAgICAgYmFja2dyb3VuZF9jb2xvciA9ICcjRkZGRkZGJwogICAgICAgIHF0dHksIHF0dHlfcGxhbiA9IGZsb2F0KHByb2R1Y3Rfcm93WydxdHR5J10pLCBmbG9hdChwcm9kdWN0X3Jvd1sncXR0eV9wbGFuJ10pCgogICAgICAgIGlmIHF0dHlfcGxhbiA+IHF0dHk6CiAgICAgICAgICAgIGJhY2tncm91bmRfY29sb3IgPSAiI0ZCRTlFNyIKCiAgICAgICAgZWxpZiBxdHR5X3BsYW4gPCBxdHR5OgogICAgICAgICAgICBiYWNrZ3JvdW5kX2NvbG9yID0gIiNGRkY5QzQiCgogICAgICAgIHByb2R1Y3Rfcm93WydfbGF5b3V0J10uQmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZF9jb2xvcgoKICAgIGRlZiBfYWRkZWRfZ29vZHNfaGFzX2tleShzZWxmLCBrZXkpOgogICAgICAgIGFkZGVkX2dvb2RzID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbignYWRkZWRfZ29vZHMnKQogICAgICAgIHJlc3VsdCA9IEZhbHNlCgogICAgICAgIGlmIGFkZGVkX2dvb2RzOgogICAgICAgICAgICBhZGRlZF9nb29kc19kb2MgPSBhZGRlZF9nb29kcy5nZXQoc2VsZi5pZF9kb2MsIFtdKQogICAgICAgICAgICByZXN1bHQgPSBzdHIoa2V5KSBpbiBbc3RyKGl0ZW0pIGZvciBpdGVtIGluIGFkZGVkX2dvb2RzX2RvY10KICAgICAgICAgICAgc2VsZi50b2FzdChyZXN1bHQpCgogICAgICAgIHJldHVybiByZXN1bHQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgZW5hYmxlX2hpZ2hsaWdodChjdXN0b210YWJsZSk6CiAgICAgICAgY3VzdG9tdGFibGVbJ3RhYmxlZGF0YSddWzFdWydfbGF5b3V0J10uQmFja2dyb3VuZENvbG9yID0gJyNGMEY4RkYnCgogICAgZGVmIGRpc2FibGVfaGlnaGxpZ2h0KHNlbGYpOgogICAgICAgIHNlbGYuX29uX3N0YXJ0KCkKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKCiAgICBkZWYgX2ZpbGxfbm9uZV92YWx1ZXMoc2VsZiwgZGF0YSwga2V5cywgZGVmYXVsdD0nJyk6CiAgICAgICAgbm9uZV9saXN0ID0gW05vbmUsICdOb25lJ10KICAgICAgICBmb3Iga2V5IGluIGtleXM6CiAgICAgICAgICAgIGRhdGFba2V5XSA9IGRlZmF1bHQgaWYgZGF0YVtrZXldIGluIG5vbmVfbGlzdCBlbHNlIGRhdGFba2V5XQoKICAgIGRlZiBzY2FuX2Vycm9yX3NvdW5kKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdzY2FuX2Vycm9yJykgYW5kIHNlbGYuaGFzaF9tYXAuZ2V0KCdzY2FuX2Vycm9yJykgIT0gIk5vbmUiOgogICAgICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnc2Nhbl9lcnJvcicpIGluIFsnUXVhbnRpdHlQbGFuUmVhY2hlZCcsICdBbHJlYWR5U2Nhbm5lZCcsICdaZXJvX3BsYW5fZXJyb3InXToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKCd3YXJuaW5nJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKCdlcnJvcicpCgogICAgZGVmIF9mb3JtYXRfdG9fZmxvYXQoc2VsZiwgdmFsdWU6IHN0cik6CiAgICAgICAgcmV0dXJuIGZsb2F0KHZhbHVlLnJlcGxhY2UodSdceGEwJywgdScnKS5yZXBsYWNlKCcsJywgJy4nKSBvciAnMC4wJykKCiAgICBkZWYgX2dldF9oYXZlX21hcmtfcGxhbihzZWxmKToKICAgICAgICBjb3VudCA9IHNlbGYuc2VydmljZS5nZXRfY291bnRfbWFya19jb2RlcyhpZF9kb2M9c2VsZi5pZF9kb2MpCiAgICAgICAgcmV0dXJuIGNvdW50ID4gMAoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgICAgICBzZWxmLlRleHRTaXplID0gJzE1JwogICAgICAgICAgICBzZWxmLlRleHRCb2xkID0gVHJ1ZQogICAgICAgICAgICBzZWxmLndpZHRoID0gJ21hdGNoX3BhcmVudCcKICAgICAgICAgICAgc2VsZi5WYWx1ZSA9IHZhbHVlCgogICAgY2xhc3MgTGluZWFyTGF5b3V0KHdpZGdldHMuTGluZWFyTGF5b3V0KToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIHNlbGYub3JpZW50YXRpb24gPSAnaG9yaXpvbnRhbCcKICAgICAgICAgICAgc2VsZi5oZWlnaHQgPSAibWF0Y2hfcGFyZW50IgogICAgICAgICAgICBzZWxmLndpZHRoID0gIm1hdGNoX3BhcmVudCIKICAgICAgICAgICAgc2VsZi5TdHJva2VXaWR0aCA9IDEKCgpjbGFzcyBHcm91cFNjYW5Eb2NEZXRhaWxzU2NyZWVuKERvY0RldGFpbHNTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsnCiAgICBwcm9jZXNzX25hbWUgPSAn0JPRgNGD0L/Qv9C+0LLQsNGPINC+0LHRgNCw0LHQvtGC0LrQsCcKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLmhzX3NlcnZpY2UgPSBoc19zZXJ2aWNlcy5Ic1NlcnZpY2Uoc2VsZi5nZXRfaHR0cF9zZXR0aW5ncygpKQogICAgICAgIHNlbGYuc2NyZWVuX3ZhbHVlcyA9IHsKICAgICAgICAgICAgJ2lkX2RvYyc6IGhhc2hfbWFwWydpZF9kb2MnXSwKICAgICAgICAgICAgJ2RvY190eXBlJzogaGFzaF9tYXBbJ2RvY190eXBlJ10sCiAgICAgICAgICAgICdkb2Nfbic6IGhhc2hfbWFwWydkb2NfbiddLAogICAgICAgICAgICAnZG9jX2RhdGUnOiBoYXNoX21hcFsnZG9jX2RhdGUnXSwKICAgICAgICAgICAgJ3dhcmVob3VzZSc6IGhhc2hfbWFwWyd3YXJlaG91c2UnXSwKICAgICAgICAgICAgJ2NvdW50cmFnZW50JzogaGFzaF9tYXBbJ2NvdW50cmFnZW50J10sCiAgICAgICAgfQoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX29uX3N0YXJ0KCkKCiAgICBkZWYgb25faW5wdXQoc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLm9uX2lucHV0KCkKICAgICAgICBsaXN0ZW5lciA9IHNlbGYuaGFzaF9tYXBbJ2xpc3RlbmVyJ10KCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBwYXNzCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2JhcmNvZGUnOgogICAgICAgICAgICBzZWxmLl9ydW5fcHJvZ3Jlc3NfYmFyY29kZV9zY2FubmluZygpCgogICAgICAgIGVsaWYgc2VsZi5faXNfcmVzdWx0X3Bvc2l0aXZlKCfQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0Jyk6CiAgICAgICAgICAgIHNlbGYuX3J1bl9wcm9ncmVzc19iYXJjb2RlX3NjYW5uaW5nKCkKCiAgICAgICAgZWxpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ1JldHJ5Q29ubmVjdGlvbicpOgogICAgICAgICAgICBzZWxmLl9ydW5fcHJvZ3Jlc3NfYmFyY29kZV9zY2FubmluZygpCgogICAgICAgIGVsaWYgc2VsZi5faXNfcmVzdWx0X25lZ2F0aXZlKCdSZXRyeUNvbm5lY3Rpb24nKToKICAgICAgICAgICAgc2VsZi5zZXRfc2Nhbm5lcl9sb2NrKEZhbHNlKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fYmFyY29kZXMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKCfQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0JykKCiAgICAgICAgZWxpZiBsaXN0ZW5lciBpbiBbJ09OX0JBQ0tfUFJFU1NFRCcsICdCQUNLX0JVVFRPTiddOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgIGRlZiBfcnVuX3Byb2dyZXNzX2JhcmNvZGVfc2Nhbm5pbmcoc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5ydW5fZXZlbnRfcHJvZ3Jlc3MoJ2RvY19kZXRhaWxzX2JlZm9yZV9wcm9jZXNzX2JhcmNvZGUnKQoKICAgIGRlZiBiZWZvcmVfcHJvY2Vzc19iYXJjb2RlKHNlbGYpOgogICAgICAgIHNlbGYuc2V0X3NjYW5uZXJfbG9jayhUcnVlKQogICAgICAgIGlmIHNlbGYuX2NoZWNrX2Nvbm5lY3Rpb24oKToKICAgICAgICAgICAgc2VsZi5fdXBkYXRlX2RvY3VtZW50X2RhdGEoKQogICAgICAgICAgICBzY2FuX3Jlc3VsdCA9IHNlbGYuX2JhcmNvZGVfc2Nhbm5lZCgpCgogICAgICAgICAgICBpZiBzY2FuX3Jlc3VsdC5nZXQoJ0Vycm9yJyk6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJ1bl9ldmVudCgnZG9jX3NjYW5fZXJyb3Jfc291bmQnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5ydW5fZXZlbnRfYXN5bmMoJ2RvY19ydW5fcG9zdF9iYXJjb2RlX3NjYW5uZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9leGVjdXRlX21ldGhvZD0nZG9jX3NjYW5fZXJyb3Jfc291bmQnKQogICAgICAgICAgICBzZWxmLnNldF9zY2FubmVyX2xvY2soRmFsc2UpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuYmVlcCgnNzAnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKGxpc3RlbmVyPSJSZXRyeUNvbm5lY3Rpb24iLCB0aXRsZT0n0J7RgtGB0YPRgtGB0YLQstGD0LXRgiDRgdC+0LXQtNC40L3QtdC90LjQtSDRgSDRgdC10YDQstC10YDQvtC8JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zPVsi0J/QvtCy0YLQvtGA0LjRgtGMIiwgItCe0YLQvNC10L3QsCJdKQoKICAgIGRlZiBfdXBkYXRlX2RvY3VtZW50X2RhdGEoc2VsZik6CiAgICAgICAgZG9jc19kYXRhID0gc2VsZi5fZ2V0X3VwZGF0ZV9jdXJyZW50X2RvY19kYXRhKCkKICAgICAgICBpZiBkb2NzX2RhdGE6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS51cGRhdGVfZGF0YV9mcm9tX2pzb24oZG9jc19kYXRhKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2Uud3JpdGVfZXJyb3Jfb25fbG9nKGYn0J7RiNC40LHQutCwINC30LDQv9C40YHQuCDQtNC+0LrRg9C80LXQvdGC0LA6ICB7ZX0nKQoKICAgIGRlZiBfZ2V0X3VwZGF0ZV9jdXJyZW50X2RvY19kYXRhKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5oc19zZXJ2aWNlLmdldF9kYXRhKCkKICAgICAgICAgICAgYW5zd2VyID0gc2VsZi5oc19zZXJ2aWNlLmh0dHBfYW5zd2VyCgogICAgICAgICAgICBpZiBhbnN3ZXIudW5hdXRob3JpemVkOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0J7RiNC40LHQutCwINCw0LLRgtC+0YDQuNC30LDRhtC40Lgg0YHQtdGA0LLQtdGA0LAgMdChJykKICAgICAgICAgICAgZWxpZiBhbnN3ZXIuZm9yYmlkZGVuOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5ub3RpZmljYXRpb24oYW5zd2VyLmVycm9yX3RleHQsIHRpdGxlPSfQntGI0LjQsdC60LAg0L7QsdC80LXQvdCwJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoYW5zd2VyLmVycm9yX3RleHQpCiAgICAgICAgICAgIGVsaWYgYW5zd2VyLmVycm9yOgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhmJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INC00L7QutGD0LzQtdC90YLQsDogIHthbnN3ZXIuZXJyb3JfdGV4dH0nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIGFuc3dlci5kYXRhCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBzZWxmLnNldF9zY2FubmVyX2xvY2soRmFsc2UpCgogICAgZGVmIHBvc3RfYmFyY29kZV9zY2FubmVkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2JhcmNvZGVfc2Nhbm5lZCcpOgogICAgICAgICAgICBhbnN3ZXIgPSBOb25lCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGFuc3dlciA9IHNlbGYuX3Bvc3RfZ29vZHNfdG9fc2VydmVyKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhlLmFyZ3NbMF0pCgogICAgICAgICAgICBpZiBhbnN3ZXIgYW5kIGFuc3dlci5nZXQoJ0Vycm9yJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmVycm9yX2xvZyhhbnN3ZXIuZ2V0KCdFcnJvcicpKQoKICAgICAgICAgICAgZG9jX2RldGFpbHMgPSBzZWxmLl9nZXRfZG9jX2RldGFpbHNfZGF0YSgpCiAgICAgICAgICAgIHRhYmxlX2RhdGEgPSBzZWxmLl9wcmVwYXJlX3RhYmxlX2RhdGEoZG9jX2RldGFpbHMpCiAgICAgICAgICAgIHRhYmxlX3ZpZXcgPSBzZWxmLl9nZXRfZG9jX3RhYmxlX3ZpZXcodGFibGVfZGF0YT10YWJsZV9kYXRhKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZG9jX2dvb2RzX3RhYmxlIiwgdGFibGVfdmlldy50b19qc29uKCkpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQoKICAgIGRlZiBfcG9zdF9nb29kc190b19zZXJ2ZXIoc2VsZik6CiAgICAgICAgcmVzID0gc2VsZi5zZXJ2aWNlLmdldF9sYXN0X2VkaXRlZF9nb29kcyh0b19qc29uPUZhbHNlKQogICAgICAgIGhzX3NlcnZpY2UgPSBIc1NlcnZpY2Uoc2VsZi5nZXRfaHR0cF9zZXR0aW5ncygpKQoKICAgICAgICBpZiBpc2luc3RhbmNlKHJlcywgZGljdCkgYW5kIHJlcy5nZXQoJ0Vycm9yJyk6CiAgICAgICAgICAgIGFuc3dlciA9IHsnZW1wdHknOiBUcnVlLCAnRXJyb3InOiByZXMuZ2V0KCdFcnJvcicpfQogICAgICAgICAgICByZXR1cm4gYW5zd2VyCiAgICAgICAgZWxpZiByZXM6CiAgICAgICAgICAgIGhzX3NlcnZpY2Uuc2VuZF9kb2N1bWVudHMocmVzKQogICAgICAgICAgICBhbnN3ZXIgPSBoc19zZXJ2aWNlLmh0dHBfYW5zd2VyCiAgICAgICAgICAgIGlmIGFuc3dlci5lcnJvcjoKICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coYW5zd2VyLmVycm9yX3RleHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnVwZGF0ZV9zZW50X2RhdGEocmVzKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZS5hcmdzWzBdKQoKICAgICAgICAjINC/0L7QutCwINGH0YLQviDQvtGC0LrQu9GO0YfQuNC7INC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0LkgZ2V0LdC30LDQv9GA0L7RgSwg0L/RgNC+0LLQtdGA0Y/QtdC8INC/0YDQvtC40LfQstC+0LTQuNGC0LXQu9GM0L3QvtGB0YLRjAoKICAgICAgICAjIGRvY3NfZGF0YSA9IGhzX3NlcnZpY2UuZ2V0X2RhdGEoKQogICAgICAgICMKICAgICAgICAjIGlmIGRvY3NfZGF0YS5nZXQoJ2RhdGEnKToKICAgICAgICAjICAgICB0cnk6CiAgICAgICAgIyAgICAgICAgIHNlbGYuc2VydmljZS51cGRhdGVfZGF0YV9mcm9tX2pzb24oZG9jc19kYXRhWydkYXRhJ10pCiAgICAgICAgIyAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgICAgICAgICBzZWxmLnNlcnZpY2Uud3JpdGVfZXJyb3Jfb25fbG9nKGUuYXJnc1swXSkKCiAgICBkZWYgX2NoZWNrX2Nvbm5lY3Rpb24oc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmhzX3NlcnZpY2UuY29tbXVuaWNhdGlvbl90ZXN0KHRpbWVvdXQ9MSkKICAgICAgICAgICAgYW5zd2VyID0gc2VsZi5oc19zZXJ2aWNlLmh0dHBfYW5zd2VyCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBhbnN3ZXIgPSBzZWxmLmhzX3NlcnZpY2UuSHR0cEFuc3dlcigKICAgICAgICAgICAgICAgIGVycm9yPVRydWUsCiAgICAgICAgICAgICAgICBlcnJvcl90ZXh0PXN0cihlLmFyZ3NbMF0pLAogICAgICAgICAgICAgICAgc3RhdHVzX2NvZGU9NDA0LAogICAgICAgICAgICAgICAgdXJsPXNlbGYuaHNfc2VydmljZS51cmwpCgogICAgICAgIHJldHVybiBub3QgYW5zd2VyLmVycm9yCgogICAgZGVmIF9fZ2V0X2RvY190YWJsZV92aWV3KHNlbGYsIHRhYmxlX2RhdGEpOgogICAgICAgIHRhYmxlX3ZpZXcgPSB3aWRnZXRzLkN1c3RvbVRhYmxlKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cd0LDQt9Cy0LDQvdC40LUnKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9NAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cf0LvQsNC9JyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTIKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQpNCw0LrRgiDRg9GB0YLRgNC+0LnRgdGC0LLQsCcpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0yCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J7QsdGJ0LjQuSDRhNCw0LrRgicpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0yCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgdGFibGVkYXRhPXRhYmxlX2RhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiB0YWJsZV92aWV3CgogICAgZGVmIF9fZ2V0X2RvY190YWJsZV9yb3dfdmlldyhzZWxmKToKICAgICAgICByb3dfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCdAZ29vZF9uYW1lJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGdvb2RfaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD00LAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BxdHR5X3BsYW4nLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTIsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGRfcXR0eScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MiwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcXR0eScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0yLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcm93X3ZpZXcKCiAgICBkZWYgc2Nhbl9lcnJvcl9zb3VuZChzZWxmKToKICAgICAgICBzdXBlcigpLnNjYW5fZXJyb3Jfc291bmQoKQoKICAgIGRlZiBzZXRfc2Nhbm5lcl9sb2NrKHNlbGYsIHZhbHVlOiBib29sKToKICAgICAgICBpZiAndXJvdm8nIGluIHNlbGYuaGFzaF9tYXAuZ2V0KCdERVZJQ0VfTU9ERUwnKS5sb3dlcigpOgogICAgICAgICAgICBzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIodmFsdWUpCgpjbGFzcyBHcm91cFNjYW5Eb2NEZXRhaWxzU2NyZWVuTmV3KERvY0RldGFpbHNTY3JlZW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCgoKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5fb25fc3RhcnQoKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGxpc3RlbmVycyA9IHsKICAgICAgICAgICAgJ2JhcmNvZGUnOiBzZWxmLl9iYXJjb2RlX3NjYW5uZWQsCiAgICAgICAgfQogICAgICAgIGlmIHNlbGYubGlzdGVuZXIgaW4gbGlzdGVuZXJzOgogICAgICAgICAgICBsaXN0ZW5lcnNbc2VsZi5saXN0ZW5lcl0oKQoKICAgIGRlZiBfYmFyY29kZV9zY2FubmVkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCJldmVudCIpID09ICJvblJlc3VsdFBvc2l0aXZlIjoKICAgICAgICAgICAgYmFyY29kZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdmbGRfYmFyY29kZScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYmFyY29kZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdiYXJjb2RlX2NhbWVyYScpCgogICAgICAgIGlmIG5vdCBiYXJjb2RlOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBwcm9jZXNzIHRoZSBiYXJjb2RlCiAgICAgICAgIyBiYXJjb2RlX3dvcmtlciA9IEJhcmNvZGVXb3JrZXIoCiAgICAgICAgIyAgICAgc2VsZi5pZF9kb2MsICoqc2VsZi5fZ2V0X2JhcmNvZGVfcHJvY2Vzc19wYXJhbXMoKSkKICAgICAgICAjCiAgICAgICAgIyByZXN1bHQgPSBiYXJjb2RlX3dvcmtlci5wcm9jZXNzX3RoZV9iYXJjb2RlKGJhcmNvZGUpCiAgICAgICAgIyBpZiByZXN1bHQuZXJyb3I6CiAgICAgICAgIyAgICAgc2VsZi5fcHJvY2Vzc19lcnJvcl9zY2FuX2JhcmNvZGUocmVzdWx0KQogICAgICAgICMgICAgIHJldHVybgoKCiAgICAgICAgIyBzYXZlIGJhcmMgcXVldWUKICAgICAgICAjIHJ1biBhZnRlcl9zY2FuX3Byb2Nlc3NpbmcgYXN5bmMgaHR0cCBwb3N0IC0+IGhzLnNlbmRfZG9jdW1lbnRfbGluZXMoKQogICAgICAgICMgaGFzaF9tYXAucHV0KCdzZW5kX2RvY3VtZW50X2xpbmVzX3J1bm5pbmcnLCBUcnVlKQogICAgICAgICMgaWYgMjAwIHVwZGF0ZSBiYXJjIHF1ZXVlCiAgICAgICAgIyAgIHVwZGF0ZSBSU19kb2NzX3RhYmxlCiAgICAgICAgIyAgIHVwZGF0ZSBxdWV1ZSBzZW50IHN0YXR1cwogICAgICAgICMgaGFzaF9tYXAucHV0KCdzZW5kX2RvY3VtZW50X2xpbmVzX3J1bm5pbmcnLCBGYWxzZSkKCiAgICBkZWYgYWZ0ZXJfc2Nhbl9wcm9jZXNzaW5nKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgX2dldF9iYXJjb2RlX3Byb2Nlc3NfcGFyYW1zKHNlbGYpOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICdoYXZlX3F0dHlfcGxhbic6IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfcXR0eV9wbGFuJyksCiAgICAgICAgICAgICdoYXZlX3plcm9fcGxhbic6IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfemVyb19wbGFuJyksCiAgICAgICAgICAgICdoYXZlX21hcmtfcGxhbic6IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfbWFya19wbGFuJyksCiAgICAgICAgICAgICdjb250cm9sJzogc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnY29udHJvbCcpCiAgICAgICAgfQoKICAgIGRlZiBfcHJvY2Vzc19lcnJvcl9zY2FuX2JhcmNvZGUoc2VsZiwgc2Nhbl9yZXN1bHQpOgogICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3Qoc2Nhbl9yZXN1bHQuZGVzY3JpcHRpb24pCgpjbGFzcyBEb2N1bWVudHNEb2NEZXRhaWxTY3JlZW4oRG9jRGV0YWlsc1NjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiycKICAgIHByb2Nlc3NfbmFtZSA9ICfQlNC+0LrRg9C80LXQvdGC0YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fb25fc3RhcnQoKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQogICAgICAgIGxpc3RlbmVyID0gc2VsZi5oYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIGlkX2RvYyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpZF9kb2MnKQoKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIHNlbGVjdGVkX2NhcmRfa2V5ID0gc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfY2FyZF9rZXknXQogICAgICAgICAgICBkb2NfZ29vZHNfdGFibGUgPSBzZWxmLmhhc2hfbWFwLmdldF9qc29uKCdkb2NfZ29vZHNfdGFibGUnKQogICAgICAgICAgICB0YWJsZV9kYXRhID0gZG9jX2dvb2RzX3RhYmxlWydjdXN0b210YWJsZSddWyd0YWJsZWRhdGEnXQoKICAgICAgICAgICAgY3VycmVudF9lbGVtID0gTm9uZQogICAgICAgICAgICBjdXJyZW50X2VsZW1fZmlsdGVyID0gW2l0ZW0gZm9yIGl0ZW0gaW4gdGFibGVfZGF0YSBpZiBpdGVtLmdldCgna2V5JykgPT0gc2VsZWN0ZWRfY2FyZF9rZXldCgogICAgICAgICAgICBpZiBjdXJyZW50X2VsZW1fZmlsdGVyOgogICAgICAgICAgICAgICAgY3VycmVudF9lbGVtID0gY3VycmVudF9lbGVtX2ZpbHRlclswXQoKICAgICAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwWyJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIl0KICAgICAgICAgICAgdGFibGVfbGluZXNfcXR0eSA9IHNlbGYuaGFzaF9tYXBbJ3RhYmxlX2xpbmVzX3F0dHknXQoKICAgICAgICAgICAgIyDRgtC10LrRg9GJ0LjQuSDRjdC70LXQvNC10L3RgiDQvdC1INC90LDQudC00LXQvSDQuNC70Lgg0Y3RgtC+INC30LDQs9C+0LvQvtCy0L7QuiDRgtCw0LHQu9C40YbRiwogICAgICAgICAgICBpZiBjdXJyZW50X2VsZW0gaXMgTm9uZSBvciAnZ29vZF9uYW1lJyBub3QgaW4gY3VycmVudF9lbGVtOgogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICB0aXRsZSA9ICd7fSDihJYge30g0L7RgiB7fScuZm9ybWF0KHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlJ10sIHNlbGYuaGFzaF9tYXBbJ2RvY19uJ10sIHNlbGYuaGFzaF9tYXBbJ2RvY19kYXRlJ10pCiAgICAgICAgICAgIHB1dF9kYXRhID0gewogICAgICAgICAgICAgICAgJ0RvY19kYXRhJzogdGl0bGUsCiAgICAgICAgICAgICAgICAnR29vZCc6IGN1cnJlbnRfZWxlbVsnZ29vZF9uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9hcnQnOiBjdXJyZW50X2VsZW1bJ2FydCddLAogICAgICAgICAgICAgICAgJ2dvb2Rfc24nOiBjdXJyZW50X2VsZW1bJ3Nlcmllc19uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9wcm9wZXJ0eSc6IGN1cnJlbnRfZWxlbVsncHJvcGVydGllc19uYW1lJ10sCiAgICAgICAgICAgICAgICAnZ29vZF9wcmljZSc6IGN1cnJlbnRfZWxlbVsncHJpY2UnXSwKICAgICAgICAgICAgICAgICdnb29kX3VuaXQnOiBjdXJyZW50X2VsZW1bJ3VuaXRzX25hbWUnXSwKICAgICAgICAgICAgICAgICdnb29kX3N0cic6IGYne2N1cnJlbnRfc3RyfSAvIHt0YWJsZV9saW5lc19xdHR5fScsCiAgICAgICAgICAgICAgICAncXR0eV9wbGFuJzogY3VycmVudF9lbGVtWydxdHR5X3BsYW4nXSwKICAgICAgICAgICAgICAgICdnb29kX3BsYW4nOiBjdXJyZW50X2VsZW1bJ3F0dHlfcGxhbiddLAogICAgICAgICAgICAgICAgJ2tleSc6IGN1cnJlbnRfZWxlbVsna2V5J10sCiAgICAgICAgICAgICAgICAncHJpY2UnOiBjdXJyZW50X2VsZW1bJ3ByaWNlJ10sCiAgICAgICAgICAgICAgICAncHJpY2VfdHlwZSc6IGN1cnJlbnRfZWxlbVsncHJpY2VfbmFtZSddLAogICAgICAgICAgICAgICAgJ3F0dHknOiBjdXJyZW50X2VsZW1bJ3F0dHknXSBpZiBjdXJyZW50X2VsZW1bJ3F0dHknXSBhbmQgZmxvYXQoY3VycmVudF9lbGVtWydxdHR5J10pICE9IDAgZWxzZSAnJywKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLl9maWxsX25vbmVfdmFsdWVzKAogICAgICAgICAgICAgICAgcHV0X2RhdGEsCiAgICAgICAgICAgICAgICAoJ2dvb2RfYXJ0JywgJ2dvb2Rfc24nLCAnZ29vZF9wcm9wZXJ0eScsICdnb29kX3ByaWNlJywgJ2dvb2RfcGxhbicpLAogICAgICAgICAgICAgICAgZGVmYXVsdD0n0L7RgtGB0YPRgtGB0YLQstGD0LXRgicpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKICAgICAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YLQsNCx0LvQuNGG0YMgUVIg0LrQvtC00L7Qsi0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgYXJncyA9IHsKICAgICAgICAgICAgICAgICdpZF9kb2MnOiBpZF9kb2MsCiAgICAgICAgICAgICAgICAnaWRfZ29vZCc6IGN1cnJlbnRfZWxlbVsnaWRfZ29vZCddLAogICAgICAgICAgICAgICAgJ2lkX3Byb3BlcnR5JzogY3VycmVudF9lbGVtWydpZF9wcm9wZXJ0aWVzJ10sCiAgICAgICAgICAgICAgICAnaWRfc2VyaWVzJzogY3VycmVudF9lbGVtWydpZF9zZXJpZXMnXSwKICAgICAgICAgICAgICAgICdpZF91bml0JzogY3VycmVudF9lbGVtWydpZF91bml0J10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzID0gc2VsZi5fZ2V0X2RvY19iYXJjb2RlX2RhdGEoYXJncykKCiAgICAgICAgICAgICMgVE9ETyDQn9C10YDQtdC00LXQu9Cw0YLRjCDRh9C10YDQtdC3INCy0LjQtNC20LXRgtGLCiAgICAgICAgICAgIGNhcmRzID0gc2VsZi5fZ2V0X2JhcmNvZGVfY2FyZCgpCgogICAgICAgICAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgdC/0LjRgdC+0Log0LrQsNGA0YLQvtGH0LXQuiDQsdCw0YDQutC+0LTQvtCyCiAgICAgICAgICAgIGNhcmRzWydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXSA9IFtdCiAgICAgICAgICAgIGZvciBlbCBpbiByZXM6CiAgICAgICAgICAgICAgICBwaWN0dXJlID0gJyNmMDBjJyBpZiBlbFsnYXBwcm92ZWQnXSBpbiBbJ1RydWUnLCAndHJ1ZScsICcxJ10gZWxzZSAnJwogICAgICAgICAgICAgICAgcm93ID0gewogICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJzogZWxbJ21hcmtfY29kZSddLAogICAgICAgICAgICAgICAgICAgICdwaWN0dXJlJzogcGljdHVyZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChyb3cpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZV9jYXJkcycsIGNhcmRzLCB0b19qc29uPVRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCi0L7QstCw0YAg0LLRi9Cx0L7RgCIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2JhcmNvZGUnIG9yIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgn0JLQstC10YHRgtC40KjRgtGA0LjRhdC60L7QtCcpOgogICAgICAgICAgICByZXMgPSBzZWxmLl9iYXJjb2RlX3NjYW5uZWQoKQoKICAgICAgICAgICAgaWYgcmVzLmdldCgna2V5Jyk6CiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2UudXBkYXRlX3JzX2RvY3NfdGFibGVfc2VudF9zdGF0dXMocmVzLmdldCgna2V5JykpCiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY19zdGF0dXNfdG9fdXBsb2FkKGlkX2RvYykKCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzY2FuX2Vycm9yJywgcmVzWydFcnJvciddKQogICAgICAgICAgICBzdXBlcigpLnNjYW5fZXJyb3Jfc291bmQoKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fYmFyY29kZXMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfZGlhbG9nKCfQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0JykKCiAgICAgICAgZWxpZiBsaXN0ZW5lciBpbiBbJ09OX0JBQ0tfUFJFU1NFRCcsICdCQUNLX0JVVFRPTiddOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgICAgICBlbGlmIHNlbGYuX2lzX3Jlc3VsdF9wb3NpdGl2ZSgnY29uZmlybV92ZXJpZmllZCcpOgogICAgICAgICAgICBpZF9kb2MgPSBzZWxmLmhhc2hfbWFwWydpZF9kb2MnXQogICAgICAgICAgICBkb2MgPSBSc0RvYyhpZF9kb2MpCiAgICAgICAgICAgIGRvYy5tYXJrX3ZlcmlmaWVkKDEpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9kb2NfbWFya192ZXJpZmllZCc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coJ2NvbmZpcm1fdmVyaWZpZWQnLCAn0JfQsNCy0LXRgNGI0LjRgtGMINC00L7QutGD0LzQtdC90YI/JywgWyfQlNCwJywgJ9Cd0LXRgiddKQoKICAgIGRlZiBfZ2V0X2JhcmNvZGVfY2FyZChzZWxmKToKICAgICAgICAjIFRPRE8g0J/QtdGA0LXQtNC10LvQsNGC0Ywg0YfQtdGA0LXQtyDQstC40LTQttC10YLRiwoKICAgICAgICBscyA9IHsiY3VzdG9tY2FyZHMiOiB7CiAgICAgICAgICAgICJvcHRpb25zIjogewogICAgICAgICAgICAgICAgInNlYXJjaF9lbmFibGVkIjogRmFsc2UsCiAgICAgICAgICAgICAgICAic2F2ZV9wb3NpdGlvbiI6IFRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAYmFyY29kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRTaXplIjogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ2dvb2RzVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcGljdHVyZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIjREI3MDkzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiNGRkZGRkYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICJidG5fdHN0MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNhcmRDb3JuZXJSYWRpdXMiOiAiMTVkcCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfX0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxzCgogICAgZGVmIF9nZXRfZG9jX2JhcmNvZGVfZGF0YShzZWxmLCBhcmdzKToKICAgICAgICByZXR1cm4gc2VsZi5zZXJ2aWNlLmdldF9kb2NfYmFyY29kZV9kYXRhKGFyZ3MpCgoKY2xhc3MgQWRyRG9jRGV0YWlsc1NjcmVlbihEb2NEZXRhaWxzU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9CU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLJwogICAgcHJvY2Vzc19uYW1lID0gJ9CQ0LTRgNC10YHQvdC+0LUg0YXRgNCw0L3QtdC90LjQtScKICAgIHRhYmxlX3R5cGVzX2Zyb21fZG9jX3R5cGUgPSB7J9Ce0YLQsdC+0YAnOiBbJ291dCcsIF0sICfQoNCw0LfQvNC10YnQtdC90LjQtSc6IFsnaW4nLCBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn0J/QtdGA0LXQvNC10YnQtdC90LjQtSc6IFsnaW4nLCAnb3V0J119CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhyc19zZXR0aW5ncz1yc19zZXR0aW5ncywgaGFzaF9tYXA9aGFzaF9tYXApCgogICAgICAgIHNlbGYuY3VycmVudF9jZWxsID0gc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfY2VsbF9pZCcpCiAgICAgICAgc2VsZi5zY3JlZW5fdmFsdWVzID0geydkb2Nfbic6ICcnLCAnZG9jX2RhdGUnOiAnJywgJ3dhcmVob3VzZSc6ICcnfQogICAgICAgIHNlbGYudGFibGVfdHlwZSA9ICcnCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gQWRyRG9jU2VydmljZShzZWxmLmlkX2RvYywgdGFibGVfdHlwZT1zZWxmLnRhYmxlX3R5cGUpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLnRhYmxlX3R5cGU6CiAgICAgICAgICAgIHNlbGYudGFibGVfdHlwZSA9IHNlbGYuX2dldF90YWJsZV90eXBlX2Zvcl9zY3JlZW4oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYudGFibGVfdHlwZSA9IHNlbGYuX2dldF90YWJsZV90eXBlX2Zyb21fbmFtZShzZWxmLmhhc2hfbWFwWyd0YWJsZV90eXBlJ10pCiAgICAgICAgc2VsZi5zZXJ2aWNlLnRhYmxlX3R5cGUgPSBzZWxmLnRhYmxlX3R5cGUKCiAgICAgICAgc3VwZXIoKS5fb25fc3RhcnQoKQoKICAgIGRlZiBfZ2V0X2RvY19kZXRhaWxzX2RhdGEoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc2VydmljZS5nZXRfZG9jX2RldGFpbHNfZGF0YShzZWxmLmlkX2RvYywgc2VsZi5jdXJyZW50X2NlbGwpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5vbl9pbnB1dCgpCiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmhhc2hfbWFwWydsaXN0ZW5lciddCgogICAgICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgc2VsZi5fZmlsbF9vbmVfc3RyaW5nX3NjcmVlbigpCiAgICAgICAgICAgICMgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0KLQvtCy0LDRgCDQstGL0LHQvtGAIikgLS0tKioqINCt0LrRgNCw0L0g0LIg0YTRg9C90LrRhtC40LggX2ZpbGxfb25lX3N0cmluZ19zY3JlZW4KICAgICAgICBlbGlmIGxpc3RlbmVyID09ICJCQUNLX0JVVFRPTiI6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YLRiyIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2JhcmNvZGVzIjoKCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93RGlhbG9nIiwgItCS0LLQtdGB0YLQuNCo0YLRgNC40YXQutC+0LQiKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJyBvciBzZWxmLmhhc2hfbWFwLmdldCgiZXZlbnQiKSA9PSAib25SZXN1bHRQb3NpdGl2ZSI6CiAgICAgICAgICAgIGN1cnJlbnRfY2VsbCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2NlbGwnKQoKICAgICAgICAgICAgZG9jID0gdWlfZ2xvYmFsLlJzX2Fkcl9kb2MKICAgICAgICAgICAgZG9jLmlkX2RvYyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgiZXZlbnQiKSA9PSAib25SZXN1bHRQb3NpdGl2ZSI6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2ZsZF9iYXJjb2RlJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZV9jYW1lcmEnKQoKICAgICAgICAgICAgZG9jX2NlbGwgPSBkb2MuZmluZF9jZWxsKGRvYywgYmFyY29kZSkKCiAgICAgICAgICAgIGlmIGRvY19jZWxsOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfY2VsbCcsIGRvY19jZWxsWyduYW1lJ10pCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9jZWxsX2lkJywgZG9jX2NlbGxbJ2lkJ10pCiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRfY2VsbCA9IGRvY19jZWxsWydpZCddCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGlmIG5vdCBjdXJyZW50X2NlbGwgYW5kIG5vdCBkb2NfY2VsbDoKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKCd3YXJuaW5nJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0b2FzdCcsICfQndC1INC90LDQudC00LXQvdCwINGP0YfQtdC50LrQsCcpCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuID0gc2VsZi5oYXNoX21hcC5nZXRfYm9vbCgnaGF2ZV9xdHR5X3BsYW4nKQogICAgICAgICAgICBoYXZlX3plcm9fcGxhbiA9IHNlbGYuaGFzaF9tYXAuZ2V0X2Jvb2woJ2hhdmVfemVyb19wbGFuJykKICAgICAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdoYXZlX21hcmtfcGxhbicpCiAgICAgICAgICAgIGNvbnRyb2wgPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdjb250cm9sJykKCiAgICAgICAgICAgIHJlcyA9IGRvYy5wcm9jZXNzX3RoZV9iYXJjb2RlKGRvYywgYmFyY29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIChoYXZlX3F0dHlfcGxhbiksIChoYXZlX3plcm9fcGxhbiksIChjb250cm9sKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfY2VsbF9pZCcpLCBzZWxmLnRhYmxlX3R5cGUpCgogICAgICAgICAgICAjIHNlbGYuc2VydmljZS51cGRhdGVfcnNfZG9jc190YWJsZV9zZW50X3N0YXR1cyhyZXMuZ2V0KCdrZXknKSkKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2Nfc3RhdHVzX3RvX3VwbG9hZChzZWxmLmlkX2RvYykKCiAgICAgICAgICAgIGlmIHJlcyA9PSBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NjYW5uZWRfYmFyY29kZScsIGJhcmNvZGUpCiAgICAgICAgICAgICAgICAjIHN1Q2xhc3MudXJvdm9fc2V0X2xvY2tfdHJpZ2dlcihUcnVlKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ2Vycm9yJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93U2NyZWVuJywgJ9Ce0YjQuNCx0LrQsCDRgdC60LDQvdC10YDQsCcpCiAgICAgICAgICAgICAgICAjIHNlbGYuaGFzaF9tYXAucHV0KCd0b2FzdCcsCiAgICAgICAgICAgICAgICAjICAgICAgICAgICAgICfQqNGC0YDQuNGFINC60L7QtCDQvdC1INC30LDRgNC10LPQuNGB0YLRgNC40YDQvtCy0LDQvSDQsiDQsdCw0LfQtSDQtNCw0L3QvdGL0YUuINCf0YDQvtCy0LXRgNGM0YLQtSDRgtC+0LLQsNGAINC40LvQuCDQstGL0L/QvtC70L3QuNGC0LUg0L7QsdC80LXQvSDQtNCw0L3QvdGL0LzQuCcpCiAgICAgICAgICAgIGVsaWYgcmVzWydFcnJvciddOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ3dhcm5pbmcnKQogICAgICAgICAgICAgICAgaWYgcmVzWydFcnJvciddID09ICdBbHJlYWR5U2Nhbm5lZCc6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2JhcmNvZGUnLCBqc29uLmR1bXBzKHsnYmFyY29kZSc6IHJlc1snQmFyY29kZSddLCAnZG9jX2luZm8nOiByZXNbJ2RvY19pbmZvJ119KSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnU2hvd1NjcmVlbicsICfQo9C00LDQu9C10L3QuNC1INGI0YLRgNC40YXQutC+0LTQsCcpCiAgICAgICAgICAgICAgICBlbGlmIHJlc1snRXJyb3InXSA9PSAnUXVhbnRpdHlQbGFuUmVhY2hlZCc6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RvYXN0JywgcmVzWydEZXNjciddKQogICAgICAgICAgICAgICAgZWxpZiByZXNbJ0Vycm9yJ10gPT0gJ1plcm9fcGxhbl9lcnJvcic6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RvYXN0JywgcmVzWydEZXNjciddKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pICAjICsgJyAnKyByZXNbJ0JhcmNvZGUnXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RvYXN0JywgJ9Ci0L7QstCw0YAg0LTQvtCx0LDQstC70LXQvSDQsiDQtNC+0LrRg9C80LXQvdGCJykKCiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9kb2NfbWFya192ZXJpZmllZCc6CiAgICAgICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19hZHJfZG9jCiAgICAgICAgICAgIGRvYy5pZF9kb2MgPSBzZWxmLmhhc2hfbWFwLmdldCgnaWRfZG9jJykKICAgICAgICAgICAgZG9jLm1hcmtfdmVyaWZpZWQoZG9jLCAxKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQlNC+0LrRg9C80LXQvdGC0YsiKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9jZWxsX2lkJyk6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgnY3VycmVudF9jZWxsJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdjdXJyZW50X2NlbGxfaWQnKQogICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50X2NlbGwgPSBOb25lCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlZnJlc2hfc2NyZWVuKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9jbGVhcl9jZWxsJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ2N1cnJlbnRfY2VsbCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdjdXJyZW50X2NlbGxfaWQnKQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfY2VsbCA9IE5vbmUKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9zZWxlY3RfY2VsbCc6ICAjINCa0L3QvtC/0LrQsCDQstGL0LHRgNCw0YLRjCDRj9GH0LXQudC60YMKCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCdjdXJyZW50X2NlbGwnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgnY3VycmVudF9jZWxsX2lkJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX2NlbGxzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfY2VsbF92YWx1ZScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWU7YmFyY29kZScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3NlbGVjdF9jZWxsX3ZhbHVlJzoKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfaWQnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X2NlbGxfaWQnLCBzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9pZCcpKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2N1cnJlbnRfY2VsbCcsIHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X25hbWUnKSkKICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9jZWxsID0gc2VsZi5oYXNoX21hcC5nZXQoJ2N1cnJlbnRfaWQnKQogICAgICAgICAgICAgICAgIyBzZWxmLl9vbl9zdGFydCgpCiAgICAgICAgICAgICAgICAjIHNlbGYuaGFzaF9tYXAucmVmcmVzaF9zY3JlZW4oKQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ0xheW91dEFjdGlvbic6CiAgICAgICAgICAgIHNlbGYuX2xheW91dF9hY3Rpb24oKQoKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnc2VsZWN0X2NlbGxfdmFsdWVfZm9yX2NhcmQnOgogICAgICAgICAgICAjIFRPRE8g0JjQt9C80LXQvdC10L3QuNC1INC00LDQvdC90YvRhSDQvtGC0L/RgNCw0LLQuNGC0Ywg0LIg0LrQu9Cw0YHRgSDQsiBkYl9zZXJ2aWNlCiAgICAgICAgICAgIGN1cnJlbnRfa2V5ID0gc2VsZi5oYXNoX21hcC5nZXQoImtleSIpCiAgICAgICAgICAgIGlmIGN1cnJlbnRfa2V5OgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQoJ1VwZGF0ZSBSU19hZHJfZG9jc190YWJsZSBTRVQgaWRfY2VsbCA9ID8gV2hlcmUgaWQgPSA/JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLmhhc2hfbWFwLmdldCgnY3VycmVudF9pZCcpLCBjdXJyZW50X2tleSkpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnUmVmcmVzaFNjcmVlbicsICcnKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fYWRkX3N0cmluZyc6CgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiRG9jX2RhdGEiLAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmdldCgnZG9jX3R5cGUnKSArICcg4oSWJyArIHNlbGYuaGFzaF9tYXAuZ2V0KCdkb2NfbicpICsKICAgICAgICAgICAgICAgICAgICAgICAgJyDQvtGCJyArIHNlbGYuaGFzaF9tYXAuZ2V0KCdkb2NfZGF0ZScpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiR29vZCIsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgicHJvcGVydGllcyIsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgicXR0eV9wbGFuIiwgJycpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQotC+0LLQsNGAIikKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAndGFibGVfdHlwZSc6CiAgICAgICAgICAgIHNlbGYudGFibGVfdHlwZSA9IHNlbGYuX2dldF90YWJsZV90eXBlX2Zyb21fbmFtZShzZWxmLmhhc2hfbWFwWyd0YWJsZV90eXBlJ10pCiAgICAgICAgICAgIHNlbGYuX29uX3N0YXJ0KCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZWZyZXNoX3NjcmVlbigpCgogICAgIyDQkiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0LLQuNC00LAg0LTQvtC60YPQvNC10L3RgtCwINC90LDQt9C90LDRh9Cw0LXQvCDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDRgtCw0LHQu9C40YfQvdGD0Y4g0YfQsNGB0YLRjCDQv9C+INGD0LzQvtC70YfQsNC90LjRjtGOCiAgICAjINCd0LDQv9GA0LjQvNC10YAsINC00LvRjyDQtNC+0LrRg9C80LXQvdGC0LAg0J7RgtCx0L7RgCDRjdGC0L4gb3V0INCwINC00LvRjyDQoNCw0LfQvNC10YnQtdC90LjQtSBpbgogICAgZGVmIF9nZXRfdGFibGVfdHlwZV9mb3Jfc2NyZWVuKHNlbGYpOgogICAgICAgIHRhYmxlc190eXBlID0gJ9Ce0YLQsdC+0YA70KDQsNC30LzQtdGJ0LXQvdC40LUnICAjICc7Jy5qb2luKHNlbGYudGFibGVfdHlwZXNfZnJvbV9kb2NfdHlwZVsKICAgICAgICAjIHNlbGYuaGFzaF9tYXBbJ2RvY190eXBlJ11dKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0YWJsZXNfdHlwZScsIHRhYmxlc190eXBlKQoKICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnZG9jX3R5cGUnKSBpbiBbJ9Ce0YLQsdC+0YAnLCAn0J/QtdGA0LXQvNC10YnQtdC90LjQtSddOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWyd0YWJsZV90eXBlJ10gPSAn0J7RgtCx0L7RgCcKICAgICAgICAgICAgcmV0dXJuICdvdXQnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsndGFibGVfdHlwZSddID0gJ9Cg0LDQt9C80LXRidC10L3QuNC1JwogICAgICAgICAgICByZXR1cm4gJ2luJwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZ2V0X3RhYmxlX3R5cGVfZnJvbV9uYW1lKF92YWwpOgoKICAgICAgICByZXR1cm4gJ2luJyBpZiBfdmFsID09ICfQoNCw0LfQvNC10YnQtdC90LjQtScgZWxzZSAnb3V0JwogICAgICAgICMgY3VycmVudF90YWJsZV90eXBlJ11dCgogICAgZGVmIF9sYXlvdXRfYWN0aW9uKHNlbGYpOgogICAgICAgIGxheW91dF9saXN0ZW5lciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdsYXlvdXRfbGlzdGVuZXInKQoKICAgICAgICBjdXJyZW50X2tleSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJrZXkiKQogICAgICAgIGlmIGxheW91dF9saXN0ZW5lciA9PSAn0KPQtNCw0LvQuNGC0Ywg0YHRgtGA0L7QutGDJzoKCiAgICAgICAgICAgIGlmIGN1cnJlbnRfa2V5OiAgIyBjdXJyZW50X2VsZW1bJ2tleSddOgogICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQoJ0RFTEVURSBGUk9NIFJTX2Fkcl9kb2NzX3RhYmxlIFdIRVJFIGlkID0gPycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY3VycmVudF9rZXksKSkgICMgY3VycmVudF9lbGVtWydrZXknXSwpKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1JlZnJlc2hTY3JlZW4nLCAnJykKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0JjQt9C80LXQvdC40YLRjCDRj9GH0LXQudC60YMnOgoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoJ1NlYXJjaFN0cmluZycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0YWJsZV9mb3Jfc2VsZWN0JywgJ1JTX2NlbGxzJykgICMg0KLQsNCx0LvQuNGG0LAg0LTQu9GPINCy0YvQsdC+0YDQsCDQt9C90LDRh9C10L3QuNGPCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTZXRSZXN1bHRMaXN0ZW5lcicsICdzZWxlY3RfY2VsbF92YWx1ZV9mb3JfY2FyZCcpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdmaWx0ZXJfZmllbGRzJywgJ25hbWU7YmFyY29kZScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdTaG93UHJvY2Vzc1Jlc3VsdCcsICfQo9C90LjQstC10YDRgdCw0LvRjNC90YvQuSDRgdC/0YDQsNCy0L7Rh9C90LjQunzQodC/0YDQsNCy0L7Rh9C90LjQuicpCgogICAgZGVmIF9maWxsX29uZV9zdHJpbmdfc2NyZWVuKHNlbGYsIF9maWx0ZXI9JycpOgogICAgICAgICNoYXNoTWFwID0gc2VsZi5oYXNoX21hcAogICAgICAgICMg0J3QsNGF0L7QtNC40LwgSUQg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgY3VycmVudF9zdHIgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgamxpc3QgPSBqc29uLmxvYWRzKHNlbGYuaGFzaF9tYXAuZ2V0KCJkb2NfZ29vZHNfdGFibGUiKSkKICAgICAgICBjdXJyZW50X2VsZW0gPSBqbGlzdFsnY3VzdG9tdGFibGUnXVsndGFibGVkYXRhJ11baW50KGN1cnJlbnRfc3RyKV0KICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiRG9jX2RhdGEiLAogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuZ2V0KCdkb2NfdHlwZScpICsgJyDihJYnICsgc2VsZi5oYXNoX21hcC5nZXQoJ2RvY19uJykgKwogICAgICAgICAgICAgICAgICAgICcg0L7RgicgKyBzZWxmLmhhc2hfbWFwLmdldCgnZG9jX2RhdGUnKSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiY3VycmVudF9jZWxsX25hbWUiLCAn0K/Rh9C10LnQutCwOiAnICsgY3VycmVudF9lbGVtWydjZWxsJ10pCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2lkX2NlbGwnLCBjdXJyZW50X2VsZW1bJ2lkX2NlbGwnXSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiR29vZCIsIGN1cnJlbnRfZWxlbVsnZ29vZF9uYW1lJ10pCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoInF0dHlfcGxhbiIsIHN0cihjdXJyZW50X2VsZW1bJ3F0dHlfcGxhbiddKSkKICAgICAgICBpZiBub3QgY3VycmVudF9lbGVtWydxdHR5J106ICAjIG9yIGZsb2F0KGN1cnJlbnRfZWxlbVsncXR0eSddKSA9PSAwOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgicXR0eSIsICcnKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGZsb2F0KGN1cnJlbnRfZWxlbVsncXR0eSddKSA9PSAwOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoInF0dHkiLCAnJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJxdHR5Iiwgc3RyKGN1cnJlbnRfZWxlbVsncXR0eSddKSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgna2V5JywgY3VycmVudF9lbGVtWydrZXknXSkKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dTY3JlZW4iLCAi0KLQvtCy0LDRgCDQstGL0LHQvtGAIikKCiAgICBkZWYgX3ByZXBhcmVfdGFibGVfZGF0YShzZWxmLCBkb2NfZGV0YWlscyk6CiAgICAgICAgIyBUT0RPINC00L7QsdCw0LLQuNGC0Ywg0LPRgNGD0L/Qv9C40YDQvtCy0LrRgyDQv9C+INGP0YfQtdC50LrQsNC8CiAgICAgICAgdGFibGVfZGF0YSA9IFt7fV0gICMg0LHRi9C70L4gW3t9XQogICAgICAgIHJvd19maWx0ZXIgPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdyb3dzX2ZpbHRlcicpCgogICAgICAgIGZvciByZWNvcmQgaW4gZG9jX2RldGFpbHM6CiAgICAgICAgICAgIGlmIHJvd19maWx0ZXIgYW5kIHJlY29yZFsncXR0eSddID09IHJlY29yZFsncXR0eV9wbGFuJ106CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgcGljID0gJyNmMDJhJyBpZiByZWNvcmRbJ0lzRG9uZSddICE9IDAgZWxzZSAnI2YwMGMnCiAgICAgICAgICAgIGlmIHJlY29yZFsncXR0eSddID09IDAgYW5kIHJlY29yZFsncXR0eV9wbGFuJ10gPT0gMDoKICAgICAgICAgICAgICAgIHBpYyA9ICcnCgogICAgICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydpZCddKSwKICAgICAgICAgICAgICAgICdjZWxsJzogc3RyKHJlY29yZFsnY2VsbF9uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2lkX2NlbGwnOiBzdHIocmVjb3JkWydpZF9jZWxsJ10pLAogICAgICAgICAgICAgICAgJ2dvb2RfbmFtZSc6IHN0cihyZWNvcmRbJ2dvb2RfbmFtZSddKSwKICAgICAgICAgICAgICAgICdpZF9nb29kJzogc3RyKHJlY29yZFsnaWRfZ29vZCddKSwKICAgICAgICAgICAgICAgICdpZF9wcm9wZXJ0aWVzJzogc3RyKHJlY29yZFsnaWRfcHJvcGVydGllcyddKSwKICAgICAgICAgICAgICAgICdwcm9wZXJ0aWVzX25hbWUnOiBzdHIocmVjb3JkWydwcm9wZXJ0aWVzX25hbWUnXSBvciAnJyksCiAgICAgICAgICAgICAgICAnaWRfc2VyaWVzJzogc3RyKHJlY29yZFsnaWRfc2VyaWVzJ10pLAogICAgICAgICAgICAgICAgJ3Nlcmllc19uYW1lJzogc3RyKHJlY29yZFsnc2VyaWVzX25hbWUnXSBvciAnJyksCiAgICAgICAgICAgICAgICAnaWRfdW5pdCc6IHN0cihyZWNvcmRbJ2lkX3VuaXQnXSksCiAgICAgICAgICAgICAgICAndW5pdHNfbmFtZSc6IHN0cihyZWNvcmRbJ3VuaXRzX25hbWUnXSBvciAnJyksCiAgICAgICAgICAgICAgICAnY29kZV9hcnQnOiAn0JrQvtC0OiAnICsgc3RyKHJlY29yZFsnY29kZSddKSwKICAgICAgICAgICAgICAgICdhcnQnOiBzdHIocmVjb3JkWydhcnQnXSksCiAgICAgICAgICAgICAgICAncGljdHVyZSc6IHBpYywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvcHMgPSBbCiAgICAgICAgICAgICAgICAne30gJy5mb3JtYXQocHJvZHVjdF9yb3dbJ2FydCddKSBpZiBwcm9kdWN0X3Jvd1snYXJ0J10gZWxzZSAnJywKICAgICAgICAgICAgICAgICcoe30pICcuZm9ybWF0KHByb2R1Y3Rfcm93Wydwcm9wZXJ0aWVzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3Byb3BlcnRpZXNfbmFtZSddIGVsc2UgJycsCiAgICAgICAgICAgICAgICAne30nLmZvcm1hdChwcm9kdWN0X3Jvd1snc2VyaWVzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3Nlcmllc19uYW1lJ10gZWxzZSAnJywKICAgICAgICAgICAgICAgICcsIHt9Jy5mb3JtYXQocHJvZHVjdF9yb3dbJ3VuaXRzX25hbWUnXSkgaWYgcHJvZHVjdF9yb3dbJ3VuaXRzX25hbWUnXSBlbHNlICcnLAogICAgICAgICAgICBdCiAgICAgICAgICAgIHByb2R1Y3Rfcm93Wydnb29kX2luZm8nXSA9ICcnLmpvaW4ocHJvcHMpCiAgICAgICAgICAgIGlmIHJlY29yZFsncXR0eSddIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ3F0dHknXSA9IHN0cihpbnQocmVjb3JkWydxdHR5J10pIGlmIHJlY29yZFsncXR0eSddLmlzX2ludGVnZXIoKSBlbHNlIHJlY29yZFsncXR0eSddKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ3F0dHknXSA9ICIwIgogICAgICAgICAgICBpZiByZWNvcmRbJ3F0dHlfcGxhbiddIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ3F0dHlfcGxhbiddID0gc3RyKGludChyZWNvcmRbJ3F0dHlfcGxhbiddKSBpZiByZWNvcmRbJ3F0dHlfcGxhbiddLmlzX2ludGVnZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmVjb3JkWydxdHR5X3BsYW4nXSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByb2R1Y3Rfcm93WydxdHR5X3BsYW4nXSA9ICIwIgoKICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ19sYXlvdXQnXSA9IHNlbGYuX2dldF9kb2NfdGFibGVfcm93X3ZpZXcoKQogICAgICAgICAgICBzZWxmLl9zZXRfYmFja2dyb3VuZF9yb3dfY29sb3IocHJvZHVjdF9yb3cpCgogICAgICAgICAgICBpZiBzZWxmLl9hZGRlZF9nb29kc19oYXNfa2V5KHByb2R1Y3Rfcm93WydrZXknXSk6CiAgICAgICAgICAgICAgICB0YWJsZV9kYXRhLmluc2VydCgxLCBwcm9kdWN0X3JvdykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEuYXBwZW5kKHByb2R1Y3Rfcm93KQoKICAgICAgICByZXR1cm4gdGFibGVfZGF0YQoKICAgIGRlZiBfZ2V0X2RvY190YWJsZV92aWV3KHNlbGYsIHRhYmxlX2RhdGEpOgogICAgICAgIHRhYmxlX3ZpZXcgPSB3aWRnZXRzLkN1c3RvbVRhYmxlKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cv0YfQtdC50LrQsCcpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J3QsNC30LLQsNC90LjQtScpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0yCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J/Qu9Cw0L0nKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ck0LDQutGCJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0ZGRkZGRicKICAgICAgICAgICAgKSwKCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgdGFibGVkYXRhPXRhYmxlX2RhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiB0YWJsZV92aWV3CgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3Jvd192aWV3KHNlbGYpOgoKICAgICAgICByb3dfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BjZWxsJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCdAZ29vZF9uYW1lJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGdvb2RfaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0yLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BxdHR5X3BsYW4nLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHF0dHknLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRkZGRkZGJwogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHJvd192aWV3CgogICAgZGVmIF9nZXRfZGV0YWlsX2NhcmRzKHNlbGYsIHFfcmVzdWx0KToKICAgICAgICByZXN1bHRzID0gcV9yZXN1bHQKICAgICAgICBoYXNoTWFwID0gc2VsZi5oYXNoX21hcAogICAgICAgIGNhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSdAZ29vZF9uYW1lJywgVGV4dFNpemU9c2VsZi5yc19zZXR0aW5ncy5nZXQoJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvbGQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEpLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oVmFsdWU9ItCj0LTQsNC70LjRgtGMINGB0YLRgNC+0LrRgyIpLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldyhUZXh0Qm9sZD1UcnVlLCB3ZWlnaHQ9MSwgVmFsdWU9J0Bjb2RlX2FydCcpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVGV4dEJvbGQ9RmFsc2UsIHdlaWdodD0xLCBWYWx1ZT0nQGFydCcpLAogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSJob3Jpem9udGFsIiksCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQn9C70LDQvScsIFRleHRTaXplPXNlbGYucnNfc2V0dGluZ3MuZ2V0KCdnb29kc1RleHRTaXplJykpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5X3BsYW4nKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQpNCw0LrRgicpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BxdHR5JyksCiAgICAgICAgICAgICAgICAgICAgIyB3aWRnZXRzLlRleHRWaWV3KFZhbHVlID0gJ0AnKSwKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KFZhbHVlPSfQptC10L3QsCcpLAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoVmFsdWU9J0BwaWN0dXJlJyksCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249Imhvcml6b250YWwiKSwgb3JpZW50YXRpb249InZlcnRpY2FsIiksIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkpCgogICAgICAgIGlmIHJlc3VsdHM6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdpZF9kb2MnLCBzdHIocmVzdWx0c1swXVsnaWRfZG9jJ10pKQogICAgICAgICAgICBjdXJyZW50X2NlbGwgPSAnJwogICAgICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICBpZiBzZWxmLnJvd19maWx0ZXIgYW5kIHJlY29yZFsncXR0eSddID09IHJlY29yZFsncXR0eV9wbGFuJ106CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIHBpYyA9ICcjZjAyYScgaWYgcmVjb3JkWydJc0RvbmUnXSAhPSAwIGVsc2UgJyNmMDBjJwogICAgICAgICAgICAgICAgaWYgcmVjb3JkWydxdHR5J10gPT0gMCBhbmQgcmVjb3JkWydxdHR5X3BsYW4nXSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHBpYyA9ICcnCgogICAgICAgICAgICAgICAgaWYgY3VycmVudF9jZWxsICE9IHJlY29yZFsnY2VsbF9uYW1lJ106CiAgICAgICAgICAgICAgICAgICAgYyA9IHsiZ3JvdXAiOiByZWNvcmRbJ2NlbGxfbmFtZSddfQogICAgICAgICAgICAgICAgICAgICMgZG9jX2RldGFpbF9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQoYykKICAgICAgICAgICAgICAgICAgICBjYXJkcy5jdXN0b21jYXJkc1snY2FyZHNkYXRhJ10uYXBwZW5kKGMpCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jZWxsID0gcmVjb3JkWydjZWxsX25hbWUnXQoKICAgICAgICAgICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydpZCddKSwKICAgICAgICAgICAgICAgICAgICAnZ29vZF9uYW1lJzogc3RyKHJlY29yZFsnZ29vZF9uYW1lJ10pLAogICAgICAgICAgICAgICAgICAgICdpZF9nb29kJzogc3RyKHJlY29yZFsnaWRfZ29vZCddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfcHJvcGVydGllcyc6IHN0cihyZWNvcmRbJ2lkX3Byb3BlcnRpZXMnXSksCiAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Byb3BlcnRpZXNfbmFtZSddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfc2VyaWVzJzogc3RyKHJlY29yZFsnaWRfc2VyaWVzJ10pLAogICAgICAgICAgICAgICAgICAgICdzZXJpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Nlcmllc19uYW1lJ10pLAogICAgICAgICAgICAgICAgICAgICdpZF91bml0Jzogc3RyKHJlY29yZFsnaWRfdW5pdCddKSwKICAgICAgICAgICAgICAgICAgICAndW5pdHNfbmFtZSc6IHN0cihyZWNvcmRbJ3VuaXRzX25hbWUnXSksCiAgICAgICAgICAgICAgICAgICAgJ2NvZGVfYXJ0JzogJ9Ca0L7QtDogJyArIHN0cihyZWNvcmRbJ2NvZGUnXSksCiAgICAgICAgICAgICAgICAgICAgJ2NlbGxfbmFtZSc6IHN0cihyZWNvcmRbJ2NlbGxfbmFtZSddKSwKICAgICAgICAgICAgICAgICAgICAnaWRfY2VsbCc6IHN0cihyZWNvcmRbJ2lkX2NlbGwnXSksCgogICAgICAgICAgICAgICAgICAgICdxdHR5Jzogc3RyKHJlY29yZFsncXR0eSddIGlmIHJlY29yZFsncXR0eSddIGlzIG5vdCBOb25lIGVsc2UgMCksCiAgICAgICAgICAgICAgICAgICAgJ3F0dHlfcGxhbic6IHN0cihyZWNvcmRbJ3F0dHlfcGxhbiddIGlmIHJlY29yZFsncXR0eV9wbGFuJ10gaXMgbm90IE5vbmUgZWxzZSAwKSwKICAgICAgICAgICAgICAgICAgICAncGljdHVyZSc6IHBpYwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgICAgICAgICAgICBkb2NfZGV0YWlsX2xpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChwcm9kdWN0X3JvdykKICAgICAgICAgICAgICAgIGNhcmRzLmN1c3RvbWNhcmRzWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCgoKY2xhc3MgRmxvd0RvY0RldGFpbHNTY3JlZW4oRG9jRGV0YWlsc1NjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQn9C+0YLQvtC60KjRgtGA0LjRhdC60L7QtNC+0LLQlNC+0LrRg9C80LXQvdGC0LAnCiAgICBwcm9jZXNzX25hbWUgPSAn0KHQsdC+0YAg0KjQmicKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBkYl9zZXJ2aWNlcy5GbG93RG9jU2VydmljZShzZWxmLmlkX2RvYykKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oc2VsZi5zY3JlZW5fbmFtZSwgYXJncykKICAgICAgICAjc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHNlbGYuX2JhcmNvZGVfZmxvd19vbl9zdGFydCgpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgoKICAgICAgICBsaXN0ZW5lciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdsaXN0ZW5lcicpCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBjdXJyZW50X3N0ciA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICAgICAgamxpc3QgPSBqc29uLmxvYWRzKHNlbGYuaGFzaF9tYXAuZ2V0KCJkb2NfYmFyY19mbG93IikpCiAgICAgICAgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b210YWJsZSddWyd0YWJsZWRhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgICAgICBkYXRhX2RpY3QgPSB7J2JhcmNvZGUnOiBjdXJyZW50X2VsZW1bJ2JhcmNvZGUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICfQndC+0LzQtdC90LrQu9Cw0YLRg9GA0LAnOiBjdXJyZW50X2VsZW1bJ25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICdxdHR5JzogY3VycmVudF9lbGVtWydxdHR5J10sICfQpdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutCwJzogJyd9CiAgICAgICAgICAgIEh0bWxWaWV3LnByaW50X2Zyb21fYW55X3NjcmVlbihzZWxmLmhhc2hfbWFwLCBzZWxmLnJzX3NldHRpbmdzLCBkYXRhX2Zvcl9wcmludGluZz1kYXRhX2RpY3QpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5maW5pc2hfcHJvY2VzcygpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9iYXJjb2Rlcyc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19kaWFsb2coJ9CS0LLQtdGB0YLQuNCo0YLRgNC40YXQutC+0LQnKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJyBvciBzZWxmLmhhc2hfbWFwLmdldCgiZXZlbnQiKSA9PSAib25SZXN1bHRQb3NpdGl2ZSI6CiAgICAgICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19kb2MKICAgICAgICAgICAgZG9jLmlkX2RvYyA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgiZXZlbnQiKSA9PSAib25SZXN1bHRQb3NpdGl2ZSI6CiAgICAgICAgICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2ZsZF9iYXJjb2RlJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZV9jYW1lcmEnKQoKICAgICAgICAgICAgaWYgYmFyY29kZToKICAgICAgICAgICAgICAgIHF0ZXh0ID0gJycnCiAgICAgICAgICAgICAgICBJTlNFUlQgSU5UTyBSU19iYXJjX2Zsb3cgKGlkX2RvYywgYmFyY29kZSkgVkFMVUVTICg/LD8pCiAgICAgICAgICAgICAgICAnJycKICAgICAgICAgICAgICAgIHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCAoZG9jLmlkX2RvYywgYmFyY29kZSkpCiAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2Uuc2V0X2RvY19zdGF0dXNfdG9fdXBsb2FkKGRvYy5pZF9kb2MpCgogICAgICAgICAgICBpZiBzZWxmLl9pc19yZXN1bHRfcG9zaXRpdmUoJ2NvbmZpcm1fdmVyaWZpZWQnKToKICAgICAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuaGFzaF9tYXBbJ2lkX2RvYyddCiAgICAgICAgICAgICAgICBkb2MgPSBSc0RvYyhpZF9kb2MpCiAgICAgICAgICAgICAgICBkb2MubWFya192ZXJpZmllZCgxKQoKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YLRiyIpCgoKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX2RvY19tYXJrX3ZlcmlmaWVkJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X2RpYWxvZygnY29uZmlybV92ZXJpZmllZCcsICfQl9Cw0LLQtdGA0YjQuNGC0Ywg0LTQvtC60YPQvNC10L3Rgj8nLCBbJ9CU0LAnLCAn0J3QtdGCJ10pCgogICAgICAgIGVsaWYgc2VsZi5faXNfcmVzdWx0X3Bvc2l0aXZlKCdjb25maXJtX3ZlcmlmaWVkJyk6CiAgICAgICAgICAgIGlkX2RvYyA9IHNlbGYuaGFzaF9tYXBbJ2lkX2RvYyddCiAgICAgICAgICAgIGRvYyA9IFJzRG9jKGlkX2RvYykKICAgICAgICAgICAgZG9jLm1hcmtfdmVyaWZpZWQoMSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0JTQvtC60YPQvNC10L3RgtGLIikKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0JTQvtC60YPQvNC10L3RgtGLIikKCiAgICBkZWYgX2JhcmNvZGVfZmxvd19vbl9zdGFydChzZWxmKToKCiAgICAgICAgaWRfZG9jID0gc2VsZi5oYXNoX21hcC5nZXQoJ2lkX2RvYycpCiAgICAgICAgZmFsc2VWYWx1ZUxpc3QgPSAoMCwgJzAnLCAnZmFsc2UnLCAnRmFsc2UnLCBOb25lKQogICAgICAgICMg0KTQvtGA0LzQuNGA0YPQtdC8INGC0LDQsdC70LjRhtGDINC60LDRgNGC0L7Rh9C10Log0Lgg0LfQsNC/0YDQvtGBINC6INCx0LDQt9C1CgogICAgICAgIGRvY19kZXRhaWxzID0gc2VsZi5zZXJ2aWNlLmdldF9mbG93X3RhYmxlX2RhdGEoKQogICAgICAgIHRhYmxlX2RhdGEgPSBzZWxmLl9wcmVwYXJlX3RhYmxlX2RhdGEoZG9jX2RldGFpbHMpCiAgICAgICAgdGFibGVfdmlldyA9IHNlbGYuX2dldF9kb2NfdGFibGVfdmlldyh0YWJsZV9kYXRhPXRhYmxlX2RhdGEpCgogICAgICAgIGlmIGRvY19kZXRhaWxzOgogICAgICAgICAgICAjIGhhc2hNYXAucHV0KCdpZF9kb2MnLCBzdHIocmVzdWx0c1swXVsnaWRfZG9jJ10pKQoKICAgICAgICAgICAgIyDQn9GA0LjQt9C90LDQuiwgaGF2ZV9xdHR5X3BsYW4g0JXRgdGC0YzQn9C70LDQvdCf0J7QmtCe0LvQuNGH0LXRgdGC0LLRgyAgLSAg0JjRgdGC0LjQvdCwINC60L7Qs9C00LAg0YHRg9C80LzQsCDQutC+0LvQvtC90LrQuCBRdHR5X3BsYW4gPiAwCiAgICAgICAgICAgICMg0J/RgNC40LfQvdCw0LogIGhhdmVfbWFya19wbGFuICLQldGB0YLRjNCf0LvQsNC90JrQntC00L7QstCc0LDRgNC60LjRgNC+0LLQutC4IOKAkyDQmNGB0YLQuNC90LAsINC60L7Qs9C00LAg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHRgtGA0L7QuiDRgtCw0LHQuy4gUlNfZG9jc19iYXJjb2RlcyDRgSDQt9Cw0LTQsNC90L3Ri9C8IGlkX2RvYyDQuCBpc19wbGFuICDQsdC+0LvRjNGI0LUg0L3Rg9C70Y8uCiAgICAgICAgICAgICMg0J/RgNC40LfQvdCw0LogaGF2ZV96ZXJvX3BsYW4gItCV0YHRgtGMINGB0YLRgNC+0LrQuCDRgtC+0LLQsNGA0LAg0LIg0LTQvtC60YPQvNC10L3RgtC1IiDQmNGB0YLQuNC90LAsINC60L7Qs9C00LAg0LXRgdGC0Ywg0LfQsNC/0L7Qu9C90LXQvdC90YvQtSDRgdGC0YDQvtC60Lgg0YLQvtCy0LDRgNC+0LIg0LIg0LTQvtC60YPQvNC10L3RgtC1CiAgICAgICAgICAgICMg0J/RgNC40LfQvdCw0LogItCa0L7QvdGC0YDQvtC70LjRgNC+0LLQsNGC0YwiICAtINC/0YDQuNC30L3QsNC6INC00LvRjyDQtNC+0LrRg9C80LXQvdGC0LAsINC90LDQtNC+INC70Lgg0LrQvtC90YLRgNC+0LvQuNGA0L7QstCw0YLRjAoKICAgICAgICAgICAgcXRleHQgPSAnJycKICAgICAgICAgICAgICAgIFNFTEVDVCBkaXN0aW5jdCBjb3VudChpZCkgYXMgY29sX3N0ciwKICAgICAgICAgICAgICAgIHN1bShpZm51bGwocXR0eV9wbGFuLDApKSBhcyBxdHR5X3BsYW4KICAgICAgICAgICAgICAgIGZyb20gUlNfZG9jc190YWJsZSBXaGVyZSBpZF9kb2MgPSA6aWRfZG9jJycnCiAgICAgICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCB7J2lkX2RvYyc6IGlkX2RvY30pCiAgICAgICAgICAgIGlmIG5vdCByZXM6CiAgICAgICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgICAgICAgICBoYXZlX3plcm9fcGxhbiA9IEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXZlX3plcm9fcGxhbiA9IHJlc1swXVswXSA+IDAgICMg0JIg0LTQvtC60YPQvNC10L3RgtC1INC10YHRgtGMINGB0YLRgNC+0LrQuAogICAgICAgICAgICAgICAgaWYgaGF2ZV96ZXJvX3BsYW46CiAgICAgICAgICAgICAgICAgICAgaGF2ZV9xdHR5X3BsYW4gPSByZXNbMF1bMV0gPiAwICAjINCSINC00L7QutGD0LzQtdC90YLQtSDQtdGB0YLRjCDQutC+0LvQstC+INC/0LvQsNC9CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UKICAgICAgICAgICAgIyDQldGB0YLRjCDQu9C4INCyINC00L7QutGD0LzQtdC90YLQtSDQv9C70LDQvSDQv9C+INC60L7QtNCw0Lwg0LzQsNGA0LrQuNGA0L7QstC60LgKICAgICAgICAgICAgcXRleHQgPSAnJycKICAgICAgICAgICAgICAgIFNFTEVDVCBkaXN0aW5jdCBjb3VudChpZCkgYXMgY29sX3N0cgogICAgICAgICAgICAgICAgZnJvbSBSU19kb2NzX2JhcmNvZGVzIFdoZXJlIGlkX2RvYyA9IDppZF9kb2MgQU5EIGlzX3BsYW4gPSA6aXNfcGxhbicnJwogICAgICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgeydpZF9kb2MnOiBpZF9kb2MsICdpc19wbGFuJzogJzEnfSkKICAgICAgICAgICAgaWYgbm90IHJlczoKICAgICAgICAgICAgICAgIGhhdmVfbWFya19wbGFuID0gRmFsc2UKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXZlX21hcmtfcGxhbiA9IHJlc1swXVswXSA+IDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgICAgIGhhdmVfemVyb19wbGFuID0gRmFsc2UKICAgICAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBGYWxzZQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaGF2ZV9xdHR5X3BsYW4nLCBzdHIoaGF2ZV9xdHR5X3BsYW4pKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdoYXZlX3plcm9fcGxhbicsIHN0cihoYXZlX3plcm9fcGxhbikpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2hhdmVfbWFya19wbGFuJywgc3RyKGhhdmVfbWFya19wbGFuKSkKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnU0VMRUNUIGNvbnRyb2wgZnJvbSBSU19kb2NzICBXSEVSRSBpZF9kb2MgPSA/JywgKGlkX2RvYywpKQogICAgICAgICMg0JXRgdGC0Ywg0LvQuCDQutC+0L3RgtGA0L7Qu9GMINC/0LvQsNC90LAg0LIg0LTQvtC60YPQvNC10L3RgtC1CiAgICAgICAgaWYgcmVzOgogICAgICAgICAgICBpZiByZXNbMF1bMF06CiAgICAgICAgICAgICAgICBpZiByZXNbMF1bMF0gaW4gZmFsc2VWYWx1ZUxpc3Q6CiAgICAgICAgICAgICAgICAgICAgY29udHJvbCA9ICdGYWxzZScKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgY29udHJvbCA9ICdUcnVlJwoKICAgICAgICAgICAgICAgICMgY29udHJvbCA9IHJlc1swXVswXSAjJ1RydWUnCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb250cm9sID0gJ0ZhbHNlJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRyb2wgPSAnRmFsc2UnCgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjb250cm9sJywgY29udHJvbCkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZG9jX2JhcmNfZmxvdyIsIHRhYmxlX3ZpZXcudG9fanNvbigpKQoKICAgICAgICBpZiBUcnVlIGluIChoYXZlX3F0dHlfcGxhbiwgaGF2ZV96ZXJvX3BsYW4sIGhhdmVfbWFya19wbGFuLCBjb250cm9sKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3RvYXN0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ9CU0LDQvdC90YvQuSDQtNC+0LrRg9C80LXQvdGCINGB0L7QtNC10YDQttC40YIg0L/Qu9Cw0L3QvtCy0YvQtSDRgdGC0YDQvtC60LguINCh0L/QuNGB0L7QuiDRiNGC0YDQuNGF0LrQvtC00L7QsiDQsiDQvdC10LPQviDQv9C+0LzQtdGB0YLQuNGC0Ywg0L3QtdC70YzQt9GPJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0JTQvtC60YPQvNC10L3RgtGLJykKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIF9nZXRfZG9jX3RhYmxlX3ZpZXcoc2VsZiwgdGFibGVfZGF0YSk6CiAgICAgICAgdGFibGVfdmlldyA9IHdpZGdldHMuQ3VzdG9tVGFibGUoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J3QsNC30LLQsNC90LjQtScpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0zCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0J/Qu9Cw0L0nKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgIGhlaWdodD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdpZHRoPSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRkZGRkZGJwogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIHRhYmxlZGF0YT10YWJsZV9kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGFibGVfdmlldwoKICAgIGRlZiBfZ2V0X2RvY190YWJsZV9yb3dfdmlldyhzZWxmKToKICAgICAgICByb3dfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCdAYmFyY29kZScpLAogICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BuYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTMsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHF0dHknLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRkZGRkZGJwogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHJvd192aWV3CgogICAgZGVmIF9wcmVwYXJlX3RhYmxlX2RhdGEoc2VsZiwgZG9jX2RldGFpbHMpOgoKICAgICAgICB0YWJsZV9kYXRhID0gW3t9XQoKICAgICAgICBmb3IgcmVjb3JkIGluIGRvY19kZXRhaWxzOgoKICAgICAgICAgICAgcHJvZHVjdF9yb3cgPSB7J2tleSc6IHN0cihyZWNvcmRbJ2JhcmNvZGUnXSksICdiYXJjb2RlJzogc3RyKHJlY29yZFsnYmFyY29kZSddKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiByZWNvcmRbJ25hbWUnXSBpZiByZWNvcmRbJ25hbWUnXSBpcyBub3QgTm9uZSBlbHNlICct0L3QtdGCINC00LDQvdC90YvRhS0nLCAncXR0eSc6IHN0cihyZWNvcmRbJ3F0dHknXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICdfbGF5b3V0Jzogc2VsZi5fZ2V0X2RvY190YWJsZV9yb3dfdmlldygpfQoKICAgICAgICAgICAgcHJvZHVjdF9yb3dbJ19sYXlvdXQnXS5CYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGRkZGRicgaWYgcmVjb3JkWyduYW1lJ10gaXMgbm90IE5vbmUgZWxzZSAiI0ZCRTlFNyIKCiAgICAgICAgICAgIGlmIHNlbGYuX2FkZGVkX2dvb2RzX2hhc19rZXkocHJvZHVjdF9yb3dbJ2tleSddKToKICAgICAgICAgICAgICAgIHRhYmxlX2RhdGEuaW5zZXJ0KDEsIHByb2R1Y3Rfcm93KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgICAgICAjdGFibGVfZGF0YS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gRG9jRGV0YWlscyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgojID09PT09PT09PT09PT09PT09PT09IEdvb2RzIHNlbGVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCmNsYXNzIEdvb2RzU2VsZWN0U2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQotC+0LLQsNGAINCy0YvQsdC+0YAnCiAgICBwcm9jZXNzX25hbWUgPSAn0JTQvtC60YPQvNC10L3RgtGLJwogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gRG9jU2VydmljZSgpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgICMg0KDQtdC20LjQvCDRgNCw0LHQvtGC0Ysg0YEg0LzRg9C70YzRgtC40LzQtdC00LjQsCDQuCDRhNCw0LnQu9Cw0LzQuCDQv9C+INGB0YHRi9C70LrQsNC8ICjRhNC70LDQsyBtbV9sb2NhbCkKICAgICAgICBzZWxmLmhhc2hfbWFwWydtbV9sb2NhbCddID0gJycKCiAgICAgICAgaWYgbm90IHNlbGYuaGFzaF9tYXAuZ2V0KCdxdHR5Jyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdxdHR5JywgJzAnKQoKICAgICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5nZXQoJ25ld19xdHR5Jyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCduZXdfcXR0eScsIHNlbGYuaGFzaF9tYXAuZ2V0KCdxdHR5JykpCgogICAgICAgIGlmIG5vdCBzZWxmLmhhc2hfbWFwLmdldCgnZGVsdGEnKToKICAgICAgICAgICAgc2VsZi5fc2V0X2RlbHRhKHJlc2V0PVRydWUpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgoKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKCiAgICAgICAgaWYgbGlzdGVuZXIgaXMgTm9uZToKICAgICAgICAgICAgIiIi0JLQstC+0LQg0LTQtdC70YzRgtGLINC40Lcg0YHQvtCy0YDQtdC80LXQvdC90L7Qs9C+INC/0L7Qu9GPINCy0LLQvtC00LAgKNGH0LXRgNC10LcgZW50ZXIg0LrQu9Cw0LLQuNCw0YLRg9GA0YspIiIiCiAgICAgICAgICAgIGlmIHNlbGYuX3ZhbGlkYXRlX2RlbHRhX2lucHV0KCk6CiAgICAgICAgICAgICAgICBzZWxmLl9zZXRfZGVsdGEoMCkKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX29rIjoKICAgICAgICAgICAgaWYgaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCduZXdfcXR0eScpKSA+PSAwOgogICAgICAgICAgICAgICAgY3VycmVudF9lbGVtID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbignc2VsZWN0ZWRfY2FyZF9kYXRhJykKICAgICAgICAgICAgICAgIHF0dHkgPSBzZWxmLmhhc2hfbWFwWyduZXdfcXR0eSddCiAgICAgICAgICAgICAgICBwcmljZSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdwcmljZScpIG9yIDAKCiAgICAgICAgICAgICAgICBpZiBxdHR5ICE9IGN1cnJlbnRfZWxlbVsncXR0eSddOgogICAgICAgICAgICAgICAgICAgIHVwZGF0ZV9kYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAnc2VudCc6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICdxdHR5JzogZmxvYXQocXR0eSkgaWYgcXR0eSBlbHNlIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICMgJ3ByaWNlJzogZmxvYXQocHJpY2UpICMg0LIgQWRyIGRvY3Mg0L3QtdGCINC60L7Qu9C+0L3QutC4INC/0YDQsNC50YEsINC90LUg0L/QvtC90Y/RgtC90L4g0L3Rg9C20L3QsCDQvtC90LAg0LLQvtC+0LHRidC1INC40LvQuCDQvdC10YIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcm93X2lkID0gaW50KGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnVwZGF0ZV9kb2NfdGFibGVfcm93KGRhdGE9dXBkYXRlX2RhdGEsIHJvd19pZD1yb3dfaWQpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLnNldF9kb2Nfc3RhdHVzX3RvX3VwbG9hZChzZWxmLmhhc2hfbWFwLmdldCgnaWRfZG9jJykpCgogICAgICAgICAgICAgICAgc2VsZi5fc2V0X2RlbHRhKHJlc2V0PVRydWUpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnbmV3X3F0dHknLCAnJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9CY0YLQvtCz0L7QstC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LzQtdC90YzRiNC1IDAnKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ2Vycm9yJykKICAgICAgICAgICAgICAgIHNlbGYuX3NldF9kZWx0YShyZXNldD1UcnVlKQoKICAgICAgICBlbGlmICdvcHMnIGluIGxpc3RlbmVyOgogICAgICAgICAgICAiIiLQn9GA0LXRhNC40LrRgSDQutC90L7Qv9C+0LogKy8tLCDQt9C90LDRh9C10L3QuNC1INCyINC90LDQt9Cy0LDQvdC40Y/RhSDQutC90L7Qv9C+0LoiIiIKICAgICAgICAgICAgc2VsZi5fc2V0X2RlbHRhKGludChsaXN0ZW5lcls0Ol0pKQoKICAgICAgICBlbGlmIGxpc3RlbmVyIGluIFsiYnRuX2NhbmNlbCIsICdCQUNLX0JVVFRPTicsICdPTl9CQUNLX1BSRVNTRUQnXToKICAgICAgICAgICAgc2VsZi5fc2V0X2RlbHRhKHJlc2V0PVRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCduZXdfcXR0eScsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX3ByaW50JzoKICAgICAgICAgICAgc2VsZi5wcmludF90aWNrZXQoKQoKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgY3VycmVudF9lbGVtID0gc2VsZi5oYXNoX21hcC5nZXRfanNvbignc2VsZWN0ZWRfY2FyZF9kYXRhJykKICAgICAgICAgICAgc2VsZi5wcmludF90aWNrZXQoYmFyY29kZT1jdXJyZW50X2VsZW1bJ2JhcmNvZGUnXSkKCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBnZXRfZG9jKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgX3ZhbGlkYXRlX2RlbHRhX2lucHV0KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCdkZWx0YScpKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2VsZi50b2FzdCgn0JLQstC10LTQtdC90L3QvtC1INC30L3QsNGH0LXQvdC40LUg0L3QtSDRj9Cy0LvRj9C10YLRgdGPINGG0LXQu9GL0Lwg0YfQuNGB0LvQvtC8JykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ2Vycm9yJykKICAgICAgICAgICAgc2VsZi5fc2V0X2RlbHRhKHJlc2V0PVRydWUpCgogICAgZGVmIF9zZXRfZGVsdGEoc2VsZiwgdmFsdWU6IGludCA9IDAsIHJlc2V0OiBib29sID0gRmFsc2UpOgogICAgICAgICIiItCh0L7Qt9C00LDQtdC8ICjQvtCx0L3Rg9C70Y/QtdC8KSDQv9C+0LvQtSDQstCy0L7QtNCwIiIiCiAgICAgICAgaWYgcmVzZXQ6CiAgICAgICAgICAgIGRlbHRhX2ZpZWxkID0gd2lkZ2V0cy5Nb2Rlcm5GaWVsZChkZWZhdWx0X3RleHQ9JycsIGlucHV0X3R5cGU9MykKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZWx0YSA9IGludChzZWxmLmhhc2hfbWFwLmdldCgnZGVsdGEnKSkgKyB2YWx1ZSBpZiBzZWxmLmhhc2hfbWFwLmdldCgnZGVsdGEnKSBlbHNlIHZhbHVlCiAgICAgICAgICAgIGRlbHRhX2ZpZWxkID0gd2lkZ2V0cy5Nb2Rlcm5GaWVsZChkZWZhdWx0X3RleHQ9ZGVsdGEsIGlucHV0X3R5cGU9MykKICAgICAgICAgICAgc2VsZi5fc2V0X3Jlc3VsdF9xdHR5KGRlbHRhKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdkZWx0YScsIGRlbHRhX2ZpZWxkLnRvX2pzb24oKSkKCiAgICBkZWYgX3NldF9yZXN1bHRfcXR0eShzZWxmLCBkZWx0YSk6CiAgICAgICAgbmV3X3F0dHkgPSBzdHIoaW50KHNlbGYuaGFzaF9tYXAuZ2V0KCdxdHR5JykpICsgZGVsdGEpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ25ld19xdHR5JywgbmV3X3F0dHkpCgogICAgZGVmIHByaW50X3RpY2tldChzZWxmLCBiYXJjb2RlOiBzdHIgPSBOb25lKToKICAgICAgICBwYXJhbV9saXN0ID0geyfQlNCw0YLQsF/QtNC+0LonOiAnRG9jX2RhdGEnLCAn0J3QvtC80LXQvdC60LvQsNGC0YPRgNCwJzogJ0dvb2QnLCAn0JDRgNGC0LjQutGD0LsnOiAnZ29vZF9hcnQnLAogICAgICAgICAgICAgICAgICAgICAgJ9Ch0LXRgNC40LnQvdGL0Lkg0L3QvtC80LXRgCc6ICdnb29kX3NuJywgJ9Cl0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60LAnOiAnZ29vZF9wcm9wZXJ0eScKICAgICAgICAgICAgLCAn0KbQtdC90LAnOiAnZ29vZF9wcmljZScsICfQldC00JjQt9C8JzogJ2dvb2RfdW5pdCcsICfQmtC70Y7Rhyc6ICdrZXknLCAn0KbQtdC90LAnOiAncHJpY2UnLCAn0JLQsNC70Y7RgtCwJzogJ3ByaWNlX3R5cGUnfQogICAgICAgIGZvciBrZXkgaW4gcGFyYW1fbGlzdC5rZXlzKCk6CiAgICAgICAgICAgIHBhcmFtX2xpc3Rba2V5XSA9IHNlbGYuaGFzaF9tYXAuZ2V0KHBhcmFtX2xpc3Rba2V5XSkKICAgICAgICBpZiBiYXJjb2RlOgogICAgICAgICAgICBwYXJhbV9saXN0WydiYXJjb2RlJ10gPSBiYXJjb2RlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFyYW1fbGlzdFsnYmFyY29kZSddID0gJzAwMDAwMDAwMDAwMDAnCiAgICAgICAgSHRtbFZpZXcucHJpbnRfZnJvbV9hbnlfc2NyZWVuKHNlbGYuaGFzaF9tYXAsIHNlbGYucnNfc2V0dGluZ3MsIGRhdGFfZm9yX3ByaW50aW5nPXBhcmFtX2xpc3QpCgpjbGFzcyBBZHJHb29kc1NlbGVjdFNjcmVlbihHb29kc1NlbGVjdFNjcmVlbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBBZHJEb2NTZXJ2aWNlKCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBHb29kcyBzZWxlY3QgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gR29vZHMoUHJvY2VzcykgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY2xhc3MgR29vZHNMaXN0U2NyZWVuKFNjcmVlbik6CiAgICBzY3JlZW5fbmFtZSA9ICfQotC+0LLQsNGA0Ysg0YHQv9C40YHQvtC6JwogICAgcHJvY2Vzc19uYW1lID0gJ9Ci0L7QstCw0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBHb29kc1NlcnZpY2UoKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKSAtPiBOb25lOgogICAgICAgIGNhcmRzX2RhdGEgPSBzZWxmLl9nZXRfZ29vZHNfbGlzdF9kYXRhKHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9nb29kc190eXBlJykpCiAgICAgICAgZ29vZHNfY2FyZHMgPSBzZWxmLl9nZXRfZ29vZHNfY2FyZHNfdmlldyhjYXJkc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2dvb2RzX2NhcmRzJ10gPSBnb29kc19jYXJkcy50b19qc29uKCkKICAgICAgICBzZWxmLmhhc2hfbWFwWydyZXR1cm5fc2VsZWN0ZWRfZGF0YSddID0gIiIKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmxpc3RlbmVyCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfZ29vZF9pZCcsIHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZScsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQmtCw0YDRgtC+0YfQutCwINGC0L7QstCw0YDQsCIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAic2VsZWN0X2dvb2RzX3R5cGUiOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCLQktGL0LHQvtGAINC60LDRgtC10LPQvtGA0LjQuCDRgtC+0LLQsNGA0L7QsiIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIkZpbmlzaFByb2Nlc3MiLCAiIikKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJzoKICAgICAgICAgICAgc2VsZi5faWRlbnRpZnlfYmFyY29kZV9nb29kcygpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgc2VsZi5fdmFsaWRhdGVfc2NyZWVuX3ZhbHVlcygpCiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbihzZWxmLnNjcmVlbl9uYW1lLCBhcmdzKQoKICAgIGRlZiBfZ2V0X2dvb2RzX2xpc3RfZGF0YShzZWxmLCBzZWxlY3RlZF9nb29kX3R5cGU9Tm9uZSkgLT4gbGlzdDoKICAgICAgICByZXN1bHRzID0gc2VsZi5zZXJ2aWNlLmdldF9nb29kc19saXN0X2RhdGEoc2VsZWN0ZWRfZ29vZF90eXBlKQogICAgICAgIGNhcmRzX2RhdGEgPSBbXQogICAgICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICAgICAgc2luZ2xlX2NhcmRfZGF0YSA9IHsKICAgICAgICAgICAgICAgICdrZXknOiByZWNvcmRbJ2lkJ10sCiAgICAgICAgICAgICAgICAnY29kZSc6IHJlY29yZFsnY29kZSddLAogICAgICAgICAgICAgICAgJ25hbWUnOiByZWNvcmRbJ25hbWUnXSwKICAgICAgICAgICAgICAgICdhcnQnOiByZWNvcmRbJ2FydCddIGlmIHJlY29yZFsnYXJ0J10gZWxzZSAi4oCUIiwKICAgICAgICAgICAgICAgICd1bml0JzogcmVjb3JkWyd1bml0J10gaWYgcmVjb3JkWyd1bml0J10gZWxzZSAi4oCUIiwKICAgICAgICAgICAgICAgICd0eXBlX2dvb2QnOiByZWNvcmRbJ3R5cGVfZ29vZCddLAogICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogcmVjb3JkWydkZXNjcmlwdGlvbiddIGlmIHJlY29yZFsnZGVzY3JpcHRpb24nXSBlbHNlICLigJQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FyZHNfZGF0YS5hcHBlbmQoc2luZ2xlX2NhcmRfZGF0YSkKCiAgICAgICAgcmV0dXJuIGNhcmRzX2RhdGEKCiAgICBkZWYgX2dldF9nb29kc19jYXJkc192aWV3KHNlbGYsIGNhcmRzX2RhdGEpOgogICAgICAgIGNhcmRfdGl0bGVfdGV4dF9zaXplID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ0NhcmRUaXRsZVRleHRTaXplJykKICAgICAgICBjYXJkX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGV4dFNpemUnKQoKICAgICAgICBnb29kc19jYXJkcyA9IHdpZGdldHMuQ3VzdG9tQ2FyZHMoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQG5hbWUnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90aXRsZV90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgVGV4dENvbG9yPScjN0EwMDVDJwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0Bjb2RlJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAYXJ0JywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAdW5pdCcsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHR5cGVfZ29vZCcsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSd2ZXJ0aWNhbCcsCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICBjYXJkc2RhdGE9Y2FyZHNfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIGdvb2RzX2NhcmRzCgogICAgZGVmIF9pZGVudGlmeV9iYXJjb2RlX2dvb2RzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuaGFzaF9tYXAuZ2V0KCdiYXJjb2RlJyk6CiAgICAgICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZScpCiAgICAgICAgICAgIHZhbHVlcyA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2Zyb21fYmFyY29kZSgiYmFyY29kZSIsIGJhcmNvZGUpCiAgICAgICAgICAgIGlmIHZhbHVlczoKICAgICAgICAgICAgICAgIGl0ZW1faWQgPSB2YWx1ZXNbMF1bJ2lkX2dvb2QnXQogICAgICAgICAgICAgICAgaXRlbV92YWx1ZXMgPSBzZWxmLnNlcnZpY2UuZ2V0X2dvb2RzX2xpc3RfZGF0YShpdGVtX2lkPWl0ZW1faWQpWzBdCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgic2VsZWN0ZWRfZ29vZF9pZCIsIGl0ZW1faWQpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZ29vZF9uYW1lIiwgaXRlbV92YWx1ZXNbJ25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2FydCIsIGl0ZW1fdmFsdWVzWydhcnQnXSBpZiBpdGVtX3ZhbHVlc1snYXJ0J10gZWxzZSAi4oCUIikKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2NvZGUiLCBpdGVtX3ZhbHVlc1snY29kZSddKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfZGVzY3IiLCBpdGVtX3ZhbHVlc1snZGVzY3JpcHRpb24nXSBpZiBpdGVtX3ZhbHVlc1snZGVzY3JpcHRpb24nXSBlbHNlICLigJQiKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfdHlwZSIsIGl0ZW1fdmFsdWVzWyd0eXBlX2dvb2QnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Ca0LDRgNGC0L7Rh9C60LAg0YLQvtCy0LDRgNCwJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoJ9Ci0L7QstCw0YAg0L3QtSDRgNCw0YHQv9C+0LfQvdCw0L0g0L/QviDRiNGC0YDQuNGF0LrQvtC00YMnKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ2Vycm9yJykKCgpjbGFzcyBTZWxlY3RHb29kc1R5cGUoU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9CS0YvQsdC+0YAg0LrQsNGC0LXQs9C+0YDQuNC4INGC0L7QstCw0YDQvtCyJwogICAgcHJvY2Vzc19uYW1lID0gJ9Ci0L7QstCw0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBHb29kc1NlcnZpY2UoKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBnb29kc190eXBlc19kYXRhID0gc2VsZi5fZ2V0X2dvb2RzX3R5cGVzX2RhdGEoKQogICAgICAgIGdvb2RzX3R5cGVzX2NhcmRzID0gc2VsZi5fZ2V0X2dvb2RzX3R5cGVzX2NhcmRzX3ZpZXcoZ29vZHNfdHlwZXNfZGF0YSkKICAgICAgICBzZWxmLmhhc2hfbWFwWydnb29kc190eXBlc19jYXJkcyddID0gZ29vZHNfdHlwZXNfY2FyZHMudG9fanNvbigpCiAgICAgICAgc2VsZi5oYXNoX21hcFsncmV0dXJuX3NlbGVjdGVkX2RhdGEnXSA9ICIiCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGxpc3RlbmVyID0gc2VsZi5saXN0ZW5lcgogICAgICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgY2FyZF9kYXRhID0gc2VsZi5oYXNoX21hcC5nZXQoInNlbGVjdGVkX2NhcmRfZGF0YSIsIGZyb21fanNvbj1UcnVlKQogICAgICAgICAgICB0eXBlX2lkID0gY2FyZF9kYXRhWydrZXknXQogICAgICAgICAgICB0eXBlX25hbWUgPSBjYXJkX2RhdGFbJ25hbWUnXQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0X2dvb2RzX3R5cGUnLCB0eXBlX25hbWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF9nb29kc190eXBlJywgdHlwZV9pZCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dTY3JlZW4iLCAi0KLQvtCy0LDRgNGLINGB0L/QuNGB0L7QuiIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdF9nb29kc190eXBlJywgIiIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF9nb29kc190eXBlJywgIiIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJCYWNrU2NyZWVuIiwgIiIpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfZ2V0X2dvb2RzX3R5cGVzX2RhdGEoc2VsZik6CiAgICAgICAgZ29vZHNfdHlwZXNfZGF0YV9yZXN1bHQgPSBzZWxmLnNlcnZpY2UuZ2V0X2FsbF9nb29kc190eXBlc19kYXRhKCkKICAgICAgICBnb29kc190eXBlc19kYXRhID0gW10KICAgICAgICBmb3IgcmVjb3JkIGluIGdvb2RzX3R5cGVzX2RhdGFfcmVzdWx0OgogICAgICAgICAgICBzaW5nbGVfY2FyZF9kYXRhID0gewogICAgICAgICAgICAgICAgJ2tleSc6IHJlY29yZFsnaWQnXSwKICAgICAgICAgICAgICAgICduYW1lJzogcmVjb3JkWyduYW1lJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ29vZHNfdHlwZXNfZGF0YS5hcHBlbmQoc2luZ2xlX2NhcmRfZGF0YSkKICAgICAgICByZXR1cm4gZ29vZHNfdHlwZXNfZGF0YQoKICAgIGRlZiBfZ2V0X2dvb2RzX3R5cGVzX2NhcmRzX3ZpZXcoc2VsZiwgZ29vZHNfdHlwZXNfZGF0YSk6CiAgICAgICAgY2FyZF90aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQoKICAgICAgICB0eXBlX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbmFtZScsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdsZWZ0JywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RpdGxlX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnCiAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSd2ZXJ0aWNhbCcsCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3B0aW9ucz13aWRnZXRzLk9wdGlvbnMoKS5vcHRpb25zLAogICAgICAgICAgICBjYXJkc2RhdGE9Z29vZHNfdHlwZXNfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHR5cGVfY2FyZHMKCgpjbGFzcyBJdGVtQ2FyZChTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JrQsNGA0YLQvtGH0LrQsCDRgtC+0LLQsNGA0LAnCiAgICBwcm9jZXNzX25hbWUgPSAn0KLQvtCy0LDRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuc2VydmljZSA9IEdvb2RzU2VydmljZSgpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgoKICAgICAgICAjIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X2J1dHRvbnMiLCAiLTEiKSAgIyDQn9C+0LrQsCDRgdC/0YDRj9GC0LDQu9C4INC/0LXRgNC10YXQvtC0INC6INC/0YDQvtGG0LXRgdGB0LDQvCAi0L7RgdGC0LDRgtC60LgiINC4ICLRhtC10L3RiyIKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZSgncmV0dXJuX3NlbGVjdGVkX2RhdGEnKQogICAgICAgIGNhcmRfZGF0YSA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2RhdGEiLCBmcm9tX2pzb249VHJ1ZSkKICAgICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoInNlbGVjdGVkX2dvb2RfaWQiLCBjYXJkX2RhdGFbJ2tleSddKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiZ29vZF9uYW1lIiwgY2FyZF9kYXRhWyduYW1lJ10pCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2FydCIsIGNhcmRfZGF0YVsnYXJ0J10pCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX2NvZGUiLCBjYXJkX2RhdGFbJ2NvZGUnXSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImdvb2RfZGVzY3IiLCBjYXJkX2RhdGFbJ2Rlc2NyaXB0aW9uJ10gaWYgY2FyZF9kYXRhWydkZXNjcmlwdGlvbiddIGVsc2UgIuKAlCIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJnb29kX3R5cGUiLCBjYXJkX2RhdGFbJ3R5cGVfZ29vZCddKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIjoKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGVfY2FyZHMnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiYXJjb2RlX2NhcmRzJywgJycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJCYWNrU2NyZWVuIiwgIiIpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIGN1cnJlbnRfc3RyID0gc2VsZi5oYXNoX21hcC5nZXQoInNlbGVjdGVkX2NhcmRfcG9zaXRpb24iKQogICAgICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoc2VsZi5oYXNoX21hcC5nZXQoImJhcmNvZGVfY2FyZHMiKSkKICAgICAgICAgICAgY3VycmVudF9lbGVtID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCiAgICAgICAgICAgIGRhdGFfZGljdCA9IHsnYmFyY29kZSc6IGN1cnJlbnRfZWxlbVsnYmFyY29kZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgJ9Cd0L7QvNC10L3QutC70LDRgtGD0YDQsCc6IHNlbGYuaGFzaF9tYXAuZ2V0KCdnb29kX25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICfQpdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutCwJzogY3VycmVudF9lbGVtWydwcm9wZXJ0aWVzJ10sICfQktCw0LvRjtGC0LAnOiBjdXJyZW50X2VsZW1bJ3VuaXQnXX0KCiAgICAgICAgICAgIEh0bWxWaWV3LnByaW50X2Zyb21fYW55X3NjcmVlbihzZWxmLmhhc2hfbWFwLCBzZWxmLnJzX3NldHRpbmdzLCBkYXRhX2Zvcl9wcmludGluZz1kYXRhX2RpY3QpCiAgICAgICAgICAgIAogICAgICAgIGVsaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2xpc3RlbmVyJykgPT0gJ3RvX3ByaWNlcyc6CiAgICAgICAgICAgIGRpY3RfZGF0YSA9IHsnaW5wdXRfZ29vZF9pZCc6IHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9nb29kX2lkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAnaW5wdXRfZ29vZF9hcnQnOiBzZWxmLmhhc2hfbWFwLmdldCgnZ29vZF9hcnQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICdwcmljZXNfb2JqZWN0X25hbWUnOiBmJ3tzZWxmLmhhc2hfbWFwLmdldCgiZ29vZF9uYW1lIil9LCB7c2VsZi5oYXNoX21hcC5nZXQoImdvb2RfY29kZSIpfScsCiAgICAgICAgICAgICAgICAgICAgICAgICAicmV0dXJuX3RvX2l0ZW1fY2FyZCI6ICJ0cnVlIiwgJ3Byb3BlcnR5X2lkJzogc2VsZi5oYXNoX21hcC5nZXQoJ3Byb3BlcnR5X2lkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0X25hbWUnOiBzZWxmLmhhc2hfbWFwLmdldCgnZ29vZF9uYW1lJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAnU2hvd1Byb2Nlc3NSZXN1bHQnOiAn0KbQtdC90Yt80J/RgNC+0LLQtdGA0LrQsCDRhtC10L0nLCAibm9SZWZyZXNoIjogJyd9CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0X2RhdGEoZGljdF9kYXRhKQoKICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnbGlzdGVuZXInKSA9PSAndG9fYmFsYW5jZXMnOgogICAgICAgICAgICBkaWN0X2RhdGEgPSB7J2lucHV0X2l0ZW1faWQnOiBzZWxmLmhhc2hfbWFwLmdldCgnc2VsZWN0ZWRfZ29vZF9pZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgJ2l0ZW1fYXJ0X2lucHV0Jzogc2VsZi5oYXNoX21hcC5nZXQoJ2dvb2RfYXJ0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2VsZWN0ZWRfb2JqZWN0X25hbWUnOiBmJ3tzZWxmLmhhc2hfbWFwLmdldCgiZ29vZF9uYW1lIil9LCB7c2VsZi5oYXNoX21hcC5nZXQoImdvb2RfY29kZSIpfScsCiAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0X25hbWUnOiBzZWxmLmhhc2hfbWFwLmdldCgnZ29vZF9uYW1lJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAicmV0dXJuX3RvX2l0ZW1fY2FyZCI6ICJ0cnVlIiwgJ3Byb3BlcnR5X2lkJzogc2VsZi5oYXNoX21hcC5nZXQoJ3Byb3BlcnR5X2lkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAnU2hvd1Byb2Nlc3NSZXN1bHQnOiAn0J7RgdGC0LDRgtC60Lh80J/RgNC+0LLQtdGA0LjRgtGMINC+0YHRgtCw0YLQutC4JywgIm5vUmVmcmVzaCI6ICcnfQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKGRpY3RfZGF0YSkKCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZWN0ZWRfZ29vZF9pZCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9nb29kX2lkIikKICAgICAgICBiYXJjb2RlID0gc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKQogICAgICAgIGlmIGJhcmNvZGU6CiAgICAgICAgICAgIGdvb2RzX2JhcmNvZGUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImJhcmNvZGUiLCBiYXJjb2RlKQogICAgICAgIGVsaWYgc2VsZWN0ZWRfZ29vZF9pZDogICMg0JLRi9Cx0L7RgCDRgtC+0LLQsNGA0LAg0YfQtdGA0LXQtyDQutCw0YDRgtC+0YfQutGDCiAgICAgICAgICAgIGdvb2RzX2JhcmNvZGUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19mcm9tX2JhcmNvZGUoImlkX2dvb2QiLCBzZWxlY3RlZF9nb29kX2lkKQoKICAgICAgICBpZiBnb29kc19iYXJjb2RlOgogICAgICAgICAgICB2YXJpYW50c19jYXJkc19kYXRhID0gc2VsZi5fZ2V0X3ZhcmlhbnRzX2NhcmRzX2RhdGEoZ29vZHNfYmFyY29kZSkKICAgICAgICAgICAgdmFyaWFudHNfY2FyZHMgPSBzZWxmLl9nZXRfdmFyaWFudHNfY2FyZHNfdmlldyh2YXJpYW50c19jYXJkc19kYXRhKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydiYXJjb2RlX2NhcmRzJ10gPSB2YXJpYW50c19jYXJkcy50b19qc29uKCkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImxvYWRfaW5mbyIsICIiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJsb2FkX2luZm8iLCAi0JTQsNC90L3Ri9C1INC+INGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60LDRhSDQvtGC0YHRg9GC0YHRgtCy0YPRjtGCIikKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2dldF92YXJpYW50c19jYXJkc19kYXRhKGdvb2RzX2JhcmNvZGUpOgogICAgICAgIHZhcmlhbnRzX2NhcmRzX2RhdGEgPSBbXQogICAgICAgIGkgPSAwCiAgICAgICAgZm9yIGVsZW1lbnQgaW4gZ29vZHNfYmFyY29kZToKICAgICAgICAgICAgYyA9IHsia2V5Ijogc3RyKGkpLCAiYmFyY29kZSI6IGVsZW1lbnRbJ2JhcmNvZGUnXSwKICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6IGVsZW1lbnRbJ3Byb3BlcnR5J10gaWYgZWxlbWVudFsncHJvcGVydHknXSBlbHNlICIiLAogICAgICAgICAgICAgICAgICJ1bml0IjogZWxlbWVudFsndW5pdCddLCAic2VyaWVzIjogZWxlbWVudFsnc2VyaWVzJ119CiAgICAgICAgICAgIHZhcmlhbnRzX2NhcmRzX2RhdGEuYXBwZW5kKGMpCiAgICAgICAgICAgIGkgKz0gMQogICAgICAgIHJldHVybiB2YXJpYW50c19jYXJkc19kYXRhCgogICAgZGVmIF9nZXRfdmFyaWFudHNfY2FyZHNfdmlldyhzZWxmLCBjYXJkc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpIGlmIHNlbGYucnNfc2V0dGluZ3MuZ2V0KAogICAgICAgICAgICAnQ2FyZFRpdGxlVGV4dFNpemUnKSBlbHNlIDIwCiAgICAgICAgY2FyZF90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRleHRTaXplJykgaWYgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ0NhcmRUZXh0U2l6ZScpIGVsc2UgMTUKCiAgICAgICAgdmFyaWFudHNfY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcHJvcGVydGllcycsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0B1bml0JywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BiYXJjb2RlJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAc2VyaWVzJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9Y2FyZF90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRDb2xvcj0nIzAwMDAwMCcKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0ndmVydGljYWwnLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPWNhcmRzX2RhdGEKICAgICAgICApCiAgICAgICAgcmV0dXJuIHZhcmlhbnRzX2NhcmRzCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gR29vZHMoUHJvY2VzcykgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT09PT09PSBHb29kc0JhbGFuY2VzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpjbGFzcyBHb29kc0JhbGFuY2VzSXRlbUNhcmQoU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cf0YDQvtCy0LXRgNC40YLRjCDQvtGB0YLQsNGC0LrQuCcKICAgIHByb2Nlc3NfbmFtZSA9ICfQntGB0YLQsNGC0LrQuCcKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBHb29kc1NlcnZpY2UoKQogICAgICAgIHNlbGYuaHNfc2VydmljZSA9IGhzX3NlcnZpY2VzLkhzU2VydmljZShzZWxmLmdldF9odHRwX3NldHRpbmdzKCkpCiAgICAgICAgc2VsZi50YWJsZV90eXBlID0gJ3dhcmVob3VzZXMnCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHNlbGYuX3NldF92aXNpYmlsaXR5X29uX3N0YXJ0KFsnZXJyb3JfbXNnJywgJ3NlbGVjdGVkX29iamVjdF9uYW1lJywgJ3NlbGVjdGVkX2NlbGxfbmFtZScsICdzZWxlY3RlZF93aF9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhcmNvZGVfaW5mbyddKQogICAgICAgIGlmIG5vdCBzZWxmLmhhc2hfbWFwLmdldCgnYmFsYW5jZXNfdGFibGUnKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfZ2V0X2JhbGFuY2VzX2NvbnRyb2xzIiwgIjEiKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19zaG93X2ZpbHRlcnMiLCAiLTEiKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKCiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmxpc3RlbmVyCgogICAgICAgIGlmIGxpc3RlbmVyID09ICd3aF9zZWxlY3QnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQktGL0LHQvtGAINGB0LrQu9Cw0LTQsCcpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnZ2V0X2JhbGFuY2VfYnRuJzoKICAgICAgICAgICAgc2VsZi5fZ2V0X2JhbGFuY2VzKCkKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdiYXJjb2RlJzoKICAgICAgICAgICAgc2VsZi5faWRlbnRpZnlfYmFyY29kZV9iYWxhbmNlcygpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgc2VsZi5fcmVzZXRfYmFsYW5jZXNfdGFibGVzKCkKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ3JldHVybl90b19pdGVtX2NhcmQnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdub1JlZnJlc2gnLCAnJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJGaW5pc2hQcm9jZXNzUmVzdWx0IiwgIiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiRmluaXNoUHJvY2VzcyIsICIiKQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3Rlc3RfYnRuJzoKICAgICAgICAgICAgc2VsZi5fZ2V0X2JhbGFuY2VzKCkKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdzaG93X2ZpbHRlcnMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19nZXRfYmFsYW5jZXNfY29udHJvbHMiLCAiMSIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X3Nob3dfZmlsdGVycyIsICItMSIpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfZ2V0X2JhbGFuY2VzKHNlbGYpOgogICAgICAgIHNlbGYudmFsaWRhdGVfaW5wdXQoKQogICAgICAgIHJhd19iYWxhbmNlc19kYXRhID0gc2VsZi5fZ2V0X2JhbGFuY2VzX2RhdGEoKQogICAgICAgICMgc2VsZi50b2FzdChyYXdfYmFsYW5jZXNfZGF0YSkKICAgICAgICBiYWxhbmNlc19kYXRhID0gc2VsZi5fcHJlcGFyZV90YWJsZV9kYXRhKHJhd19iYWxhbmNlc19kYXRhKQogICAgICAgIGJhbGFuY2VzX3RhYmxlID0gc2VsZi5fZ2V0X2JhbGFuY2VzX3RhYmxlX3ZpZXcoYmFsYW5jZXNfZGF0YSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFsYW5jZXNfdGFibGUnLCBiYWxhbmNlc190YWJsZS50b19qc29uKCkpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoIlNob3dfZ2V0X2JhbGFuY2VzX2NvbnRyb2xzIiwgIi0xIikKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19zaG93X2ZpbHRlcnMiLCAiMSIpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoInByb3BlcnR5X2lkIiwgJycpCgogICAgZGVmIHZhbGlkYXRlX2lucHV0KHNlbGYpOgogICAgICAgIHNlbGYuX3Byb2Nlc3NfaW5wdXRfaXRlbV9hcnQoKQogICAgICAgIHNlbGYuX3Byb2Nlc3NfaW5wdXRfY2VsbCgpCgogICAgICAgIGlmIG5vdCAoc2VsZi5oYXNoX21hcC5nZXQoJ2l0ZW1fYXJ0X2lucHV0Jykgb3Igc2VsZi5oYXNoX21hcC5nZXQoJ2NlbGxfaW5wdXQnKSBvciBzZWxmLmhhc2hfbWFwLmdldCgnd2hfc2VsZWN0JykKICAgICAgICAgICAgICAgIG9yIHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9jZWxsX2lkJykpOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFsYW5jZXNfdGFibGVzJywgJycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdvYmplY3RfbmFtZScsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY2VsbF9uYW1lJywgJycpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdlcnJvcl9tc2cnLCAi0JTQvtC70LbQtdC9INCx0YvRgtGMINCy0YvQsdGA0LDQvSDRgdC60LvQsNC0LCDRgtC+0LLQsNGAINC40LvQuCDRj9GH0LXQudC60LAiKQoKICAgIGRlZiBfcHJvY2Vzc19pbnB1dF9pdGVtX2FydChzZWxmKToKICAgICAgICBpdGVtX2FydF9pbnB1dCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpdGVtX2FydF9pbnB1dCcpCiAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ2l0ZW1fYXJ0X2lucHV0Jyk6CiAgICAgICAgICAgIGl0ZW1fdmFsdWVzX3Jlc3VsdCA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9J1JTX2dvb2RzJywgZmllbGQ9J2FydCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPWl0ZW1fYXJ0X2lucHV0KQogICAgICAgICAgICBpZiBpdGVtX3ZhbHVlc19yZXN1bHQ6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnb2JqZWN0X25hbWUnLCBpdGVtX3ZhbHVlc19yZXN1bHRbMF1bJ25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdpbnB1dF9pdGVtX2lkJywgaXRlbV92YWx1ZXNfcmVzdWx0WzBdWydpZCddKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX29iamVjdF9uYW1lJywgZid7aXRlbV92YWx1ZXNfcmVzdWx0WzBdWyJuYW1lIl19LCAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmJ3tpdGVtX3ZhbHVlc19yZXN1bHRbMF1bImNvZGUiXX0nKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2dvb2RfY29kZScsIGl0ZW1fdmFsdWVzX3Jlc3VsdFswXVsnY29kZSddKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2Vycm9yX21zZycsICIiKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2l0ZW1fYXJ0X2lucHV0Jywgc2VsZi5oYXNoX21hcC5nZXQoJ2l0ZW1fYXJ0X2lucHV0JykpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBpdGVtX2FydF9pbnB1dCAhPSAn4oCUJyBhbmQgc2VsZi5oYXNoX21hcC5nZXQoJ3JldHVybl90b19pdGVtX2NhcmQnKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZXJyb3JfbXNnJywgIiDQotC+0LLQsNGAINGBINCw0YDRgtC40LrRg9C70L7QvCAiICsgIiciICsgaXRlbV9hcnRfaW5wdXQgKyAiJyIgKyAiINC90LUg0L3QsNC50LTQtdC9IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaW5wdXRfaXRlbV9pZCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnb2JqZWN0X25hbWUnLCAnJykKCiAgICBkZWYgX3Byb2Nlc3NfaW5wdXRfY2VsbChzZWxmKToKICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnY2VsbF9pbnB1dCcpOgogICAgICAgICAgICBjZWxsX3ZhbHVlc19yZXN1bHQgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19ieV9maWVsZCh0YWJsZV9uYW1lPSdSU19jZWxscycsIGZpZWxkPSduYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdmFsdWU9c2VsZi5oYXNoX21hcC5nZXQoJ2NlbGxfaW5wdXQnKSkKICAgICAgICAgICAgaWYgY2VsbF92YWx1ZXNfcmVzdWx0OgogICAgICAgICAgICAgICAgc2VsZi50YWJsZV90eXBlID0gJ2NlbGxzJwogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX2NlbGxfaWQnLCBjZWxsX3ZhbHVlc19yZXN1bHRbMF1bJ2lkJ10pCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY2VsbF9uYW1lJywgc2VsZi5oYXNoX21hcC5nZXQoJ2NlbGxfaW5wdXQnKSkKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBzZWxmLmhhc2hfbWFwLmdldCgnZXJyb3JfbXNnJyk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2Vycm9yX21zZycsIHNlbGYuaGFzaF9tYXAuZ2V0KCdlcnJvcl9tc2cnKSArICJcbiIgKyAiINCv0YfQtdC50LrQsCBjINC40LzQtdC90LXQvCAiICsgIiciICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLmdldCgnY2VsbF9pbnB1dCcpICsgIiciICsgIiDQvdC1INC90LDQudC00LXQvdCwIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2Vycm9yX21zZycsICIg0K/Rh9C10LnQutCwIGMg0LjQvNC10L3QtdC8ICIgKyAiJyIgKyBzZWxmLmhhc2hfbWFwLmdldCgnY2VsbF9pbnB1dCcpICsgIiciICsgIiDQvdC1INC90LDQudC00LXQvdCwIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfY2VsbF9pZCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY2VsbF9uYW1lJywgJycpCgogICAgZGVmIF9pZGVudGlmeV9iYXJjb2RlX2JhbGFuY2VzKHNlbGYpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdiYXJjb2RlX2luZm8nLCBzdHIoc2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKSkpCiAgICAgICAgbm9fZGF0YSA9IEZhbHNlCgogICAgICAgIGJhcmNvZGVfZGF0YSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9IlJTX2JhcmNvZGVzIiwgZmllbGQ9J2JhcmNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGYuaGFzaF9tYXAuZ2V0KCdiYXJjb2RlJykpCiAgICAgICAgaWYgYmFyY29kZV9kYXRhOgogICAgICAgICAgICBpZiBiYXJjb2RlX2RhdGFbMF0uZ2V0KCdpZF9wcm9wZXJ0eScpOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3Byb3BlcnR5X2lkJywgYmFyY29kZV9kYXRhWzBdLmdldCgnaWRfcHJvcGVydHknKSkKCiAgICAgICAgICAgIGlmIGJhcmNvZGVfZGF0YVswXS5nZXQoJ2lkX2dvb2QnKToKICAgICAgICAgICAgICAgIGl0ZW1faWQgPSBiYXJjb2RlX2RhdGFbMF1bJ2lkX2dvb2QnXQoKICAgICAgICAgICAgICAgIGl0ZW1fZGF0YSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9IlJTX2dvb2RzIiwgZmllbGQ9J2lkJywgZmllbGRfdmFsdWU9aXRlbV9pZCkKICAgICAgICAgICAgICAgIGlmIGl0ZW1fZGF0YVswXToKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaW5wdXRfaXRlbV9pZCcsIGl0ZW1faWQpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2l0ZW1fYXJ0X2lucHV0JywgaXRlbV9kYXRhWzBdWydhcnQnXSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfb2JqZWN0X25hbWUnLCBmJ3tpdGVtX2RhdGFbMF1bIm5hbWUiXX0sICB7aXRlbV9kYXRhWzBdWyJjb2RlIl19JykKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZXJyb3JfbXNnJywgIiIpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNlbGxfZGF0YSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9IlJTX2NlbGxzIiwgZmllbGQ9J2JhcmNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF92YWx1ZT1zZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZScpKQogICAgICAgICAgICBpZiBjZWxsX2RhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfY2VsbF9pZCcsIGNlbGxfZGF0YVswXVsnaWQnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF9jZWxsX25hbWUnLCBjZWxsX2RhdGFbMF1bJ25hbWUnXSkKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdlcnJvcl9tc2cnLCAiIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5vX2RhdGEgPSBUcnVlCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnb2JqZWN0X25hbWUnLCAiIikKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdlcnJvcl9tc2cnLCAi0KjRgtGA0LjRhdC60L7QtCDQvdC1INGA0LDRgdC/0L7Qt9C90LDQvSIpCiAgICAgICAgaWYgbm90IG5vX2RhdGE6CiAgICAgICAgICAgIHNlbGYuX2dldF9iYWxhbmNlcygpCgogICAgZGVmIF9yZXNldF9iYWxhbmNlc190YWJsZXMoc2VsZik6CiAgICAgICAgdmFyc19saXN0ID0gWyd3aF9zZWxlY3QnLCAnaW5wdXRfaXRlbV9pZCcsICdjZWxsX2lucHV0JywgJ2NlbGxfbmFtZScsICdvYmplY3RfbmFtZScsICdlcnJvcl9tc2cnLAogICAgICAgICAgICAgICAgICAgICAnYmFsYW5jZXNfdGFibGUnLCAnYmFyY29kZScsICdzZWxlY3RlZF9jZWxsX2lkJywgJ3Byb3BlcnR5X2lkJywgJ3NlbGVjdGVkX29iamVjdF9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdGVkX3doX2lkJywgJ2JhcmNvZGVfaW5mbycsICdzZWxlY3RlZF93aF9uYW1lJywgJ3NlbGVjdGVkX2NlbGxfbmFtZSddCiAgICAgICAgZGljdF9kYXRhID0ge3ZhcjogIiIgZm9yIHZhciBpbiB2YXJzX2xpc3R9CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXRfZGF0YShkaWN0X2RhdGEpCgogICAgZGVmIF9zZXRfdmlzaWJpbGl0eV9vbl9zdGFydChzZWxmLCBlbGVtZW50cyk6CiAgICAgICAgZm9yIHYgaW4gZWxlbWVudHM6CiAgICAgICAgICAgIG5hbWUgPSBmJ1Nob3dfe3Z9JwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwW25hbWVdID0gJzEnIGlmIHNlbGYuaGFzaF9tYXBbdl0gZWxzZSAnLTEnCgogICAgZGVmIF9nZXRfYmFsYW5jZXNfZGF0YShzZWxmKToKCiAgICAgICAgZGF0YSA9IHNlbGYuaHNfc2VydmljZS5nZXRfYmFsYW5jZXNfZ29vZHMoaWRfZ29vZD1zZWxmLmhhc2hfbWFwLmdldCgnaW5wdXRfaXRlbV9pZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX2NlbGw9c2VsZi5oYXNoX21hcC5nZXQoJ3NlbGVjdGVkX2NlbGxfaWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF93YXJlaG91c2U9c2VsZi5oYXNoX21hcC5nZXQoJ3NlbGVjdGVkX3doX2lkJykpLmRhdGEKICAgICAgICByZXR1cm4gZGF0YQoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgICAgICBzZWxmLlRleHRTaXplID0gJzE1JwogICAgICAgICAgICBzZWxmLlRleHRCb2xkID0gVHJ1ZQogICAgICAgICAgICBzZWxmLndpZHRoID0gJ21hdGNoX3BhcmVudCcKICAgICAgICAgICAgc2VsZi5WYWx1ZSA9IHZhbHVlCgogICAgY2xhc3MgTGluZWFyTGF5b3V0KHdpZGdldHMuTGluZWFyTGF5b3V0KToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIHNlbGYub3JpZW50YXRpb24gPSAnaG9yaXpvbnRhbCcKICAgICAgICAgICAgc2VsZi5oZWlnaHQgPSAibWF0Y2hfcGFyZW50IgogICAgICAgICAgICBzZWxmLndpZHRoID0gIm1hdGNoX3BhcmVudCIKICAgICAgICAgICAgc2VsZi5TdHJva2VXaWR0aCA9IDEKCiAgICBkZWYgX2dldF9iYWxhbmNlc190YWJsZV92aWV3KHNlbGYsIGRhdGEpOgogICAgICAgIHRhYmxlX3ZpZXcgPSB3aWRnZXRzLkN1c3RvbVRhYmxlKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Ch0LrQu9Cw0LQnKSBpZiBzZWxmLnRhYmxlX3R5cGUgPT0gJ3dhcmVob3VzZXMnIGVsc2Ugc2VsZi5UZXh0Vmlldygn0K/Rh9C10LnQutCwJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQotC+0LLQsNGAJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQmtC+0LvQuNGH0LXRgdGC0LLQvicpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2VsZi5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5UZXh0Vmlldygn0KXQsNGA0LDQutGC0LXRgNC40YHRgtC40LrQuCcpLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0xCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgd2lkdGg9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGMEY4RkYnCiAgICAgICAgICAgICksCgogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIHRhYmxlZGF0YT1kYXRhCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gdGFibGVfdmlldwoKICAgIGRlZiBfcHJlcGFyZV90YWJsZV9kYXRhKHNlbGYsIHJhd19iYWxhbmNlc19kYXRhKToKCiAgICAgICAgdGFibGVfZGF0YSA9IFt7fV0KICAgICAgICBmb3IgZWwgaW4gcmF3X2JhbGFuY2VzX2RhdGE6CiAgICAgICAgICAgIHRhYmxlX3JvdyA9IHsna2V5Jzogc3RyKGVsWydpZF9nb29kJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgJ2l0ZW1fbmFtZSc6IHN0cihlbFsnbmFtZV9nb29kJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3N0b3JhZ2VfbmFtZSc6IHN0cihlbFsnbmFtZV93YXJlaG91c2UnXSkgaWYgc2VsZi50YWJsZV90eXBlID09ICd3YXJlaG91c2VzJyBlbHNlIHN0cihlbFsnbmFtZV9jZWxsJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3F0dHknOiBzdHIoZWxbJ3F0dHknXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydGllcyc6IHN0cihlbFsnbmFtZV9wcm9wZXJ0eSddIG9yICfigJQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICdfbGF5b3V0Jzogc2VsZi5fZ2V0X2l0ZW1fdGFibGVfcm93X3ZpZXcoKX0KICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ3Byb3BlcnR5X2lkJyk6CiAgICAgICAgICAgICAgICAiIiLQpNC40LvRjNGC0YDRg9C10Lwg0L/QviDQstC30Y/RgtC+0Lkg0YXQsNGA0LDQutGC0LXRgNC40YHRgtC40LrQtSIiIgogICAgICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ3Byb3BlcnR5X2lkJykgPT0gc3RyKGVsWydpZF9wcm9wZXJ0eSddKToKICAgICAgICAgICAgICAgICAgICB0YWJsZV9kYXRhLmFwcGVuZCh0YWJsZV9yb3cpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0YWJsZV9kYXRhLmFwcGVuZCh0YWJsZV9yb3cpCgogICAgICAgIHJldHVybiB0YWJsZV9kYXRhCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfaXRlbV90YWJsZV9yb3dfdmlldygpOgogICAgICAgIHJvd192aWV3ID0gd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHN0b3JhZ2VfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BpdGVtX25hbWUnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHF0dHknLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAcHJvcGVydGllcycsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MQogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGMEY4RkYnCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gcm93X3ZpZXcKCgpjbGFzcyBTZWxlY3RXSChTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0JLRi9Cx0L7RgCDRgdC60LvQsNC00LAnCiAgICBwcm9jZXNzX25hbWUgPSAn0J7RgdGC0LDRgtC60LgnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gR29vZHNTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgY2FyZHNfZGF0YSA9IHNlbGYuX2dldF9kYXRhKHRhYmxlX25hbWU9J1JTX3dhcmVob3VzZXMnKQogICAgICAgIGNhcmRzID0gc2VsZi5fZ2V0X2NhcmRzKGNhcmRzX2RhdGEpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3doX2NhcmRzJywgY2FyZHMudG9fanNvbigpKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF93aF9pZCddID0gc2VsZi5oYXNoX21hcC5nZXQoInNlbGVjdGVkX2NhcmRfa2V5IikKICAgICAgICAgICAgd2hfbmFtZSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9J1JTX3dhcmVob3VzZXMnLCBmaWVsZD0naWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGYuaGFzaF9tYXAuZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCJzZWxlY3RlZF9jYXJkX2tleSIpKVswXVsnbmFtZSddCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3doX3NlbGVjdCddID0gd2hfbmFtZQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF93aF9uYW1lJ10gPSB3aF9uYW1lCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cf0YDQvtCy0LXRgNC40YLRjCDQvtGB0YLQsNGC0LrQuCcpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gIk9OX0JBQ0tfUFJFU1NFRCIgb3IgJ2dvX2JhY2snOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF93aF9pZCddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfd2hfbmFtZSddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnd2hfc2VsZWN0J10gPSAnJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQn9GA0L7QstC10YDQuNGC0Ywg0L7RgdGC0LDRgtC60LgnKQoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCiAgICBkZWYgX2dldF9kYXRhKHNlbGYsIHRhYmxlX25hbWUpOgogICAgICAgIHJhd19kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF9zZWxlY3RfZGF0YSh0YWJsZV9uYW1lKQogICAgICAgIGNhcmRzX2RhdGEgPSBbXQogICAgICAgIGZvciBlbGVtZW50IGluIHJhd19kYXRhOgogICAgICAgICAgICBjYXJkX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAna2V5JzogZWxlbWVudFsnaWQnXSwKICAgICAgICAgICAgICAgICduYW1lJzogZWxlbWVudFsnbmFtZSddCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FyZHNfZGF0YS5hcHBlbmQoY2FyZF9kYXRhKQogICAgICAgIHJldHVybiBjYXJkc19kYXRhCgogICAgZGVmIF9nZXRfY2FyZHMoc2VsZiwgY2FyZHNfZGF0YSk6CiAgICAgICAgY2FyZF90aXRsZV90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRpdGxlVGV4dFNpemUnKQogICAgICAgIGNhcmRfdGV4dF9zaXplID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ0NhcmRUZXh0U2l6ZScpCgogICAgICAgIGNhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQG5hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RpdGxlX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgVGV4dENvbG9yPScjMDAwMDAwJwogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT1jYXJkc19kYXRhCiAgICAgICAgKQogICAgICAgIHJldHVybiBjYXJkcwoKCiMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eIEdvb2RzQmFsYW5jZXMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gR29vZHNQcmljZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY2xhc3MgR29vZHNQcmljZXNJdGVtQ2FyZChHb29kc0JhbGFuY2VzSXRlbUNhcmQpOgogICAgc2NyZWVuX25hbWUgPSAn0J/RgNC+0LLQtdGA0LrQsCDRhtC10L0nCiAgICBwcm9jZXNzX25hbWUgPSAn0KbQtdC90YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHNlbGYuX3NldF92aXNpYmlsaXR5X29uX3N0YXJ0KFsncHJpY2VzX2Vycm9yX21zZycsICdwcmljZXNfb2JqZWN0X25hbWUnLCAnc2VsZWN0ZWRfcHJpY2VfdHlwZV9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdGVkX3Byb3BlcnR5X25hbWUnLCAnc2VsZWN0ZWRfdW5pdF9uYW1lJywgJ2JhcmNvZGVfaW5mbyddKQogICAgICAgIGlmIG5vdCBzZWxmLmhhc2hfbWFwLmdldCgncHJpY2VzX3RhYmxlJyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X2dldF9wcmljZXNfY29udHJvbHMiLCAiMSIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X3Nob3dfZmlsdGVycyIsICItMSIpCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgoKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gJ3ByaWNlX3R5cGVfc2VsZWN0JzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0JLRi9Cx0L7RgCDRgtC40L/QsCDRhtC10L3RiycpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAncHJvcGVydHlfc2VsZWN0JzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0JLRi9Cx0L7RgCDRhdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQuicpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAndW5pdF9zZWxlY3QnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQktGL0LHQvtGAINGD0L/QsNC60L7QstC60LgnKQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2dldF9wcmljZXNfYnRuJzoKICAgICAgICAgICAgc2VsZi5fZ2V0X3ByaWNlcygpCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAnYmFyY29kZSc6CiAgICAgICAgICAgIHNlbGYuX2lkZW50aWZ5X2JhcmNvZGVfcHJpY2VzKCkKICAgICAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLl9yZXNldF9wcmljZXNfdGFibGVzKCkKICAgICAgICAgICAgaWYgc2VsZi5oYXNoX21hcC5nZXQoJ3JldHVybl90b19pdGVtX2NhcmQnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdub1JlZnJlc2gnLCAnJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJGaW5pc2hQcm9jZXNzUmVzdWx0IiwgIiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiRmluaXNoUHJvY2VzcyIsICIiKQogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gJ3Nob3dfZmlsdGVycyc6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X2dldF9wcmljZXNfY29udHJvbHMiLCAiMSIpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCJTaG93X3Nob3dfZmlsdGVycyIsICItMSIpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfZ2V0X3ByaWNlcyhzZWxmKToKICAgICAgICBzZWxmLl92YWxpZGF0ZV9pbnB1dCgpCiAgICAgICAgcmF3X3ByaWNlc19kYXRhID0gc2VsZi5fZ2V0X3ByaWNlc19kYXRhKCkKICAgICAgICBwcmljZXNfZGF0YSA9IHNlbGYuX3ByZXBhcmVfdGFibGVfZGF0YShyYXdfcHJpY2VzX2RhdGEpCiAgICAgICAgcHJpY2VzX3RhYmxlID0gc2VsZi5fZ2V0X3ByaWNlc190YWJsZV92aWV3KHByaWNlc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcmljZXNfdGFibGUnLCBwcmljZXNfdGFibGUudG9fanNvbigpKQogICAgICAgICMgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbigi0KLQsNCx0LvQuNGG0LAg0YbQtdC9IikKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19nZXRfcHJpY2VzX2NvbnRyb2xzIiwgIi0xIikKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd19zaG93X2ZpbHRlcnMiLCAiMSIpCgogICAgZGVmIF92YWxpZGF0ZV9pbnB1dChzZWxmKToKICAgICAgICBzZWxmLl9wcm9jZXNzX2lucHV0X2dvb2RfYXJ0KCkKICAgICAgICBpZiBub3QgKHNlbGYuaGFzaF9tYXAuZ2V0KCdpbnB1dF9nb29kX2FydCcpKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3ByaWNlc190YWJsZXMnLCAnJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3ByaWNlc19vYmplY3RfbmFtZScsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncHJpY2VzX2Vycm9yX21zZycsICLQlNC+0LvQttC10L0g0LHRi9GC0Ywg0LLRi9Cx0YDQsNC9INGC0L7QstCw0YAiKQoKICAgIGRlZiBfcHJvY2Vzc19pbnB1dF9nb29kX2FydChzZWxmKToKICAgICAgICBpdGVtX2FydF9pbnB1dCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdpbnB1dF9nb29kX2FydCcpCiAgICAgICAgaWYgaXRlbV9hcnRfaW5wdXQ6CiAgICAgICAgICAgIGl0ZW1fdmFsdWVzX3Jlc3VsdCA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9J1JTX2dvb2RzJywgZmllbGQ9J2FydCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPWl0ZW1fYXJ0X2lucHV0KQogICAgICAgICAgICBpZiBpdGVtX3ZhbHVlc19yZXN1bHQ6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncHJpY2VzX29iamVjdF9uYW1lJywgaXRlbV92YWx1ZXNfcmVzdWx0WzBdWyduYW1lJ10pCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaW5wdXRfZ29vZF9pZCcsIGl0ZW1fdmFsdWVzX3Jlc3VsdFswXVsnaWQnXSkKICAgICAgICAgICAgICAgIGlmIGl0ZW1fdmFsdWVzX3Jlc3VsdFswXVsnaWQnXSAhPSBzZWxmLmhhc2hfbWFwLmdldCgnc2VsZWN0ZWRfZ29vZF9pZCcpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcmljZXNfb2JqZWN0X25hbWUnLCAnJykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcmljZXNfb2JqZWN0X25hbWUnLCBmJ3tpdGVtX3ZhbHVlc19yZXN1bHRbMF1bIm5hbWUiXX0sICcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmJ3tpdGVtX3ZhbHVlc19yZXN1bHRbMF1bImNvZGUiXX0nKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2dvb2RfY29kZScsIGl0ZW1fdmFsdWVzX3Jlc3VsdFswXVsnY29kZSddKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2Vycm9yX21zZycsICIiKQogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2l0ZW1fYXJ0X2lucHV0Jywgc2VsZi5oYXNoX21hcC5nZXQoJ2l0ZW1fYXJ0X2lucHV0JykpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZXJyb3JfbXNnJywgIiDQotC+0LLQsNGAINGBINCw0YDRgtC40LrRg9C70L7QvCAiICsgIiciICsgaXRlbV9hcnRfaW5wdXQgKyAiJyIgKyAiINC90LUg0L3QsNC50LTQtdC9IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaW5wdXRfZ29vZF9pZCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgncHJpY2VzX29iamVjdF9uYW1lJywgJycpCgogICAgZGVmIF9pZGVudGlmeV9iYXJjb2RlX3ByaWNlcyhzZWxmKToKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnYmFyY29kZV9pbmZvJywgc3RyKHNlbGYuaGFzaF9tYXAuZ2V0KCdiYXJjb2RlJykpKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcmljZXNfb2JqZWN0X25hbWUnLCAnJykKICAgICAgICBub19kYXRhID0gRmFsc2UKCiAgICAgICAgYmFyY29kZV9kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF92YWx1ZXNfYnlfZmllbGQodGFibGVfbmFtZT0iUlNfYmFyY29kZXMiLCBmaWVsZD0nYmFyY29kZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdmFsdWU9c2VsZi5oYXNoX21hcC5nZXQoJ2JhcmNvZGUnKSkKICAgICAgICBpZiBiYXJjb2RlX2RhdGFbMF06CiAgICAgICAgICAgIGlmIGJhcmNvZGVfZGF0YVswXS5nZXQoJ2lkX3Byb3BlcnR5Jyk6CiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfcHJvcGVydHlfaWQnLCBiYXJjb2RlX2RhdGFbMF0uZ2V0KCdpZF9wcm9wZXJ0eScpKQogICAgICAgICAgICAgICAgc2VsZWN0ZWRfcHJvcGVydHlfbmFtZSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9J1JTX3Byb3BlcnRpZXMnLCBmaWVsZCA9ICdpZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdmFsdWU9YmFyY29kZV9kYXRhWzBdLmdldCgnaWRfcHJvcGVydHknKSkKICAgICAgICAgICAgICAgIGlmIHNlbGVjdGVkX3Byb3BlcnR5X25hbWVbMF0uZ2V0KCduYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX3Byb3BlcnR5X25hbWUnLCBzZWxlY3RlZF9wcm9wZXJ0eV9uYW1lWzBdLmdldCgnbmFtZScpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX3Byb3BlcnR5X2lkJywgJycpCiAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfcHJvcGVydHlfbmFtZScsICcnKQoKICAgICAgICAgICAgaWYgYmFyY29kZV9kYXRhWzBdLmdldCgnaWRfZ29vZCcpOgogICAgICAgICAgICAgICAgaXRlbV9pZCA9IGJhcmNvZGVfZGF0YVswXVsnaWRfZ29vZCddCgogICAgICAgICAgICAgICAgaXRlbV9kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF92YWx1ZXNfYnlfZmllbGQodGFibGVfbmFtZT0iUlNfZ29vZHMiLCBmaWVsZD0naWQnLCBmaWVsZF92YWx1ZT1pdGVtX2lkKQogICAgICAgICAgICAgICAgaWYgaXRlbV9kYXRhWzBdOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdpbnB1dF9nb29kX2lkJywgaXRlbV9pZCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnaW5wdXRfZ29vZF9hcnQnLCBpdGVtX2RhdGFbMF1bJ2FydCddKQogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcmljZXNfb2JqZWN0X25hbWUnLCBpdGVtX2RhdGFbMF1bJ25hbWUnXSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZXJyb3JfbXNnJywgIiIpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5vX2RhdGEgPSBUcnVlCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdvYmplY3RfbmFtZScsICIiKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnZXJyb3JfbXNnJywgItCo0YLRgNC40YXQutC+0LQg0L3QtSDRgNCw0YHQv9C+0LfQvdCw0L0iKQoKICAgICAgICBpZiBub3Qgbm9fZGF0YToKICAgICAgICAgICAgc2VsZi5fZ2V0X3ByaWNlcygpCgogICAgZGVmIF9yZXNldF9wcmljZXNfdGFibGVzKHNlbGYpOgogICAgICAgIHZhcnNfbGlzdCA9IFsnaW5wdXRfZ29vZF9hcnQnLCAncHJpY2VzX29iamVjdF9uYW1lJywgJ3NlbGVjdGVkX3ByaWNlX3R5cGVfaWQnLCAnc2VsZWN0ZWRfcHJpY2VfdHlwZV9uYW1lJywKICAgICAgICAgICAgICAgICAgICAgJ3ByaWNlX3R5cGVfc2VsZWN0JywgJ3NlbGVjdGVkX3Byb3BlcnR5X2lkJywgJ3NlbGVjdGVkX3Byb3BlcnR5X25hbWUnLCAncHJvcGVydHlfc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdGVkX3VuaXRfaWQnLCAnc2VsZWN0ZWRfdW5pdF9uYW1lJywgJ3VuaXRfc2VsZWN0JywgJ3ByaWNlc19jdXN0b21fdGFibGUnLCAnaW5wdXRfZ29vZF9pZCcsCiAgICAgICAgICAgICAgICAgICAgICdiYXJjb2RlJywgJ2JhcmNvZGVfaW5mbycsICdwcmljZXNfdGFibGUnXQogICAgICAgIGRpY3RfZGF0YSA9IHt2YXI6ICIiIGZvciB2YXIgaW4gdmFyc19saXN0fQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0X2RhdGEoZGljdF9kYXRhKQoKICAgIGRlZiBfc2V0X3Zpc2liaWxpdHlfb25fc3RhcnQoc2VsZiwgZWxlbWVudHMpOgogICAgICAgIGZvciB2IGluIGVsZW1lbnRzOgogICAgICAgICAgICBuYW1lID0gZidTaG93X3t2fScKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFtuYW1lXSA9ICcxJyBpZiBzZWxmLmhhc2hfbWFwW3ZdIGVsc2UgJy0xJwoKICAgIGRlZiBfZ2V0X3ByaWNlc19kYXRhKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLmhhc2hfbWFwLmdldCgncHJvcGVydHlfc2VsZWN0Jyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF9wcm9wZXJ0eV9pZCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnc2VsZWN0ZWRfcHJvcGVydHlfbmFtZScsICcnKQoKICAgICAgICBkYXRhID0gc2VsZi5oc19zZXJ2aWNlLmdldF9wcmljZXNfZ29vZHMoaWRfZ29vZD1zZWxmLmhhc2hfbWFwLmdldCgnaW5wdXRfZ29vZF9pZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF9wcm9wZXJ0eT1zZWxmLmhhc2hfbWFwLmdldCgnc2VsZWN0ZWRfcHJvcGVydHlfaWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfdW5pdD1zZWxmLmhhc2hfbWFwLmdldCgnc2VsZWN0ZWRfdW5pdF9pZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF9wcmljZV90eXBlPXNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9wcmljZV90eXBlX2lkJykpLmRhdGEKICAgICAgICByZXR1cm4gZGF0YQoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgICAgICBzZWxmLlRleHRTaXplID0gJzE1JwogICAgICAgICAgICBzZWxmLlRleHRCb2xkID0gVHJ1ZQogICAgICAgICAgICBzZWxmLndpZHRoID0gJ21hdGNoX3BhcmVudCcKICAgICAgICAgICAgc2VsZi5WYWx1ZSA9IHZhbHVlCgogICAgY2xhc3MgTGluZWFyTGF5b3V0KHdpZGdldHMuTGluZWFyTGF5b3V0KToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgICAgIHNlbGYub3JpZW50YXRpb24gPSAnaG9yaXpvbnRhbCcKICAgICAgICAgICAgc2VsZi5oZWlnaHQgPSAibWF0Y2hfcGFyZW50IgogICAgICAgICAgICBzZWxmLndpZHRoID0gIm1hdGNoX3BhcmVudCIKICAgICAgICAgICAgc2VsZi5TdHJva2VXaWR0aCA9IDEKCiAgICBkZWYgX2dldF9wcmljZXNfdGFibGVfdmlldyhzZWxmLCBkYXRhKToKICAgICAgICB0YWJsZV92aWV3ID0gd2lkZ2V0cy5DdXN0b21UYWJsZSgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQotC40L8g0YbQtdC90YsnKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cl0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60LgnKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHNlbGYuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHNlbGYuVGV4dFZpZXcoJ9Cm0LXQvdCwJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQo9C/0LDQutC+0LLQutCwJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9Im1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcj0nI0YwRjhGRicKICAgICAgICAgICAgKSwKCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgdGFibGVkYXRhPWRhdGEKICAgICAgICApCgogICAgICAgIHJldHVybiB0YWJsZV92aWV3CgogICAgZGVmIF9wcmVwYXJlX3RhYmxlX2RhdGEoc2VsZiwgcmF3X2JhbGFuY2VzX2RhdGEpOgoKICAgICAgICB0YWJsZV9kYXRhID0gW3t9XQogICAgICAgIGZvciBlbCBpbiByYXdfYmFsYW5jZXNfZGF0YToKICAgICAgICAgICAgdGFibGVfcm93ID0geydrZXknOiBzdHIoZWxbJ2lkX2dvb2QnXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAncHJpY2VfdHlwZSc6IHN0cihlbFsnbmFtZV9wcmljZV90eXBlJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgJ3ByaWNlJzogc3RyKGVsWydwcmljZSddKSwKICAgICAgICAgICAgICAgICAgICAgICAgICd1bml0Jzogc3RyKGVsWyduYW1lX3VuaXQnXSkgb3IgJ+KAlCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydGllcyc6IHN0cihlbFsnbmFtZV9wcm9wZXJ0eSddIG9yICfigJQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICdfbGF5b3V0Jzogc2VsZi5fZ2V0X2l0ZW1fdGFibGVfcm93X3ZpZXcoKX0KICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQodGFibGVfcm93KQoKICAgICAgICByZXR1cm4gdGFibGVfZGF0YQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZ2V0X2l0ZW1fdGFibGVfcm93X3ZpZXcoKToKICAgICAgICByb3dfdmlldyA9IHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BwcmljZV90eXBlJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHByb3BlcnRpZXMnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHByaWNlJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgaGVpZ2h0PSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgd2VpZ2h0PTEsCiAgICAgICAgICAgICAgICBTdHJva2VXaWR0aD0xCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQHVuaXQnLAogICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTE1LAogICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICBoZWlnaHQ9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICB3ZWlnaHQ9MSwKICAgICAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgb3JpZW50YXRpb249J2hvcml6b250YWwnLAogICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRjBGOEZGJwogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHJvd192aWV3CgoKY2xhc3MgU2VsZWN0UHJpY2VUeXBlKFNlbGVjdFdIKToKICAgIHNjcmVlbl9uYW1lID0gJ9CS0YvQsdC+0YAg0YLQuNC/0LAg0YbQtdC90YsnCiAgICBwcm9jZXNzX25hbWUgPSAn0KbQtdC90YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gR29vZHNTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgY2FyZHNfZGF0YSA9IHNlbGYuX2dldF9kYXRhKHRhYmxlX25hbWU9J1JTX3ByaWNlX3R5cGVzJykKICAgICAgICBwcmljZV90eXBlX2NhcmRzID0gc2VsZi5fZ2V0X2NhcmRzKGNhcmRzX2RhdGEpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3ByaWNlX3R5cGVfY2FyZHMnLCBwcmljZV90eXBlX2NhcmRzLnRvX2pzb24oKSkKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgbGlzdGVuZXIgPSBzZWxmLmxpc3RlbmVyCgogICAgICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICAgICAgc2VsZWN0ZWRfcHJpY2VfdHlwZV9pZCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpCiAgICAgICAgICAgIHNlbGVjdGVkX3R5cGVfbmFtZSA9IHNlbGYuc2VydmljZS5nZXRfdmFsdWVzX2J5X2ZpZWxkKHRhYmxlX25hbWU9J1JTX3ByaWNlX3R5cGVzJywgZmllbGQ9J2lkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdmFsdWU9c2VsZi5oYXNoX21hcC5nZXQoInNlbGVjdGVkX2NhcmRfa2V5IikpWzBdWyduYW1lJ10KICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX3ByaWNlX3R5cGVfaWQnLCBzZWxlY3RlZF9wcmljZV90eXBlX2lkKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydwcmljZV90eXBlX3NlbGVjdCddID0gc2VsZWN0ZWRfdHlwZV9uYW1lCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3NlbGVjdGVkX3ByaWNlX3R5cGVfbmFtZSddID0gc2VsZWN0ZWRfdHlwZV9uYW1lCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cf0YDQvtCy0LXRgNC60LAg0YbQtdC9JykKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIiBvciAnYmFja190b19wcmljZXMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF9wcmljZV90eXBlX2lkJ10gPSAnJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydwcmljZV90eXBlX3NlbGVjdCddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfcHJpY2VfdHlwZV9uYW1lJ10gPSAnJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQn9GA0L7QstC10YDQutCwINGG0LXQvScpCgoKY2xhc3MgU2VsZWN0UHJvcGVydGllcyhHb29kc1ByaWNlc0l0ZW1DYXJkKToKICAgIHNjcmVlbl9uYW1lID0gJ9CS0YvQsdC+0YAg0YXQsNGA0LDQutGC0LXRgNC40YHRgtC40LonCiAgICBwcm9jZXNzX25hbWUgPSAn0KbQtdC90YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gR29vZHNTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5fdmFsaWRhdGVfaW5wdXQoKQogICAgICAgIGNhcmRzX2RhdGEgPSBzZWxmLl9nZXRfZGF0YSgpCiAgICAgICAgcHJvcGVydGllc19jYXJkcyA9IHNlbGYuX2dldF9jYXJkcyhjYXJkc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwcm9wZXJ0eV9jYXJkcycsIHByb3BlcnRpZXNfY2FyZHMudG9fanNvbigpKQoKICAgIGRlZiBfZ2V0X2RhdGEoc2VsZik6CiAgICAgICAgdGFibGVfbmFtZSA9ICJSU19wcm9wZXJ0aWVzIgogICAgICAgIHJhd19kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF92YWx1ZXNfYnlfZmllbGQodGFibGVfbmFtZSwgZmllbGQ9J2lkX293bmVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGYuaGFzaF9tYXAuZ2V0KCdpbnB1dF9nb29kX2lkJykpCiAgICAgICAgY2FyZHNfZGF0YSA9IFtdCiAgICAgICAgZm9yIGVsZW1lbnQgaW4gcmF3X2RhdGE6CiAgICAgICAgICAgIGNhcmRfZGF0YSA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBlbGVtZW50WydpZCddLAogICAgICAgICAgICAgICAgJ25hbWUnOiBlbGVtZW50WyduYW1lJ10KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXJkc19kYXRhLmFwcGVuZChjYXJkX2RhdGEpCiAgICAgICAgcmV0dXJuIGNhcmRzX2RhdGEKCiAgICBkZWYgX2dldF9jYXJkcyhzZWxmLCBjYXJkc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRleHRTaXplJykKCiAgICAgICAgY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAsCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPWNhcmRzX2RhdGEKICAgICAgICApCiAgICAgICAgcmV0dXJuIGNhcmRzCgoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lciA9IHNlbGYubGlzdGVuZXIKCiAgICAgICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICAgICBzZWxlY3RlZF9wcm9wZXJ0eV9pZCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpCiAgICAgICAgICAgIHNlbGVjdGVkX3Byb3BlcnR5X25hbWUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19ieV9maWVsZCh0YWJsZV9uYW1lPSdSU19wcm9wZXJ0aWVzJywgZmllbGQ9J2lkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGVjdGVkX3Byb3BlcnR5X2lkKVswXVsnbmFtZSddCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF9wcm9wZXJ0eV9pZCcsIHNlbGVjdGVkX3Byb3BlcnR5X2lkKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydwcm9wZXJ0eV9zZWxlY3QnXSA9IHNlbGVjdGVkX3Byb3BlcnR5X25hbWUKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfcHJvcGVydHlfbmFtZSddID0gc2VsZWN0ZWRfcHJvcGVydHlfbmFtZQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQn9GA0L7QstC10YDQutCwINGG0LXQvScpCgogICAgICAgIGVsaWYgbGlzdGVuZXIgPT0gIk9OX0JBQ0tfUFJFU1NFRCIgb3IgJ2JhY2tfdG9fcHJpY2VzJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfcHJvcGVydHlfaWQnXSA9ICcnCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXBbJ3Byb3BlcnR5X3NlbGVjdCddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfcHJvcGVydHlfbmFtZSddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J/RgNC+0LLQtdGA0LrQsCDRhtC10L0nKQoKCmNsYXNzIFNlbGVjdFVuaXQoR29vZHNQcmljZXNJdGVtQ2FyZCk6CiAgICBzY3JlZW5fbmFtZSA9ICfQktGL0LHQvtGAINGD0L/QsNC60L7QstC60LgnCiAgICBwcm9jZXNzX25hbWUgPSAn0KbQtdC90YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICAgICAgc2VsZi5zZXJ2aWNlID0gR29vZHNTZXJ2aWNlKCkKCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc3VwZXIoKS5vbl9zdGFydCgpCiAgICAgICAgc2VsZi5fdmFsaWRhdGVfaW5wdXQoKQogICAgICAgIGNhcmRzX2RhdGEgPSBzZWxmLl9nZXRfZGF0YSgpCiAgICAgICAgcHJvcGVydGllc19jYXJkcyA9IHNlbGYuX2dldF9jYXJkcyhjYXJkc19kYXRhKQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd1bml0X2NhcmRzJywgcHJvcGVydGllc19jYXJkcy50b19qc29uKCkpCgogICAgZGVmIF9nZXRfZGF0YShzZWxmKToKICAgICAgICB0YWJsZV9uYW1lID0gIlJTX3VuaXRzIgogICAgICAgIHJhd19kYXRhID0gc2VsZi5zZXJ2aWNlLmdldF92YWx1ZXNfYnlfZmllbGQodGFibGVfbmFtZSwgZmllbGQ9J2lkX293bmVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGYuaGFzaF9tYXAuZ2V0KCdpbnB1dF9nb29kX2lkJykpCiAgICAgICAgY2FyZHNfZGF0YSA9IFtdCiAgICAgICAgZm9yIGVsZW1lbnQgaW4gcmF3X2RhdGE6CiAgICAgICAgICAgIGNhcmRfZGF0YSA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBlbGVtZW50WydpZCddLAogICAgICAgICAgICAgICAgJ25hbWUnOiBlbGVtZW50WyduYW1lJ10KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXJkc19kYXRhLmFwcGVuZChjYXJkX2RhdGEpCiAgICAgICAgcmV0dXJuIGNhcmRzX2RhdGEKCiAgICBkZWYgX2dldF9jYXJkcyhzZWxmLCBjYXJkc19kYXRhKToKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdDYXJkVGl0bGVUZXh0U2l6ZScpCiAgICAgICAgY2FyZF90ZXh0X3NpemUgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgnQ2FyZFRleHRTaXplJykKCiAgICAgICAgY2FyZHMgPSB3aWRnZXRzLkN1c3RvbUNhcmRzKAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuTGluZWFyTGF5b3V0KAogICAgICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPWNhcmRfdGl0bGVfdGV4dF9zaXplLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Q29sb3I9JyMwMDAwMDAnCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAsCiAgICAgICAgICAgIG9wdGlvbnM9d2lkZ2V0cy5PcHRpb25zKCkub3B0aW9ucywKICAgICAgICAgICAgY2FyZHNkYXRhPWNhcmRzX2RhdGEKICAgICAgICApCiAgICAgICAgcmV0dXJuIGNhcmRzCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGxpc3RlbmVyID0gc2VsZi5saXN0ZW5lcgoKICAgICAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgICAgIHNlbGVjdGVkX3VuaXRfaWQgPSBzZWxmLmhhc2hfbWFwLmdldCgic2VsZWN0ZWRfY2FyZF9rZXkiKQogICAgICAgICAgICBzZWxlY3RlZF91bml0X25hbWUgPSBzZWxmLnNlcnZpY2UuZ2V0X3ZhbHVlc19ieV9maWVsZCh0YWJsZV9uYW1lPSdSU191bml0cycsIGZpZWxkPSdpZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlPXNlbGVjdGVkX3VuaXRfaWQpWzBdWyduYW1lJ10KICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX3VuaXRfaWQnLCBzZWxlY3RlZF91bml0X2lkKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWyd1bml0X3NlbGVjdCddID0gc2VsZWN0ZWRfdW5pdF9uYW1lCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdzZWxlY3RlZF91bml0X25hbWUnLCBzZWxlY3RlZF91bml0X25hbWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cf0YDQvtCy0LXRgNC60LAg0YbQtdC9JykKCiAgICAgICAgZWxpZiBsaXN0ZW5lciA9PSAiT05fQkFDS19QUkVTU0VEIiBvciAnYmFja190b19wcmljZXMnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWydzZWxlY3RlZF91bml0X2lkJ10gPSAnJwogICAgICAgICAgICBzZWxmLmhhc2hfbWFwWyd1bml0X3NlbGVjdCddID0gJycKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3NlbGVjdGVkX3VuaXRfbmFtZScsICcnKQoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J/RgNC+0LLQtdGA0LrQsCDRhtC10L0nKQoKCiMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eIEdvb2RzUHJpY2VzIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl4KCgojID09PT09PT09PT09PT09PT09PT09IFNldHRpbmdzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpjbGFzcyBTZXR0aW5nc1NjcmVlbihTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IGRiX3NlcnZpY2VzLkRvY1NlcnZpY2UoKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICAjIHNlbGYuaGFzaF9tYXAucmVtb3ZlKCd0b2FzdCcpCiAgICAgICAgc2V0dGluZ3Nfa2V5cyA9IFsKICAgICAgICAgICAgJ3VzZV9tYXJrJywKICAgICAgICAgICAgJ2FsbG93X2ZhY3RfaW5wdXQnLAogICAgICAgICAgICAnYWRkX2lmX25vdF9pbl9wbGFuJywKICAgICAgICAgICAgJ3BhdGgnLAogICAgICAgICAgICAnZGVsZXRlX2ZpbGVzJywKICAgICAgICAgICAgJ2FsbG93X292ZXJzY2FuJywKICAgICAgICBdCgogICAgICAgIHB1dF9kYXRhID0ge2tleTogc2VsZi5yc19zZXR0aW5ncy5nZXQoa2V5KSBmb3Iga2V5IGluIHNldHRpbmdzX2tleXN9CiAgICAgICAgcHV0X2RhdGFbJ2lwX2FkciddID0gc2VsZi5fZ2V0X2lwX2FkZHJlc3MoKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBzZWxmLl91cGRhdGVfcnNfc2V0dGluZ3MoKQoKICAgICAgICBsaXN0ZW5lcnMgPSB7CiAgICAgICAgICAgICdidG5faHR0cF9zZXR0aW5ncyc6IGxhbWJkYTogc2VsZi5fc2hvd19zY3JlZW4oJ9Cd0LDRgdGC0YDQvtC50LrQuCBodHRwINGB0L7QtdC00LjQvdC10L3QuNGPJyksCiAgICAgICAgICAgICdidG5fc2l6ZSc6IGxhbWJkYTogc2VsZi5fc2hvd19zY3JlZW4oJ9Cd0LDRgdGC0YDQvtC50LrQuCDQqNGA0LjRhNGC0L7QsicpLAogICAgICAgICAgICAnYnRuX3NvdW5kX3NldHRpbmdzJzogbGFtYmRhOiBzZWxmLl9zaG93X3NjcmVlbign0J3QsNGB0YLRgNC+0LnQutCwINC30LLRg9C60LAnKSwKICAgICAgICAgICAgJ2J0bl90ZXN0X2JhcmNvZGUnOiBsYW1iZGE6IHNlbGYuX3Nob3dfc2NyZWVuKCfQotC10YHRgiDRgdC60LDQvdC10YDQsCcpLAogICAgICAgICAgICAnYnRuX2Vycl9sb2cnOiBsYW1iZGE6IHNlbGYuX3Nob3dfc2NyZWVuKCfQntGI0LjQsdC60LgnKSwKICAgICAgICAgICAgJ2J0bl91cGxvYWRfZG9jcyc6IHNlbGYuX3VwbG9hZF9kb2NzLAogICAgICAgICAgICAnYnRuX3RpbWVyJzogc2VsZi5fbG9hZF9kb2NzLAogICAgICAgICAgICAnYnRuX2RlbGV0ZV90ZW1wbGF0ZV9zZXR0aW5ncyc6c2VsZi5kZWxldGVfdGVtcGxhdGVfc2V0dGluZ3Moc2VsZi5yc19zZXR0aW5ncyksCiAgICAgICAgICAgICdPTl9CQUNLX1BSRVNTRUQnOiBsYW1iZGE6IHNlbGYuaGFzaF9tYXAucHV0KCdGaW5pc2hQcm9jZXNzJywgJycpLAogICAgICAgIH0KICAgICAgICBpZiBzZWxmLmxpc3RlbmVyIGluIGxpc3RlbmVyczoKICAgICAgICAgICAgbGlzdGVuZXJzW3NlbGYubGlzdGVuZXJdKCkKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF91cGxvYWRfZG9jcyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9jaGVja19odHRwX3NldHRpbmdzKCk6CiAgICAgICAgICAgIHRpbWVyID0gVGltZXIoc2VsZi5oYXNoX21hcCwgc2VsZi5yc19zZXR0aW5ncykKICAgICAgICAgICAgdGltZXIudXBsb2FkX2FsbF9kb2NzKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnRvYXN0KCfQndC1INC30LDQtNCw0L3RiyDQvdCw0YHRgtGA0L7QudC60Lgg0YHQvtC10LTQuNC90LXQvdC40Y8nKQoKICAgIGRlZiBfbG9hZF9kb2NzKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2NoZWNrX2h0dHBfc2V0dGluZ3MoKToKICAgICAgICAgICAgdGltZXIgPSBUaW1lcihzZWxmLmhhc2hfbWFwLCBzZWxmLnJzX3NldHRpbmdzKQogICAgICAgICAgICB0aW1lci50aW1lcl9vbl9zdGFydCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50b2FzdCgn0J3QtSDQt9Cw0LTQsNC90Ysg0L3QsNGB0YLRgNC+0LnQutC4INGB0L7QtdC00LjQvdC10L3QuNGPJykKCiAgICBkZWYgX3VwZGF0ZV9yc19zZXR0aW5ncyhzZWxmKSAtPiBOb25lOgogICAgICAgIHVzZV9tYXJrID0gc2VsZi5oYXNoX21hcC5nZXQoJ3VzZV9tYXJrJykgb3IgJ2ZhbHNlJwogICAgICAgIHBhdGggPSBzZWxmLmhhc2hfbWFwLmdldCgncGF0aCcpIG9yICcvL3N0b3JhZ2UvZW11bGF0ZWQvMC9BbmRyb2lkL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvJwogICAgICAgIGFsbG93X2ZhY3RfaW5wdXQgPSBzZWxmLmhhc2hfbWFwLmdldF9ib29sKCdhbGxvd19mYWN0X2lucHV0Jykgb3IgRmFsc2UKCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ3VzZV9tYXJrJywgdXNlX21hcmssIFRydWUpCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ3BhdGgnLCBwYXRoLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdhbGxvd19mYWN0X2lucHV0JywgYWxsb3dfZmFjdF9pbnB1dCwgVHJ1ZSkKCiAgICBkZWYgX3Nob3dfc2NyZWVuKHNlbGYsIHNjcmVlbl9uYW1lKSAtPiBOb25lOgogICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oc2NyZWVuX25hbWUpCgogICAgZGVmIF9nZXRfaHR0cF9zZXR0aW5ncyhzZWxmKSAtPiBkaWN0OgogICAgICAgIGh0dHBfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICd1cmwnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgiVVJMIiksCiAgICAgICAgICAgICd1c2VyJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1VTRVInKSwKICAgICAgICAgICAgJ3Bhc3MnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnUEFTUycpLAogICAgICAgICAgICAnZGV2aWNlX21vZGVsJzogc2VsZi5oYXNoX21hcFsnREVWSUNFX01PREVMJ10sCiAgICAgICAgICAgICdhbmRyb2lkX2lkJzogc2VsZi5oYXNoX21hcFsnQU5EUk9JRF9JRCddLAogICAgICAgICAgICAndXNlcl9uYW1lJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3VzZXJfbmFtZScpfQogICAgICAgIHJldHVybiBodHRwX3NldHRpbmdzCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfaXBfYWRkcmVzcygpIC0+IHN0cjoKICAgICAgICByZXMgPSBnZXRfaXBfYWRkcmVzcygpCiAgICAgICAgaWYgcmVzOgogICAgICAgICAgICByZXR1cm4gcmVzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICfQvdC10YIg0YHQtdGC0LgnCgogICAgZGVmIF9jaGVja19odHRwX3NldHRpbmdzKHNlbGYpIC0+IGJvb2w6CiAgICAgICAgaHR0cCA9IHNlbGYuX2dldF9odHRwX3NldHRpbmdzKCkKICAgICAgICByZXR1cm4gYWxsKFtodHRwLmdldCgndXJsJyksIGh0dHAuZ2V0KCd1c2VyJyksIGh0dHAuZ2V0KCdwYXNzJyldKQoKCmNsYXNzIEZvbnRTaXplU2V0dGluZ3NTY3JlZW4oU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cd0LDRgdGC0YDQvtC50LrQuCDQqNGA0LjRhNGC0L7QsicKICAgIHByb2Nlc3NfbmFtZSA9ICfQn9Cw0YDQsNC80LXRgtGA0YsnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHB1dF9kYXRhID0ge30KICAgICAgICBmaWVsZHNfZGF0YSA9IHsKICAgICAgICAgICAgJ1RpdGxlVGV4dFNpemUnOiAn0KDQsNC30LzQtdGAINC30LDQs9C+0LvQvtCy0LrQsCcsCiAgICAgICAgICAgICdDYXJkVGl0bGVUZXh0U2l6ZSc6ICfQoNCw0LfQvNC10YAg0LfQsNCz0L7Qu9C+0LLQutCwINC60LDRgNGC0L7Rh9C60LgnLAogICAgICAgICAgICAiQ2FyZERhdGVUZXh0U2l6ZSI6ICfQlNCw0L3QvdGL0LUg0LrQsNGA0YLQvtGH0LrQuCcsCiAgICAgICAgICAgICdDYXJkVGV4dFNpemUnOiAn0KDQsNC30LzQtdGAINGC0LXQutGB0YLQsCDRjdC70LXQvNC10L3RgtC+0LInLAogICAgICAgICAgICAnR29vZHNDYXJkVGl0bGVUZXh0U2l6ZSc6ICfQl9Cw0LPQvtC70L7QstC+0Log0YLQvtCy0LDRgNCwJywKICAgICAgICAgICAgJ2dvb2RzVGV4dFNpemUnOiAn0KLQvtCy0LDRgCcsCiAgICAgICAgICAgICdTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnOiAn0KHQtdGA0LjQuCDRgdCy0L7QudGB0YLQstCwJywKICAgICAgICAgICAgJ0RvY1R5cGVDYXJkVGV4dFNpemUnOiAn0KLQuNC/INC00L7QutGD0LzQtdC90YLQsCcsCiAgICAgICAgICAgICd0aXRsZURvY1R5cGVDYXJkVGV4dFNpemUnOiAn0J3QsNC30LLQsNC90LjQtSDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0LrQsNGA0YLQvtGH0LrQtScKICAgICAgICB9CgogICAgICAgIGZvciBmaWVsZCwgaGludCBpbiBmaWVsZHNfZGF0YS5pdGVtcygpOgogICAgICAgICAgICBwdXRfZGF0YVtmaWVsZF0gPSB3aWRnZXRzLk1vZGVybkZpZWxkKAogICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgZGVmYXVsdF90ZXh0PXNlbGYucnNfc2V0dGluZ3MuZ2V0KGZpZWxkKSBvciAnJwogICAgICAgICAgICApLnRvX2pzb24oKQoKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dF9kYXRhKHB1dF9kYXRhKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdidG5fb25fc2F2ZSc6CiAgICAgICAgICAgIHNhdmVfZGF0YSA9IHsKICAgICAgICAgICAgICAgICdUaXRsZVRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnVGl0bGVUZXh0U2l6ZSddLAogICAgICAgICAgICAgICAgJ0NhcmRUaXRsZVRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnQ2FyZFRpdGxlVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdDYXJkVGV4dFNpemUnOiBzZWxmLmhhc2hfbWFwWydDYXJkVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdDYXJkRGF0ZVRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnQ2FyZERhdGVUZXh0U2l6ZSddLAogICAgICAgICAgICAgICAgJ0dvb2RzQ2FyZFRpdGxlVGV4dFNpemUnOiBzZWxmLmhhc2hfbWFwWydHb29kc0NhcmRUaXRsZVRleHRTaXplJ10sCiAgICAgICAgICAgICAgICAnZ29vZHNUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ2dvb2RzVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnOiBzZWxmLmhhc2hfbWFwWydTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnXSwKICAgICAgICAgICAgICAgICdEb2NUeXBlQ2FyZFRleHRTaXplJzogc2VsZi5oYXNoX21hcFsnRG9jVHlwZUNhcmRUZXh0U2l6ZSddLAogICAgICAgICAgICAgICAgJ3RpdGxlRG9jVHlwZUNhcmRUZXh0U2l6ZSc6IHNlbGYuaGFzaF9tYXBbJ3RpdGxlRG9jVHlwZUNhcmRUZXh0U2l6ZSddLAogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgaywgdiBpbiBzYXZlX2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KGssIHYsIFRydWUpCgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnNob3dfc2NyZWVuKCfQndCw0YHRgtGA0L7QudC60Lgg0Lgg0L7QsdC80LXQvScpCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnYnRuX29uX2NhbmNlbCcgb3Igc2VsZi5saXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0JhY2tTY3JlZW4nLCAnJykKCiAgICAgICAgc2VsZi5oYXNoX21hcFsnbm9SZWZyZXNoJ10gPSAnJwoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MKCgpjbGFzcyBCYXJjb2RlVGVzdFNjcmVlbihTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0KLQtdGB0YIg0YHQutCw0L3QtdGA0LAnCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG9uX2lucHV0KHNlbGYpOgogICAgICAgIGxpc3RlbmVycyA9IHsKICAgICAgICAgICAgJ2JhcmNvZGUnOiBzZWxmLl9iYXJjb2RlX3NjYW5uZWQsCiAgICAgICAgICAgICdPTl9CQUNLX1BSRVNTRUQnOiBzZWxmLl9iYWNrX3NjcmVlbiwKICAgICAgICAgICAgJ0JBQ0tfQlVUVE9OJzogc2VsZi5fYmFja19zY3JlZW4sCiAgICAgICAgfQoKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyIGluIGxpc3RlbmVyczoKICAgICAgICAgICAgbGlzdGVuZXJzW3NlbGYubGlzdGVuZXJdKCkKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF9iYWNrX3NjcmVlbihzZWxmKToKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnQmFja1NjcmVlbicsICcnKQoKICAgIGRlZiBfYmFyY29kZV9zY2FubmVkKHNlbGYpOgogICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZV9jYW1lcmEnKQogICAgICAgIGlmIG5vdCBiYXJjb2RlOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgYmFyY29kZV9wYXJzZXIgPSBCYXJjb2RlV29ya2VyKCkKICAgICAgICByZXN1bHQgPSBiYXJjb2RlX3BhcnNlci5wYXJzZShiYXJjb2RlKQogICAgICAgIGZpZWxkc19jb3VudCA9IDcKCiAgICAgICAga2V5c19saXN0ID0gWydFUlJPUicsICdHVElOJywgJ1NFUklBTCcsICdGdWxsQ29kZScsICdCQVJDT0RFJywgJ1NDSEVNRScsICdFWFBJUlknLCAnQkFUQ0gnLCAnTkhSTicsICdDSEVDSycsCiAgICAgICAgICAgICAgICAgICAgICdXRUlHSFQnLCAnUFBOJ10KCiAgICAgICAgdmFsdWVzID0gW2Yne2tleX06IHtyZXN1bHRba2V5XX0nIGZvciBrZXkgaW4ga2V5c19saXN0IGlmIHJlc3VsdC5nZXQoa2V5KSBpcyBub3QgTm9uZV0KCiAgICAgICAgcHV0X2RhdGEgPSB7CiAgICAgICAgICAgIGYnZmxkX3tpICsgMX0nOiB2YWx1ZXNbaV0gaWYgbGVuKHZhbHVlcykgPiBpIGVsc2UgJycKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgZmllbGRzX2NvdW50KQogICAgICAgIH0KCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXRfZGF0YShwdXRfZGF0YSkKCgpjbGFzcyBIdHRwU2V0dGluZ3NTY3JlZW4oU2NyZWVuKToKICAgIHNjcmVlbl9uYW1lID0gJ9Cd0LDRgdGC0YDQvtC50LrQuCBodHRwINGB0L7QtdC00LjQvdC10L3QuNGPJwogICAgcHJvY2Vzc19uYW1lID0gJ9Cf0LDRgNCw0LzQtdGC0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLmhzX3NlcnZpY2UgPSBOb25lCgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5oYXNoX21hcFsnYnRuX3Rlc3RfY29ubmVjdGlvbiddID0gJ9Ci0LXRgdGCINGB0L7QtdC00LjQvdC10L3QuNGPJwogICAgICAgIGh0dHBfc2V0dGluZ3MgPSBzZWxmLl9nZXRfaHR0cF9zZXR0aW5ncygpCgogICAgICAgIHB1dF9kYXRhID0gewogICAgICAgICAgICAndXJsJzogc2VsZi5fZ2V0X21vZGVybl9maWVsZChoaW50PSfQkNC00YDQtdGBINGB0LXRgNCy0LXRgNCwJywgZGVmYXVsdF90ZXh0PWh0dHBfc2V0dGluZ3NbJ3VybCddIG9yICcnKSwKICAgICAgICAgICAgJ3VzZXInOiBzZWxmLl9nZXRfbW9kZXJuX2ZpZWxkKGhpbnQ9J9Cf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCcsIGRlZmF1bHRfdGV4dD1odHRwX3NldHRpbmdzWyd1c2VyJ10gb3IgJycpLAogICAgICAgICAgICAncGFzcyc6IHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0n0J/QsNGA0L7Qu9GMJywgZGVmYXVsdF90ZXh0PWh0dHBfc2V0dGluZ3NbJ3Bhc3MnXSBvciAnJywgcGFzc3dvcmQ9VHJ1ZSksCiAgICAgICAgICAgICd1c2VyX25hbWUnOiBzZWxmLl9nZXRfbW9kZXJuX2ZpZWxkKGhpbnQ9J9CS0LDRiNC1INC40LzRjyDQtNC70Y8g0LjQtNC10L3RgtC40YTQuNC60LDRhtC40Lgg0LIgMdChJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF90ZXh0PWh0dHBfc2V0dGluZ3NbJ3VzZXJfbmFtZSddIG9yICcnKSwKICAgICAgICB9CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXRfZGF0YShwdXRfZGF0YSkKCiAgICBkZWYgb25faW5wdXQoc2VsZikgLT4gTm9uZToKICAgICAgICBsaXN0ZW5lcnMgPSB7CiAgICAgICAgICAgICdidG5fdGVzdF9jb25uZWN0aW9uJzogc2VsZi5fdGVzdF9jb25uZWN0aW9uLAogICAgICAgICAgICAnYnRuX3NhdmUnOiBzZWxmLl9zYXZlX3NldHRpbmdzLAogICAgICAgICAgICAnYmFyY29kZSc6IHNlbGYuX2JhcmNvZGVfc2Nhbm5lZCwKICAgICAgICAgICAgJ2J0bl9jYW5jZWwnOiBzZWxmLl9iYWNrX3NjcmVlbiwKICAgICAgICAgICAgJ09OX0JBQ0tfUFJFU1NFRCc6IHNlbGYuX2JhY2tfc2NyZWVuLAogICAgICAgIH0KICAgICAgICBpZiBzZWxmLmxpc3RlbmVyIGluIGxpc3RlbmVyczoKICAgICAgICAgICAgbGlzdGVuZXJzW3NlbGYubGlzdGVuZXJdKCkKCiAgICBkZWYgb25fcG9zdF9zdGFydChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHNob3coc2VsZiwgYXJncz1Ob25lKToKICAgICAgICBwYXNzCgogICAgZGVmIF90ZXN0X2Nvbm5lY3Rpb24oc2VsZik6CiAgICAgICAgc2VsZi5oc19zZXJ2aWNlID0gaHNfc2VydmljZXMuSHNTZXJ2aWNlKHNlbGYuX2dldF9odHRwX3NldHRpbmdzKCkpCgogICAgICAgIGlmIHNlbGYuX2NoZWNrX2h0dHBfc2V0dGluZ3MoKToKICAgICAgICAgICAgc2VsZi5oc19zZXJ2aWNlLmNvbW11bmljYXRpb25fdGVzdCh0aW1lb3V0PTMpCiAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYuaHNfc2VydmljZS5odHRwX2Fuc3dlcgoKICAgICAgICAgICAgaWYgcmVzdWx0LnVuYXV0aG9yaXplZDoKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Ce0YjQuNCx0LrQsCDQsNCy0YLQvtGA0LjQt9Cw0YbQuNC4INGB0LXRgNCy0LXRgNCwIDHQoScpCiAgICAgICAgICAgIGVsaWYgcmVzdWx0LmZvcmJpZGRlbjoKICAgICAgICAgICAgICAgIHNlbGYudG9hc3QoJ9CX0LDQv9GA0L7RgSDQvdCwINCw0LLRgtC+0YDQuNC30LDRhtC40Y4g0L/RgNC40L3Rj9GCJykKICAgICAgICAgICAgZWxpZiByZXN1bHQuZXJyb3I6CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQndC1INGD0LTQsNC70L7RgdGMINGD0YHRgtCw0L3QvtCy0LjRgtGMINGB0L7QtdC00LjQvdC10L3QuNC1JykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKCdlcnJvcicpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnRvYXN0KCfQodC+0LXQtNC40L3QtdC90LjQtSDRg9GB0YLQsNC90L7QstC70LXQvdC+JykKICAgICAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKCdzdWNjZXNzJykKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi50b2FzdCgi0J3QtSDRg9C60LDQt9Cw0L3RiyDQvdCw0YHRgtGA0L7QudC60LggSFRUUCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INGB0LXRgNCy0LXRgNGDIikKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wbGF5c291bmQoJ2Vycm9yJykKCiAgICBkZWYgX3NhdmVfc2V0dGluZ3Moc2VsZik6CiAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ1VSTCcsIHNlbGYuaGFzaF9tYXBbJ3VybCddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdVU0VSJywgc2VsZi5oYXNoX21hcFsndXNlciddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdQQVNTJywgc2VsZi5oYXNoX21hcFsncGFzcyddLCBUcnVlKQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBzZWxmLmhhc2hfbWFwWyd1c2VyX25hbWUnXSwgVHJ1ZSkKCiAgICAgICAgc2VsZi5fYmFja19zY3JlZW4oKQoKICAgIGRlZiBfYmFyY29kZV9zY2FubmVkKHNlbGYpOgogICAgICAgIGJhcmNvZGUgPSBzZWxmLmhhc2hfbWFwLmdldCgnYmFyY29kZV9jYW1lcmEyJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJhcmNfc3RydWN0ID0ganNvbi5sb2FkcyhiYXJjb2RlKQoKICAgICAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoJ1VSTCcsIGJhcmNfc3RydWN0LmdldCgndXJsJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdVU0VSJywgYmFyY19zdHJ1Y3QuZ2V0KCd1c2VyJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdQQVNTJywgYmFyY19zdHJ1Y3QuZ2V0KCdwYXNzJyksIFRydWUpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCd1c2VyX25hbWUnLCBiYXJjX3N0cnVjdC5nZXQoJ3VzZXJfbmFtZScpLCBUcnVlKQoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3VybCcsIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXJsJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgndXJsJykpKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgndXNlcicsIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXNlcicsIGRlZmF1bHRfdGV4dD1iYXJjX3N0cnVjdC5nZXQoJ3VzZXInKSkpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdwYXNzJywgc2VsZi5fZ2V0X21vZGVybl9maWVsZChoaW50PSdwYXNzJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgncGFzcycpKSkKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ3VzZXJfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2dldF9tb2Rlcm5fZmllbGQoaGludD0ndXNlcl9uYW1lJywgZGVmYXVsdF90ZXh0PWJhcmNfc3RydWN0LmdldCgndXNlcl9uYW1lJykpKQogICAgICAgIGV4Y2VwdCAoSlNPTkRlY29kZUVycm9yLCBBdHRyaWJ1dGVFcnJvcikgYXMgZToKICAgICAgICAgICAgc2VsZi50b2FzdCgn0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIgUVIt0LrQvtC00LAnKQoKICAgIGRlZiBfYmFja19zY3JlZW4oc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0JhY2tTY3JlZW4nLCAnJykKCiAgICBkZWYgX2dldF9tb2Rlcm5fZmllbGQoc2VsZiwgKipkYXRhKToKICAgICAgICByZXR1cm4gd2lkZ2V0cy5Nb2Rlcm5GaWVsZCgqKmRhdGEpLnRvX2pzb24oKQoKICAgIGRlZiBfY2hlY2tfaHR0cF9zZXR0aW5ncyhzZWxmKSAtPiBib29sOgogICAgICAgIGh0dHAgPSBzZWxmLl9nZXRfaHR0cF9zZXR0aW5ncygpCiAgICAgICAgcmV0dXJuIGFsbChbaHR0cC5nZXQoJ3VybCcpLCBodHRwLmdldCgndXNlcicpLCBodHRwLmdldCgncGFzcycpXSkKCiAgICBkZWYgX2dldF9odHRwX3NldHRpbmdzKHNlbGYpOgogICAgICAgIGh0dHBfc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICd1cmwnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgiVVJMIiksCiAgICAgICAgICAgICd1c2VyJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ1VTRVInKSwKICAgICAgICAgICAgJ3Bhc3MnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnUEFTUycpLAogICAgICAgICAgICAnZGV2aWNlX21vZGVsJzogc2VsZi5oYXNoX21hcFsnREVWSUNFX01PREVMJ10sCiAgICAgICAgICAgICdhbmRyb2lkX2lkJzogc2VsZi5oYXNoX21hcFsnQU5EUk9JRF9JRCddLAogICAgICAgICAgICAndXNlcl9uYW1lJzogc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3VzZXJfbmFtZScpfQogICAgICAgIHJldHVybiBodHRwX3NldHRpbmdzCgoKY2xhc3MgU291bmRTZXR0aW5ncyhTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0J3QsNGB0YLRgNC+0LnQutCwINC30LLRg9C60LAnCiAgICBwcm9jZXNzX25hbWUgPSAn0J/QsNGA0LDQvNC10YLRgNGLJwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuZXZlbnRzID0geydzdWNjZXNzJzogJ9Ch0LjQs9C90LDQuyDRg9C00LDRh9C90L7Qs9C+INGB0L7QsdGL0YLQuNGPJywgJ3dhcm5pbmcnOiAn0KHQuNCz0L3QsNC7INC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40Y8nLAogICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6ICfQodC40LPQvdCw0Lsg0L7RiNC40LHQutC4J30KCiAgICBkZWYgb25fc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5faW5pdF9zb3VuZHMoKQogICAgICAgIGV2ZW50c19kYXRhID0gc2VsZi5fZ2V0X2V2ZW50c19kYXRhKCkKICAgICAgICBldmVudHNfY2FyZHMgPSBzZWxmLl9nZXRfZXZlbnRfY2FyZHNfdmlldyhldmVudHNfZGF0YSwgcG9wdXBfbWVudV9kYXRhPScxOzI7Mzs0OzU7Njs3Ozg7OTsxMDsxMTsxMjsxMzsxNDsxNScpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2V2ZW50X2NhcmRzJywgZXZlbnRzX2NhcmRzLnRvX2pzb24oKSkKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciA9PSAnc2F2ZV9idG4nOgogICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnc3VjY2Vzc19zaWduYWwnLCBzZWxmLmhhc2hfbWFwLmdldCgiY3VycmVudF9zdWNjZXNzX3NpZ25hbCIpLCBUcnVlKQogICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnd2FybmluZ19zaWduYWwnLCBzZWxmLmhhc2hfbWFwLmdldCgiY3VycmVudF93YXJuaW5nX3NpZ25hbCIpLCBUcnVlKQogICAgICAgICAgICBzZWxmLnJzX3NldHRpbmdzLnB1dCgnZXJyb3Jfc2lnbmFsJywgc2VsZi5oYXNoX21hcC5nZXQoImN1cnJlbnRfZXJyb3Jfc2lnbmFsIiksIFRydWUpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oJ9Cd0LDRgdGC0YDQvtC50LrQuCDQuCDQvtCx0LzQtdC9JykKICAgICAgICAgICAgIyBzZWxmLmhhc2hfbWFwLmZpbmlzaF9wcm9jZXNzKCkKCiAgICAgICAgZWxpZiBzZWxmLmxpc3RlbmVyID09ICdidG5fb25fY2FuY2VsJyBvciBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9zdWNjZXNzX3NpZ25hbCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF93YXJuaW5nX3NpZ25hbCcsICcnKQogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9lcnJvcl9zaWduYWwnLCAnJykKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3NjcmVlbign0J3QsNGB0YLRgNC+0LnQutC4INC4INC+0LHQvNC10L0nKQoKICAgICAgICBlbGlmIHNlbGYubGlzdGVuZXIgPT0gJ0NhcmRzQ2xpY2snOgogICAgICAgICAgICBzZWxlY3RlZF9ldmVudCA9IHNlbGYuaGFzaF9tYXAuZ2V0KCdzZWxlY3RlZF9jYXJkX2tleScpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucGxheXNvdW5kKGV2ZW50PXNlbGVjdGVkX2V2ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VuZF92YWw9c2VsZi5oYXNoX21hcC5nZXQoZidjdXJyZW50X3tzZWxlY3RlZF9ldmVudH1fc2lnbmFsJykpCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAnTGF5b3V0QWN0aW9uJzoKICAgICAgICAgICAgc2VsZi5fbGF5b3V0X2FjdGlvbigpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfaW5pdF9zb3VuZHMoc2VsZik6CiAgICAgICAgIyBmb3Iga2V5LCB2YWwgaW4gc2VsZi5ldmVudHMuaXRlbXMoKToKICAgICAgICAjICAgICBpZiBub3Qgc2VsZi5oYXNoX21hcC5nZXQoZidjdXJyZW50X3trZXl9X3NpZ25hbCcpOgogICAgICAgICMgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dChmJ2N1cnJlbnRfe2tleX1fc2lnbmFsJywgc2VsZi5yc19zZXR0aW5ncy5nZXQoZid7ZXZlbnR9X3NpZ25hbCcgb3IgIjYiKSkKCiAgICAgICAgaWYgbm90IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X3N1Y2Nlc3Nfc2lnbmFsJyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X3N1Y2Nlc3Nfc2lnbmFsJywgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3N1Y2Nlc3Nfc2lnbmFsJykpCiAgICAgICAgaWYgbm90IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X3dhcm5pbmdfc2lnbmFsJyk6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCdjdXJyZW50X3dhcm5pbmdfc2lnbmFsJywgc2VsZi5yc19zZXR0aW5ncy5nZXQoJ3dhcm5pbmdfc2lnbmFsJykpCiAgICAgICAgaWYgbm90IHNlbGYuaGFzaF9tYXAuZ2V0KCdjdXJyZW50X2Vycm9yX3NpZ25hbCcpOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnY3VycmVudF9lcnJvcl9zaWduYWwnLCBzZWxmLnJzX3NldHRpbmdzLmdldCgnZXJyb3Jfc2lnbmFsJykpCgogICAgZGVmIF9nZXRfZXZlbnRzX2RhdGEoc2VsZik6CiAgICAgICAgZGF0YSA9IFtdCiAgICAgICAgZm9yIGtleSwgdmFsIGluIHNlbGYuZXZlbnRzLml0ZW1zKCk6CiAgICAgICAgICAgIGV2ZW50ID0gewogICAgICAgICAgICAgICAgJ2tleSc6IGtleSwKICAgICAgICAgICAgICAgICdldmVudF9uYW1lJzogdmFsLAogICAgICAgICAgICAgICAgJ3NlbGVjdGVkX3ZhbHVlJzogc2VsZi5oYXNoX21hcC5nZXQoZidjdXJyZW50X3trZXl9X3NpZ25hbCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5hcHBlbmQoZXZlbnQpCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgX2dldF9ldmVudF9jYXJkc192aWV3KHNlbGYsIGV2ZW50c19kYXRhLCBwb3B1cF9tZW51X2RhdGEpOgogICAgICAgIHRpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJUaXRsZVRleHRTaXplIikKICAgICAgICBjYXJkX3RpdGxlX3RleHRfc2l6ZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJDYXJkVGl0bGVUZXh0U2l6ZSIpCiAgICAgICAgZG9jX2NhcmRzID0gd2lkZ2V0cy5DdXN0b21DYXJkcygKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZT0nQGV2ZW50X25hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0Qm9sZD1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT10aXRsZV90ZXh0X3NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYXZpdHlfaG9yaXpvbnRhbD0nY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgIHdlaWdodD0wCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BzZWxlY3RlZF92YWx1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRTaXplPTI4LAogICAgICAgICAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5Qb3B1cE1lbnVCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlPXBvcHVwX21lbnVfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGU9Im1lbnVfc2VsZWN0X3NvdW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cy5UZXh0VmlldygKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU9ItCf0YDQvtGB0LvRg9GI0LDRgtGMIiwKICAgICAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eV9ob3Jpem9udGFsPSdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT1jYXJkX3RpdGxlX3RleHRfc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICAgICApLAoKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcsCgogICAgICAgICAgICAgICAgKSwKCiAgICAgICAgICAgICAgICB3aWR0aD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSd2ZXJ0aWNhbCcsCiAgICAgICAgICAgICAgICBncmF2aXR5X2hvcml6b250YWw9J2NlbnRlcicsCiAgICAgICAgICAgICAgICBncmF2aXR5X3ZlcnRpY2FsPSJjZW50ZXIiLAogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIGNhcmRzZGF0YT1ldmVudHNfZGF0YQogICAgICAgICkKCiAgICAgICAgcmV0dXJuIGRvY19jYXJkcwoKICAgIGRlZiBfbGF5b3V0X2FjdGlvbihzZWxmKToKICAgICAgICBsYXlvdXRfbGlzdGVuZXIgPSBzZWxmLmhhc2hfbWFwLmdldCgnbGF5b3V0X2xpc3RlbmVyJykKICAgICAgICBjdXJyZW50X2tleSA9IHNlbGYuaGFzaF9tYXAuZ2V0X2pzb24oImNhcmRfZGF0YSIpWydrZXknXQogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KGYnY3VycmVudF97Y3VycmVudF9rZXl9X3NpZ25hbCcsIGxheW91dF9saXN0ZW5lcikKCgpjbGFzcyBFcnJvckxvZ1NjcmVlbihTY3JlZW4pOgogICAgc2NyZWVuX25hbWUgPSAn0J7RiNC40LHQutC4JwogICAgcHJvY2Vzc19uYW1lID0gJ9Cf0LDRgNCw0LzQtdGC0YDRiycKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICAgICBzZWxmLnNlcnZpY2UgPSBFcnJvclNlcnZpY2UoKQogICAgICAgIHNlbGYuc2NyZWVuX3ZhbHVlcyA9IHt9CgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgZGF0ZV9zb3J0ID0gc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfZGF0ZV9zb3J0J10KICAgICAgICBlcnJvcnNfdGFibGVfZGF0YSA9IHNlbGYuc2VydmljZS5nZXRfYWxsX2Vycm9ycyhkYXRlX3NvcnQpCiAgICAgICAgdGFibGVfcmF3cyA9IHNlbGYuX2dldF9lcnJvcnNfdGFibGVfcm93cyhlcnJvcnNfdGFibGVfZGF0YSkKICAgICAgICB0YWJsZV92aWV3ID0gc2VsZi5fZ2V0X2Vycm9yc190YWJsZV92aWV3KHRhYmxlX3Jhd3MpCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoImVycm9yX2xvZ190YWJsZSIsIHRhYmxlX3ZpZXcudG9fanNvbigpKQogICAgICAgIHNlbGYuaGFzaF9tYXBbJ2RhdGVfc29ydF9zZWxlY3QnXSA9ICfQndC+0LLRi9C1O0PRgtCw0YDRi9C1JwoKICAgIGRlZiBvbl9pbnB1dChzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkub25faW5wdXQoKQoKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICJidG5fY2xlYXJfZXJyIjoKICAgICAgICAgICAgc2VsZi5zZXJ2aWNlLmNsZWFyKCkKICAgICAgICBpZiBzZWxmLmxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQndCw0YHRgtGA0L7QudC60Lgg0Lgg0L7QsdC80LXQvSIpCgogICAgICAgIGVsaWYgc2VsZi5saXN0ZW5lciA9PSAiZGF0ZV9zb3J0X2NsaWNrIjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcFsnc2VsZWN0ZWRfZGF0ZV9zb3J0J10gPSBzZWxmLmhhc2hfbWFwWyJkYXRlX3NvcnRfY2xpY2siXQoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHNlbGYuX3ZhbGlkYXRlX3NjcmVlbl92YWx1ZXMoKQogICAgICAgIHNlbGYuaGFzaF9tYXAuc2hvd19zY3JlZW4oc2VsZi5zY3JlZW5fbmFtZSwgYXJncykKCiAgICBkZWYgX2dldF9lcnJvcnNfdGFibGVfcm93cyhzZWxmLCBlcnJvcnNfdGFibGVfZGF0YSk6CiAgICAgICAgdGFibGVfZGF0YSA9IFt7fV0KICAgICAgICBpID0gMQogICAgICAgIGZvciByZWNvcmQgaW4gZXJyb3JzX3RhYmxlX2RhdGE6CiAgICAgICAgICAgIGVycm9yX3JvdyA9IHsia2V5IjogaSwgIm1lc3NhZ2UiOiByZWNvcmRbMF0sICJ0aW1lIjogcmVjb3JkWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgJ19sYXlvdXQnOiBzZWxmLl9nZXRfZXJyb3JzX3RhYmxlX3Jvd19sYXlvdXQoKX0KICAgICAgICAgICAgdGFibGVfZGF0YS5hcHBlbmQoZXJyb3Jfcm93KQogICAgICAgICAgICBpICs9IDEKCiAgICAgICAgcmV0dXJuIHRhYmxlX2RhdGEKCiAgICBkZWYgX2dldF9lcnJvcnNfdGFibGVfdmlldyhzZWxmLCB0YWJsZV9yb3dzKToKICAgICAgICB0YWJsZV92aWV3ID0gd2lkZ2V0cy5DdXN0b21UYWJsZSgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQktGA0LXQvNGPJyksCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0PTEKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzZWxmLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgICAgICBzZWxmLlRleHRWaWV3KCfQodC+0L7QsdGJ0LXQvdC40LUnKSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MwogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uPSdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgIGhlaWdodD0ibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgIHdpZHRoPSJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yPScjRkZGRkZGJwogICAgICAgICAgICApLAogICAgICAgICAgICBvcHRpb25zPXdpZGdldHMuT3B0aW9ucygpLm9wdGlvbnMsCiAgICAgICAgICAgIHRhYmxlZGF0YT10YWJsZV9yb3dzCiAgICAgICAgKQogICAgICAgIHJldHVybiB0YWJsZV92aWV3CgogICAgZGVmIF9nZXRfZXJyb3JzX3RhYmxlX3Jvd19sYXlvdXQoc2VsZik6CiAgICAgICAgcm93X3ZpZXcgPSB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgd2lkZ2V0cy5MaW5lYXJMYXlvdXQoCiAgICAgICAgICAgICAgICB3aWRnZXRzLlRleHRWaWV3KAogICAgICAgICAgICAgICAgICAgIFZhbHVlPSdAdGltZScsCiAgICAgICAgICAgICAgICAgICAgVGV4dFNpemU9MTUsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J21hdGNoX3BhcmVudCcKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nd3JhcF9jb250ZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0xLAogICAgICAgICAgICAgICAgU3Ryb2tlV2lkdGg9MAogICAgICAgICAgICApLAogICAgICAgICAgICB3aWRnZXRzLkxpbmVhckxheW91dCgKICAgICAgICAgICAgICAgIHdpZGdldHMuVGV4dFZpZXcoCiAgICAgICAgICAgICAgICAgICAgVmFsdWU9J0BtZXNzYWdlJywKICAgICAgICAgICAgICAgICAgICBUZXh0U2l6ZT0xNSwKICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB3aWR0aD0nbWF0Y2hfcGFyZW50JywKICAgICAgICAgICAgICAgIGhlaWdodD0nd3JhcF9jb250ZW50JywKICAgICAgICAgICAgICAgIHdlaWdodD0zLAogICAgICAgICAgICApLAogICAgICAgICAgICBvcmllbnRhdGlvbj0naG9yaXpvbnRhbCcsCiAgICAgICAgICAgIHdpZHRoPSdtYXRjaF9wYXJlbnQnLAogICAgICAgICAgICBCYWNrZ3JvdW5kQ29sb3I9JyNGRkZGRkYnLAogICAgICAgICAgICBoZWlnaHQ9J3dyYXBfY29udGVudCcsCiAgICAgICAgICAgIFN0cm9rZVdpZHRoPTEKICAgICAgICApCgogICAgICAgIHJldHVybiByb3dfdmlldwoKICAgIGNsYXNzIExpbmVhckxheW91dCh3aWRnZXRzLkxpbmVhckxheW91dCk6CiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKmFyZ3MsICoqa3dhcmdzKQogICAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uID0gJ3ZlcnRpY2FsJwogICAgICAgICAgICBzZWxmLmhlaWdodCA9ICJtYXRjaF9wYXJlbnQiCiAgICAgICAgICAgIHNlbGYud2lkdGggPSAibWF0Y2hfcGFyZW50IgogICAgICAgICAgICBzZWxmLlN0cm9rZVdpZHRoID0gMQoKICAgIGNsYXNzIFRleHRWaWV3KHdpZGdldHMuVGV4dFZpZXcpOgogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgICAgICBzZWxmLlRleHRTaXplID0gJzE1JwogICAgICAgICAgICBzZWxmLlRleHRCb2xkID0gVHJ1ZQogICAgICAgICAgICBzZWxmLndpZHRoID0gJ21hdGNoX3BhcmVudCcKICAgICAgICAgICAgc2VsZi5WYWx1ZSA9IHZhbHVlCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gU2V0dGluZ3MgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gRGVidWcgc2V0dGluZ3MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgpjbGFzcyBEZWJ1Z1NldHRpbmdzU2NyZWVuKFNjcmVlbik6CiAgICBwcm9jZXNzX25hbWUgPSAn0J7RgtC70LDQtNC60LAnCiAgICBzY3JlZW5fbmFtZSA9ICfQntGC0LvQsNC00L7Rh9C90YvQuSDRjdC60YDQsNC9JwoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBoYXNoX21hcDogSGFzaE1hcCwgcnNfc2V0dGluZ3MpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgICAgIHNlbGYuaHNfc2VydmljZSA9IGhzX3NlcnZpY2VzLkRlYnVnU2VydmljZQoKICAgIGRlZiBvbl9zdGFydChzZWxmKToKICAgICAgICBkZWJ1Z19ob3N0X2lwID0gc2VsZi5yc19zZXR0aW5ncy5nZXQoJ2RlYnVnX2hvc3RfaXAnKSBvciBzZWxmLmhhc2hfbWFwWydpcF9ob3N0J10KICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgKICAgICAgICAgICAgJ2lwX2hvc3QnLAogICAgICAgICAgICB7J2hpbnQnOiAnSVAt0LDQtNGA0LXRgSDQtNC70Y8g0LLRi9Cz0YDRg9C30LrQuCDQsdCw0LfRiy/Qu9C+0LPQsCcsICdkZWZhdWx0X3RleHQnOiBkZWJ1Z19ob3N0X2lwIG9yICcnfSwKICAgICAgICAgICAgdG9fanNvbj1UcnVlKQoKICAgIGRlZiBvbl9pbnB1dChzZWxmKToKICAgICAgICBsaXN0ZW5lcnMgPSB7CiAgICAgICAgICAgICdidG5fZmlsbF9yYXRpbyc6IHNlbGYuX2ZpbGxfcmF0aW8sCiAgICAgICAgICAgICdidG5fY29weV9iYXNlJzogc2VsZi5fY29weV9iYXNlLAogICAgICAgICAgICAnYnRuX3VubG9hZF9sb2cnOiBzZWxmLl91bmxvYWRfbG9nLAogICAgICAgICAgICAnYnRuX2xvY2FsX2ZpbGVzJzogc2VsZi5fbG9jYWxfZmlsZXMsCiAgICAgICAgICAgICdidG5fdGVtcGxhdGVzJzogc2VsZi5vcGVuX3RlbXBsYXRlc19zY3JlZW4sCiAgICAgICAgICAgICdPTl9CQUNLX1BSRVNTRUQnOiBzZWxmLl9vbl9iYWNrX3ByZXNzZWQKICAgICAgICB9CiAgICAgICAgaWYgc2VsZi5saXN0ZW5lciBpbiBsaXN0ZW5lcnM6CiAgICAgICAgICAgIGxpc3RlbmVyc1tzZWxmLmxpc3RlbmVyXSgpCgogICAgZGVmIG9uX3Bvc3Rfc3RhcnQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBzaG93KHNlbGYsIGFyZ3M9Tm9uZSk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBfZmlsbF9yYXRpbyhzZWxmKToKICAgICAgICBxdGV4dCA9ICcnJwogICAgICAgIFVQREFURSBSU19iYXJjb2RlcwogICAgICAgIFNFVCByYXRpbyA9IENPQUxFU0NFKCgKICAgICAgICAgICAgU0VMRUNUIFJTX3VuaXRzLm5vbWluYXRvciAvIFJTX3VuaXRzLmRlbm9taW5hdG9yCiAgICAgICAgICAgIEZST00gUlNfdW5pdHMKICAgICAgICAgICAgV0hFUkUgUlNfdW5pdHMuaWQgPSBSU19iYXJjb2Rlcy5pZF91bml0CiAgICAgICAgKSwgMSknJycKCiAgICAgICAgcmVzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXRleHQpCiAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0KLQsNCx0LvQuNGG0LAg0LHQsNGA0LrQvtC00L7QsiDQt9Cw0L/QvtC70L3QtdC90LAg0LfQvdCw0YfQtdC90LjRj9C80Lgg0LjQtyDQtdC00LjQvdC40YYg0LjQt9C80LXRgNC10L3QuNGPJykKCiAgICBkZWYgX2NvcHlfYmFzZShzZWxmKToKICAgICAgICBpcF9ob3N0ID0gc2VsZi5oYXNoX21hcFsnaXBfaG9zdCddCiAgICAgICAgcGF0aF90b19kYXRhYmFzZXMgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgncGF0aF90b19kYXRhYmFzZXMnKQogICAgICAgIGJhc2VfbmFtZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdzcWxpdGVfbmFtZScpCiAgICAgICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHBhdGhfdG9fZGF0YWJhc2VzLCBiYXNlX25hbWUpCgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGZpbGVfcGF0aCk6CiAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICdyYicpIGFzIGY6CiAgICAgICAgICAgICAgICByZXMgPSBzZWxmLmhzX3NlcnZpY2UoaXBfaG9zdCkuZXhwb3J0X2RhdGFiYXNlKGYpCgogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNfY29kZSddID09IDIwMDoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQkdCw0LfQsCBTUUxpdGUg0YPRgdC/0LXRiNC90L4g0LLRi9Cz0YDRg9C20LXQvdCwJykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNoX21hcC50b2FzdCgn0J7RiNC40LHQutCwINGB0L7QtdC00LjQvdC10L3QuNGPJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQpNCw0LnQuyDQvdC1INC90LDQudC00LXQvScpCgogICAgZGVmIF91bmxvYWRfbG9nKHNlbGYpOgogICAgICAgIGlwX2hvc3QgPSBzZWxmLmhhc2hfbWFwWydpcF9ob3N0J10KCiAgICAgICAgcGF0aF90b19kYXRhYmFzZXMgPSBzZWxmLnJzX3NldHRpbmdzLmdldCgncGF0aF90b19kYXRhYmFzZXMnKQogICAgICAgIGJhc2VfbmFtZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdsb2dfbmFtZScpCiAgICAgICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHBhdGhfdG9fZGF0YWJhc2VzLCBiYXNlX25hbWUpCgogICAgICAgICMgVE9ETyDQl9C00LXRgdGMINC90YPQttC90L4g0LHRg9C00LXRgiDQstGL0LfRi9Cy0LDRgtGMINC60LvQsNGB0YEt0YHQtdGA0LLQuNGBINC00LvRjyDQstC30LDQuNC80L7QtNC10LnRgdGC0LLQuNGPINGBIFRpbnlEQgogICAgICAgIGZyb20gdGlueWRiIGltcG9ydCBUaW55REIKCiAgICAgICAgZGIgPSBUaW55REIoZmlsZV9wYXRoKQogICAgICAgIGRhdGEgPSBkYi5hbGwoKQoKICAgICAgICByZXMgPSBzZWxmLmhzX3NlcnZpY2UoaXBfaG9zdCkuZXhwb3J0X2xvZyhkYXRhKQogICAgICAgIGlmIHJlc1snc3RhdHVzX2NvZGUnXSA9PSAyMDA6CiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QoJ9Cb0L7QsyDRg9GB0L/QtdGI0L3QviDQstGL0LPRgNGD0LbQtdC9JykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KCfQntGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKQoKICAgIGRlZiBfbG9jYWxfZmlsZXMoc2VsZik6CiAgICAgICAgaW1wb3J0IHVpX2NzdgoKICAgICAgICBwYXRoID0gc2VsZi5oYXNoX21hcFsncGF0aCddCiAgICAgICAgZGVsZXRlX2ZpbGVzID0gc2VsZi5oYXNoX21hcFsnZGVsZXRlX2ZpbGVzJ10KCiAgICAgICAgaWYgbm90IGRlbGV0ZV9maWxlczoKICAgICAgICAgICAgZGVsZXRlX2ZpbGVzID0gJzAnCiAgICAgICAgaWYgbm90IHBhdGg6CiAgICAgICAgICAgIHBhdGggPSAnLy9zdG9yYWdlL2VtdWxhdGVkLzAvZG93bmxvYWQvJwoKICAgICAgICByZXRfdGV4dCA9IHVpX2Nzdi5saXN0X2ZvbGRlcihwYXRoLCBkZWxldGVfZmlsZXMpCgogICAgICAgIHNlbGYuaGFzaF9tYXAudG9hc3QocmV0X3RleHQpCgogICAgZGVmIF9vbl9iYWNrX3ByZXNzZWQoc2VsZik6CiAgICAgICAgaXBfaG9zdCA9IHNlbGYuaGFzaF9tYXBbJ2lwX2hvc3QnXQogICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdkZWJ1Z19ob3N0X2lwJywgaXBfaG9zdCwgVHJ1ZSkKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKQoKICAgIGRlZiBvcGVuX3RlbXBsYXRlc19zY3JlZW4oc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5zaG93X3Byb2Nlc3NfcmVzdWx0KCfQn9C10YfQsNGC0YwnLCAn0KHQv9C40YHQvtC6INGI0LDQsdC70L7QvdC+0LInKQoKCiMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eIERlYnVnIHNldHRpbmdzIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl4KCgojID09PT09PT09PT09PT09PT09PT09IFRpbWVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoKY2xhc3MgVGltZXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA6IEhhc2hNYXAsIHJzX3NldHRpbmdzKToKICAgICAgICBzZWxmLmhhc2hfbWFwID0gaGFzaF9tYXAKICAgICAgICBzZWxmLnJzX3NldHRpbmdzID0gcnNfc2V0dGluZ3MKICAgICAgICBzZWxmLmh0dHBfc2V0dGluZ3MgPSBzZWxmLl9nZXRfaHR0cF9zZXR0aW5ncygpCiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi5odHRwX3NlcnZpY2UgPSBIc1NlcnZpY2Uoc2VsZi5odHRwX3NldHRpbmdzKQoKICAgIGRlZiB0aW1lcl9vbl9zdGFydChzZWxmKToKICAgICAgICBzZWxmLmxvYWRfZG9jcygpCiAgICAgICAgc2VsZi5fdXBsb2FkX2RhdGEoKQogICAgICAgICMgc2VsZi51cGxvYWRfYWxsX2RvY3MoKQoKICAgIGRlZiBwdXRfbm90aWZpY2F0aW9uKHNlbGYsIHRleHQsIHRpdGxlPU5vbmUpOgogICAgICAgIHNlbGYuaGFzaF9tYXAubm90aWZpY2F0aW9uKHRleHQsIHRpdGxlKQoKICAgIGRlZiBfZ2V0X2h0dHBfc2V0dGluZ3Moc2VsZik6CiAgICAgICAgaHR0cF9zZXR0aW5ncyA9IHsKICAgICAgICAgICAgJ3VybCc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCJVUkwiKSwKICAgICAgICAgICAgJ3VzZXInOiBzZWxmLnJzX3NldHRpbmdzLmdldCgnVVNFUicpLAogICAgICAgICAgICAncGFzcyc6IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdQQVNTJyksCiAgICAgICAgICAgICdkZXZpY2VfbW9kZWwnOiBzZWxmLmhhc2hfbWFwWydERVZJQ0VfTU9ERUwnXSwKICAgICAgICAgICAgJ2FuZHJvaWRfaWQnOiBzZWxmLmhhc2hfbWFwWydBTkRST0lEX0lEJ10sCiAgICAgICAgICAgICd1c2VyX25hbWUnOiBzZWxmLnJzX3NldHRpbmdzLmdldCgndXNlcl9uYW1lJyl9CiAgICAgICAgcmV0dXJuIGh0dHBfc2V0dGluZ3MKCiAgICBkZWYgbG9hZF9kb2NzKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9jaGVja19odHRwX3NldHRpbmdzKCk6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRvY3NfZGF0YSA9IHNlbGYuaHR0cF9zZXJ2aWNlLmdldF9kYXRhKCkKICAgICAgICAgICAgZGF0YSA9IGRvY3NfZGF0YS5nZXQoJ2RhdGEnKQogICAgICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgc2VydmljZSA9IGRiX3NlcnZpY2VzLlRpbWVyU2VydmljZSgpCiAgICAgICAgICAgIG5ld19kb2N1bWVudHMgPSBzZXJ2aWNlLmdldF9uZXdfbG9hZF9kb2NzKGRhdGEpCiAgICAgICAgICAgICMgc2VydmljZS5zYXZlX2xvYWRfZGF0YShkYXRhKQogICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2UudXBkYXRlX2RhdGFfZnJvbV9qc29uKGRvY3NfZGF0YVsnZGF0YSddKQoKICAgICAgICAgICAgaWYgbmV3X2RvY3VtZW50czoKICAgICAgICAgICAgICAgIG5vdGlmeV90ZXh0ID0gc2VsZi5fZ2V0X25vdGlmeV90ZXh0KG5ld19kb2N1bWVudHMpCiAgICAgICAgICAgICAgICBzZWxmLnB1dF9ub3RpZmljYXRpb24odGV4dD1ub3RpZnlfdGV4dCwgdGl0bGU9ItCX0LDQs9GA0YPQttC10L3RiyDQtNC+0LrRg9C80LXQvdGC0Ys6IikKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2Uud3JpdGVfZXJyb3Jfb25fbG9nKGYn0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LTQvtC60YPQvNC10L3RgtC+0LI6IHtlfScpCgogICAgZGVmIF91cGxvYWRfZGF0YShzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5fY2hlY2tfaHR0cF9zZXR0aW5ncygpOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VydmljZSA9IFRpbWVyU2VydmljZSgpCiAgICAgICAgZGF0YSA9IHNlcnZpY2UuZ2V0X2RhdGFfdG9fc2VuZCgpCgogICAgICAgIGlmIG5vdCBkYXRhOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgdHJ5OgogICAgICAgICAgICBhbnN3ZXIgPSBzZWxmLmh0dHBfc2VydmljZS5zZW5kX2RhdGEoZGF0YSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2V9JykKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGFuc3dlci5lcnJvcjoKICAgICAgICAgICAgIyBzZWxmLnB1dF9ub3RpZmljYXRpb24odGl0bGU9J9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDQtNC+0LrRg9C80LXQvdGC0L7QsicsIHRleHQ9YW5zd2VyLmVycm9yX3RleHQpCiAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2Fuc3dlci5lcnJvcl90ZXh0fScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZG9jc19saXN0X3N0cmluZyA9ICcsICcuam9pbihbZiIne2RbJ2lkX2RvYyddfSciIGZvciBkIGluIGRhdGFdKQogICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2UudXBkYXRlX3VwbG9hZGVkX2RvY3Nfc3RhdHVzKGRvY3NfbGlzdF9zdHJpbmcpCgoKICAgIGRlZiB1cGxvYWRfYWxsX2RvY3Moc2VsZik6CiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi51cGxvYWRfZG9jcygpCiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gQWRyRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi51cGxvYWRfZG9jcygpCgogICAgZGVmIGxvYWRfYWxsX2RvY3Moc2VsZik6CiAgICAgICAgc2VsZi5kYl9zZXJ2aWNlID0gRG9jU2VydmljZSgpCiAgICAgICAgc2VsZi5sb2FkX2RvY3MoKQogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IEFkckRvY1NlcnZpY2UoKQogICAgICAgIHNlbGYubG9hZF9kb2NzKCkKCiAgICBkZWYgdXBsb2FkX2RvY3Moc2VsZik6CgogICAgICAgIGlmIHNlbGYuX2NoZWNrX2h0dHBfc2V0dGluZ3MoKToKICAgICAgICAgICAgdHJ5OgoKICAgICAgICAgICAgICAgIGRvY3NfZ29vZHNfZm9ybWF0dGVkX2xpc3QgPSBzZWxmLmRiX3NlcnZpY2UuZ2V0X2RvY3NfYW5kX2dvb2RzX2Zvcl91cGxvYWQoKQogICAgICAgICAgICAgICAgaWYgZG9jc19nb29kc19mb3JtYXR0ZWRfbGlzdDoKICAgICAgICAgICAgICAgICAgICBhbnN3ZXIgPSBzZWxmLmh0dHBfc2VydmljZS5zZW5kX2RvY3VtZW50cyhkb2NzX2dvb2RzX2Zvcm1hdHRlZF9saXN0KQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zd2VyLmdldCgnRXJyb3InKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHV0X25vdGlmaWNhdGlvbih0ZXh0PSfQntGI0LjQsdC60LAg0L/RgNC4INC+0YLQv9GA0LDQstC60LUg0LTQvtC60YPQvNC10L3RgtC+0LInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyX3RleHQgPSBhbnN3ZXIuZ2V0KCd0ZXh0JykuZGVjb2RlKCd1dGYtOCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFuc3dlci5nZXQoIkVycm9yIikgb3IgJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2Vycl90ZXh0fVxue2Vycm9yfScpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NzX2xpc3Rfc3RyaW5nID0gJywgJy5qb2luKFtmIid7ZFsnaWRfZG9jJ119JyIgZm9yIGQgaW4gZG9jc19nb29kc19mb3JtYXR0ZWRfbGlzdF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRiX3NlcnZpY2UudXBkYXRlX3VwbG9hZGVkX2RvY3Nfc3RhdHVzKGRvY3NfbGlzdF9zdHJpbmcpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYuZGJfc2VydmljZS53cml0ZV9lcnJvcl9vbl9sb2coZifQntGI0LjQsdC60LAg0LLRi9Cz0YDRg9C30LrQuCDQtNC+0LrRg9C80LXQvdGC0L7Qsjoge2V9JykKCiAgICBkZWYgX2NoZWNrX2h0dHBfc2V0dGluZ3Moc2VsZikgLT4gYm9vbDoKICAgICAgICBodHRwID0gc2VsZi5fZ2V0X2h0dHBfc2V0dGluZ3MoKQogICAgICAgIHJldHVybiBhbGwoW2h0dHAuZ2V0KCd1cmwnKSwgaHR0cC5nZXQoJ3VzZXInKSwgaHR0cC5nZXQoJ3Bhc3MnKV0pCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZXRfbm90aWZ5X3RleHQobmV3X2RvY3VtZW50cyk6CiAgICAgICAgZG9jX3RpdGxlcyA9IFsKICAgICAgICAgICAgJ3t9IOKEliB7fSDQvtGCIHt9Jy5mb3JtYXQoaXRlbVsnZG9jX3R5cGUnXSwgaXRlbVsnZG9jX24nXSwgaXRlbVsnZG9jX2RhdGUnXSkKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gbmV3X2RvY3VtZW50cy52YWx1ZXMoKV0KICAgICAgICByZXR1cm4gIiwgIi5qb2luKGRvY190aXRsZXMpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXl5eXl4gVGltZXIgXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXgoKCiMgPT09PT09PT09PT09PT09PT09PT0gTWFpbiBldmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgpjbGFzcyBNYWluRXZlbnRzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhhc2hfbWFwOiBIYXNoTWFwLCByc19zZXR0aW5ncyk6CiAgICAgICAgc2VsZi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgc2VsZi5yc19zZXR0aW5ncyA9IHJzX3NldHRpbmdzCgogICAgZGVmIGFwcF9vbl9zdGFydChzZWxmKToKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1N0YWNrQWRkTW9kZScsICcnKSAjINCS0LrQu9GO0YfQsNC10YIg0YDQtdC20LjQvCDQvtCx0YrQtdC00LjQvdC10L3QuNGPINC/0LXRgNC10LzQtdC90L3Ri9GFIGhhc2hfbWFwINCyINGC0LDQudC80LXRgNCw0YUKCiAgICAgICAgIyBUT0RPINCe0LHRgNCw0LHQvtGC0YfQuNC60Lgg0L7QsdC90L7QstC70LXQvdC40Y8hCiAgICAgICAgcmVsZWFzZSA9IHNlbGYucnNfc2V0dGluZ3MuZ2V0KCdSZWxlYXNlJykgb3IgJycKICAgICAgICB0b2FzdCA9ICfQk9C+0YLQvtCyINC6INGA0LDQsdC+0YLQtScKCiAgICAgICAgY3VycmVudF9yZWxlYXNlID0gc2VsZi5oYXNoX21hcFsnX2NvbmZpZ3VyYXRpb25WZXJzaW9uJ10KICAgICAgICAjIHRvYXN0ID0gKGYn0J7QsdC90L7QstC70Y/QtdC80YHRjyDRgSB7cmVsZWFzZX0g0L3QsCB7Y3VycmVudF9yZWxlYXNlfScpCgogICAgICAgIHNlbGYuX2NyZWF0ZV90YWJsZXMoKQoKICAgICAgICBpZiBjdXJyZW50X3JlbGVhc2UgaXMgTm9uZToKICAgICAgICAgICAgdG9hc3QgPSAn0J3QtSDRg9C00LDQu9C+0YHRjCDQvtC/0YDQtdC00LXQu9C40YLRjCDQstC10YDRgdC40Y4g0LrQvtC90YTQuNCz0YPRgNCw0YbQuNC4JwoKICAgICAgICAjc2VsZi5oYXNoX21hcC50b2FzdChmJ9Ce0LHQvdC+0LLQu9GP0LXQvNGB0Y8g0YEge3JlbGVhc2V9INC90LAge2N1cnJlbnRfcmVsZWFzZX0nKQogICAgICAgIGlmIGN1cnJlbnRfcmVsZWFzZSBhbmQgcmVsZWFzZSAhPSBjdXJyZW50X3JlbGVhc2U6CiAgICAgICAgICAgICMgdG9hc3QgPSAoZifQntCx0L3QvtCy0LvRj9C10LzRgdGPINGBIHtyZWxlYXNlfSDQvdCwIHtjdXJyZW50X3JlbGVhc2V9JykKICAgICAgICAgICAgIyBwYXNzCiAgICAgICAgICAgICMgaW1wb3J0IHZlcnNpb25fY29udHJvbAogICAgICAgICAgICAjIHJlc3VsdF9saXN0ID0gdmVyc2lvbl9jb250cm9sLnJ1bl9yZWxlYXNlcyhyZWxlYXNlLCBjdXJyZW50X3JlbGVhc2UpCiAgICAgICAgICAgICMgZm9yIGVsZW0gaW4gcmVzdWx0X2xpc3Q6CiAgICAgICAgICAgICMgICAgIGlmIG5vdCBlbGVtWydyZXN1bHQnXToKICAgICAgICAgICAgIyAgICAgICAgIHBhc3MKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0luc3RhbGxDb25maWd1cmF0aW9uJywgJycpCiAgICAgICAgICAgIHNlbGYucnNfc2V0dGluZ3MucHV0KCdSZWxlYXNlJywgY3VycmVudF9yZWxlYXNlLCBUcnVlKQogICAgICAgICAgICB0b2FzdCA9IGYn0JLRi9C/0L7Qu9C90LXQvdC+INC+0LHQvdC+0LLQu9C10L3QuNC1INC90LAg0LLQtdGA0YHQuNGOIHtjdXJyZW50X3JlbGVhc2V9JwoKICAgICAgICByc19kZWZhdWx0X3NldHRpbmdzID0gewogICAgICAgICAgICAnVGl0bGVUZXh0U2l6ZSc6IDE4LAogICAgICAgICAgICAndGl0bGVEb2NUeXBlQ2FyZFRleHRTaXplJzogMTgsCiAgICAgICAgICAgICdDYXJkVGl0bGVUZXh0U2l6ZSc6IDIwLAogICAgICAgICAgICAnQ2FyZERhdGVUZXh0U2l6ZSc6IDEwLAogICAgICAgICAgICAnQ2FyZFRleHRTaXplJzogMTUsCiAgICAgICAgICAgICdHb29kc0NhcmRUaXRsZVRleHRTaXplJzogMTgsCiAgICAgICAgICAgICdnb29kc1RleHRTaXplJzogMTgsCiAgICAgICAgICAgICdTZXJpZXNQcm9wZXJ0aWVzVGV4dFNpemUnOiAxNiwKICAgICAgICAgICAgJ0RvY1R5cGVDYXJkVGV4dFNpemUnOiAxNSwKICAgICAgICAgICAgJ3NpZ25hbF9udW0nOiA1LAogICAgICAgICAgICAndXNlX21hcmsnOiAnZmFsc2UnLAogICAgICAgICAgICAnYWRkX2lmX25vdF9pbl9wbGFuJzogJ2ZhbHNlJywKICAgICAgICAgICAgJ3BhdGgnOiAnJywKICAgICAgICAgICAgJ2RlbGV0ZV9maWxlcyc6ICdmYWxzZScsCiAgICAgICAgICAgICdzdWNjZXNzX3NpZ25hbCc6IDcsCiAgICAgICAgICAgICd3YXJuaW5nX3NpZ25hbCc6IDgsCiAgICAgICAgICAgICdlcnJvcl9zaWduYWwnOiA1LAogICAgICAgICAgICAnYWxsb3dfb3ZlcnNjYW4nOiAnZmFsc2UnLAogICAgICAgICAgICAncGF0aF90b19kYXRhYmFzZXMnOiAnLy9kYXRhL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvZGF0YWJhc2VzJywKICAgICAgICAgICAgJ3NxbGl0ZV9uYW1lJzogJ1NpbXBsZUtlZXAnLAogICAgICAgICAgICAnbG9nX25hbWUnOiAnbG9nLmpzb24nLAogICAgICAgICAgICAndGltZXJfaXNfZGlzYWJsZWQnOiBGYWxzZSwKICAgICAgICAgICAgJ2FsbG93X2ZhY3RfaW5wdXQnOiBGYWxzZQogICAgICAgIH0KCiAgICAgICAgZm9yIGssIHYgaW4gcnNfZGVmYXVsdF9zZXR0aW5ncy5pdGVtcygpOgogICAgICAgICAgICBpZiBzZWxmLnJzX3NldHRpbmdzLmdldChrKSBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5yc19zZXR0aW5ncy5wdXQoaywgdiwgVHJ1ZSkKCiAgICAgICAgc2VsZi5oYXNoX21hcFsiU1FMQ29ubmVjdERhdGFiYXNlIl0gPSAiU2ltcGxlS2VlcCIKICAgICAgICBzZWxmLmhhc2hfbWFwLnRvYXN0KHRvYXN0KQoKICAgIGRlZiBvbl9zcWxfZXJyb3Ioc2VsZik6CiAgICAgICAgc3FsX2Vycm9yID0gc2VsZi5oYXNoX21hcFsnU1FMRXJyb3InXQogICAgICAgIGlmIHNxbF9lcnJvcjoKICAgICAgICAgICAgc2VydmljZSA9IGRiX3NlcnZpY2VzLkRvY1NlcnZpY2UoKQogICAgICAgICAgICBzZXJ2aWNlLndyaXRlX2Vycm9yX29uX2xvZyhmJ1NRTF9FcnJvcjoge3NxbF9lcnJvcn0nKQoKICAgIGRlZiBfY3JlYXRlX3RhYmxlcyhzZWxmKToKICAgICAgICBzZXJ2aWNlID0gZGJfc2VydmljZXMuRGJDcmVhdG9yKCkKICAgICAgICBzZXJ2aWNlLmNyZWF0ZV90YWJsZXMoKQoKCiMgXl5eXl5eXl5eXl5eXl5eXl5eXl5eIE1haW4gZXZlbnRzIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl4KCmNsYXNzIFNjcmVlbnNGYWN0b3J5OgogICAgc2NyZWVucyA9IFtHb29kc1NlbGVjdFNjcmVlbiwKICAgICAgICBIdG1sVmlldywKICAgICAgICBUZW1wbGF0ZXNMaXN0LAogICAgICAgIEFkckRvY3NMaXN0U2NyZWVuLAogICAgICAgIEFkckRvY0RldGFpbHNTY3JlZW4sCiAgICAgICAgRmxvd1RpbGVzU2NyZWVuLAogICAgICAgIEZsb3dEb2NTY3JlZW4sCiAgICAgICAgRmxvd0RvY0RldGFpbHNTY3JlZW4sCiAgICAgICAgR3JvdXBTY2FuVGlsZXMsCiAgICAgICAgRG9jdW1lbnRzVGlsZXMsCiAgICAgICAgR3JvdXBTY2FuRG9jc0xpc3RTY3JlZW4sCiAgICAgICAgRG9jdW1lbnRzRG9jc0xpc3RTY3JlZW4sCiAgICAgICAgR3JvdXBTY2FuRG9jRGV0YWlsc1NjcmVlbiwKICAgICAgICBEb2N1bWVudHNEb2NEZXRhaWxTY3JlZW4sCiAgICAgICAgRXJyb3JMb2dTY3JlZW4sCiAgICAgICAgRGVidWdTZXR0aW5nc1NjcmVlbiwKICAgICAgICBIdHRwU2V0dGluZ3NTY3JlZW4sCiAgICAgICAgU2V0dGluZ3NTY3JlZW4sCiAgICAgICAgR29vZHNMaXN0U2NyZWVuLAogICAgICAgIFNlbGVjdEdvb2RzVHlwZSwKICAgICAgICBJdGVtQ2FyZCwKICAgICAgICBGb250U2l6ZVNldHRpbmdzU2NyZWVuLAogICAgICAgIEJhcmNvZGVUZXN0U2NyZWVuLAogICAgICAgIFNvdW5kU2V0dGluZ3MsCiAgICAgICAgR29vZHNCYWxhbmNlc0l0ZW1DYXJkLAogICAgICAgIFNlbGVjdFdILAogICAgICAgIEdvb2RzUHJpY2VzSXRlbUNhcmQsCiAgICAgICAgU2VsZWN0UHJpY2VUeXBlLAogICAgICAgIFNlbGVjdFByb3BlcnRpZXMsCiAgICAgICAgU2VsZWN0VW5pdCwKCgogICAgXQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBnZXRfc2NyZWVuX2NsYXNzKHNjcmVlbl9uYW1lPU5vbmUsIHByb2Nlc3M9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIGlmIG5vdCBzY3JlZW5fbmFtZToKICAgICAgICAgICAgc2NyZWVuX25hbWUgPSBrd2FyZ3NbJ2hhc2hfbWFwJ10uZ2V0X2N1cnJlbnRfc2NyZWVuKCkKICAgICAgICBpZiBub3QgcHJvY2VzczoKICAgICAgICAgICAgcHJvY2VzcyA9IGt3YXJnc1snaGFzaF9tYXAnXS5nZXRfY3VycmVudF9wcm9jZXNzKCkKCiAgICAgICAgZm9yIGl0ZW0gaW4gU2NyZWVuc0ZhY3Rvcnkuc2NyZWVuczoKICAgICAgICAgICAgaWYgZ2V0YXR0cihpdGVtLCAnc2NyZWVuX25hbWUnKSA9PSBzY3JlZW5fbmFtZSBhbmQgZ2V0YXR0cihpdGVtLCAncHJvY2Vzc19uYW1lJykgPT0gcHJvY2VzczoKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGNyZWF0ZV9zY3JlZW4oc2NyZWVuX25hbWU9Tm9uZSwgcHJvY2Vzcz1Ob25lLCAqKmt3YXJncyk6CiAgICAgICAgaWYgbm90IHNjcmVlbl9uYW1lOgogICAgICAgICAgICBzY3JlZW5fbmFtZSA9IGt3YXJnc1snaGFzaF9tYXAnXS5nZXRfY3VycmVudF9zY3JlZW4oKQogICAgICAgIGlmIG5vdCBwcm9jZXNzOgogICAgICAgICAgICBwcm9jZXNzID0ga3dhcmdzWydoYXNoX21hcCddLmdldF9jdXJyZW50X3Byb2Nlc3MoKQoKICAgICAgICBzY3JlZW5fY2xhc3MgPSBTY3JlZW5zRmFjdG9yeS5nZXRfc2NyZWVuX2NsYXNzKHNjcmVlbl9uYW1lLCBwcm9jZXNzKQogICAgICAgIHJldHVybiBzY3JlZW5fY2xhc3MoKiprd2FyZ3MpCgoKY2xhc3MgTW9ja1NjcmVlbihTY3JlZW4pOgogICAgZGVmIG9uX3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgb25faW5wdXQoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvbl9wb3N0X3N0YXJ0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgc2hvdyhzZWxmLCBhcmdzPU5vbmUpOgogICAgICAgIHBhc3MK"
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\ui_utils.py",
                "PyFileKey": "ui_utils",
                "PyFileData": "aW1wb3J0IGpzb24KaW1wb3J0IHJlCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgYXNkaWN0CmZyb20gdHlwaW5nIGltcG9ydCBDYWxsYWJsZSwgVW5pb24sIExpc3QsIERpY3QKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHdyYXBzCmltcG9ydCBzb2NrZXQKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQoKZnJvbSBqYXZhIGltcG9ydCBqY2xhc3MKZnJvbSB1aV9nbG9iYWwgaW1wb3J0IFJzX2RvYywgZmluZF9iYXJjb2RlX2luX2JhcmNvZGVfdGFibGUKZnJvbSBkYl9zZXJ2aWNlcyBpbXBvcnQgRG9jU2VydmljZSwgQmFyY29kZVNlcnZpY2UKCm5vQ2xhc3MgPSBqY2xhc3MoInJ1LnRyYXZlbGZvb2Quc2ltcGxlX3VpLk5vU1FMIikKcnNfc2V0dGluZ3MgPSBub0NsYXNzKCJyc19zZXR0aW5ncyIpCgoKY2xhc3MgSGFzaE1hcDoKICAgICIiIgogICAgICAgINCa0LvQsNGB0YEt0LTQtdC60L7RgNCw0YLQvtGAINC00LvRjyDRg9C00L7QsdC90L7QuSDRgNCw0LHQvtGC0Ysg0YEgaGFzaE1hcC4g0KLQsNC60LbQtSDQvNC+0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90YPRjiDQu9C+0LPQuNC60YMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGFzaF9tYXA9Tm9uZSwgZGVidWc6IGJvb2wgPSBGYWxzZSk6CiAgICAgICAgc2VsZi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgc2VsZi5kZWJ1Z19tb2RlID0gZGVidWcKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgZnVuYzogQ2FsbGFibGVbLi4uLCBOb25lXSk6CiAgICAgICAgQHdyYXBzKGZ1bmMpCiAgICAgICAgZGVmIHdyYXBwZXIoaGFzaE1hcCwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgc2VsZi5pbml0KGhhc2hNYXApCiAgICAgICAgICAgIGZ1bmMoc2VsZikKICAgICAgICAgICAgcmV0dXJuIGhhc2hNYXAKCiAgICAgICAgcmV0dXJuIHdyYXBwZXIKCiAgICBkZWYgaW5pdChzZWxmLCBoYXNoTWFwKToKICAgICAgICBzZWxmLmhhc2hfbWFwID0gaGFzaE1hcAoKICAgIGRlZiBmaW5pc2hfcHJvY2VzcyhzZWxmKToKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKQoKICAgIGRlZiBmaW5pc2hfcHJvY2Vzc19yZXN1bHQoc2VsZik6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ0ZpbmlzaFByb2Nlc3NSZXN1bHQnLCAnJykKCiAgICBkZWYgc2hvd19wcm9jZXNzX3Jlc3VsdChzZWxmLCBwcm9jZXNzLCBzY3JlZW4pOgogICAgICAgIGlmIHByb2Nlc3MgYW5kIHNjcmVlbjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1Nob3dQcm9jZXNzUmVzdWx0JywgZid7cHJvY2Vzc318e3NjcmVlbn0nKQoKICAgIGRlZiBzZXRfcmVzdWx0X2xpc3RlbmVyKHNlbGYsIGxpc3RlbmVyKToKICAgICAgICBpZiBsaXN0ZW5lciBhbmQgaXNpbnN0YW5jZShsaXN0ZW5lciwgc3RyKToKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ1NldFJlc3VsdExpc3RlbmVyJywgbGlzdGVuZXIpCgogICAgZGVmIHRvYXN0KHNlbGYsIHRleHQsIGFkZF90b19sb2c9RmFsc2UpOgogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KCd0b2FzdCcsIHN0cih0ZXh0KSkKICAgICAgICBpZiBhZGRfdG9fbG9nOgogICAgICAgICAgICBzZWxmLmVycm9yX2xvZyh0ZXh0KQoKICAgIGRlZiBub3RpZmljYXRpb24oc2VsZiwgdGV4dCwgdGl0bGU9Tm9uZSwgYWRkX3RvX2xvZz1GYWxzZSk6CiAgICAgICAgbm90aWZpY2F0aW9uX2lkID0gcnNfc2V0dGluZ3MuZ2V0KCJub3RpZmljYXRpb25faWQiKSArIDEgaWYgcnNfc2V0dGluZ3MuZ2V0KCJub3RpZmljYXRpb25faWQiKSBlbHNlIDEKICAgICAgICBpZiB0aXRsZSBpcyBOb25lOgogICAgICAgICAgICB0aXRsZSA9IHNlbGYuZ2V0X2N1cnJlbnRfc2NyZWVuKCkKCiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoCiAgICAgICAgICAgICJiYXNpY19ub3RpZmljYXRpb24iLAogICAgICAgICAgICBqc29uLmR1bXBzKFt7J251bWJlcic6IG5vdGlmaWNhdGlvbl9pZCwgJ3RpdGxlJzogc3RyKHRpdGxlKSwgJ21lc3NhZ2UnOiB0ZXh0fV0pCiAgICAgICAgKQoKICAgICAgICByc19zZXR0aW5ncy5wdXQoIm5vdGlmaWNhdGlvbl9pZCIsIG5vdGlmaWNhdGlvbl9pZCwgVHJ1ZSkKICAgICAgICBpZiBhZGRfdG9fbG9nOgogICAgICAgICAgICBzZWxmLmVycm9yX2xvZyh0ZXh0KQoKICAgIGRlZiBkZWJ1ZyhzZWxmLCB0ZXh0KToKICAgICAgICBpZiBzZWxmLmRlYnVnX21vZGU6CiAgICAgICAgICAgIHNlbGYudG9hc3QodGV4dCwgYWRkX3RvX2xvZz1UcnVlKQoKICAgIGRlZiByZWZyZXNoX3NjcmVlbihzZWxmKToKICAgICAgICBzZWxmLmhhc2hfbWFwLnB1dCgnUmVmcmVzaFNjcmVlbicsICcnKQoKICAgIGRlZiBydW5fZXZlbnQoc2VsZiwgbWV0aG9kX25hbWUpOgogICAgICAgIHNlbGZbJ1J1bkV2ZW50J10gPSBqc29uLmR1bXBzKHNlbGYuX2dldF9ldmVudChtZXRob2RfbmFtZSkpCgogICAgZGVmIHJ1bl9ldmVudF9hc3luYyhzZWxmLCBtZXRob2RfbmFtZSwgcG9zdF9leGVjdXRlX21ldGhvZD1Ob25lKToKICAgICAgICBydW5fZXZlbnQgPSBzZWxmLl9nZXRfZXZlbnQobWV0aG9kX25hbWUsICdydW5hc3luYycpCiAgICAgICAgaWYgcG9zdF9leGVjdXRlX21ldGhvZDoKICAgICAgICAgICAgcnVuX2V2ZW50WzBdWydwb3N0RXhlY3V0ZSddID0ganNvbi5kdW1wcyhzZWxmLl9nZXRfZXZlbnQocG9zdF9leGVjdXRlX21ldGhvZCkpCiAgICAgICAgc2VsZlsnUnVuRXZlbnQnXSA9IGpzb24uZHVtcHMocnVuX2V2ZW50KQoKICAgIGRlZiBydW5fZXZlbnRfcHJvZ3Jlc3Moc2VsZiwgbWV0aG9kX25hbWUpOgogICAgICAgIHNlbGZbJ1J1bkV2ZW50J10gPSBqc29uLmR1bXBzKHNlbGYuX2dldF9ldmVudChtZXRob2RfbmFtZSwgJ3J1bnByb2dyZXNzJykpCgogICAgZGVmIGJlZXAoc2VsZiwgdG9uZT0nJyk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoJ2JlZXAnLCBzdHIodG9uZSkpCgogICAgZGVmIHBsYXlzb3VuZChzZWxmLCBldmVudDogc3RyLCBzb3VuZF92YWw6IHN0ciA9ICcnKToKICAgICAgICBpZiBub3Qgc291bmRfdmFsOgogICAgICAgICAgICBzb3VuZCA9IHJzX3NldHRpbmdzLmdldChmJ3tldmVudH1fc2lnbmFsJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzb3VuZCA9IHNvdW5kX3ZhbAogICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KGYncGxheXNvdW5kX3tzb3VuZH0nLCAiIikKCiAgICBkZWYgX2dldF9ldmVudChzZWxmLCBtZXRob2RfbmFtZSwgYWN0aW9uPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIDpwYXJhbSBtZXRob2RfbmFtZTogaGFuZGxlcnMgbmFtZQogICAgICAgIDpwYXJhbSBhY3Rpb246IHJ1bnxydW5hc3luY3xydW5wcm9ncmVzcwoKICAgICAgICA6cmV0dXJuOiBldmVudCBkaWN0CiAgICAgICAgIiIiCgogICAgICAgIGV2dCA9IFt7CiAgICAgICAgICAgICdhY3Rpb24nOiBhY3Rpb24gaWYgYWN0aW9uIGVsc2UgJ3J1bicsCiAgICAgICAgICAgICd0eXBlJzogJ3B5dGhvbicsCiAgICAgICAgICAgICdtZXRob2QnOiBtZXRob2RfbmFtZSwKICAgICAgICB9XQoKICAgICAgICByZXR1cm4gZXZ0CgogICAgZGVmIGVycm9yX2xvZyhzZWxmLCBlcnJfZGF0YSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBlcnJfZGF0YSA9IGpzb24uZHVtcHMoZXJyX2RhdGEsIGVuc3VyZV9hc2NpaT1GYWxzZSwgaW5kZW50PTIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBlcnJfZGF0YSA9IHN0cihlcnJfZGF0YSkKCiAgICAgICAgcnNfc2V0dGluZ3MucHV0KCdlcnJvcl9sb2cnLCBlcnJfZGF0YSwgVHJ1ZSkKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbSk6CiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0KGl0ZW0sIEZhbHNlKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToKICAgICAgICBzZWxmLnB1dChrZXksIHZhbHVlLCBGYWxzZSkKCiAgICBkZWYgZ2V0KHNlbGYsIGl0ZW0sIGZyb21fanNvbj1GYWxzZSk6CiAgICAgICAgaWYgZnJvbV9qc29uOgogICAgICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhzZWxmLmhhc2hfbWFwLmdldChpdGVtKSkgaWYgc2VsZi5oYXNoX21hcC5nZXQoaXRlbSkgZWxzZSBOb25lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuaGFzaF9tYXAuZ2V0KGl0ZW0pCgogICAgZGVmIGdldF9qc29uKHNlbGYsIGl0ZW0pOgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKHNlbGYuaGFzaF9tYXAuZ2V0KGl0ZW0pKSBpZiBzZWxmLmhhc2hfbWFwLmdldChpdGVtKSBlbHNlIE5vbmUKCiAgICBkZWYgZ2V0X2Jvb2woc2VsZiwgaXRlbSk6CiAgICAgICAgdmFsdWUgPSBzdHIoc2VsZi5oYXNoX21hcC5nZXQoaXRlbSkpLmxvd2VyKCkgbm90IGluICgnMCcsICdmYWxzZScsICdub25lJykKICAgICAgICByZXR1cm4gdmFsdWUKCiAgICBkZWYgcHV0KHNlbGYsIGtleSwgdmFsdWU6IFVuaW9uW3N0ciwgTGlzdCwgRGljdCwgYm9vbF0gPSAnJywgdG9fanNvbj1GYWxzZSk6CiAgICAgICAgaWYgdG9fanNvbjoKICAgICAgICAgICAgc2VsZi5oYXNoX21hcC5wdXQoa2V5LCBqc29uLmR1bXBzKHZhbHVlKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBib29sKToKICAgICAgICAgICAgICAgIHZhbHVlID0gc3RyKHZhbHVlKS5sb3dlcigpCiAgICAgICAgICAgIHNlbGYuaGFzaF9tYXAucHV0KGtleSwgc3RyKHZhbHVlKSkKCiAgICBkZWYgcHV0X2RhdGEoc2VsZiwgZGF0YTogZGljdCk6CiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGF0YS5pdGVtcygpOgogICAgICAgICAgICBzZWxmW2tleV0gPSB2YWx1ZQoKICAgIGRlZiBjb250YWluc0tleShzZWxmLCBrZXkpOgogICAgICAgIHJldHVybiBzZWxmLmhhc2hfbWFwLmNvbnRhaW5zS2V5KGtleSkKCiAgICBkZWYgcmVtb3ZlKHNlbGYsIGtleSk6CiAgICAgICAgc2VsZi5oYXNoX21hcC5yZW1vdmUoa2V5KQoKICAgIGRlZiBkZWxldGUoc2VsZiwga2V5KToKICAgICAgICBzZWxmLmhhc2hfbWFwLnJlbW92ZShrZXkpCgogICAgZGVmIGV4cG9ydChzZWxmKSAtPiBsaXN0OgogICAgICAgIHJldHVybiBzZWxmLmhhc2hfbWFwLmV4cG9ydCgpCgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoc2VsZi5leHBvcnQoKSwgaW5kZW50PTQsIGVuc3VyZV9hc2NpaT1GYWxzZSkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkKCiAgICBkZWYgc2hvd19zY3JlZW4oc2VsZiwgbmFtZSwgZGF0YT1Ob25lKToKICAgICAgICBzZWxmLnB1dCgnU2hvd1NjcmVlbicsIG5hbWUpCiAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgc2VsZi5wdXRfZGF0YShkYXRhKQoKICAgIGRlZiBzaG93X2RpYWxvZyhzZWxmLCBsaXN0ZW5lciwgdGl0bGU9JycsIGJ1dHRvbnM9Tm9uZSk6CiAgICAgICAgc2VsZi5wdXQoIlNob3dEaWFsb2ciLCBsaXN0ZW5lcikKCiAgICAgICAgaWYgdGl0bGUgb3IgYnV0dG9uczoKICAgICAgICAgICAgZGlhbG9nX3N0eWxlID0gewogICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUgb3IgbGlzdGVuZXIsCiAgICAgICAgICAgICAgICAneWVzJzogJ9Ce0LonLAogICAgICAgICAgICAgICAgJ25vJzogJ9Ce0YLQvNC10L3QsCcKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiBidXR0b25zIGFuZCBsZW4oYnV0dG9ucykgPiAxOgogICAgICAgICAgICAgICAgZGlhbG9nX3N0eWxlWyd5ZXMnXSA9IGJ1dHRvbnNbMF0KICAgICAgICAgICAgICAgIGRpYWxvZ19zdHlsZVsnbm8nXSA9IGJ1dHRvbnNbMV0KCiAgICAgICAgICAgIHNlbGYucHV0KCdTaG93RGlhbG9nU3R5bGUnLCBkaWFsb2dfc3R5bGUpCgogICAgZGVmIGdldF9jdXJyZW50X3NjcmVlbihzZWxmKToKCiAgICAgICAgcmV0dXJuIHNlbGZbJ2N1cnJlbnRfc2NyZWVuX25hbWUnXSBpZiBzZWxmLmNvbnRhaW5zS2V5KCdjdXJyZW50X3NjcmVlbl9uYW1lJykgZWxzZSAnJwoKICAgIGRlZiBnZXRfY3VycmVudF9wcm9jZXNzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmWydjdXJyZW50X3Byb2Nlc3NfbmFtZSddCgogICAgZGVmIHNldF90aXRsZShzZWxmLCB0aXRsZSk6CiAgICAgICAgc2VsZlsnU2V0VGl0bGUnXSA9IHRpdGxlCgogICAgZGVmIHJ1bl9weV90aHJlYWRfcHJvZ3Jlc3Moc2VsZiwgaGFuZGxlcnNfbmFtZTogc3RyKToKICAgICAgICAiIiIKICAgICAgICDQl9Cw0L/Rg9GB0LrQsNC10YIg0LDRgdC40L3RhdGA0L7QvdC90L7QtSDRhNC+0L3QvtCy0L7QtSDQstGL0L/QvtC70L3QtdC90LjQtSDRgdC60YDQuNC/0YLQsCBjINCx0LvQvtC60LjRgNGD0Y7RidC40Lwg0L/RgNC+0LPRgNC10YHRgS3QsdCw0YDQvtC8LCDQutC+0YLQvtGA0YvQuSDQsdC70L7QutC40YDRg9C10YIgVUkt0L/QvtGC0L7Qui4KICAgICAgICDQkiDQutCw0YfQtdGB0YLQstC1INCw0YDQs9GD0LzQtdC90YLQsCAtINC40LzRjyDRhNGD0L3QutGG0LjQuC3RhdC10L3QtNC70LXRgNCwLgogICAgICAgICIiIgoKICAgICAgICBzZWxmWydSdW5QeVRocmVhZFByb2dyZXNzRGVmJ10gPSBoYW5kbGVyc19uYW1lCgogICAgZGVmIHNxbF9leGVjKHNlbGYsIHF1ZXJ5LCBwYXJhbXM9JycpOgogICAgICAgIHNlbGYuX3B1dF9zcWwoJ1NRTEV4ZWMnLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBzcWxfZXhlY19tYW55KHNlbGYsIHF1ZXJ5LCBwYXJhbXM9Tm9uZSk6CiAgICAgICAgcGFyYW1zID0gcGFyYW1zIG9yIFtdCiAgICAgICAgc2VsZi5fcHV0X3NxbCgnU1FMRXhlY01hbnknLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBzcWxfcXVlcnkoc2VsZiwgcXVlcnksIHBhcmFtcz0nJyk6CiAgICAgICAgc2VsZi5fcHV0X3NxbCgnU1FMUXVlcnknLCBxdWVyeSwgcGFyYW1zKQoKICAgIGRlZiBfcHV0X3NxbChzZWxmLCBzcWxfdHlwZSwgcXVlcnksIHBhcmFtcyk6CiAgICAgICAgc2VsZi5wdXQoCiAgICAgICAgICAgIHNxbF90eXBlLAogICAgICAgICAgICB7InF1ZXJ5IjogcXVlcnksICdwYXJhbXMnOiBwYXJhbXN9LAogICAgICAgICAgICB0b19qc29uPVRydWUKICAgICAgICApCgoKY2xhc3MgUnNEb2MoUnNfZG9jKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpZF9kb2MpOgogICAgICAgIHNlbGYuaWRfZG9jID0gaWRfZG9jCgogICAgZGVmIHVwZGF0ZV9kb2Nfc3RyKHNlbGYsIHByaWNlPTApOgogICAgICAgIHBhc3MKCiAgICBkZWYgZGVsZXRlX2RvYyhzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIGNsZWFyX2JhcmNvZGVfZGF0YShzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG1hcmtfZm9yX3VwbG9hZChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIG1hcmtfdmVyaWZpZWQoc2VsZiwga2V5KToKICAgICAgICBzdXBlcigpLm1hcmtfdmVyaWZpZWQoa2V5KQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fdGFibGUoc2VsZiwgc2VhcmNoX3ZhbHVlLCBmdW5jX2NvbXBhcmVkPSc9PycpIC0+IGRpY3Q6CiAgICAgICAgcmVzdWx0ID0gc3VwZXIoKS5maW5kX2JhcmNvZGVfaW5fdGFibGUoc2VhcmNoX3ZhbHVlLCBmdW5jX2NvbXBhcmVkKQogICAgICAgIGlmIHJlc3VsdDoKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFswXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiB7fQoKICAgIGRlZiBmaW5kX2JhcmNvZGVfaW5fbWFya190YWJsZShzZWxmLCBzZWFyY2hfdmFsdWU6IHN0ciwgZnVuY19jb21wYXJlZD0nPT8nKToKICAgICAgICBwYXNzCgogICAgZGVmIHVwZGF0ZV9kb2NfdGFibGVfZGF0YShzZWxmLCBlbGVtX2Zvcl9hZGQ6IGRpY3QsIHF0dHk9MSwgdXNlcl90bXo9MCk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBhZGRfbWFya2VkX2NvZGVzX2luX2RvYyhzZWxmLCBiYXJjb2RlX2luZm8pOgogICAgICAgIHBhc3MKCiAgICBkZWYgYWRkX25ld19iYXJjb2RlX2luX2RvY19iYXJjb2Rlc190YWJsZShzZWxmLCBlbCwgYmFyY29kZV9pbmZvKToKICAgICAgICBwYXNzCgogICAgZGVmIHByb2Nlc3NfdGhlX2JhcmNvZGUoCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIGJhcmNvZGUsCiAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuPUZhbHNlLAogICAgICAgICAgICBoYXZlX3plcm9fcGxhbj1GYWxzZSwKICAgICAgICAgICAgY29udHJvbD1GYWxzZSwKICAgICAgICAgICAgaGF2ZV9tYXJrX3BsYW49RmFsc2UsCiAgICAgICAgICAgIGVsZW09Tm9uZSwKICAgICAgICAgICAgdXNlX21hcmtfc2V0dGluZz0nZmFsc2UnLAogICAgICAgICAgICB1c2VyX3Rtej0wKToKCiAgICAgICAgUnNfZG9jLmlkX2RvYyA9IHNlbGYuaWRfZG9jCiAgICAgICAgcmVzdWx0ID0gUnNfZG9jLnByb2Nlc3NfdGhlX2JhcmNvZGUoCiAgICAgICAgICAgIFJzX2RvYywgYmFyY29kZSwgaGF2ZV9xdHR5X3BsYW4sIGhhdmVfemVyb19wbGFuLCBjb250cm9sLCBoYXZlX21hcmtfcGxhbiwgZWxlbSwgdXNlX21hcmtfc2V0dGluZywgdXNlcl90bXoKICAgICAgICApCiAgICAgICAgaWYgbm90IHJlc3VsdC5nZXQoJ0Vycm9yJyk6CiAgICAgICAgICAgIHNlcnZpY2UgPSBEb2NTZXJ2aWNlKHNlbGYuaWRfZG9jKQogICAgICAgICAgICBzZXJ2aWNlLnNldF9kb2NfdmFsdWUoJ3NlbnQnLCAwKQoKICAgICAgICAgICAgcmVzID0gc2VsZi5maW5kX2JhcmNvZGVfaW5fdGFibGUoYmFyY29kZSkKICAgICAgICAgICAgaWYgcmVzLmdldCgnaWQnKToKICAgICAgICAgICAgICAgIHJlc3VsdFsna2V5J10gPSByZXNbJ2lkJ10KCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKICAgIGRlZiBhZGQoc2VsZiwgYXJncyk6CiAgICAgICAgcGFzcwoKICAgIGRlZiBnZXRfbmV3X2lkKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZmluZF9iYXJjb2RlX2luX2JhcmNvZGVfdGFibGUoc2VsZiwgYmFyY29kZSk6CiAgICAgICAgcmV0dXJuIGZpbmRfYmFyY29kZV9pbl9iYXJjb2RlX3RhYmxlKGJhcmNvZGUpCgoKY2xhc3MgQmFyY29kZVdvcmtlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpZF9kb2MsICoqa3dhcmdzKToKICAgICAgICBzZWxmLmlkX2RvYyA9IGlkX2RvYwogICAgICAgIHNlbGYuY29udHJvbCA9IGt3YXJncy5nZXQoJ2NvbnRyb2wnLCBGYWxzZSkKICAgICAgICBzZWxmLmhhdmVfbWFya19wbGFuID0ga3dhcmdzLmdldCgnaGF2ZV9tYXJrX3BsYW4nLCBGYWxzZSkKICAgICAgICBzZWxmLmhhdmVfcXR0eV9wbGFuID0ga3dhcmdzLmdldCgnaGF2ZV9xdHR5X3BsYW4nLCBGYWxzZSkKICAgICAgICBzZWxmLmhhdmVfemVyb19wbGFuID0ga3dhcmdzLmdldCgnaGF2ZV96ZXJvX3BsYW4nLCBGYWxzZSkKICAgICAgICBzZWxmLnVzZV9zY2FubmluZ19xdWV1ZSA9IGt3YXJncy5nZXQoJ3VzZV9zY2FubmluZ19xdWV1ZScsIEZhbHNlKQogICAgICAgIHNlbGYuYmFyY29kZV9pbmZvID0gTm9uZQogICAgICAgIHNlbGYuZG9jdW1lbnRfcm93ID0gTm9uZQogICAgICAgIHNlbGYuZGJfc2VydmljZSA9IEJhcmNvZGVTZXJ2aWNlKCkKICAgICAgICBzZWxmLnByb2Nlc3NfcmVzdWx0ID0gc2VsZi5Qcm9jZXNzVGhlQmFyY29kZVJlc3VsdCgpCiAgICAgICAgc2VsZi51c2VyX3RteiA9IDAKICAgICAgICBzZWxmLmJhcmNvZGVfZGF0YSA9IHt9CiAgICAgICAgc2VsZi5tYXJrX3VwZGF0ZV9kYXRhID0ge30KICAgICAgICBzZWxmLmRvY3NfdGFibGVfdXBkYXRlX2RhdGEgPSB7fQogICAgICAgIHNlbGYucXVldWVfdXBkYXRlX2RhdGEgPSB7fQoKICAgIGRlZiBwcm9jZXNzX3RoZV9iYXJjb2RlKHNlbGYsIGJhcmNvZGUpOgogICAgICAgIHNlbGYucHJvY2Vzc19yZXN1bHQuYmFyY29kZSA9IGJhcmNvZGUKICAgICAgICBzZWxmLmJhcmNvZGVfaW5mbyA9IEJhcmNvZGVQYXJzZXIoYmFyY29kZSkucGFyc2UoYXNfZGljdD1GYWxzZSkKCiAgICAgICAgaWYgc2VsZi5iYXJjb2RlX2luZm8uZXJyb3I6CiAgICAgICAgICAgIHNlbGYuX3NldF9wcm9jZXNzX3Jlc3VsdF9pbmZvKCdpbnZhbGlkX2JhcmNvZGUnKQogICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9jZXNzX3Jlc3VsdAoKICAgICAgICBzZWxmLmJhcmNvZGVfZGF0YSA9IHNlbGYuX2dldF9iYXJjb2RlX2RhdGEoKQoKICAgICAgICBpZiBzZWxmLmJhcmNvZGVfZGF0YToKICAgICAgICAgICAgc2VsZi5jaGVja19iYXJjb2RlKCkKICAgICAgICAgICAgc2VsZi51cGRhdGVfZG9jdW1lbnRfYmFyY29kZV9kYXRhKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9zZXRfcHJvY2Vzc19yZXN1bHRfaW5mbygnbm90X2ZvdW5kJykKCiAgICAgICAgcmV0dXJuIHNlbGYucHJvY2Vzc19yZXN1bHQKCiAgICBkZWYgX2dldF9iYXJjb2RlX2RhdGEoc2VsZik6CiAgICAgICAgYmFyY29kZV9kYXRhID0gc2VsZi5kYl9zZXJ2aWNlLmdldF9iYXJjb2RlX2RhdGEoc2VsZi5iYXJjb2RlX2luZm8sIHNlbGYuaWRfZG9jKQogICAgICAgIHJldHVybiBiYXJjb2RlX2RhdGEgb3Ige30KCgogICAgZGVmIGNoZWNrX2JhcmNvZGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5wcm9jZXNzX3Jlc3VsdC5lcnJvcjoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIHNlbGYuX3VzZV9tYXJrKCk6CiAgICAgICAgICAgIHNlbGYuX2NoZWNrX21hcmtfaW5fZG9jdW1lbnQoKQoKICAgICAgICBzZWxmLl9jaGVja19iYXJjb2RlX2luX2RvY3VtZW50KCkKCiAgICBkZWYgX2NoZWNrX21hcmtfaW5fZG9jdW1lbnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5iYXJjb2RlX2luZm8uc2NoZW1lID09ICdHUzEnOgogICAgICAgICAgICBpZiBzZWxmLmJhcmNvZGVfZGF0YVsnbWFya19pZCddOgogICAgICAgICAgICAgICAgaWYgc2VsZi5iYXJjb2RlX2RhdGFbJ2FwcHJvdmVkJ10gPT0gJzEnOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3NldF9wcm9jZXNzX3Jlc3VsdF9pbmZvKCdtYXJrX2FscmVhZHlfc2Nhbm5lZCcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2luc2VydF9tYXJrX2RhdGEoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgc2VsZi5oYXZlX21hcmtfcGxhbiBhbmQgc2VsZi5jb250cm9sOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3NldF9wcm9jZXNzX3Jlc3VsdF9pbmZvKCdtYXJrX25vdF9mb3VuZCcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2luc2VydF9tYXJrX2RhdGEoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX3NldF9wcm9jZXNzX3Jlc3VsdF9pbmZvKCdub3RfdmFsaWRfYmFyY29kZScpCgogICAgZGVmIF9jaGVja19iYXJjb2RlX2luX2RvY3VtZW50KHNlbGYpOgogICAgICAgIGlmIHNlbGYucHJvY2Vzc19yZXN1bHQuZXJyb3I6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBuZXdfcXR0eSA9IHNlbGYuYmFyY29kZV9kYXRhWydxdHR5J10gKyBzZWxmLmJhcmNvZGVfZGF0YVsncmF0aW8nXQogICAgICAgIGlmIHNlbGYuYmFyY29kZV9kYXRhWydyb3dfa2V5J106CiAgICAgICAgICAgIGlmIHNlbGYuaGF2ZV9xdHR5X3BsYW4gYW5kIHNlbGYuYmFyY29kZV9kYXRhWydxdHR5X3BsYW4nXSA+IG5ld19xdHR5OgogICAgICAgICAgICAgICAgc2VsZi5fc2V0X3Byb2Nlc3NfcmVzdWx0X2luZm8oJ3F1YW50aXR5X3BsYW5fcmVhY2hlZCcpCgogICAgICAgIGVsaWYgc2VsZi5oYXZlX3plcm9fcGxhbiBhbmQgc2VsZi5jb250cm9sOgogICAgICAgICAgICBzZWxmLl9zZXRfcHJvY2Vzc19yZXN1bHRfaW5mbygnemVyb19wbGFuX2Vycm9yJykKCiAgICAgICAgaWYgbm90IHNlbGYucHJvY2Vzc19yZXN1bHQuZXJyb3I6CiAgICAgICAgICAgIGlmIHNlbGYudXNlX3NjYW5uaW5nX3F1ZXVlOgogICAgICAgICAgICAgICAgc2VsZi5faW5zZXJ0X3F1ZXVlX2RhdGEobmV3X3F0dHkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLl9pbnNlcnRfZG9jX3RhYmxlX2RhdGEobmV3X3F0dHkpCgoKICAgIGRlZiBfaW5zZXJ0X21hcmtfZGF0YShzZWxmKToKICAgICAgICBzZWxmLm1hcmtfdXBkYXRlX2RhdGEgPSB7CiAgICAgICAgICAgICdpZCc6IHNlbGYuYmFyY29kZV9kYXRhWydtYXJrX2lkJ10sCiAgICAgICAgICAgICdpZF9kb2MnOiBzZWxmLmlkX2RvYywKICAgICAgICAgICAgJ2lkX2dvb2QnOiBzZWxmLmJhcmNvZGVfZGF0YVsnaWRfZ29vZCddLAogICAgICAgICAgICAnaWRfcHJvcGVydHknOiBzZWxmLmJhcmNvZGVfZGF0YVsnaWRfcHJvcGVydHknXSwKICAgICAgICAgICAgJ2lkX3Nlcmllcyc6IHNlbGYuYmFyY29kZV9kYXRhWydpZF9zZXJpZXMnXSwKICAgICAgICAgICAgJ2lkX3VuaXQnOiBzZWxmLmJhcmNvZGVfZGF0YVsnaWRfdW5pdCddLAogICAgICAgICAgICAnYmFyY29kZV9mcm9tX3NjYW5uZXInOiBzZWxmLmJhcmNvZGVfaW5mby5iYXJjb2RlLAogICAgICAgICAgICAnYXBwcm92ZWQnOiAnMScsCiAgICAgICAgICAgICdndGluJzogc2VsZi5iYXJjb2RlX2luZm8uZ3RpbiwKICAgICAgICAgICAgJ3Nlcmllcyc6IHNlbGYuYmFyY29kZV9pbmZvLnNlcmlhbAogICAgICAgIH0KCiAgICBkZWYgX2luc2VydF9kb2NfdGFibGVfZGF0YShzZWxmLCBxdHkpOgoKICAgICAgICBzZWxmLmRvY3NfdGFibGVfdXBkYXRlX2RhdGEgPSB7CiAgICAgICAgICAgICdpZCc6IHNlbGYuYmFyY29kZV9kYXRhWydyb3dfa2V5J10sCiAgICAgICAgICAgICdpZF9kb2MnOiBzZWxmLmlkX2RvYywKICAgICAgICAgICAgJ2lkX2dvb2QnOiBzZWxmLmJhcmNvZGVfZGF0YVsnaWRfZ29vZCddLAogICAgICAgICAgICAnaWRfcHJvcGVydGllcyc6IHNlbGYuYmFyY29kZV9kYXRhWydpZF9wcm9wZXJ0eSddLAogICAgICAgICAgICAnaWRfc2VyaWVzJzogc2VsZi5iYXJjb2RlX2RhdGFbJ2lkX3NlcmllcyddLAogICAgICAgICAgICAnaWRfdW5pdCc6IHNlbGYuYmFyY29kZV9kYXRhWydpZF91bml0J10sCiAgICAgICAgICAgICdxdHR5JzogcXR5LAogICAgICAgICAgICAncXR0eV9wbGFuJzogc2VsZi5iYXJjb2RlX2RhdGFbJ3F0dHlfcGxhbiddLAogICAgICAgICAgICAnbGFzdF91cGRhdGVkJzogKGRhdGV0aW1lLm5vdygpIC0gdGltZWRlbHRhKGhvdXJzPXNlbGYudXNlcl90bXopKS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKSwKICAgICAgICAgICAgJ2lkX2NlbGwnOiAnJywKICAgICAgICB9CgogICAgZGVmIF9pbnNlcnRfcXVldWVfZGF0YShzZWxmLCBxdHkpOgogICAgICAgIHNlbGYucXVldWVfdXBkYXRlX2RhdGEgPSB7CiAgICAgICAgICAgICJpZF9kb2MiOiBzZWxmLmlkX2RvYywKICAgICAgICAgICAgImlkX2dvb2QiOiBzZWxmLmJhcmNvZGVfZGF0YVsnaWRfZ29vZCddLAogICAgICAgICAgICAiaWRfcHJvcGVydGllcyI6IHNlbGYuYmFyY29kZV9kYXRhWydpZF9wcm9wZXJ0eSddLAogICAgICAgICAgICAiaWRfc2VyaWVzIjogc2VsZi5iYXJjb2RlX2RhdGFbJ2lkX3NlcmllcyddLAogICAgICAgICAgICAiaWRfdW5pdCI6IHNlbGYuYmFyY29kZV9kYXRhWydpZF91bml0J10sCiAgICAgICAgICAgICJpZF9jZWxsIjogJycsCiAgICAgICAgICAgICJkX3F0dHkiOiBzZWxmLmJhcmNvZGVfZGF0YVsncmF0aW8nXSwKICAgICAgICAgICAgJ3Jvd19rZXknOiBzZWxmLmJhcmNvZGVfZGF0YVsncm93X2tleSddLAogICAgICAgICAgICAnc2VudCc6IEZhbHNlCiAgICAgICAgfQoKICAgIGRlZiB1cGRhdGVfZG9jdW1lbnRfYmFyY29kZV9kYXRhKHNlbGYpOgogICAgICAgIGlmIHNlbGYucHJvY2Vzc19yZXN1bHQuZXJyb3I6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBzZWxmLm1hcmtfdXBkYXRlX2RhdGE6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgaWYgc2VsZi5kb2NzX3RhYmxlX3VwZGF0ZV9kYXRhOgogICAgICAgICAgICBwYXNzCgogICAgICAgIGlmIHNlbGYucXVldWVfdXBkYXRlX2RhdGE6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgaWYgc2VsZi5fdXNlX21hcmsoKToKICAgICAgICAgICAgc2VsZi5fc2V0X3Byb2Nlc3NfcmVzdWx0X2luZm8oJ3N1Y2Nlc3NfbWFyaycpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fc2V0X3Byb2Nlc3NfcmVzdWx0X2luZm8oJ3N1Y2Nlc3NfYmFyY29kZScpCgogICAgZGVmIF91c2VfbWFyayhzZWxmKToKICAgICAgICByZXR1cm4gcnNfc2V0dGluZ3MuZ2V0KCd1c2VfbWFyaycpID09ICd0cnVlJyBhbmQgc2VsZi5iYXJjb2RlX2RhdGFbJ3VzZV9tYXJrJ10KCiAgICBkZWYgX3NldF9wcm9jZXNzX3Jlc3VsdF9pbmZvKHNlbGYsIGluZm9fa2V5KToKICAgICAgICByYXRpbyA9IGdldGF0dHIoc2VsZi5iYXJjb2RlX2RhdGEsICdyYXRpbycsIDApCgogICAgICAgIGluZm9fZGF0YSA9IHsKICAgICAgICAgICAgJ2ludmFsaWRfYmFyY29kZSc6IHsKICAgICAgICAgICAgICAgICdlcnJvcic6ICdJbnZhbGlkIGJhcmNvZGUnLAogICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ9Cd0LXQstC10YDQvdGL0Lkg0YjRgtGA0LjRhdC60L7QtCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdub3RfZm91bmQnOiB7CiAgICAgICAgICAgICAgICAnZXJyb3InOiAnTm90IGZvdW5kJywKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6ICfQqNGC0YDQuNGF0LrQvtC0INC90LUg0L3QsNC50LTQtdC9INCyINCx0LDQt9C1JywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ21hcmtfbm90X2ZvdW5kJzogewogICAgICAgICAgICAgICAgJ2Vycm9yJzogJ05vdCBmb3VuZCcsCiAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAn0JzQsNGA0LrQsCDQvdC1INC90LDQudC00LXQvdCwINCyINC00L7QutGD0LzQtdC90YLQtScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdub3RfdmFsaWRfYmFyY29kZSc6IHsKICAgICAgICAgICAgICAgICdlcnJvcic6ICdOb3QgdmFsaWQgYmFyY29kZScsCiAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAn0KLQvtCy0LDRgCDQv9C+0LTQu9C10LbQuNGCINC80LDRgNC60LjRgNC+0LLQutC1LCDQvtGC0YHQutCw0L3QuNGA0L7QstCw0L0g0L3QtdCy0LXRgNC90YvQuSDRiNGC0YDQuNGF0LrQvtC0INC80LDRgNC60LjRgNC+0LLQutC4JywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ21hcmtfYWxyZWFkeV9zY2FubmVkJzogewogICAgICAgICAgICAgICAgJ2Vycm9yJzogJ0FscmVhZHkgc2Nhbm5lZCcsCiAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAn0KLQsNC60LDRjyDQvNCw0YDQutCwINGD0LbQtSDQsdGL0LvQsCDQvtGC0YHQutCw0L3QuNGA0L7QstCw0L3QsCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICd6ZXJvX3BsYW5fZXJyb3InOiB7CiAgICAgICAgICAgICAgICAnZXJyb3InOiAnWmVybyBwbGFuIGVycm9yJywKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6ICfQkiDQtNCw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RgiDQvdC10LvRjNC30Y8g0LTQvtCx0LDQstC40YLRjCDRgtC+0LLQsNGAINC90LUg0LjQtyDRgdC/0LjRgdC60LAnLAogICAgICAgICAgICB9LAogICAgICAgICAgICAncXVhbnRpdHlfcGxhbl9yZWFjaGVkJzogewogICAgICAgICAgICAgICAgJ2Vycm9yJzogJ1F1YW50aXR5IHBsYW4gcmVhY2hlZCcsCiAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAn0JrQvtC70LjRh9C10YHRgtCy0L4g0L/Qu9Cw0L0g0LHRg9C00LXRgiDQv9GA0LXQstGL0YjQtdC90L4g0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4IHt9INC10LTQuNC90LjRhiDRgtC+0LLQsNGA0LAnLmZvcm1hdChyYXRpbyksCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdzdWNjZXNzX2JhcmNvZGUnOiB7CiAgICAgICAgICAgICAgICAnZXJyb3InOiAnJywKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6ICfQotC+0LLQsNGAINC00L7QsdCw0LLQu9C10L0g0LIg0LTQvtC60YPQvNC10L3RgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ3N1Y2Nlc3NfbWFyayc6IHsKICAgICAgICAgICAgICAgICdlcnJvcic6ICcnLAogICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ9Cc0LDRgNC60LAg0LTQvtCx0LDQstC70LXQvdCwINCyINC00L7QutGD0LzQtdC90YInCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIGluZm9fZGF0YS5nZXQoaW5mb19rZXkpOgogICAgICAgICAgICBzZWxmLnByb2Nlc3NfcmVzdWx0LmVycm9yID0gaW5mb19kYXRhW2luZm9fa2V5XVsnZXJyb3InXQogICAgICAgICAgICBzZWxmLnByb2Nlc3NfcmVzdWx0LmRlc2NyaXB0aW9uID0gaW5mb19kYXRhW2luZm9fa2V5XVsnZGVzY3JpcHRpb24nXQogICAgICAgICAgICBzZWxmLnByb2Nlc3NfcmVzdWx0LnJvd19rZXkgPSBzZWxmLmJhcmNvZGVfZGF0YS5nZXQoJ3Jvd19rZXknLCAwKQoKICAgIGRlZiBwYXJzZShzZWxmLCBiYXJjb2RlOiBzdHIpOgogICAgICAgIHJldHVybiBCYXJjb2RlUGFyc2VyKGJhcmNvZGUpLnBhcnNlKCkKICAgICAgICAjIHJldHVybiB7J1NDSEVNRSc6ICdFQU4xMycsICdCQVJDT0RFJzogYmFyY29kZSwgJ0dUSU4nOiBiYXJjb2RlLCAnU0VSSUFMJzogJyd9CgogICAgQGRhdGFjbGFzcwogICAgY2xhc3MgUHJvY2Vzc1RoZUJhcmNvZGVSZXN1bHQ6CiAgICAgICAgZXJyb3I6IHN0ciA9ICcnCiAgICAgICAgZGVzY3JpcHRpb246IHN0ciA9ICcnCiAgICAgICAgYmFyY29kZTogc3RyID0gJycKICAgICAgICByb3dfa2V5OiBzdHIgPSAnJwoKCmNsYXNzIEJhcmNvZGVQYXJzZXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFyY29kZSk6CiAgICAgICAgc2VsZi5iYXJjb2RlID0gYmFyY29kZQogICAgICAgIHNlbGYuYmFyY29kZV9pbmZvID0gQmFyY29kZVBhcnNlci5CYXJjb2RlSW5mbyhiYXJjb2RlPWJhcmNvZGUpCiAgICAgICAgc2VsZi5tYWNyb18wNSA9IGYnWyk+e2NocigzMCl9MDUnCiAgICAgICAgc2VsZi5tYWNyb18wNiA9IGYnWyk+e2NocigzMCl9MDYnCiAgICAgICAgc2VsZi5nczFfc2VwYXJhdG9yID0gY2hyKDI5KQogICAgICAgIHNlbGYuaWRlbnRpZmllciA9ICddZDInCgogICAgZGVmIHBhcnNlKHNlbGYsIGFzX2RpY3Q9VHJ1ZSk6CiAgICAgICAgaWYgc2VsZi5pc192YWxpZF9lYW4xMyhzZWxmLmJhcmNvZGUpOgogICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5zY2hlbWUgPSAnRUFOMTMnCiAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLmd0aW4gPSBzZWxmLmJhcmNvZGUKCiAgICAgICAgZWxpZiBsZW4oc2VsZi5iYXJjb2RlKSA9PSAyOToKICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8uc2NoZW1lID0gJ0dTMScKICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8uZ3RpbiA9IHNlbGYuYmFyY29kZVswOjE0XQogICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5zZXJpYWwgPSBzZWxmLmJhcmNvZGVbMTQ6MjFdCiAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLm1yYyA9IHNlbGYuYmFyY29kZVsyMToyNV0KICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8uY2hlY2sgPSBzZWxmLmJhcmNvZGVbMjU6MjldCgogICAgICAgIGVsaWYgc2VsZi5nczFfc2VwYXJhdG9yIGluIHNlbGYuYmFyY29kZSBvciAnPEdTPicgaW4gc2VsZi5iYXJjb2RlOgogICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5zY2hlbWUgPSAnR1MxJwogICAgICAgICAgICBzZWxmLmNoZWNrX2RhdGFtYXRyaXgoc2VsZi5iYXJjb2RlKQoKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5zY2hlbWUgPSAnVU5LTk9XTicKICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8uZ3RpbiA9IHNlbGYuYmFyY29kZQoKICAgICAgICBpZiBhc19kaWN0OgogICAgICAgICAgICByZXR1cm4gc2VsZi5iYXJjb2RlX2luZm8uZGljdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuYmFyY29kZV9pbmZvCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGlzX3ZhbGlkX2VhbjEzKGNvZGUpOgogICAgICAgIHBhdHRlcm4gPSByJ15cZHsxM30kJwogICAgICAgIGlmIG5vdCByZS5tYXRjaChwYXR0ZXJuLCBjb2RlKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIGZhY3RvcnMgPSBbMSwgM10gKiA2CiAgICAgICAgY2hlY2tzdW0gPSBzdW0oaW50KGNvZGVbaV0pICogZmFjdG9yc1tpXSBmb3IgaSBpbiByYW5nZSgxMikpCiAgICAgICAgY2hlY2tzdW0gPSAoMTAgLSAoY2hlY2tzdW0gJSAxMCkpICUgMTAKCiAgICAgICAgcmV0dXJuIGNoZWNrc3VtID09IGludChjb2RlWy0xXSkKCiAgICBkZWYgY2hlY2tfZGF0YW1hdHJpeChzZWxmLCBiYXJjb2RlKToKICAgICAgICBiYXJjb2RlID0gc2VsZi5jbGVhcl9pZGVudGlmaWVyKGJhcmNvZGUpCiAgICAgICAgc2VsZi5jaGVja19nczFfZ3RpbihiYXJjb2RlKQoKICAgIGRlZiBjaGVja19nczFfZ3RpbihzZWxmLCBiYXJjb2RlOiBzdHIpOgogICAgICAgIGlmIHNlbGYuZ3MxX3NlcGFyYXRvciBpbiBiYXJjb2RlOgogICAgICAgICAgICB3aGlsZSBiYXJjb2RlOgogICAgICAgICAgICAgICAgaWYgYmFyY29kZVs6Ml0gPT0gJzAxJzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5ndGluID0gYmFyY29kZVsyOjE2XQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihiYXJjb2RlKSA+IDE2OgogICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVsxNjpdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IE5vbmUKCiAgICAgICAgICAgICAgICBlbGlmIGJhcmNvZGVbOjNdID09IGNocigyOSkgKyAnMDEnOgogICAgICAgICAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLmd0aW4gPSBiYXJjb2RlWzM6MTddCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGJhcmNvZGUpID4gMTc6CiAgICAgICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzE3Ol0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzE3JzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5leHBpcnkgPSBiYXJjb2RlWzI6OF0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4oYmFyY29kZSkgPiA4OgogICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVs4Ol0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzEwJzoKICAgICAgICAgICAgICAgICAgICBpZiBjaHIoMjkpIGluIGJhcmNvZGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5iYXRjaCA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5iYXRjaCA9IGJhcmNvZGVbMjpdCiAgICAgICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnMjEnOgogICAgICAgICAgICAgICAgICAgIGlmIGNocigyOSkgaW4gYmFyY29kZToKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBiYXJjb2RlLmluZGV4KGNocigyOSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLnNlcmlhbCA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5zZXJpYWwgPSBiYXJjb2RlWzI6XQogICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzkxJzoKICAgICAgICAgICAgICAgICAgICBpZiBjaHIoMjkpIGluIGJhcmNvZGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYmFyY29kZS5pbmRleChjaHIoMjkpKQoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8ubmhybiA9IGJhcmNvZGVbMjppbmRleF0KICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbaW5kZXggKyAxOl0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5uaHJuID0gYmFyY29kZVsyOjZdCiAgICAgICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBOb25lCgogICAgICAgICAgICAgICAgZWxpZiBiYXJjb2RlWzoyXSA9PSAnOTMnOiAgIyDQnNC+0LvQvtGH0LrQsCwg0LLQvtC00LAKICAgICAgICAgICAgICAgICAgICBzZWxmLmJhcmNvZGVfaW5mby5jaGVjayA9IGJhcmNvZGVbMjo2XQogICAgICAgICAgICAgICAgICAgIGJhcmNvZGUgPSBiYXJjb2RlWzc6XQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6Ml0gPT0gJzkyJzogICMg0JTQsNC70LXQtSDRgdC70LXQtNGD0LXRgiDQutC+0LQg0L/RgNC+0LLQtdGA0LrQuCwgNDQg0YHQuNC80LLQvtC70LAKICAgICAgICAgICAgICAgICAgICAjIGlmIGxlbihiYXJjb2RlWzI6XSk9PTQ0OgogICAgICAgICAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLmNoZWNrID0gYmFyY29kZVsyOl0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6NF0gPT0gJzgwMDUnOiAgIyDQotCw0LHQsNC6LCDQkdC70L7QugogICAgICAgICAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLm5ocm4gPSBiYXJjb2RlWzQ6MTBdCiAgICAgICAgICAgICAgICAgICAgYmFyY29kZSA9IGJhcmNvZGVbMTE6XQoKICAgICAgICAgICAgICAgIGVsaWYgYmFyY29kZVs6NF0gPT0gJzMxMDMnOiAgIyDQnNC+0LvQvtGH0LrQsCDRgSDQktC10YHQvtC8CiAgICAgICAgICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8ud2VpZ2h0ID0gYmFyY29kZVs0Ol0KICAgICAgICAgICAgICAgICAgICBiYXJjb2RlID0gTm9uZQoKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5iYXJjb2RlX2luZm8uZXJyb3IgPSAnSU5WQUxJRCBCQVJDT0RFJwogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuYmFyY29kZV9pbmZvLmVycm9yID0gJ05vIEdTIFNlcGFyYXRvcicKCiAgICAgICAgIyBpZiAoJ0dUSU4nICwgJ0JBVENIJyAsICdFWFBJUlknICwgJ1NFUklBTCcpIGluIHJlc3VsdC5rZXlzKCk6CiAgICAgICAgIyAgICAgaWYgZ3Rpbl9jaGVjayhyZXN1bHRbJ0dUSU4nXSkgPT0gRmFsc2UgYW5kIGV4cGlyeV9kYXRlX2NoZWNrKHJlc3VsdFsnRVhQSVJZJ10pID09IEZhbHNlOgogICAgICAgICMgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIEdUSU4gJiBFWFBJUlkgREFURScsICdCQVJDT0RFJzogcmVzdWx0fQogICAgICAgICMgICAgIGVsaWYgZXhwaXJ5X2RhdGVfY2hlY2socmVzdWx0WydFWFBJUlknXSkgPT0gRmFsc2U6CiAgICAgICAgIyAgICAgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOVkFMSUQgRVhQSVJZIERBVEUnLCAnQkFSQ09ERSc6IHJlc3VsdH0KICAgICAgICAjICAgICBlbGlmIGd0aW5fY2hlY2socmVzdWx0WydHVElOJ10pID09IEZhbHNlOgogICAgICAgICMgICAgICAgICByZXR1cm4geydFUlJPUic6ICdJTlZBTElEIEdUSU4nLCAnQkFSQ09ERSc6IHJlc3VsdH0KICAgICAgICAjICAgICBlbHNlOgogICAgICAgICMgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgIyBlbHNlOgogICAgICAgICMgICAgIHJldHVybiB7J0VSUk9SJzogJ0lOQ09NUExFVEUgREFUQScsICdCQVJDT0RFJzogcmVzdWx0fQoKICAgIGRlZiBjbGVhcl9pZGVudGlmaWVyKHNlbGYsIGJhcmNvZGUpOgogICAgICAgICIiIgogICAgICAgIE1vc3QgYmFyY29kZSBzY2FubmVycyBwcmVwZW5kICddZDInIGlkZW50aWZpZXIgZm9yIHRoZSBHUzEgZGF0YW1hdHJpeC4KICAgICAgICBUaGlzIHNlY3Rpb24gcmVtb3ZlcyB0aGUgaWRlbnRpZmllci4KICAgICAgICAiIiIKCiAgICAgICAgaWYgYmFyY29kZVs6M10gPT0gc2VsZi5pZGVudGlmaWVyOgogICAgICAgICAgICBiYXJjb2RlID0gYmFyY29kZVszOl0KCiAgICAgICAgcmV0dXJuIGJhcmNvZGUKCiAgICBAZGF0YWNsYXNzCiAgICBjbGFzcyBCYXJjb2RlSW5mbzoKICAgICAgICBiYXJjb2RlOiBzdHIgPSAnJwogICAgICAgIHNjaGVtZTogc3RyID0gJycKICAgICAgICBzZXJpYWw6IHN0ciA9ICcnCiAgICAgICAgZ3Rpbjogc3RyID0gJycKICAgICAgICBlcnJvcjogc3RyID0gJycKICAgICAgICBtcmM6IHN0ciA9ICcnCiAgICAgICAgY2hlY2s6IHN0ciA9ICcnCiAgICAgICAgZnVsbF9jb2RlOiBzdHIgPSAnJwogICAgICAgIGV4cGlyeTogc3RyID0gJycKICAgICAgICBiYXRjaDogc3RyID0gJycKICAgICAgICBuaHJuOiBzdHIgPSAnJwogICAgICAgIHdlaWdodDogc3RyID0gJycKCiAgICAgICAgZGVmIGRpY3Qoc2VsZik6CiAgICAgICAgICAgIHJldHVybiB7ay51cHBlcigpOiBzdHIodikgZm9yIGssIHYgaW4gYXNkaWN0KHNlbGYpLml0ZW1zKCkgaWYgdn0KCgpkZWYgZ2V0X2lwX2FkZHJlc3MoKToKICAgIHMgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19ER1JBTSkKICAgIHRyeToKICAgICAgICBzLmNvbm5lY3QoKCI4LjguOC44IiwgODApKQogICAgICAgIGlwX2FkZHJlc3MgPSBzLmdldHNvY2tuYW1lKClbMF0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBpcF9hZGRyZXNzID0gTm9uZQogICAgZmluYWxseToKICAgICAgICBzLmNsb3NlKCkKCiAgICByZXR1cm4gaXBfYWRkcmVzcwo="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\widgets.py",
                "PyFileKey": "widgets",
                "PyFileData": "ZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0CmltcG9ydCBqc29uCgp3cmFwX2NvbnRlbnQgPSAid3JhcF9jb250ZW50IgptYXRjaF9wYXJlbnQgPSAnbWF0Y2hfcGFyZW50JwoKCmNsYXNzIFdpZGdldChBQkMpOgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYudHlwZTogc3RyCiAgICAgICAgc2VsZi5WYWx1ZTogc3RyCiAgICAgICAgc2VsZi53aWR0aCA9IHdyYXBfY29udGVudAogICAgICAgIHNlbGYuaGVpZ2h0ID0gd3JhcF9jb250ZW50CiAgICAgICAgc2VsZi53ZWlnaHQgPSAwCgogICAgICAgIGlmIGt3YXJnczoKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4ga3dhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBzZWxmLl9fZGljdF9fW2tleV0gPSB2YWx1ZQoKICAgIGRlZiB0b19qc29uKHNlbGYpOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHNlbGYsIGRlZmF1bHQ9bGFtYmRhIHg6IHZhcnMoeCksIGluZGVudD00KQoKCmNsYXNzIFBpY3R1cmUoV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5WYWx1ZSA9ICdAcGljJwogICAgICAgIHN1cGVyKCkuX19pbml0X18oKiprd2FyZ3MpCiAgICAgICAgc2VsZi50eXBlID0gIlBpY3R1cmUiCgoKY2xhc3MgVGV4dFZpZXcoV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi5WYWx1ZSA9ICdAdmFsdWUnCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncykKICAgICAgICBzZWxmLnR5cGUgPSAiVGV4dFZpZXciCgoKY2xhc3MgQ2hlY2tCb3goV2lkZ2V0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncykKICAgICAgICBzZWxmLnR5cGUgPSAnQ2hlY2tCb3gnCgoKY2xhc3MgUG9wdXBNZW51QnV0dG9uKFdpZGdldCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuVmFsdWUgPSAnQHZhbHVlJwogICAgICAgIHN1cGVyKCkuX19pbml0X18oKiprd2FyZ3MpCiAgICAgICAgc2VsZi50eXBlID0gIlBvcHVwTWVudUJ1dHRvbiIKICAgICAgICBzZWxmLnNob3dfYnlfY29uZGl0aW9uID0gJycKICAgICAgICBzZWxmLk5vUmVmcmVzaCA9IEZhbHNlCiAgICAgICAgc2VsZi5kb2N1bWVudF90eXBlID0gJycKICAgICAgICBzZWxmLm1hc2sgPSAnJwoKCmNsYXNzIExpbmVhckxheW91dChXaWRnZXQpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgc2VsZi50eXBlID0gJ0xpbmVhckxheW91dCcKICAgICAgICBzZWxmLm9yaWVudGF0aW9uID0gInZlcnRpY2FsIgoKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCoqa3dhcmdzKQogICAgICAgIHNlbGYuRWxlbWVudHMgPSBsaXN0KGFyZ3MpIG9yIFtdCgogICAgZGVmIGFwcGVuZChzZWxmLCAqd2lkZ2V0cyk6CiAgICAgICAgZm9yIHdpZGdldCBpbiB3aWRnZXRzOgogICAgICAgICAgICBzZWxmLkVsZW1lbnRzLmFwcGVuZCh3aWRnZXQpCgoKY2xhc3MgT3B0aW9uczoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzZWFyY2hfZW5hYmxlZD1UcnVlLCBzYXZlX3Bvc2l0aW9uPVRydWUsIG92ZXJyaWRlX3NlYXJjaD1GYWxzZSk6CiAgICAgICAgc2VsZi5vcHRpb25zID0gewogICAgICAgICAgICAnc2VhcmNoX2VuYWJsZWQnOiBzZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgJ3NhdmVfcG9zaXRpb24nOiBzYXZlX3Bvc2l0aW9uLAogICAgICAgICAgICAnb3ZlcnJpZGVfc2VhcmNoJzogb3ZlcnJpZGVfc2VhcmNoCiAgICAgICAgfQoKCmNsYXNzIEN1c3RvbUNhcmRzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxheW91dDogTGluZWFyTGF5b3V0LCBvcHRpb25zOiBPcHRpb25zLCBjYXJkc2RhdGE6IExpc3RbZGljdF0gPSBbXSk6CiAgICAgICAgc2VsZi5jdXN0b21jYXJkcyA9IHsKICAgICAgICAgICAgJ29wdGlvbnMnOiBvcHRpb25zIG9yIE9wdGlvbnMoKSwKICAgICAgICAgICAgJ2xheW91dCc6IGxheW91dCwKICAgICAgICAgICAgJ2NhcmRzZGF0YSc6IGNhcmRzZGF0YQogICAgICAgIH0KCiAgICBkZWYgdG9fanNvbihzZWxmKToKICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhzZWxmLCBkZWZhdWx0PWxhbWJkYSB4OiB2YXJzKHgpLCBpbmRlbnQ9NCwgZW5zdXJlX2FzY2lpPUZhbHNlKS5lbmNvZGUoJ3V0ZjgnKS5kZWNvZGUoKQoKCmNsYXNzIEN1c3RvbVRhYmxlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxheW91dDogTGluZWFyTGF5b3V0LCBvcHRpb25zOiBPcHRpb25zLCB0YWJsZWRhdGE6IExpc3RbZGljdF0pOgogICAgICAgIHNlbGYuY3VzdG9tdGFibGUgPSB7CiAgICAgICAgICAgICdvcHRpb25zJzogb3B0aW9ucyBvciBPcHRpb25zKCksCiAgICAgICAgICAgICdsYXlvdXQnOiBsYXlvdXQsCiAgICAgICAgICAgICd0YWJsZWRhdGEnOiB0YWJsZWRhdGEKICAgICAgICB9CgogICAgZGVmIHRvX2pzb24oc2VsZik6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoc2VsZiwgZGVmYXVsdD1sYW1iZGEgeDogdmFycyh4KSwgaW5kZW50PTQsIGVuc3VyZV9hc2NpaT1GYWxzZSkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkKCgpAZGF0YWNsYXNzCmNsYXNzIE1vZGVybkZpZWxkOgogICAgaGludDogc3RyID0gJycKICAgIGRlZmF1bHRfdGV4dDogc3RyID0gJycKICAgIGNvdW50ZXI6IGJvb2wgPSBGYWxzZQogICAgY291bnRlcl9tYXg6IGludCA9IDAKICAgIGlucHV0X3R5cGU6IGludCA9IDAKICAgIHBhc3N3b3JkOiBib29sID0gRmFsc2UKICAgIGV2ZW50czogYm9vbCA9IEZhbHNlCgogICAgIiIiCiAgICBUWVBFX05VTEw6IDAKICAgIAogICAgVFlQRV9DTEFTU19OVU1CRVI6IDIKICAgIFRZUEVfTlVNQkVSX0ZMQUdfREVDSU1BTDogODE5MiAKICAgIFRZUEVfTlVNQkVSX0ZMQUdfU0lHTkVEOiA0MDk2IAogICAgVFlQRV9OVU1CRVJfVkFSSUFUSU9OX05PUk1BTDogMAogICAgVFlQRV9OVU1CRVJfVkFSSUFUSU9OX1BBU1NXT1JEOiAxNgogICAgCiAgICBUWVBFX0NMQVNTX0RBVEVUSU1FIDogNAogICAgVFlQRV9EQVRFVElNRV9WQVJJQVRJT05fREFURTogMTYKICAgIFRZUEVfREFURVRJTUVfVkFSSUFUSU9OX05PUk1BTDogMAogICAgVFlQRV9EQVRFVElNRV9WQVJJQVRJT05fVElNRTogMzIKICAgIAogICAgVFlQRV9DTEFTU19QSE9ORTogMwogICAgCiAgICBUWVBFX01BU0tfQ0xBU1M6IDE1CiAgICBUWVBFX01BU0tfRkxBR1M6IDE2NzczMTIwIAogICAgVFlQRV9NQVNLX1ZBUklBVElPTjogNDA4MCAKCiAgICBUWVBFX0NMQVNTX1RFWFQ6IDEKICAgIFRZUEVfVEVYVF9GTEFHX0FVVE9fQ09NUExFVEU6IDY1NTM2IAogICAgVFlQRV9URVhUX0ZMQUdfQVVUT19DT1JSRUNUOiAzMjc2OCAKICAgIFRZUEVfVEVYVF9GTEFHX0NBUF9DSEFSQUNURVJTOiA0MDk2IAogICAgVFlQRV9URVhUX0ZMQUdfQ0FQX1NFTlRFTkNFUzogMTYzODQgCiAgICBUWVBFX1RFWFRfRkxBR19DQVBfV09SRFM6IDgxOTIgIAogICAgVFlQRV9URVhUX0ZMQUdfRU5BQkxFX1RFWFRfQ09OVkVSU0lPTl9TVUdHRVNUSU9OUzogMTA0ODU3NiAKICAgIFRZUEVfVEVYVF9GTEFHX0lNRV9NVUxUSV9MSU5FOiAyNjIxNDQgCiAgICBUWVBFX1RFWFRfRkxBR19NVUxUSV9MSU5FOiAxMzEwNzIgCiAgICBUWVBFX1RFWFRfRkxBR19OT19TVUdHRVNUSU9OUzogNTI0Mjg4IAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9FTUFJTF9BRERSRVNTOiAzMgogICAgVFlQRV9URVhUX1ZBUklBVElPTl9FTUFJTF9TVUJKRUNUOiA0OAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9GSUxURVI6IDE3NiAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fTE9OR19NRVNTQUdFOiA4MAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9OT1JNQUw6IDAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fUEFTU1dPUkQ6IDEyOCAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fUEVSU09OX05BTUU6ICA5NgogICAgVFlQRV9URVhUX1ZBUklBVElPTl9QSE9ORVRJQzogMTkyIAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9QT1NUQUxfQUREUkVTUzogMTEyIAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9TSE9SVF9NRVNTQUdFOiA2NCAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fVVJJOiAxNiAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fVklTSUJMRV9QQVNTV09SRDogMTQ0IAogICAgVFlQRV9URVhUX1ZBUklBVElPTl9XRUJfRURJVF9URVhUOiAxNjAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fV0VCX0VNQUlMX0FERFJFU1M6IDIwOCAKICAgIFRZUEVfVEVYVF9WQVJJQVRJT05fV0VCX1BBU1NXT1JEOiAyMjQgCiAgICAiIiIKCiAgICBkZWYgdG9fanNvbihzZWxmKToKICAgICAgICByZXR1cm4ganNvbi5kdW1wcygKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgZGVmYXVsdD1sYW1iZGEgeDoge2s6IHYgZm9yIGssIHYgaW4gdmFycyh4KS5pdGVtcygpIGlmIHZ9LAogICAgICAgICAgICBpbmRlbnQ9NCwgZW5zdXJlX2FzY2lpPUZhbHNlCiAgICAgICAgKS5lbmNvZGUoJ3V0ZjgnKS5kZWNvZGUoKQo="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\version_control.py",
                "PyFileKey": "version_control",
                "PyFileData": "aW1wb3J0IGRiX3NlcnZpY2VzCmltcG9ydCAgcmUKI2Zyb20KZGVmIGlzX3ZhbGlkX3ZlcnNpb24odmVyc2lvbik6CiAgICAjIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBjaGVjayBpZiB0aGUgdmVyc2lvbiBoYXMgdGhlIGNvcnJlY3QgZm9ybWF0ICh4LngueC54KQogICAgaWYgbm90IGlzaW5zdGFuY2UodmVyc2lvbiwgc3RyKToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBwYXR0ZXJuID0gcideXGR7MSwyfShcLlxkezEsMn0pezR9JwoKICAgIHJldHVybiBib29sKHJlLm1hdGNoKHBhdHRlcm4sIHZlcnNpb24pKQoKCiPQn9C10YDQtdCx0LjRgNCw0LXQvCDRgNC10LvQuNC30Ysg0L/QviDQvtC00L3QvtC80YMuINCk0YPQvdC60YbQuNGPINC/0YvRgtCw0LXRgtGB0Y8g0L3QsNC50YLQuCDQsiDQvNC+0LTRg9C70LUg0YTRg9C90LrRhtC40Y4g0YEg0LjQvNC10L3QtdC8LAojINGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LjQvCDQvdC+0LzQtdGA0YMg0YDQtdC70LjQt9CwINC4INC10YHQu9C4INC90LDRiNC70LAgLSDQstGL0L/QvtC70L3QuNGC0Ywg0LXRkQpkZWYgcnVuX3JlbGVhc2VzKF9zdGFydF92ZXJzaW9uOnN0ciwgX2VuZF92ZXJzaW9uOnN0cik6CiAgICByZXR1cm5fbGlzdCA9IFtdCiAgICBpZiBub3QgaXNfdmFsaWRfdmVyc2lvbihfc3RhcnRfdmVyc2lvbikgb3Igbm90IGlzX3ZhbGlkX3ZlcnNpb24oX2VuZF92ZXJzaW9uKToKICAgICAgICByZXR1cm5fbGlzdC5hcHBlbmQoeydyZXN1bHQnOiBGYWxzZSwgJ2RldGFpbHMnOiAn0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIg0LLQtdGA0YHQuNC4INC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuC4g0KTQvtGA0LzQsNGCINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCDQtNC+0LvQttC10L0g0LHRi9GC0YwgeC54LngueCd9KQogICAgICAgIHJldHVybiByZXR1cm5fbGlzdAoKCiAgICB2ZXJzaW9uID0gX3N0YXJ0X3ZlcnNpb24KICAgIHdoaWxlIGNvbXBhcmVfdmVyc2lvbnModmVyc2lvbiwgX2VuZF92ZXJzaW9uKSA8PSAwOgogICAgICAgIHJlbGVhc2VfZnVuY3Rpb25fbmFtZSA9ICdyJyArIHZlcnNpb24ucmVwbGFjZSgnLicsICdfJykKICAgICAgICByZWxlYXNlX2Z1bmN0aW9uID0gZ2xvYmFscygpLmdldChyZWxlYXNlX2Z1bmN0aW9uX25hbWUpCiAgICAgICAgaWYgcmVsZWFzZV9mdW5jdGlvbiBhbmQgY2FsbGFibGUocmVsZWFzZV9mdW5jdGlvbik6CgogICAgICAgICAgICByZXMgPSByZWxlYXNlX2Z1bmN0aW9uKCkKICAgICAgICAgICAgcmV0dXJuX2xpc3QuYXBwZW5kKHJlcykKICAgICAgICAjIGVsc2U6CiAgICAgICAgIyAgICAgcHJpbnQoZiJSZWxlYXNlIGZ1bmN0aW9uICd7cmVsZWFzZV9mdW5jdGlvbl9uYW1lfScgbm90IGZvdW5kLiIpCgogICAgICAgIHZlcnNpb24gPSBpbmNyZW1lbnRfdmVyc2lvbih2ZXJzaW9uKQoKICAgIHJldHVybiByZXR1cm5fbGlzdAoKCiPQodGA0LDQstC90LjQstCw0LXQvCDQvdC+0LzQtdGA0LAg0LLQtdGA0YHQuNC4LiDQktC+0LfQstGA0LDRidCw0LXRgiAtMSDQn9C+0YHQu9C10LTQvdGP0Y8g0LLQtdGA0YHQuNGPINCy0YHQtSDQtdGJ0ZEg0LHQvtC70YzRiNC1LAojIDAg0LXRgdC70Lgg0YDQsNCy0L3RiyDQuCAxINC10YHQu9C4INGC0LXQutGD0YnQsNGPINCy0LXRgNGB0LjRjyDQsdC+0LvRjNGI0LUg0L/QvtGB0LvQtdC00L3QtdC5CmRlZiBjb21wYXJlX3ZlcnNpb25zKHZlcnNpb24xLCB2ZXJzaW9uMik6CiAgICBwYXJ0czEgPSBsaXN0KG1hcChpbnQsIHZlcnNpb24xLnNwbGl0KCcuJykpKQogICAgcGFydHMyID0gbGlzdChtYXAoaW50LCB2ZXJzaW9uMi5zcGxpdCgnLicpKSkKCiAgICBmb3IgcDEsIHAyIGluIHppcChwYXJ0czEsIHBhcnRzMik6CiAgICAgICAgaWYgcDEgPCBwMjoKICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgZWxpZiBwMSA+IHAyOgogICAgICAgICAgICByZXR1cm4gMQoKICAgIHJldHVybiAwCgoKI9Cf0YDQuNCx0LDQstC70Y/QtdC8IDEg0Log0L3QvtC80LXRgNGDINGC0LXQutGD0YnQtdC5INCy0LXRgNGB0LjQuCAo0L/QviDQs9GA0YPQv9C/0LDQvCwKIyDQvNCw0LrRgdC40LzRg9C8IDk5INCyINC+0LTQvdC+0Lkg0LPRgNGD0L/Qv9C1KSDQndCw0L/RgNC40LzQtdGAIDEuMS4xLjEuOTkgKyAxINC00LDRgdGCINC90LDQvCAxLjEuMS4yLjAKZGVmIGluY3JlbWVudF92ZXJzaW9uKHZlcnNpb24pOgogICAgcGFydHMgPSBsaXN0KG1hcChpbnQsIHZlcnNpb24uc3BsaXQoJy4nKSkpCiAgICBwYXJ0c1stMV0gKz0gMQogICAgZm9yIGkgaW4gcmFuZ2UobGVuKHBhcnRzKSAtIDEsIDAsIC0xKToKICAgICAgICBpZiBwYXJ0c1tpXSA9PSAxMDA6CiAgICAgICAgICAgIHBhcnRzW2ldID0gMAogICAgICAgICAgICBwYXJ0c1tpIC0gMV0gKz0gMQogICAgcmV0dXJuICcuJy5qb2luKG1hcChzdHIsIHBhcnRzKSkKCgoKZGVmIHIwXzFfMF8xMl8zKGhhc2hfbWFwKToKICAgICMgQ29kZSBmb3IgcmVsZWFzZSAwLjEuMC4xMi4zCiAgICBxdGV4dCA9ICcnJwogICAgUFJBR01BIGZvcmVpZ25fa2V5cyA9IDA7CgogICAgQ1JFQVRFIFRBQkxFIHNxbGl0ZXN0dWRpb190ZW1wX3RhYmxlIEFTIFNFTEVDVCAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUk9NIFJTX2JhcmNvZGVzOwogICAgCiAgICBEUk9QIFRBQkxFIFJTX2JhcmNvZGVzOwogICAgCiAgICBDUkVBVEUgVEFCTEUgUlNfYmFyY29kZXMgKAogICAgICAgIGJhcmNvZGUgICAgIFRFWFQgICAgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBSSU1BUlkgS0VZLAogICAgICAgIGlkX2dvb2QgICAgIFRFWFQgICAgTk9UIE5VTEwsCiAgICAgICAgaWRfcHJvcGVydHkgVEVYVCwKICAgICAgICBpZF9zZXJpZXMgICBURVhULAogICAgICAgIGlkX3VuaXQgICAgIFRFWFQsCiAgICAgICAgcmF0aW8gICAgICAgSU5URUdFUiBERUZBVUxUICgxKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVCBOVUxMCiAgICApOwogICAgCiAgICBJTlNFUlQgSU5UTyBSU19iYXJjb2RlcyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF9nb29kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX3Byb3BlcnR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX3NlcmllcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF91bml0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgYmFyY29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF9nb29kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX3Byb3BlcnR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkX3NlcmllcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZF91bml0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZST00gc3FsaXRlc3R1ZGlvX3RlbXBfdGFibGU7CiAgICAKICAgICAgICAKICAgIFVQREFURQogICAgUlNfYmFyY29kZXMKICAgIFNFVAogICAgcmF0aW8gPSBDT0FMRVNDRSgoCiAgICAgICAgU0VMRUNUIFJTX3VuaXRzLm5vbWluYXRvci9SU191bml0cy5kZW5vbWluYXRvcgogICAgRlJPTSBSU191bml0cwogICAgV0hFUkUgUlNfdW5pdHMuaWQgPSBSU19iYXJjb2Rlcy5pZF91bml0CiAgICApLCAxKTsKICAgIAogICAgICAgIAogICAgRFJPUCBUQUJMRSBzcWxpdGVzdHVkaW9fdGVtcF90YWJsZTsKICAgIAogICAgUFJBR01BIGZvcmVpZ25fa2V5cyA9IDE7CiAgICAnJycKCiAgICB0cnk6CiAgICAgICAgciA9IGRiX3NlcnZpY2VzLlNxbFF1ZXJ5UHJvdmlkZXIoKQogICAgICAgIHIuc3FsX2V4ZWMocXRleHQsJycpCiAgICAgICAgcmV0dXJuX3ZhbHVlID0geydyZXN1bHQnOlRydWV9CiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuX3ZhbHVlID0geydyZXN1bHQnOkZhbHNlLCAnZGV0YWlscyc6ZifQntGI0LjQsdC60LAg0LIg0LfQsNC/0YDQvtGB0LU6IHtxdGV4dH0nfQoKCgoKIyBpZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgojICAgICAjIFJlcGxhY2UgdGhlc2UgdmVyc2lvbnMgd2l0aCB5b3VyIGFjdHVhbCB2ZXJzaW9uIG51bWJlcnMKIyAgICAgc3RhcnRfdmVyc2lvbiA9ICIwLjEuMC4xMS43IgojICAgICBzdGFydF92ZXJzaW9uID0gKCJzIikKIyAgICAgZW5kX3ZlcnNpb24gPSAiMC4xLjAuMTIuMyIKIwojICAgICBwcmludChydW5fcmVsZWFzZXMoc3RhcnRfdmVyc2lvbiwgZW5kX3ZlcnNpb24pKQojcHJpbnQoaXNfdmFsaWRfdmVyc2lvbigiMDEuMS4wLjExLjI2Iikp"
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\new_handlers.py",
                "PyFileKey": "new_handlers",
                "PyFileData": "ZnJvbSBqYXZhIGltcG9ydCBqY2xhc3MKZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgU2ltcGxlVXRpbGl0ZXMgYXMgc3VDbGFzcwoKZnJvbSB1aV91dGlscyBpbXBvcnQgSGFzaE1hcAppbXBvcnQgdWlfbW9kZWxzCgpub0NsYXNzID0gamNsYXNzKCJydS50cmF2ZWxmb29kLnNpbXBsZV91aS5Ob1NRTCIpCnJzX3NldHRpbmdzID0gbm9DbGFzcygicnNfc2V0dGluZ3MiKQpjdXJyZW50X3NjcmVlbiA9IE5vbmUKCgpkZWYgY3JlYXRlX3NjcmVlbihoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiIKICAgINCc0LXRgtC+0LQg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQvNC+0LTQtdC70Lgg0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQtdC5INGC0LXQutGD0YnQtdC80YMg0L/RgNC+0YbQtdGB0YHRgyDQuCDRjdC60YDQsNC90YMuCiAgICDQldGB0LvQuCDQvNC+0LTQtdC70Ywg0L3QtSDRgNC10LDQu9C40LfQvtCy0LDQvdCwINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC30LDQs9C70YPRiNC60YMKICAgINCg0LXQsNC70LjQt9C+0LLQsNC9INGB0LjQvdCz0LvRgtC+0L0g0YfQtdGA0LXQtyDQs9C70L7QsdCw0LvRjNC90YPRjiDQv9C10YDQtdC80LXQvdC90YPRjiBjdXJyZW50X3NjcmVlbiwg0LTQu9GPINGB0L7RhdGA0LXQvdC10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjRjyDRgtC10LrRg9GJ0LXQs9C+INGN0LrRgNCw0L3QsAogICAgIiIiCiAgICBnbG9iYWwgY3VycmVudF9zY3JlZW4KCiAgICBzY3JlZW5fcGFyYW1zID0gewogICAgICAgICdoYXNoX21hcCc6IGhhc2hfbWFwLAogICAgICAgICdyc19zZXR0aW5ncyc6IHJzX3NldHRpbmdzCiAgICB9CiAgICBzY3JlZW5fY2xhc3MgPSB1aV9tb2RlbHMuU2NyZWVuc0ZhY3RvcnkuZ2V0X3NjcmVlbl9jbGFzcygqKnNjcmVlbl9wYXJhbXMpCgogICAgaWYgbm90IHNjcmVlbl9jbGFzczoKICAgICAgICBjdXJyZW50X3NjcmVlbiA9IHVpX21vZGVscy5Nb2NrU2NyZWVuKCoqc2NyZWVuX3BhcmFtcykKICAgIGVsaWYgbm90IGlzaW5zdGFuY2UoY3VycmVudF9zY3JlZW4sIHNjcmVlbl9jbGFzcyk6CiAgICAgICAgY3VycmVudF9zY3JlZW4gPSBzY3JlZW5fY2xhc3MoKipzY3JlZW5fcGFyYW1zKQogICAgZWxzZToKICAgICAgICBjdXJyZW50X3NjcmVlbi5oYXNoX21hcCA9IGhhc2hfbWFwCiAgICAgICAgY3VycmVudF9zY3JlZW4ubGlzdGVuZXIgPSBoYXNoX21hcFsnbGlzdGVuZXInXQogICAgICAgIGN1cnJlbnRfc2NyZWVuLmV2ZW50ID0gaGFzaF9tYXBbJ2V2ZW50J10KCiAgICByZXR1cm4gY3VycmVudF9zY3JlZW4KCgojID09PT09PT09PT09PT09PSBNYWluIGV2ZW50cyA9PT09PT09PT09PT09PT09PQoKCkBIYXNoTWFwKCkKZGVmIGFwcF9vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiIg0J7QsdGA0LDQsdC+0YLRh9C40Log0L/RgNC4INGB0YLQsNGA0YLQtSDQv9GA0LjQu9C+0LbQtdC90LjRjyAiIiIKCiAgICBtb2RlbCA9IHVpX21vZGVscy5NYWluRXZlbnRzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIG1vZGVsLmFwcF9vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgdGltZXJfdXBkYXRlKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiIiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0YTQvtC90L7QstC+0LPQviDQvtCx0LzQtdC90LAgIiIiCgogICAgdGltZXIgPSB1aV9tb2RlbHMuVGltZXIoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgdGltZXIudGltZXJfb25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGV2ZW50X3NlcnZpY2UoaGFzaF9tYXApOgogICAgIiIiINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRgNCw0LHQvtGC0Ysg0JzQnyDQsiDRgNC10LbQuNC80LUg0YHQtdGA0LLQtdGA0LAuINCSIHdzX2JvZHkg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0LvQtdC20LjRgiDRgtC10LrRgdGCINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCAiIiIKCiAgICBoYXNoX21hcFsnd3NfYm9keSddID0gaGFzaF9tYXBbJ0FORFJPSURfSUQnXQoKCkBIYXNoTWFwKCkKZGVmIG9uX3NxbF9lcnJvcihoYXNoX21hcCk6CiAgICBtb2RlbCA9IHVpX21vZGVscy5NYWluRXZlbnRzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIG1vZGVsLm9uX3NxbF9lcnJvcigpCgoKCkBIYXNoTWFwKCkKZGVmIG9uX2Nsb3NlX2FwcChoYXNoX21hcCk6CiAgICAjINCf0L7Qv9GL0YLQutCwINC+0YfQuNGB0YLQutC4INC60Y3RiNCwINC/0YDQuCDQstGL0YXQvtC00LUg0YEg0L/RgNC40LvQvtC20LXQvdC40Y8KICAgIHN1Q2xhc3MuZGVsZXRlQ2FjaGUoKQoKCiMgXl5eXl5eXl5eXl5eXl5eXl4gTWFpbiBldmVudHMgXl5eXl5eXl5eXl5eXl5eXl4KCgojID09PT09PT09PT09PT09PSBEb2N1bWVudHMgPT09PT09PT09PT09PT09PT0KQEhhc2hNYXAoKQpkZWYgZmxvd19kb2NzX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiItCe0YLQtNC10LvRjNC90YvQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC/0LvQuNGC0L7QuiDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQv9GA0L7RhtC10YHRgdCwIGhhc2hfbWFwJ9C+0LwiIiIKICAgIHNjcmVlbiA9IHVpX21vZGVscy5GbG93RG9jU2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZmxvd19kb2NzX29uX3NlbGVjdChoYXNoX21hcDogSGFzaE1hcCk6CiAgICAiIiLQntGC0LTQtdC70YzQvdGL0LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQv9C70LjRgtC+0Log0LTQu9GPINC+0L/RgNC10LTQtdC70LXQvdC40Y8g0L/RgNC+0YbQtdGB0YHQsCBoYXNoX21hcCfQvtC8IiIiCiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuRmxvd0RvY1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25faW5wdXQoKQoKCkBIYXNoTWFwKCkKZGVmIGZsb3dfdGlsZXNfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgIiIi0J7RgtC00LXQu9GM0L3Ri9C1INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0L/Qu9C40YLQvtC6INC00LvRjyDQvtC/0YDQtdC00LXQu9C10L3QuNGPINC/0YDQvtGG0LXRgdGB0LAgaGFzaF9tYXAn0L7QvCIiIgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkZsb3dUaWxlc1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGZsb3dfdGlsZXNfb25fc2VsZWN0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiItCe0YLQtNC10LvRjNC90YvQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC/0LvQuNGC0L7QuiDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQv9GA0L7RhtC10YHRgdCwIGhhc2hfbWFwJ9C+0LwiIiIKICAgIHNjcmVlbiA9IHVpX21vZGVscy5GbG93VGlsZXNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBiYXJjb2RlX2Zsb3dfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuIDp1aV9tb2RlbHMuRmxvd0RvY0RldGFpbHNTY3JlZW4gPSB1aV9tb2RlbHMuRmxvd0RvY0RldGFpbHNTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBiYXJjb2RlX2Zsb3dfbGlzdGVuZXIoaGFzaF9tYXA6SGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5GbG93RG9jRGV0YWlsc1NjcmVlbiA9IHVpX21vZGVscy5GbG93RG9jRGV0YWlsc1NjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25faW5wdXQoKQoKCgpASGFzaE1hcCgpCmRlZiBkb2NzX3RpbGVzX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgICIiItCe0YLQtNC10LvRjNC90YvQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC/0LvQuNGC0L7QuiDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQv9GA0L7RhtC10YHRgdCwIGhhc2hfbWFwJ9C+0LwiIiIKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Eb2N1bWVudHNUaWxlcyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGdzX3RpbGVzX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Hcm91cFNjYW5UaWxlcyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHRpbGVzX29uX2lucHV0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25faW5wdXQoKQoKCkBIYXNoTWFwKCkKZGVmIGRvY3Nfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRG9jc0xpc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBkb2NzX29uX3NlbGVjdChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBkb2NfZGV0YWlsc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Hcm91cFNjYW5Eb2NEZXRhaWxzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZG9jX2RldGFpbHNfbGlzdGVuZXIoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKCkBIYXNoTWFwKCkKZGVmIGFkcl9kb2NzX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkFkckRvY3NMaXN0U2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgYWRyX2RvY19vbl9zZWxlY3QoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuQWRyRG9jc0xpc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCkBIYXNoTWFwKCkKZGVmIGFkcl9kb2NfZGV0YWlsc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5BZHJEb2NEZXRhaWxzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgpASGFzaE1hcCgpCmRlZiBhZHJfZG9jX2RldGFpbHNfb25faW5wdXQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuQWRyRG9jRGV0YWlsc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25faW5wdXQoKQoKQEhhc2hNYXAoKQpkZWYgZG9jc19vZmZsaW5lX29uX3N0YXJ0KGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Eb2NzT2ZmbGluZUxpc3RTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCkBIYXNoTWFwKCkKZGVmIGVsZW1fdmlldl9vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR29vZHNTZWxlY3RTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBlbGVtX3ZpZXZfb25fY2xpY2soaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLkdvb2RzU2VsZWN0U2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgYWRyX2VsZW1fdmlldl9vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuQWRyR29vZHNTZWxlY3RTY3JlZW4oaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBhZHJfZWxlbV92aWV2X29uX2NsaWNrKGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5BZHJHb29kc1NlbGVjdFNjcmVlbihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25faW5wdXQoKQoKIyBeXl5eXl5eXl5eXl5eXl5eXiBEb2N1bWVudHMgXl5eXl5eXl5eXl5eXl5eXl4KCiMgPT09PT09PT09PT09PT09IEdvb2RzID09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBnb29kc19vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Hb29kc0xpc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kc19vbl9pbnB1dChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuR29vZHNMaXN0U2NyZWVuKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgICMgc2NyZWVuOiB1aV9tb2RlbHMuR29vZHNMaXN0U2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCiAgICAjIGhhc2hfbWFwLnRvYXN0KGYne2hhc2hfbWFwLmdldF9jdXJyZW50X3NjcmVlbigpfSB7aGFzaF9tYXAuZ2V0X2N1cnJlbnRfcHJvY2VzcygpfScpCgoKQEhhc2hNYXAoKQpkZWYgc2VsZWN0X3R5cGVfZ29vZHNfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLlNlbGVjdEdvb2RzVHlwZShoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHNlbGVjdF90eXBlX2dvb2RzX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5TZWxlY3RHb29kc1R5cGUoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kX2NhcmRfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuSXRlbUNhcmQgPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBnb29kX2NhcmRfcG9zdF9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5JdGVtQ2FyZCA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fcG9zdF9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZ29vZF9jYXJkX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkl0ZW1DYXJkID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXiBHb29kcyBeXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT09PT09PSBHb29kc0JhbGFuY2VzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBiYWxhbmNlc19vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Hb29kc0JhbGFuY2VzSXRlbUNhcmQgPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCkBIYXNoTWFwKCkKZGVmIGJhbGFuY2VzX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Hb29kc0JhbGFuY2VzSXRlbUNhcmQoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiB3aF9zZWxlY3Rfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuU2VsZWN0V0ggPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCkBIYXNoTWFwKCkKZGVmIHdoX3NlbGVjdF9vbl9pbnB1dChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuU2VsZWN0V0goaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBHb29kc0JhbGFuY2VzIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl4KCgojID09PT09PT09PT09PT09PT09PT09IEdvb2RzUHJpY2VzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBwcmljZXNfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuR29vZHNQcmljZXNJdGVtQ2FyZCA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKQEhhc2hNYXAoKQpkZWYgcHJpY2VzX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Hb29kc1ByaWNlc0l0ZW1DYXJkKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgcHJpY2VfdHlwZXNfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuU2VsZWN0UHJpY2VUeXBlID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgpASGFzaE1hcCgpCmRlZiBwcmljZV90eXBlc19vbl9pbnB1dChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuU2VsZWN0UHJpY2VUeXBlKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgcHJvcGVydGllc19vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5TZWxlY3RQcm9wZXJ0aWVzID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgpASGFzaE1hcCgpCmRlZiBwcm9wZXJ0aWVzX29uX2lucHV0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5TZWxlY3RQcm9wZXJ0aWVzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgdW5pdHNfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuU2VsZWN0VW5pdCA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKQEhhc2hNYXAoKQpkZWYgdW5pdHNfb25faW5wdXQoaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLlNlbGVjdFVuaXQoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgojIF5eXl5eXl5eXl5eXl5eXl5eXl5eXiBHb29kc1ByaWNlcyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eCgoKCiMgPT09PT09PT09PT09PT09IFNldHRpbmdzID09PT09PT09PT09PT09PT09CgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5TZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHNldHRpbmdzX29uX2NsaWNrKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLlNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgZm9udF9zaXplc19vbl9zdGFydChoYXNoX21hcDogSGFzaE1hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5Gb250U2l6ZVNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9zdGFydCgpCgoKQEhhc2hNYXAoKQpkZWYgZm9udF9zaXplX3NldHRpbmdzX2xpc3RlbmVyKGhhc2hfbWFwOiBIYXNoTWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkZvbnRTaXplU2V0dGluZ3NTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiB0ZXN0X2JhcmNvZGVfbGlzdGVuZXIoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuQmFyY29kZVRlc3RTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19lcnJvcnNfb25fc3RhcnQoaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRXJyb3JMb2dTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCgpASGFzaE1hcCgpCmRlZiBzZXR0aW5nc19lcnJvcnNfb25fY2xpY2soaGFzaF9tYXA6IEhhc2hNYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuRXJyb3JMb2dTY3JlZW4gPSBjcmVhdGVfc2NyZWVuKGhhc2hfbWFwKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiBodHRwX3NldHRpbmdzX29uX3N0YXJ0KGhhc2hfbWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLkh0dHBTZXR0aW5nc1NjcmVlbiA9IGNyZWF0ZV9zY3JlZW4oaGFzaF9tYXApCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGh0dHBfc2V0dGluZ3Nfb25fY2xpY2soaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuSHR0cFNldHRpbmdzU2NyZWVuID0gY3JlYXRlX3NjcmVlbihoYXNoX21hcCkKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKQEhhc2hNYXAoKQpkZWYgc291bmRfc2V0dGluZ3Nfb25fc3RhcnQoaGFzaF9tYXApOgogICAgc2NyZWVuID0gdWlfbW9kZWxzLlNvdW5kU2V0dGluZ3MoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX3N0YXJ0KCkKCiAgICAjIHNjcmVlbiA9IHVpX21vZGVscy5TZWxlY3RHb29kc1R5cGUoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgIyBzY3JlZW4ub25faW5wdXQoKQoKCkBIYXNoTWFwKCkKZGVmIHNvdW5kX3NldHRpbmdzX2xpc3RlbmVyKGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5Tb3VuZFNldHRpbmdzKGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgoKIyBeXl5eXl5eXl5eXl5eXl5eXiBTZXR0aW5ncyBeXl5eXl5eXl5eXl5eXl5eXgoKIyA9PT09PT09PT09PT09PT0gSHRtbCA9PT09PT09PT09PT09PT09PQoKQEhhc2hNYXAoKQpkZWYgaHRtbF92aWV3X29uX3N0YXJ0KGhhc2hfbWFwKToKICAgIHNjcmVlbiA9IHVpX21vZGVscy5IdG1sVmlldyhoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGh0bWxfdmlld19vbl9pbnB1dChoYXNoX21hcCk6CiAgICBzY3JlZW4gPSB1aV9tb2RlbHMuSHRtbFZpZXcoaGFzaF9tYXAsIHJzX3NldHRpbmdzKQogICAgc2NyZWVuLm9uX2lucHV0KCkKCgpASGFzaE1hcCgpCmRlZiB0ZW1wbGF0ZV9saXN0X29uX3N0YXJ0KGhhc2hfbWFwKToKICAgIHNjcmVlbjogdWlfbW9kZWxzLlRlbXBsYXRlc0xpc3QgPSB1aV9tb2RlbHMuVGVtcGxhdGVzTGlzdChoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIHRlbXBsYXRlX2xpc3Rfb25faW5wdXQoaGFzaF9tYXApOgogICAgc2NyZWVuOiB1aV9tb2RlbHMuVGVtcGxhdGVzTGlzdCA9IHVpX21vZGVscy5UZW1wbGF0ZXNMaXN0KGhhc2hfbWFwLCByc19zZXR0aW5ncykKICAgIHNjcmVlbi5vbl9pbnB1dCgpCgojIF5eXl5eXl5eXl5eXl5eXl5eIEh0bWwgXl5eXl5eXl5eXl5eXl5eXl4KCkBIYXNoTWFwKCkKZGVmIGZpbGVfYnJvd3Nlcl9vbl9zdGFydChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5TaW1wbGVGaWxlQnJvd3NlciA9IHVpX21vZGVscy5TaW1wbGVGaWxlQnJvd3NlcihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25fc3RhcnQoKQoKCkBIYXNoTWFwKCkKZGVmIGZpbGVfYnJvd3Nlcl9vbl9pbnB1dChoYXNoX21hcCk6CiAgICBzY3JlZW46IHVpX21vZGVscy5TaW1wbGVGaWxlQnJvd3NlciA9IHVpX21vZGVscy5TaW1wbGVGaWxlQnJvd3NlcihoYXNoX21hcCwgcnNfc2V0dGluZ3MpCiAgICBzY3JlZW4ub25faW5wdXQoKQ=="
            },
            {
                "file_path": "E:/РайтСкан/simple_keep_2\\printing_factory.py",
                "PyFileKey": "printing_factory",
                "PyFileData": "ZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAKaW1wb3J0IGJhcmNvZGUKZnJvbSBiYXJjb2RlLndyaXRlciBpbXBvcnQgSW1hZ2VXcml0ZXIKZnJvbSBqaW5qYTIgaW1wb3J0IEVudmlyb25tZW50LCBGaWxlU3lzdGVtTG9hZGVyLCBzZWxlY3RfYXV0b2VzY2FwZSwgbWV0YQppbXBvcnQgYmFzZTY0CmZyb20gaW8gaW1wb3J0IEJ5dGVzSU8KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCgoKY2xhc3MgSFRNTERvY3VtZW50OgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZW1wbGF0ZV9kaXJlY3RvcnksIHRlbXBsYXRlX2ZpbGUpOgogICAgICAgIHNlbGYudGVtcGxhdGVfZGlyZWN0b3J5ID0gdGVtcGxhdGVfZGlyZWN0b3J5CiAgICAgICAgc2VsZi50ZW1wbGF0ZV9maWxlID0gdGVtcGxhdGVfZmlsZQoKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgZ2VuZXJhdGVfYmFyY29kZShkYXRhKToKICAgICAgICBFQU4gPSBiYXJjb2RlLmdldF9iYXJjb2RlX2NsYXNzKCdlYW4xMycpCiAgICAgICAgd3JpdGVyID0gSW1hZ2VXcml0ZXIoKQogICAgICAgICN3cml0ZXIuc2V0X29wdGlvbnMoe30pCiAgICAgICAgZWFuID0gRUFOKGRhdGEsIHdyaXRlciA9IHdyaXRlcikKCiAgICAgICAgYmFyY29kZV9pbWFnZSA9IEJ5dGVzSU8oKQogICAgICAgIGVhbi53cml0ZShiYXJjb2RlX2ltYWdlKQogICAgICAgIHJldHVybiBiYXNlNjQuYjY0ZW5jb2RlKGJhcmNvZGVfaW1hZ2UuZ2V0dmFsdWUoKSkuZGVjb2RlKCkKCiAgICBkZWYgY3JlYXRlX2h0bWwoc2VsZiwgcGFyYW1ldGVycyk6CiAgICAgICAgZW52ID0gRW52aXJvbm1lbnQoCiAgICAgICAgICAgIGxvYWRlcj1GaWxlU3lzdGVtTG9hZGVyKHNlbGYudGVtcGxhdGVfZGlyZWN0b3J5KSwKICAgICAgICAgICAgYXV0b2VzY2FwZT1zZWxlY3RfYXV0b2VzY2FwZShbJ2h0bWwnLCAneG1sJ10pLAogICAgICAgICAgICB2YXJpYWJsZV9zdGFydF9zdHJpbmc9J1snLAogICAgICAgICAgICB2YXJpYWJsZV9lbmRfc3RyaW5nPSddJywKICAgICAgICApCgogICAgICAgIGJhcmNvZGVfaW1hZ2VfYmFzZTY0ID0gc2VsZi5nZW5lcmF0ZV9iYXJjb2RlKHBhcmFtZXRlcnNbJ2JhcmNvZGUnXSkKCiAgICAgICAgdGVtcGxhdGUgPSBlbnYuZ2V0X3RlbXBsYXRlKHNlbGYudGVtcGxhdGVfZmlsZSkKCiAgICAgICAgYWEgPSB0ZW1wbGF0ZS5yZW5kZXIocGFyYW1ldGVycykKCiAgICAgICAgc291cCA9IEJlYXV0aWZ1bFNvdXAoYWEsICdodG1sLnBhcnNlcicpCiAgICAgICAgZm9yIGltZ3RhZyBpbiBzb3VwLmZpbmRfYWxsKCJpbWciKToKICAgICAgICAgICAgaW1ndGFnWydzcmMnXSA9ICJkYXRhOmltYWdlL3BuZzsgd2lkdGg6YXV0bzsgaGVpZ2h0OmF1dG87IGJhc2U2NCwiICsgYmFyY29kZV9pbWFnZV9iYXNlNjQKCiAgICAgICAgcmV0dXJuIHN0cihzb3VwKQoKICAgIGRlZiBmaW5kX3RlbXBsYXRlX3ZhcmlhYmxlcyhzZWxmKToKICAgICAgICBlbnYgPSBFbnZpcm9ubWVudCgKICAgICAgICAgICAgbG9hZGVyPUZpbGVTeXN0ZW1Mb2FkZXIoc2VsZi50ZW1wbGF0ZV9kaXJlY3RvcnkpLAogICAgICAgICAgICBhdXRvZXNjYXBlPXNlbGVjdF9hdXRvZXNjYXBlKFsnaHRtbCcsICd4bWwnXSksCiAgICAgICAgICAgIHZhcmlhYmxlX3N0YXJ0X3N0cmluZz0nWycsCiAgICAgICAgICAgIHZhcmlhYmxlX2VuZF9zdHJpbmc9J10nLAogICAgICAgICkKICAgICAgICB0ZW1wbGF0ZV9zb3VyY2UgPSBlbnYubG9hZGVyLmdldF9zb3VyY2UoZW52LCBzZWxmLnRlbXBsYXRlX2ZpbGUpWzBdCiAgICAgICAgcGFyc2VkX2NvbnRlbnQgPSBlbnYucGFyc2UodGVtcGxhdGVfc291cmNlKQogICAgICAgIHBhcmFtcyA9IG1ldGEuZmluZF91bmRlY2xhcmVkX3ZhcmlhYmxlcyhwYXJzZWRfY29udGVudCkKICAgICAgICBpZiBub3QgJ2JhcmNvZGUnIGluIHBhcmFtczoKICAgICAgICAgICAgcGFyYW1zLmFkZCgnYmFyY29kZScpCiAgICAgICAgcmV0dXJuIHBhcmFtcwoKICAgIGRlZiBnZXRfdGVtcGxhdGUoc2VsZik6CgogICAgICAgIHdpdGggb3BlbihQYXRoKHNlbGYudGVtcGxhdGVfZGlyZWN0b3J5KSAvIHNlbGYudGVtcGxhdGVfZmlsZSwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmaWxlOgogICAgICAgICAgICBodG1sX2JvZHkgPSBmaWxlLnJlYWQoKQoKICAgICAgICByZXR1cm4gaHRtbF9ib2R5CgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGluamVjdF9jc3Nfc3R5bGUoaHRtbCwgcGFyYW1zKToKCiAgICAgICAgcGljdHVyZV93aWR0aCA9IHBhcmFtcy5nZXQoJ3BpY3R1cmVfd2lkdGgnKQogICAgICAgIHBpY3R1cmVfaGVpZ2h0ID0gcGFyYW1zLmdldCgncGljdHVyZV9oZWlnaHQnKQogICAgICAgIGlmIG5vdCAocGljdHVyZV93aWR0aCBhbmQgcGljdHVyZV9oZWlnaHQpOgogICAgICAgICAgICBwaWN0dXJlX3dpZHRoID0gJzIwJwogICAgICAgICAgICBwaWN0dXJlX2hlaWdodCA9ICcyMCcKCiAgICAgICAgY3NzX3RlbXBsYXRlMiA9ICcnJwogICAgICAgICAgQHBhZ2UgewogICAgICAgICAgICBtYXJnaW46IDFtbTsgLyogQWRqdXN0IGlmIG5lY2Vzc2FyeSAqLwogICAgICAgIH0KICAgICAgICAKICAgICAgICBib2R5IHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWw7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB0OwogICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5mdWxsLXRlbXBsYXRlIHsKICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwdncgLSAybW0pOyAgCiAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDB2aCAtIDJtbSk7CiAgICAgICAgICAgIG1pbi13aWR0aDogNDBtbTsgICAgLyogTWluaW11bSB3aWR0aCAqLwogICAgICAgICAgICBtaW4taGVpZ2h0OiA0MG1tOyAgIC8qIE1pbmltdW0gaGVpZ2h0ICovCiAgICAgICAgICAgIGJvcmRlcjogMXB0IHNvbGlkIGJsYWNrOwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OyAvKiBlbnN1cmVzIHBhZGRpbmcgYW5kIGJvcmRlciBhcmUgaW5jbHVkZWQgaW4gdGhlIHRvdGFsIHdpZHRoIGFuZCBoZWlnaHQgKi8KICAgICAgICAgICAgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyAvKiBBdm9pZCBicmVha2luZyBpbnNpZGUgdGhlIHRlbXBsYXRlICovCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGltZyB7CiAgICAgICAgICAgIG1pbi13aWR0aDogJycnICsgcGljdHVyZV93aWR0aCArICcnJ21tOyAgICAvKiBNaW5pbXVtIHdpZHRoIGZvciB0aGUgaW1hZ2UgKi8KICAgICAgICAgICAgbWluLWhlaWdodDogJycnICsgcGljdHVyZV9oZWlnaHQgKyAnJydtbTsgICAvKiBNaW5pbXVtIGhlaWdodCBmb3IgdGhlIGltYWdlICovCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7ICAgICAgICAKICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRhYmxlIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgdGFibGUtbGF5b3V0OiBmaXhlZDsKICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICAgICAgICAgICAgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyAvKiBBdm9pZCBicmVha2luZyBpbnNpZGUgdGhlIHRhYmxlICovCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRkIHsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KICAgICAgICAnJycKCiAgICAgICAgc291cCA9IEJlYXV0aWZ1bFNvdXAoaHRtbCwgImh0bWwucGFyc2VyIikKICAgICAgICAjINCU0L7QsdCw0LLQu9GP0LXQvCDRgdCy0L7QuCDRgdGC0LjQu9C4INCyINC00L7QutGD0LzQtdC90YIKICAgICAgICBoZWFkX3RhZyA9IHNvdXAuaGVhZAogICAgICAgIHN0eWxlX3RhZyA9IHNvdXAubmV3X3RhZygic3R5bGUiKQogICAgICAgIHN0eWxlX3RhZy5zdHJpbmcgPSBjc3NfdGVtcGxhdGUyCiAgICAgICAgaGVhZF90YWcuYXBwZW5kKHN0eWxlX3RhZykKICAgICAgICAjINCX0LDQv9C40YXRg9C10Lwg0LLQtdGB0Ywg0LTQvtC60YPQvNC10L3RgiDQsiDQutC+0L3RgtC10LnQvdC10YAKICAgICAgICB3cmFwcGVyID0gc291cC5uZXdfdGFnKCJkaXYiKQogICAgICAgIHdyYXBwZXJbJ2NsYXNzJ10gPSAnZnVsbC10ZW1wbGF0ZScKICAgICAgICBib2R5X2NoaWxkcmVuID0gbGlzdChzb3VwLmJvZHkuY2hpbGRyZW4pCiAgICAgICAgc291cC5ib2R5LmNsZWFyKCkKICAgICAgICBzb3VwLmJvZHkuYXBwZW5kKHdyYXBwZXIpCiAgICAgICAgZm9yIGNoaWxkIGluIGJvZHlfY2hpbGRyZW46CiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKGNoaWxkKQoKICAgICAgICAjINCj0LTQsNC70Y/QtdC8INC/0YPRgdGC0YvQtSDRj9GH0LXQudC60Lgg0LjQtyDRgtCw0LHQu9C40YbRiywg0LrQvtGC0L7RgNGL0LUg0YLQsNC6INC70Y7QsdC40YIgMdGBCiAgICAgICAgZm9yIHRyIGluIHNvdXAuZmluZF9hbGwoJ3RyJyk6CgogICAgICAgICAgICBmb3IgdGQgaW4gdHIuZmluZF9hbGwoJ3RkJyk6CiAgICAgICAgICAgICAgICBpZiBub3QgdGQuYXR0cnMuZ2V0KCdjbGFzcycpOgogICAgICAgICAgICAgICAgICAgIHRkLmRlY29tcG9zZSgpCiAgICAgICAgIyDQm9C40YjQvdC40LUg0LrQvtC70L7QvdC60Lgg0YHQv9GA0LDQstCwINGD0LTQsNC70Y/QtdC8INGC0L7QttC1CiAgICAgICAgZm9yIGNvbCBpbiBzb3VwLmZpbmRfYWxsKCdjb2wnKToKICAgICAgICAgICAgaWYgbm90IGNvbC5hdHRyczoKICAgICAgICAgICAgICAgIGNvbC5kZWNvbXBvc2UoKQoKICAgICAgICByZXR1cm4gc3RyKHNvdXApCgojIGh0bWxfZG9jID0gSFRNTERvY3VtZW50KHRlbXBsYXRlX2ZpbGU9J3RlbXBsYXRlLmh0bWwnLCB0ZW1wbGF0ZV9kaXJlY3Rvcnk9J3RlbXBsYXRlcycpCiMgaHRtbF90ZXh0ID0gSFRNTERvY3VtZW50LmRlZmF1bHRfaHRtbAojIGh0bWxfZG9jLmluamVjdF9jc3Nfc3R5bGUoaHRtbF90ZXh0KQojIHByaW50KGh0bWxfdGV4dCkK"
            }
        ],
        "StyleTemplates": [],
        "arch2": true,
        "CommonHandlers": [
            {
                "event": "onLaunch",
                "action": "run",
                "type": "pythonreload",
                "method": "app_on_start",
                "postExecute": "",
                "alias": "on_start"
            },
            {
                "event": "onWebServiceSyncCommand",
                "action": "run",
                "type": "python",
                "method": "event_service",
                "postExecute": "",
                "alias": "event_service"
            },
            {
                "event": "onWebServiceSyncCommand",
                "listener": "",
                "action": "run",
                "type": "python",
                "method": "put_notification",
                "postExecute": "",
                "alias": ""
            },
            {
                "event": "onBackgroundCommand",
                "listener": "menu_2",
                "action": "run",
                "type": "set",
                "method": "UpdateConfigurations",
                "postExecute": "",
                "alias": ""
            },
            {
                "event": "onSQLError",
                "action": "run",
                "type": "set",
                "method": "beep",
                "postExecute": "",
                "alias": ""
            }
        ]
    }
}